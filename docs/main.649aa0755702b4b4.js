"use strict";var iL=Object.defineProperty,sL=Object.defineProperties,oL=Object.getOwnPropertyDescriptors,oR=Object.getOwnPropertySymbols,aL=Object.prototype.hasOwnProperty,uL=Object.prototype.propertyIsEnumerable,aR=(rt,De,O)=>De in rt?iL(rt,De,{enumerable:!0,configurable:!0,writable:!0,value:O}):rt[De]=O,uR=(rt,De)=>{for(var O in De||(De={}))aL.call(De,O)&&aR(rt,O,De[O]);if(oR)for(var O of oR(De))uL.call(De,O)&&aR(rt,O,De[O]);return rt},lR=(rt,De)=>sL(rt,oL(De));(self.webpackChunkCRUD=self.webpackChunkCRUD||[]).push([[179],{2011:(rt,De,O)=>{O.d(De,{Dh:()=>ue,GT:()=>me,cc:()=>Se,hO:()=>Ke,on:()=>H,pX:()=>ae,xv:()=>ye});var h=O(5e3),L=O(127),R=O(5813);rt=O.hmd(rt);const oe=["ngOnDestroy"],ae=(Te,qe,ze,Me={})=>new Proxy(Te,{get:(xe,be)=>ze.runOutsideAngular(()=>{var Ze;if(Te[be])return(null===(Ze=null==Me?void 0:Me.spy)||void 0===Ze?void 0:Ze.get)&&Me.spy.get(be,Te[be]),Te[be];if(oe.indexOf(be)>-1)return()=>{};const ne=qe.toPromise().then(he=>{const Ie=he&&he[be];return"function"==typeof Ie?Ie.bind(he):Ie&&Ie.then?Ie.then(Z=>ze.run(()=>Z)):ze.run(()=>Ie)});return new Proxy(()=>{},{get:(he,Ie)=>ne[Ie],apply:(he,Ie,Z)=>ne.then(re=>{var se;const _e=re&&re(...Z);return(null===(se=null==Me?void 0:Me.spy)||void 0===se?void 0:se.apply)&&Me.spy.apply(be,Z,_e),_e})})})}),me=(Te,qe)=>{qe.forEach(ze=>{Object.getOwnPropertyNames(ze.prototype||ze).forEach(Me=>{Object.defineProperty(Te.prototype,Me,Object.getOwnPropertyDescriptor(ze.prototype||ze,Me))})})};class de{constructor(qe){return qe}}const ue=new h.OlP("angularfire2.app.options"),ye=new h.OlP("angularfire2.app.name");function H(Te,qe,ze){const xe="object"==typeof ze&&ze||{};xe.name=xe.name||"string"==typeof ze&&ze||"[DEFAULT]";const Ze=L.Z.apps.filter(ne=>ne&&ne.name===xe.name)[0]||qe.runOutsideAngular(()=>L.Z.initializeApp(Te,xe));try{JSON.stringify(Te)!==JSON.stringify(Ze.options)&&B("error",`${Ze.name} Firebase App already initialized with different options${rt.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(ne){}return new de(Ze)}const B=(Te,...qe)=>{(0,h.X6Q)()&&"undefined"!=typeof console&&console[Te](...qe)},ie={provide:de,useFactory:H,deps:[ue,h.R0b,[new h.FiY,ye]]};let Ke=(()=>{class Te{constructor(ze){L.Z.registerVersion("angularfire",R.q4.full,"core"),L.Z.registerVersion("angularfire",R.q4.full,"app-compat"),L.Z.registerVersion("angular",h.q4F.full,ze.toString())}static initializeApp(ze,Me){return{ngModule:Te,providers:[{provide:ue,useValue:ze},{provide:ye,useValue:Me}]}}}return Te.\u0275fac=function(ze){return new(ze||Te)(h.LFG(h.Lbi))},Te.\u0275mod=h.oAB({type:Te}),Te.\u0275inj=h.cJS({providers:[ie]}),Te})();function Se(Te,qe,ze,Me,xe){const[,be,Ze]=globalThis.\u0275AngularfireInstanceCache.find(ne=>ne[0]===Te)||[];if(be)return function Fe(Te,qe){try{return Te.toString()===qe.toString()}catch(ze){return Te===qe}}(xe,Ze)||(ge("error",`${qe} was already initialized on the ${ze} Firebase App with different settings.${He?" You may need to reload as Firebase is not HMR aware.":""}`),ge("warn",{is:xe,was:Ze})),be;{const ne=Me();return globalThis.\u0275AngularfireInstanceCache.push([Te,ne,xe]),ne}}const He=!!rt.hot,ge=(Te,...qe)=>{(0,h.X6Q)()&&"undefined"!=typeof console&&console[Te](...qe)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},5813:(rt,De,O)=>{O.d(De,{q4:()=>Zo,iC:()=>hs,HU:()=>Eu,vb:()=>Zc,JM:()=>Kc,u3:()=>pl});var h=O(5e3),L=O(5867),R=O(5861),oe=O(9681),ae=O(2090),me=O(4859),de=O(1877),ue=O(8766);const ye="@firebase/installations",H="0.5.9",ie=`w:${H}`,Ke="FIS_v2",qe=new ae.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function ze(D){return D instanceof ae.ZR&&D.code.includes("request-failed")}function Me({projectId:D}){return`https://firebaseinstallations.googleapis.com/v1/projects/${D}/installations`}function xe(D){return{token:D.token,requestStatus:2,expiresIn:re(D.expiresIn),creationTime:Date.now()}}function be(D,T){return Ze.apply(this,arguments)}function Ze(){return(Ze=(0,R.Z)(function*(D,T){const F=(yield T.json()).error;return qe.create("request-failed",{requestName:D,serverCode:F.code,serverMessage:F.message,serverStatus:F.status})})).apply(this,arguments)}function ne({apiKey:D}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":D})}function he(D,{refreshToken:T}){const N=ne(D);return N.append("Authorization",function se(D){return`${Ke} ${D}`}(T)),N}function Ie(D){return Z.apply(this,arguments)}function Z(){return(Z=(0,R.Z)(function*(D){const T=yield D();return T.status>=500&&T.status<600?D():T})).apply(this,arguments)}function re(D){return Number(D.replace("s","000"))}function _e(D,T){return ce.apply(this,arguments)}function ce(){return(ce=(0,R.Z)(function*({appConfig:D,heartbeatServiceProvider:T},{fid:N}){const F=Me(D),Q=ne(D),J=T.getImmediate({optional:!0});if(J){const Mt=yield J.getHeartbeatsHeader();Mt&&Q.append("x-firebase-client",Mt)}const We={method:"POST",headers:Q,body:JSON.stringify({fid:N,authVersion:Ke,appId:D.appId,sdkVersion:ie})},mt=yield Ie(()=>fetch(F,We));if(mt.ok){const Mt=yield mt.json();return{fid:Mt.fid||N,registrationStatus:2,refreshToken:Mt.refreshToken,authToken:xe(Mt.authToken)}}throw yield be("Create Installation",mt)})).apply(this,arguments)}function Ve(D){return new Promise(T=>{setTimeout(T,D)})}const Xt=/^[cdef][\w-]{21}$/;function Ye(){try{const D=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(D),D[0]=112+D[0]%16;const N=function ln(D){return function dt(D){return btoa(String.fromCharCode(...D)).replace(/\+/g,"-").replace(/\//g,"_")}(D).substr(0,22)}(D);return Xt.test(N)?N:""}catch(D){return""}}function Rn(D){return`${D.appName}!${D.appId}`}const fn=new Map;function nn(D,T){const N=Rn(D);In(N,T),function Ri(D,T){const N=function Cn(){return!Tr&&"BroadcastChannel"in self&&(Tr=new BroadcastChannel("[Firebase] FID Change"),Tr.onmessage=D=>{In(D.data.key,D.data.fid)}),Tr}();N&&N.postMessage({key:D,fid:T}),function Oi(){0===fn.size&&Tr&&(Tr.close(),Tr=null)}()}(N,T)}function In(D,T){const N=fn.get(D);if(N)for(const F of N)F(T)}let Tr=null;const jn="firebase-installations-store";let Pi=null;function pt(){return Pi||(Pi=(0,ue.X3)("firebase-installations-database",1,{upgrade:(D,T)=>{0===T&&D.createObjectStore(jn)}})),Pi}function Lr(D,T){return En.apply(this,arguments)}function En(){return(En=(0,R.Z)(function*(D,T){const N=Rn(D),Q=(yield pt()).transaction(jn,"readwrite"),J=Q.objectStore(jn),Le=yield J.get(N);return yield J.put(T,N),yield Q.done,(!Le||Le.fid!==T.fid)&&nn(D,T.fid),T})).apply(this,arguments)}function tn(D){return Cr.apply(this,arguments)}function Cr(){return(Cr=(0,R.Z)(function*(D){const T=Rn(D),F=(yield pt()).transaction(jn,"readwrite");yield F.objectStore(jn).delete(T),yield F.done})).apply(this,arguments)}function or(D,T){return Vr.apply(this,arguments)}function Vr(){return(Vr=(0,R.Z)(function*(D,T){const N=Rn(D),Q=(yield pt()).transaction(jn,"readwrite"),J=Q.objectStore(jn),Le=yield J.get(N),We=T(Le);return void 0===We?yield J.delete(N):yield J.put(We,N),yield Q.done,We&&(!Le||Le.fid!==We.fid)&&nn(D,We.fid),We})).apply(this,arguments)}function Dn(D){return ar.apply(this,arguments)}function ar(){return(ar=(0,R.Z)(function*(D){let T;const N=yield or(D.appConfig,F=>{const Q=Cs(F),J=Zt(D,Q);return T=J.registrationPromise,J.installationEntry});return""===N.fid?{installationEntry:yield T}:{installationEntry:N,registrationPromise:T}})).apply(this,arguments)}function Cs(D){return ki(D||{fid:Ye(),registrationStatus:0})}function Zt(D,T){if(0===T.registrationStatus){if(!navigator.onLine)return{installationEntry:T,registrationPromise:Promise.reject(qe.create("app-offline"))};const N={fid:T.fid,registrationStatus:1,registrationTime:Date.now()},F=function lt(D,T){return it.apply(this,arguments)}(D,N);return{installationEntry:N,registrationPromise:F}}return 1===T.registrationStatus?{installationEntry:T,registrationPromise:li(D)}:{installationEntry:T}}function it(){return(it=(0,R.Z)(function*(D,T){try{const N=yield _e(D,T);return Lr(D.appConfig,N)}catch(N){throw ze(N)&&409===N.customData.serverCode?yield tn(D.appConfig):yield Lr(D.appConfig,{fid:T.fid,registrationStatus:0}),N}})).apply(this,arguments)}function li(D){return ci.apply(this,arguments)}function ci(){return(ci=(0,R.Z)(function*(D){let T=yield Wt(D.appConfig);for(;1===T.registrationStatus;)yield Ve(100),T=yield Wt(D.appConfig);if(0===T.registrationStatus){const{installationEntry:N,registrationPromise:F}=yield Dn(D);return F||N}return T})).apply(this,arguments)}function Wt(D){return or(D,T=>{if(!T)throw qe.create("installation-not-found");return ki(T)})}function ki(D){return function On(D){return 1===D.registrationStatus&&D.registrationTime+1e4<Date.now()}(D)?{fid:D.fid,registrationStatus:0}:D}function cn(D,T){return U.apply(this,arguments)}function U(){return(U=(0,R.Z)(function*({appConfig:D,heartbeatServiceProvider:T},N){const F=G(D,N),Q=he(D,N),J=T.getImmediate({optional:!0});if(J){const Mt=yield J.getHeartbeatsHeader();Mt&&Q.append("x-firebase-client",Mt)}const We={method:"POST",headers:Q,body:JSON.stringify({installation:{sdkVersion:ie,appId:D.appId}})},mt=yield Ie(()=>fetch(F,We));if(mt.ok)return xe(yield mt.json());throw yield be("Generate Auth Token",mt)})).apply(this,arguments)}function G(D,{fid:T}){return`${Me(D)}/${T}/authTokens:generate`}function W(D){return Ee.apply(this,arguments)}function Ee(){return(Ee=(0,R.Z)(function*(D,T=!1){let N;const F=yield or(D.appConfig,J=>{if(!Pt(J))throw qe.create("not-registered");const Le=J.authToken;if(!T&&on(Le))return J;if(1===Le.requestStatus)return N=j(D,T),J;{if(!navigator.onLine)throw qe.create("app-offline");const We=Gn(J);return N=tt(D,We),We}});return N?yield N:F.authToken})).apply(this,arguments)}function j(D,T){return X.apply(this,arguments)}function X(){return(X=(0,R.Z)(function*(D,T){let N=yield Pe(D.appConfig);for(;1===N.authToken.requestStatus;)yield Ve(100),N=yield Pe(D.appConfig);const F=N.authToken;return 0===F.requestStatus?W(D,T):F})).apply(this,arguments)}function Pe(D){return or(D,T=>{if(!Pt(T))throw qe.create("not-registered");return function le(D){return 1===D.requestStatus&&D.requestTime+1e4<Date.now()}(T.authToken)?Object.assign(Object.assign({},T),{authToken:{requestStatus:0}}):T})}function tt(D,T){return ht.apply(this,arguments)}function ht(){return(ht=(0,R.Z)(function*(D,T){try{const N=yield cn(D,T),F=Object.assign(Object.assign({},T),{authToken:N});return yield Lr(D.appConfig,F),N}catch(N){if(!ze(N)||401!==N.customData.serverCode&&404!==N.customData.serverCode){const F=Object.assign(Object.assign({},T),{authToken:{requestStatus:0}});yield Lr(D.appConfig,F)}else yield tn(D.appConfig);throw N}})).apply(this,arguments)}function Pt(D){return void 0!==D&&2===D.registrationStatus}function on(D){return 2===D.requestStatus&&!function It(D){const T=Date.now();return T<D.creationTime||D.creationTime+D.expiresIn<T+36e5}(D)}function Gn(D){const T={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},D),{authToken:T})}function z(){return(z=(0,R.Z)(function*(D){const T=D,{installationEntry:N,registrationPromise:F}=yield Dn(T);return F?F.catch(console.error):W(T).catch(console.error),N.fid})).apply(this,arguments)}function Qe(){return(Qe=(0,R.Z)(function*(D,T=!1){const N=D;return yield at(N),(yield W(N,T)).token})).apply(this,arguments)}function at(D){return Rt.apply(this,arguments)}function Rt(){return(Rt=(0,R.Z)(function*(D){const{registrationPromise:T}=yield Dn(D);T&&(yield T)})).apply(this,arguments)}function ha(D){return qe.create("missing-app-config-values",{valueName:D})}const Jr="installations",Vt=D=>{const T=D.getProvider("app").getImmediate(),N=function ur(D){if(!D||!D.options)throw ha("App Configuration");if(!D.name)throw ha("App Name");const T=["projectId","apiKey","appId"];for(const N of T)if(!D.options[N])throw ha(N);return{appName:D.name,projectId:D.options.projectId,apiKey:D.options.apiKey,appId:D.options.appId}}(T);return{app:T,appConfig:N,heartbeatServiceProvider:(0,oe._getProvider)(T,"heartbeat"),_delete:()=>Promise.resolve()}},mn=D=>{const T=D.getProvider("app").getImmediate(),N=(0,oe._getProvider)(T,Jr).getImmediate();return{getId:()=>function K(D){return z.apply(this,arguments)}(N),getToken:Q=>function Ae(D){return Qe.apply(this,arguments)}(N,Q)}};(function Ur(){(0,oe._registerComponent)(new me.wA(Jr,Vt,"PUBLIC")),(0,oe._registerComponent)(new me.wA("installations-internal",mn,"PRIVATE"))})(),(0,oe.registerVersion)(ye,H),(0,oe.registerVersion)(ye,H,"esm2017");const es="@firebase/remote-config",Pn=new ae.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class vc{constructor(T,N,F,Q){this.client=T,this.storage=N,this.storageCache=F,this.logger=Q}isCachedDataFresh(T,N){if(!N)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const F=Date.now()-N,Q=F<=T;return this.logger.debug(`Config fetch cache check. Cache age millis: ${F}. Cache max age millis (minimumFetchIntervalMillis setting): ${T}. Is cache hit: ${Q}.`),Q}fetch(T){var N=this;return(0,R.Z)(function*(){const[F,Q]=yield Promise.all([N.storage.getLastSuccessfulFetchTimestampMillis(),N.storage.getLastSuccessfulFetchResponse()]);if(Q&&N.isCachedDataFresh(T.cacheMaxAgeMillis,F))return Q;T.eTag=Q&&Q.eTag;const J=yield N.client.fetch(T),Le=[N.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===J.status&&Le.push(N.storage.setLastSuccessfulFetchResponse(J)),yield Promise.all(Le),J})()}}function nu(D=navigator){return D.languages&&D.languages[0]||D.language}class Wn{constructor(T,N,F,Q,J,Le){this.firebaseInstallations=T,this.sdkVersion=N,this.namespace=F,this.projectId=Q,this.apiKey=J,this.appId=Le}fetch(T){var N=this;return(0,R.Z)(function*(){const[F,Q]=yield Promise.all([N.firebaseInstallations.getId(),N.firebaseInstallations.getToken()]),Le=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${N.projectId}/namespaces/${N.namespace}:fetch?key=${N.apiKey}`,We={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":T.eTag||"*"},mt={sdk_version:N.sdkVersion,app_instance_id:F,app_instance_id_token:Q,app_id:N.appId,language_code:nu()},Mt={method:"POST",headers:We,body:JSON.stringify(mt)},Kt=fetch(Le,Mt),Dt=new Promise((Hs,ri)=>{T.signal.addEventListener(()=>{const Jo=new Error("The operation was aborted.");Jo.name="AbortError",ri(Jo)})});let Gr;try{yield Promise.race([Kt,Dt]),Gr=yield Kt}catch(Hs){let ri="fetch-client-network";throw"AbortError"===Hs.name&&(ri="fetch-timeout"),Pn.create(ri,{originalErrorMessage:Hs.message})}let xn=Gr.status;const zi=Gr.headers.get("ETag")||void 0;let $s,zr;if(200===Gr.status){let Hs;try{Hs=yield Gr.json()}catch(ri){throw Pn.create("fetch-client-parse",{originalErrorMessage:ri.message})}$s=Hs.entries,zr=Hs.state}if("INSTANCE_STATE_UNSPECIFIED"===zr?xn=500:"NO_CHANGE"===zr?xn=304:("NO_TEMPLATE"===zr||"EMPTY_CONFIG"===zr)&&($s={}),304!==xn&&200!==xn)throw Pn.create("fetch-status",{httpStatus:xn});return{status:xn,eTag:zi,config:$s}})()}}class ns{constructor(T,N){this.client=T,this.storage=N}fetch(T){var N=this;return(0,R.Z)(function*(){const F=(yield N.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return N.attemptFetch(T,F)})()}attemptFetch(T,{throttleEndTimeMillis:N,backoffCount:F}){var Q=this;return(0,R.Z)(function*(){yield function Ec(D,T){return new Promise((N,F)=>{const Q=Math.max(T-Date.now(),0),J=setTimeout(N,Q);D.addEventListener(()=>{clearTimeout(J),F(Pn.create("fetch-throttle",{throttleEndTimeMillis:T}))})})}(T.signal,N);try{const J=yield Q.client.fetch(T);return yield Q.storage.deleteThrottleMetadata(),J}catch(J){if(!function wp(D){if(!(D instanceof ae.ZR&&D.customData))return!1;const T=Number(D.customData.httpStatus);return 429===T||500===T||503===T||504===T}(J))throw J;const Le={throttleEndTimeMillis:Date.now()+(0,ae.$s)(F),backoffCount:F+1};return yield Q.storage.setThrottleMetadata(Le),Q.attemptFetch(T,Le)}})()}}class Ip{constructor(T,N,F,Q,J){this.app=T,this._client=N,this._storageCache=F,this._storage=Q,this._logger=J,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function fa(D,T){const N=D.target.error||void 0;return Pn.create(T,{originalErrorMessage:N&&N.message})}const Ro="app_namespace_store";class Ic{constructor(T,N,F,Q=function Tp(){return new Promise((D,T)=>{try{const N=indexedDB.open("firebase_remote_config",1);N.onerror=F=>{T(fa(F,"storage-open"))},N.onsuccess=F=>{D(F.target.result)},N.onupgradeneeded=F=>{0===F.oldVersion&&F.target.result.createObjectStore(Ro,{keyPath:"compositeKey"})}}catch(N){T(Pn.create("storage-open",{originalErrorMessage:N}))}})}()){this.appId=T,this.appName=N,this.namespace=F,this.openDbPromise=Q}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(T){return this.set("last_fetch_status",T)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(T){return this.set("last_successful_fetch_timestamp_millis",T)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(T){return this.set("last_successful_fetch_response",T)}getActiveConfig(){return this.get("active_config")}setActiveConfig(T){return this.set("active_config",T)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(T){return this.set("active_config_etag",T)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(T){return this.set("throttle_metadata",T)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(T){var N=this;return(0,R.Z)(function*(){const F=yield N.openDbPromise;return new Promise((Q,J)=>{const We=F.transaction([Ro],"readonly").objectStore(Ro),mt=N.createCompositeKey(T);try{const Mt=We.get(mt);Mt.onerror=Kt=>{J(fa(Kt,"storage-get"))},Mt.onsuccess=Kt=>{const Dt=Kt.target.result;Q(Dt?Dt.value:void 0)}}catch(Mt){J(Pn.create("storage-get",{originalErrorMessage:Mt&&Mt.message}))}})})()}set(T,N){var F=this;return(0,R.Z)(function*(){const Q=yield F.openDbPromise;return new Promise((J,Le)=>{const mt=Q.transaction([Ro],"readwrite").objectStore(Ro),Mt=F.createCompositeKey(T);try{const Kt=mt.put({compositeKey:Mt,value:N});Kt.onerror=Dt=>{Le(fa(Dt,"storage-set"))},Kt.onsuccess=()=>{J()}}catch(Kt){Le(Pn.create("storage-set",{originalErrorMessage:Kt&&Kt.message}))}})})()}delete(T){var N=this;return(0,R.Z)(function*(){const F=yield N.openDbPromise;return new Promise((Q,J)=>{const We=F.transaction([Ro],"readwrite").objectStore(Ro),mt=N.createCompositeKey(T);try{const Mt=We.delete(mt);Mt.onerror=Kt=>{J(fa(Kt,"storage-delete"))},Mt.onsuccess=()=>{Q()}}catch(Mt){J(Pn.create("storage-delete",{originalErrorMessage:Mt&&Mt.message}))}})})()}createCompositeKey(T){return[this.appId,this.appName,this.namespace,T].join()}}class Oo{constructor(T){this.storage=T}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var T=this;return(0,R.Z)(function*(){const N=T.storage.getLastFetchStatus(),F=T.storage.getLastSuccessfulFetchTimestampMillis(),Q=T.storage.getActiveConfig(),J=yield N;J&&(T.lastFetchStatus=J);const Le=yield F;Le&&(T.lastSuccessfulFetchTimestampMillis=Le);const We=yield Q;We&&(T.activeConfig=We)})()}setLastFetchStatus(T){return this.lastFetchStatus=T,this.storage.setLastFetchStatus(T)}setLastSuccessfulFetchTimestampMillis(T){return this.lastSuccessfulFetchTimestampMillis=T,this.storage.setLastSuccessfulFetchTimestampMillis(T)}setActiveConfig(T){return this.activeConfig=T,this.storage.setActiveConfig(T)}}function $m(){return pa.apply(this,arguments)}function pa(){return(pa=(0,R.Z)(function*(){if(!(0,ae.hl)())return!1;try{return yield(0,ae.eu)()}catch(D){return!1}})).apply(this,arguments)}!function Cp(){(0,oe._registerComponent)(new me.wA("remote-config",function D(T,{instanceIdentifier:N}){const F=T.getProvider("app").getImmediate(),Q=T.getProvider("installations-internal").getImmediate();if("undefined"==typeof window)throw Pn.create("registration-window");if(!(0,ae.hl)())throw Pn.create("indexed-db-unavailable");const{projectId:J,apiKey:Le,appId:We}=F.options;if(!J)throw Pn.create("registration-project-id");if(!Le)throw Pn.create("registration-api-key");if(!We)throw Pn.create("registration-app-id");const mt=new Ic(We,F.name,N=N||"firebase"),Mt=new Oo(mt),Kt=new de.Yd(es);Kt.logLevel=de.in.ERROR;const Dt=new Wn(Q,oe.SDK_VERSION,N,J,Le,We),Gr=new ns(Dt,mt),xn=new vc(Gr,mt,Mt,Kt),zi=new Ip(F,xn,Mt,mt,Kt);return function dn(D){const T=(0,ae.m9)(D);T._initializePromise||(T._initializePromise=T._storageCache.loadFromStorage().then(()=>{T._isInitializationComplete=!0}))}(zi),zi},"PUBLIC").setMultipleInstances(!0)),(0,oe.registerVersion)(es,"0.3.8"),(0,oe.registerVersion)(es,"0.3.8","esm2017")}();const Ms="/firebase-messaging-sw.js",fi="/firebase-cloud-messaging-push-scope",no="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",ma="google.c.a.c_id",fh="google.c.a.c_l",Ap="google.c.a.ts",xs="google.c.a.e";var is=(()=>{return(D=is||(is={})).PUSH_RECEIVED="push-received",D.NOTIFICATION_CLICKED="notification-clicked",is;var D})();function Ii(D){const T=new Uint8Array(D);return btoa(String.fromCharCode(...T)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Tc(D){const N=(D+"=".repeat((4-D.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),F=atob(N),Q=new Uint8Array(F.length);for(let J=0;J<F.length;++J)Q[J]=F.charCodeAt(J);return Q}const Sr="fcm_token_details_db",Cc="fcm_token_object_Store";function Ac(D){return ru.apply(this,arguments)}function ru(){return ru=(0,R.Z)(function*(D){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(J=>J.name).includes(Sr))return null;let T=null;return(yield(0,ue.X3)(Sr,5,{upgrade:(F=(0,R.Z)(function*(Q,J,Le,We){var mt;if(J<2||!Q.objectStoreNames.contains(Cc))return;const Mt=We.objectStore(Cc),Kt=yield Mt.index("fcmSenderId").get(D);if(yield Mt.clear(),Kt)if(2===J){const Dt=Kt;if(!Dt.auth||!Dt.p256dh||!Dt.endpoint)return;T={token:Dt.fcmToken,createTime:null!==(mt=Dt.createTime)&&void 0!==mt?mt:Date.now(),subscriptionOptions:{auth:Dt.auth,p256dh:Dt.p256dh,endpoint:Dt.endpoint,swScope:Dt.swScope,vapidKey:"string"==typeof Dt.vapidKey?Dt.vapidKey:Ii(Dt.vapidKey)}}}else if(3===J){const Dt=Kt;T={token:Dt.fcmToken,createTime:Dt.createTime,subscriptionOptions:{auth:Ii(Dt.auth),p256dh:Ii(Dt.p256dh),endpoint:Dt.endpoint,swScope:Dt.swScope,vapidKey:Ii(Dt.vapidKey)}}}else if(4===J){const Dt=Kt;T={token:Dt.fcmToken,createTime:Dt.createTime,subscriptionOptions:{auth:Ii(Dt.auth),p256dh:Ii(Dt.p256dh),endpoint:Dt.endpoint,swScope:Dt.swScope,vapidKey:Ii(Dt.vapidKey)}}}}),function(J,Le,We,mt){return F.apply(this,arguments)})})).close(),yield(0,ue.Lj)(Sr),yield(0,ue.Lj)("fcm_vapid_details_db"),yield(0,ue.Lj)("undefined"),iu(T)?T:null;var F}),ru.apply(this,arguments)}function iu(D){if(!D||!D.subscriptionOptions)return!1;const{subscriptionOptions:T}=D;return"number"==typeof D.createTime&&D.createTime>0&&"string"==typeof D.token&&D.token.length>0&&"string"==typeof T.auth&&T.auth.length>0&&"string"==typeof T.p256dh&&T.p256dh.length>0&&"string"==typeof T.endpoint&&T.endpoint.length>0&&"string"==typeof T.swScope&&T.swScope.length>0&&"string"==typeof T.vapidKey&&T.vapidKey.length>0}const ss="firebase-messaging-store";let il=null;function yn(){return il||(il=(0,ue.X3)("firebase-messaging-database",1,{upgrade:(D,T)=>{0===T&&D.createObjectStore(ss)}})),il}function ya(D){return Ns.apply(this,arguments)}function Ns(){return(Ns=(0,R.Z)(function*(D){const T=cr(D),F=yield(yield yn()).transaction(ss).objectStore(ss).get(T);if(F)return F;{const Q=yield Ac(D.appConfig.senderId);if(Q)return yield hn(D,Q),Q}})).apply(this,arguments)}function hn(D,T){return ou.apply(this,arguments)}function ou(){return(ou=(0,R.Z)(function*(D,T){const N=cr(D),Q=(yield yn()).transaction(ss,"readwrite");return yield Q.objectStore(ss).put(T,N),yield Q.done,T})).apply(this,arguments)}function _a(D){return ro.apply(this,arguments)}function ro(){return(ro=(0,R.Z)(function*(D){const T=cr(D),F=(yield yn()).transaction(ss,"readwrite");yield F.objectStore(ss).delete(T),yield F.done})).apply(this,arguments)}function cr({appConfig:D}){return D.appId}const kn=new ae.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function os(D,T){return dr.apply(this,arguments)}function dr(){return(dr=(0,R.Z)(function*(D,T){const N=yield Os(D),F=io(T),Q={method:"POST",headers:N,body:JSON.stringify(F)};let J;try{J=yield(yield fetch(Rs(D.appConfig),Q)).json()}catch(Le){throw kn.create("token-subscribe-failed",{errorInfo:Le})}if(J.error)throw kn.create("token-subscribe-failed",{errorInfo:J.error.message});if(!J.token)throw kn.create("token-subscribe-no-token");return J.token})).apply(this,arguments)}function Po(D,T){return Li.apply(this,arguments)}function Li(){return(Li=(0,R.Z)(function*(D,T){const N=yield Os(D),F=io(T.subscriptionOptions),Q={method:"PATCH",headers:N,body:JSON.stringify(F)};let J;try{J=yield(yield fetch(`${Rs(D.appConfig)}/${T.token}`,Q)).json()}catch(Le){throw kn.create("token-update-failed",{errorInfo:Le})}if(J.error)throw kn.create("token-update-failed",{errorInfo:J.error.message});if(!J.token)throw kn.create("token-update-no-token");return J.token})).apply(this,arguments)}function sl(D,T){return Xr.apply(this,arguments)}function Xr(){return(Xr=(0,R.Z)(function*(D,T){const F={method:"DELETE",headers:yield Os(D)};try{const J=yield(yield fetch(`${Rs(D.appConfig)}/${T}`,F)).json();if(J.error)throw kn.create("token-unsubscribe-failed",{errorInfo:J.error.message})}catch(Q){throw kn.create("token-unsubscribe-failed",{errorInfo:Q})}})).apply(this,arguments)}function Rs({projectId:D}){return`https://fcmregistrations.googleapis.com/v1/projects/${D}/registrations`}function Os(D){return vt.apply(this,arguments)}function vt(){return(vt=(0,R.Z)(function*({appConfig:D,installations:T}){const N=yield T.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":D.apiKey,"x-goog-firebase-installations-auth":`FIS ${N}`})})).apply(this,arguments)}function io({p256dh:D,auth:T,endpoint:N,vapidKey:F}){const Q={web:{endpoint:N,auth:T,p256dh:D}};return F!==no&&(Q.web.applicationPubKey=F),Q}const uu=6048e5;function Sc(D){return va.apply(this,arguments)}function va(){return(va=(0,R.Z)(function*(D){const T=yield Ea(D.swRegistration,D.vapidKey),N={vapidKey:D.vapidKey,swScope:D.swRegistration.scope,endpoint:T.endpoint,auth:Ii(T.getKey("auth")),p256dh:Ii(T.getKey("p256dh"))},F=yield ya(D.firebaseDependencies);if(F){if(xc(F.subscriptionOptions,N))return Date.now()>=F.createTime+uu?ph(D,{token:F.token,createTime:Date.now(),subscriptionOptions:N}):F.token;try{yield sl(D.firebaseDependencies,F.token)}catch(Q){console.warn(Q)}return Re(D.firebaseDependencies,N)}return Re(D.firebaseDependencies,N)})).apply(this,arguments)}function Mc(D){return ko.apply(this,arguments)}function ko(){return(ko=(0,R.Z)(function*(D){const T=yield ya(D.firebaseDependencies);T&&(yield sl(D.firebaseDependencies,T.token),yield _a(D.firebaseDependencies));const N=yield D.swRegistration.pushManager.getSubscription();return!N||N.unsubscribe()})).apply(this,arguments)}function ph(D,T){return Ps.apply(this,arguments)}function Ps(){return(Ps=(0,R.Z)(function*(D,T){try{const N=yield Po(D.firebaseDependencies,T),F=Object.assign(Object.assign({},T),{token:N,createTime:Date.now()});return yield hn(D.firebaseDependencies,F),N}catch(N){throw yield Mc(D),N}})).apply(this,arguments)}function Re(D,T){return qt.apply(this,arguments)}function qt(){return(qt=(0,R.Z)(function*(D,T){const F={token:yield os(D,T),createTime:Date.now(),subscriptionOptions:T};return yield hn(D,F),F.token})).apply(this,arguments)}function Ea(D,T){return wn.apply(this,arguments)}function wn(){return(wn=(0,R.Z)(function*(D,T){return(yield D.pushManager.getSubscription())||D.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Tc(T)})})).apply(this,arguments)}function xc(D,T){return T.vapidKey===D.vapidKey&&T.endpoint===D.endpoint&&T.auth===D.auth&&T.p256dh===D.p256dh}function as(D){const T={from:D.from,collapseKey:D.collapse_key,messageId:D.fcmMessageId};return function Vi(D,T){if(!T.notification)return;D.notification={};const N=T.notification.title;N&&(D.notification.title=N);const F=T.notification.body;F&&(D.notification.body=F);const Q=T.notification.image;Q&&(D.notification.image=Q)}(T,D),function ol(D,T){!T.data||(D.data=T.data)}(T,D),function wa(D,T){if(!T.fcmOptions)return;D.fcmOptions={};const N=T.fcmOptions.link;N&&(D.fcmOptions.link=N);const F=T.fcmOptions.analytics_label;F&&(D.fcmOptions.analyticsLabel=F)}(T,D),T}function gh(D){return"object"==typeof D&&!!D&&ma in D}function Nc(D,T){const N=[];for(let F=0;F<D.length;F++)N.push(D.charAt(F)),F<T.length&&N.push(T.charAt(F));return N.join("")}function so(D){return kn.create("missing-app-config-values",{valueName:D})}Nc("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),Nc("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class hr{constructor(T,N,F){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const Q=function Rc(D){if(!D||!D.options)throw so("App Configuration Object");if(!D.name)throw so("App Name");const T=["projectId","apiKey","appId","messagingSenderId"],{options:N}=D;for(const F of T)if(!N[F])throw so(F);return{appName:D.name,projectId:N.projectId,apiKey:N.apiKey,appId:N.appId,senderId:N.messagingSenderId}}(T);this.firebaseDependencies={app:T,appConfig:Q,installations:N,analyticsProvider:F}}_delete(){return Promise.resolve()}}function Ui(D){return Fo.apply(this,arguments)}function Fo(){return(Fo=(0,R.Z)(function*(D){try{D.swRegistration=yield navigator.serviceWorker.register(Ms,{scope:fi}),D.swRegistration.update().catch(()=>{})}catch(T){throw kn.create("failed-service-worker-registration",{browserErrorMessage:T.message})}})).apply(this,arguments)}function Lo(D,T){return ei.apply(this,arguments)}function ei(){return(ei=(0,R.Z)(function*(D,T){if(!T&&!D.swRegistration&&(yield Ui(D)),T||!D.swRegistration){if(!(T instanceof ServiceWorkerRegistration))throw kn.create("invalid-sw-registration");D.swRegistration=T}})).apply(this,arguments)}function mh(D,T){return Vo.apply(this,arguments)}function Vo(){return(Vo=(0,R.Z)(function*(D,T){T?D.vapidKey=T:D.vapidKey||(D.vapidKey=no)})).apply(this,arguments)}function ba(){return(ba=(0,R.Z)(function*(D,T){if(!navigator)throw kn.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw kn.create("permission-blocked");return yield mh(D,null==T?void 0:T.vapidKey),yield Lo(D,null==T?void 0:T.serviceWorkerRegistration),Sc(D)})).apply(this,arguments)}function lu(D,T,N){return Uo.apply(this,arguments)}function Uo(){return(Uo=(0,R.Z)(function*(D,T,N){const F=Pc(T);(yield D.firebaseDependencies.analyticsProvider.get()).logEvent(F,{message_id:N[ma],message_name:N[fh],message_time:N[Ap],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function Pc(D){switch(D){case is.NOTIFICATION_CLICKED:return"notification_open";case is.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function al(){return(al=(0,R.Z)(function*(D,T){const N=T.data;if(!N.isFirebaseMessaging)return;D.onMessageHandler&&N.messageType===is.PUSH_RECEIVED&&("function"==typeof D.onMessageHandler?D.onMessageHandler(as(N)):D.onMessageHandler.next(as(N)));const F=N.data;gh(F)&&"1"===F[xs]&&(yield lu(D,N.messageType,F))})).apply(this,arguments)}const Ia="@firebase/messaging",oo=D=>{const T=new hr(D.getProvider("app").getImmediate(),D.getProvider("installations-internal").getImmediate(),D.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",N=>function kc(D,T){return al.apply(this,arguments)}(T,N)),T},Fc=D=>{const T=D.getProvider("messaging").getImmediate();return{getToken:F=>function Oc(D,T){return ba.apply(this,arguments)}(T,F)}};function cu(){return ti.apply(this,arguments)}function ti(){return(ti=(0,R.Z)(function*(){try{yield(0,ae.eu)()}catch(D){return!1}return"undefined"!=typeof window&&(0,ae.hl)()&&(0,ae.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function yh(){(0,oe._registerComponent)(new me.wA("messaging",oo,"PUBLIC")),(0,oe._registerComponent)(new me.wA("messaging-internal",Fc,"PRIVATE")),(0,oe.registerVersion)(Ia,"0.9.13"),(0,oe.registerVersion)(Ia,"0.9.13","esm2017")}();const Lc="analytics",Sp="firebase_id",Ta="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Ca="https://www.googletagmanager.com/gtag/js",Qn=new de.Yd("@firebase/analytics");function Uc(D){return Promise.all(D.map(T=>T.catch(N=>N)))}function Mp(D,T){const N=document.createElement("script");N.src=`${Ca}?l=${D}&id=${T}`,N.async=!0,document.head.appendChild(N)}function Bo(D,T,N,F,Q,J){return Bc.apply(this,arguments)}function Bc(){return(Bc=(0,R.Z)(function*(D,T,N,F,Q,J){const Le=F[Q];try{if(Le)yield T[Le];else{const mt=(yield Uc(N)).find(Mt=>Mt.measurementId===Q);mt&&(yield T[mt.appId])}}catch(We){Qn.error(We)}D("config",Q,J)})).apply(this,arguments)}function Aa(D,T,N,F,Q){return ks.apply(this,arguments)}function ks(){return(ks=(0,R.Z)(function*(D,T,N,F,Q){try{let J=[];if(Q&&Q.send_to){let Le=Q.send_to;Array.isArray(Le)||(Le=[Le]);const We=yield Uc(N);for(const mt of Le){const Mt=We.find(Dt=>Dt.measurementId===mt),Kt=Mt&&T[Mt.appId];if(!Kt){J=[];break}J.push(Kt)}}0===J.length&&(J=Object.values(T)),yield Promise.all(J),D("event",F,Q||{})}catch(J){Qn.error(J)}})).apply(this,arguments)}function Sn(){const D=window.document.getElementsByTagName("script");for(const T of Object.values(D))if(T.src&&T.src.includes(Ca))return T;return null}const ut=new ae.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),Sa=new class Di{constructor(T={},N=1e3){this.throttleMetadata=T,this.intervalMillis=N}getThrottleMetadata(T){return this.throttleMetadata[T]}setThrottleMetadata(T,N){this.throttleMetadata[T]=N}deleteThrottleMetadata(T){delete this.throttleMetadata[T]}};function jo(D){return new Headers({Accept:"application/json","x-goog-api-key":D})}function jc(D){return _n.apply(this,arguments)}function _n(){return(_n=(0,R.Z)(function*(D){var T;const{appId:N,apiKey:F}=D,Q={method:"GET",headers:jo(F)},J=Ta.replace("{app-id}",N),Le=yield fetch(J,Q);if(200!==Le.status&&304!==Le.status){let We="";try{const mt=yield Le.json();(null===(T=mt.error)||void 0===T?void 0:T.message)&&(We=mt.error.message)}catch(mt){}throw ut.create("config-fetch-failed",{httpStatus:Le.status,responseMessage:We})}return Le.json()})).apply(this,arguments)}function $c(D){return Bi.apply(this,arguments)}function Bi(){return(Bi=(0,R.Z)(function*(D,T=Sa,N){const{appId:F,apiKey:Q,measurementId:J}=D.options;if(!F)throw ut.create("no-app-id");if(!Q){if(J)return{measurementId:J,appId:F};throw ut.create("no-api-key")}const Le=T.getThrottleMetadata(F)||{backoffCount:0,throttleEndTimeMillis:Date.now()},We=new fu;return setTimeout((0,R.Z)(function*(){We.abort()}),void 0!==N?N:6e4),Fs({appId:F,apiKey:Q,measurementId:J},Le,We,T)})).apply(this,arguments)}function Fs(D,T,N){return St.apply(this,arguments)}function St(){return(St=(0,R.Z)(function*(D,{throttleEndTimeMillis:T,backoffCount:N},F,Q=Sa){const{appId:J,measurementId:Le}=D;try{yield Np(F,T)}catch(We){if(Le)return Qn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Le} provided in the "measurementId" field in the local Firebase config. [${We.message}]`),{appId:J,measurementId:Le};throw We}try{const We=yield jc(D);return Q.deleteThrottleMetadata(J),We}catch(We){if(!Hc(We)){if(Q.deleteThrottleMetadata(J),Le)return Qn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Le} provided in the "measurementId" field in the local Firebase config. [${We.message}]`),{appId:J,measurementId:Le};throw We}const mt=503===Number(We.customData.httpStatus)?(0,ae.$s)(N,Q.intervalMillis,30):(0,ae.$s)(N,Q.intervalMillis),Mt={throttleEndTimeMillis:Date.now()+mt,backoffCount:N+1};return Q.setThrottleMetadata(J,Mt),Qn.debug(`Calling attemptFetch again in ${mt} millis`),Fs(D,Mt,F,Q)}})).apply(this,arguments)}function Np(D,T){return new Promise((N,F)=>{const Q=Math.max(T-Date.now(),0),J=setTimeout(N,Q);D.addEventListener(()=>{clearTimeout(J),F(ut.create("fetch-throttle",{throttleEndTimeMillis:T}))})})}function Hc(D){if(!(D instanceof ae.ZR&&D.customData))return!1;const T=Number(D.customData.httpStatus);return 429===T||500===T||503===T||504===T}class fu{constructor(){this.listeners=[]}addEventListener(T){this.listeners.push(T)}abort(){this.listeners.forEach(T=>T())}}function Gc(){return Kn.apply(this,arguments)}function Kn(){return(Kn=(0,R.Z)(function*(){if(!(0,ae.hl)())return Qn.warn(ut.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,ae.eu)()}catch(D){return Qn.warn(ut.create("indexeddb-unavailable",{errorInfo:D}).message),!1}return!0})).apply(this,arguments)}function cs(){return(cs=(0,R.Z)(function*(D,T,N,F,Q,J,Le){var We;const mt=$c(D);mt.then(xn=>{N[xn.measurementId]=xn.appId,D.options.measurementId&&xn.measurementId!==D.options.measurementId&&Qn.warn(`The measurement ID in the local Firebase config (${D.options.measurementId}) does not match the measurement ID fetched from the server (${xn.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(xn=>Qn.error(xn)),T.push(mt);const Mt=Gc().then(xn=>{if(xn)return F.getId()}),[Kt,Dt]=yield Promise.all([mt,Mt]);Sn()||Mp(J,Kt.measurementId),Q("js",new Date);const Gr=null!==(We=null==Le?void 0:Le.config)&&void 0!==We?We:{};return Gr.origin="firebase",Gr.update=!0,null!=Dt&&(Gr[Sp]=Dt),Q("config",Kt.measurementId,Gr),Kt.measurementId})).apply(this,arguments)}class Ho{constructor(T){this.app=T}_delete(){return delete ni[this.app.options.appId],Promise.resolve()}}let ni={},ds=[];const Go={};let Ls,lo,uo="dataLayer",Ma=!1;function Ti(D,T,N){!function pu(){const D=[];if((0,ae.ru)()&&D.push("This is a browser extension environment."),(0,ae.zI)()||D.push("Cookies are not available."),D.length>0){const T=D.map((F,Q)=>`(${Q+1}) ${F}`).join(" "),N=ut.create("invalid-analytics-context",{errorInfo:T});Qn.warn(N.message)}}();const F=D.options.appId;if(!F)throw ut.create("no-app-id");if(!D.options.apiKey){if(!D.options.measurementId)throw ut.create("no-api-key");Qn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${D.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=ni[F])throw ut.create("already-exists",{id:F});if(!Ma){!function ls(D){let T=[];Array.isArray(window[D])?T=window[D]:window[D]=T}(uo);const{wrappedGtag:J,gtagCore:Le}=function xp(D,T,N,F,Q){let J=function(...Le){window[F].push(arguments)};return window[Q]&&"function"==typeof window[Q]&&(J=window[Q]),window[Q]=function du(D,T,N,F){function J(){return(J=(0,R.Z)(function*(Le,We,mt){try{"event"===Le?yield Aa(D,T,N,We,mt):"config"===Le?yield Bo(D,T,N,F,We,mt):D("set",We)}catch(Mt){Qn.error(Mt)}})).apply(this,arguments)}return function Q(Le,We,mt){return J.apply(this,arguments)}}(J,D,T,N),{gtagCore:J,wrappedGtag:window[Q]}}(ni,ds,Go,uo,"gtag");lo=J,Ls=Le,Ma=!0}return ni[F]=function $o(D,T,N,F,Q,J,Le){return cs.apply(this,arguments)}(D,ds,Go,T,Ls,uo,N),new Ho(D)}function Er(){return(Er=(0,R.Z)(function*(D,T,N,F,Q){if(Q&&Q.global)D("event",N,F);else{const J=yield T;D("event",N,Object.assign(Object.assign({},F),{send_to:J}))}})).apply(this,arguments)}function Hi(){return Wo.apply(this,arguments)}function Wo(){return(Wo=(0,R.Z)(function*(){if((0,ae.ru)()||!(0,ae.zI)()||!(0,ae.hl)())return!1;try{return yield(0,ae.eu)()}catch(D){return!1}})).apply(this,arguments)}const jr="@firebase/analytics";!function js(){(0,oe._registerComponent)(new me.wA(Lc,(T,{options:N})=>Ti(T.getProvider("app").getImmediate(),T.getProvider("installations-internal").getImmediate(),N),"PUBLIC")),(0,oe._registerComponent)(new me.wA("analytics-internal",function D(T){try{const N=T.getProvider(Lc).getImmediate();return{logEvent:(F,Q,J)=>function qo(D,T,N,F){D=(0,ae.m9)(D),function zc(D,T,N,F,Q){return Er.apply(this,arguments)}(lo,ni[D.app.options.appId],T,N,F).catch(Q=>Qn.error(Q))}(N,F,Q,J)}}catch(N){throw ut.create("interop-component-reg-failed",{reason:N})}},"PRIVATE")),(0,oe.registerVersion)(jr,"0.7.9"),(0,oe.registerVersion)(jr,"0.7.9","esm2017")}();var Wc=O(4408),Ih=O(7565);const dl=new class Ln extends Ih.v{}(class Ci extends Wc.o{constructor(T,N){super(T,N),this.scheduler=T,this.work=N}schedule(T,N=0){return N>0?super.schedule(T,N):(this.delay=N,this.state=T,this.scheduler.flush(this),this)}execute(T,N){return N>0||this.closed?super.execute(T,N):this._execute(T,N)}requestAsyncId(T,N,F=0){return null!=F&&F>0||null==F&&this.delay>0?super.requestAsyncId(T,N,F):T.flush(this)}});var Rp=O(4986),gu=O(8306),xr=O(8505),$r=O(9468),mu=O(5363);const Zo=new h.GfV("7.3.0"),ho="__angularfire_symbol__analyticsIsSupportedValue",Gi="__angularfire_symbol__analyticsIsSupported",xa="__angularfire_symbol__remoteConfigIsSupportedValue",yu="__angularfire_symbol__remoteConfigIsSupported",Ut="__angularfire_symbol__messagingIsSupportedValue",qc="__angularfire_symbol__messagingIsSupported";function Kc(D,T,N){if(T){if(1===T.length)return T[0];const J=T.filter(Le=>Le.app===N);if(1===J.length)return J[0]}return N.container.getProvider(D).getImmediate({optional:!0})}globalThis[Gi]||(globalThis[Gi]=Hi().then(D=>globalThis[ho]=D).catch(()=>globalThis[ho]=!1)),globalThis[qc]||(globalThis[qc]=cu().then(D=>globalThis[Ut]=D).catch(()=>globalThis[Ut]=!1)),globalThis[yu]||(globalThis[yu]=$m().then(D=>globalThis[xa]=D).catch(()=>globalThis[xa]=!1));const Zc=(D,T)=>{const N=T?[T]:(0,L.C6)(),F=[];return N.forEach(Q=>{Q.container.getProvider(D).instances.forEach(Le=>{F.includes(Le)||F.push(Le)})}),F};function pr(){}class hl{constructor(T,N=dl){this.zone=T,this.delegate=N}now(){return this.delegate.now()}schedule(T,N,F){const Q=this.zone;return this.delegate.schedule(function(Le){Q.runGuarded(()=>{T.apply(this,[Le])})},N,F)}}class vu{constructor(T){this.zone=T,this.task=null}call(T,N){const F=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",pr,{},pr,pr)),N.pipe((0,xr.b)({next:F,complete:F,error:F})).subscribe(T).add(F)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Eu=(()=>{class D{constructor(N){this.ngZone=N,this.outsideAngular=N.runOutsideAngular(()=>new hl(Zone.current)),this.insideAngular=N.run(()=>new hl(Zone.current,Rp.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return D.\u0275fac=function(N){return new(N||D)(h.LFG(h.R0b))},D.\u0275prov=h.Yz7({token:D,factory:D.\u0275fac,providedIn:"root"}),D})();function Yo(){const D=globalThis.\u0275AngularFireScheduler;if(!D)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return D}function Mn(D){return Yo().ngZone.runOutsideAngular(()=>D())}function Xn(D){return Yo().ngZone.run(()=>D())}function hs(D){return Yo(),function Qo(D){return function(N){return(N=N.lift(new vu(D.ngZone))).pipe((0,$r.R)(D.outsideAngular),(0,mu.Q)(D.insideAngular))}}(Yo())(D)}const wu=(D,T)=>function(){const F=arguments;return T&&setTimeout(()=>{"scheduled"===T.state&&T.invoke()},10),Xn(()=>D.apply(void 0,F))},pl=(D,T)=>function(){let N;const F=arguments;for(let J=0;J<arguments.length;J++)"function"==typeof F[J]&&(T&&(N||(N=Xn(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",pr,{},pr,pr)))),F[J]=wu(F[J],N));const Q=Mn(()=>D.apply(this,F));if(!T){if(Q instanceof gu.y){const J=Yo();return Q.pipe((0,$r.R)(J.outsideAngular),(0,mu.Q)(J.insideAngular))}return Xn(()=>Q)}return Q instanceof gu.y?Q.pipe(hs):Q instanceof Promise?Xn(()=>new Promise((J,Le)=>Q.then(We=>Xn(()=>J(We)),We=>Xn(()=>Le(We))))):"function"==typeof Q&&N?function(){return setTimeout(()=>{N&&"scheduled"===N.state&&N.invoke()},10),Q.apply(this,arguments)}:Xn(()=>Q)}},2587:(rt,De,O)=>{O.d(De,{$:()=>Rs,A:()=>B,B:()=>Se,G:()=>mn,H:()=>an,J:()=>ns,L:()=>on,M:()=>pa,N:()=>ga,P:()=>ho,Q:()=>ma,R:()=>js,T:()=>fh,U:()=>no,V:()=>is,W:()=>Ii,X:()=>Ac,Y:()=>au,Z:()=>os,_:()=>Po,a:()=>Br,a0:()=>Sc,a1:()=>Mc,a2:()=>ph,a3:()=>Re,a4:()=>Ea,a5:()=>xc,a6:()=>Vi,a7:()=>ol,a8:()=>gh,a9:()=>Nc,aA:()=>ri,aB:()=>xn,aC:()=>pl,aD:()=>wu,aE:()=>je,aI:()=>jo,aL:()=>xs,aa:()=>Ui,ab:()=>Lo,ac:()=>mh,af:()=>lu,ag:()=>Pc,ah:()=>kc,ak:()=>ss,al:()=>ul,an:()=>Ca,ao:()=>Bc,ap:()=>$n,aq:()=>Ie,ar:()=>$t,as:()=>at,at:()=>ze,au:()=>Sh,av:()=>gl,aw:()=>Me,ax:()=>ne,ay:()=>re,az:()=>It,b:()=>ut,c:()=>Na,d:()=>hl,e:()=>Zc,f:()=>N,g:()=>mt,h:()=>J,i:()=>Ti,j:()=>Dt,k:()=>Mh,l:()=>dl,m:()=>Nh,o:()=>ue,r:()=>Rp,s:()=>Ih,u:()=>mu});var h=O(5861),L=O(2090),R=O(9681),oe=O(655),ae=O(1877),me=O(4859);const ue={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},B={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};const Se=function ie(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},Fe=function Ke(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},He=new L.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Te=new ae.Yd("@firebase/auth");function qe(v,...g){Te.logLevel<=ae.in.ERROR&&Te.error(`Auth (${R.SDK_VERSION}): ${v}`,...g)}function ze(v,...g){throw Ze(v,...g)}function Me(v,...g){return Ze(v,...g)}function xe(v,g,m){const w=Object.assign(Object.assign({},Fe()),{[g]:m});return new L.LL("auth","Firebase",w).create(g,{appName:v.name})}function be(v,g,m){if(!(g instanceof m))throw m.name!==g.constructor.name&&ze(v,"argument-error"),xe(v,"argument-error",`Type of ${g.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Ze(v,...g){if("string"!=typeof v){const m=g[0],w=[...g.slice(1)];return w[0]&&(w[0].appName=v.name),v._errorFactory.create(m,...w)}return He.create(v,...g)}function ne(v,g,...m){if(!v)throw Ze(g,...m)}function he(v){const g="INTERNAL ASSERTION FAILED: "+v;throw qe(g),new Error(g)}function Ie(v,g){v||he(g)}const Z=new Map;function re(v){Ie(v instanceof Function,"Expected a class definition");let g=Z.get(v);return g?(Ie(g instanceof v,"Instance stored in cache mismatched with class"),g):(g=new v,Z.set(v,g),g)}function ce(){var v;return"undefined"!=typeof self&&(null===(v=self.location)||void 0===v?void 0:v.href)||""}function Ve(){return"http:"===dt()||"https:"===dt()}function dt(){var v;return"undefined"!=typeof self&&(null===(v=self.location)||void 0===v?void 0:v.protocol)||null}class Ye{constructor(g,m){this.shortDelay=g,this.longDelay=m,Ie(m>g,"Short delay should be less than long delay!"),this.isMobile=(0,L.uI)()||(0,L.b$)()}get(){return function Xt(){return!("undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(Ve()||(0,L.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function ln(v,g){Ie(v.emulator,"Emulator should always be set here");const{url:m}=v.emulator;return g?`${m}${g.startsWith("/")?g.slice(1):g}`:m}class Rn{static initialize(g,m,w){this.fetchImpl=g,m&&(this.headersImpl=m),w&&(this.responseImpl=w)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void he("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void he("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void he("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const fn={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},nn=new Ye(3e4,6e4);function jt(v,g){return v.tenantId&&!g.tenantId?Object.assign(Object.assign({},g),{tenantId:v.tenantId}):g}function en(v,g,m,w){return In.apply(this,arguments)}function In(){return(In=(0,h.Z)(function*(v,g,m,w,S={}){return Ri(v,S,(0,h.Z)(function*(){let P={},te={};w&&("GET"===g?te=w:P={body:JSON.stringify(w)});const Ne=(0,L.xO)(Object.assign({key:v.config.apiKey},te)).slice(1),et=yield v._getAdditionalHeaders();return et["Content-Type"]="application/json",v.languageCode&&(et["X-Firebase-Locale"]=v.languageCode),Rn.fetch()(ui(v,v.config.apiHost,m,Ne),Object.assign({method:g,headers:et,referrerPolicy:"no-referrer"},P))}))})).apply(this,arguments)}function Ri(v,g,m){return Tr.apply(this,arguments)}function Tr(){return(Tr=(0,h.Z)(function*(v,g,m){v._canInitEmulator=!1;const w=Object.assign(Object.assign({},fn),g);try{const S=new wi(v),P=yield Promise.race([m(),S.promise]);S.clearNetworkTimeout();const te=yield P.json();if("needConfirmation"in te)throw jn(v,"account-exists-with-different-credential",te);if(P.ok&&!("errorMessage"in te))return te;{const Ne=P.ok?te.errorMessage:te.error.message,[et,gt]=Ne.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===et)throw jn(v,"credential-already-in-use",te);if("EMAIL_EXISTS"===et)throw jn(v,"email-already-in-use",te);if("USER_DISABLED"===et)throw jn(v,"user-disabled",te);const Nt=w[et]||et.toLowerCase().replace(/[_\s]+/g,"-");if(gt)throw xe(v,Nt,gt);ze(v,Nt)}}catch(S){if(S instanceof L.ZR)throw S;ze(v,"network-request-failed")}})).apply(this,arguments)}function Cn(v,g,m,w){return Oi.apply(this,arguments)}function Oi(){return(Oi=(0,h.Z)(function*(v,g,m,w,S={}){const P=yield en(v,g,m,w,S);return"mfaPendingCredential"in P&&ze(v,"multi-factor-auth-required",{_serverResponse:P}),P})).apply(this,arguments)}function ui(v,g,m,w){const S=`${g}${m}?${w}`;return v.config.emulator?ln(v.config,S):`${v.config.apiScheme}://${S}`}class wi{constructor(g){this.auth=g,this.timer=null,this.promise=new Promise((m,w)=>{this.timer=setTimeout(()=>w(Me(this.auth,"network-request-failed")),nn.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function jn(v,g,m){const w={appName:v.name};m.email&&(w.email=m.email),m.phoneNumber&&(w.phoneNumber=m.phoneNumber);const S=Me(v,g,w);return S.customData._tokenResponse=m,S}function pt(){return(pt=(0,h.Z)(function*(v,g){return en(v,"POST","/v1/accounts:delete",g)})).apply(this,arguments)}function Lr(v,g){return En.apply(this,arguments)}function En(){return(En=(0,h.Z)(function*(v,g){return en(v,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function tn(v,g){return Cr.apply(this,arguments)}function Cr(){return(Cr=(0,h.Z)(function*(v,g){return en(v,"POST","/v1/accounts:lookup",g)})).apply(this,arguments)}function or(v){if(v)try{const g=new Date(Number(v));if(!isNaN(g.getTime()))return g.toUTCString()}catch(g){}}function ar(){return(ar=(0,h.Z)(function*(v,g=!1){const m=(0,L.m9)(v),w=yield m.getIdToken(g),S=Zt(w);ne(S&&S.exp&&S.auth_time&&S.iat,m.auth,"internal-error");const P="object"==typeof S.firebase?S.firebase:void 0,te=null==P?void 0:P.sign_in_provider;return{claims:S,token:w,authTime:or(Cs(S.auth_time)),issuedAtTime:or(Cs(S.iat)),expirationTime:or(Cs(S.exp)),signInProvider:te||null,signInSecondFactor:(null==P?void 0:P.sign_in_second_factor)||null}})).apply(this,arguments)}function Cs(v){return 1e3*Number(v)}function Zt(v){const[g,m,w]=v.split(".");if(void 0===g||void 0===m||void 0===w)return qe("JWT malformed, contained fewer than 3 sections"),null;try{const S=(0,L.tV)(m);return S?JSON.parse(S):(qe("Failed to decode base64 JWT payload"),null)}catch(S){return qe("Caught error parsing JWT payload as JSON",S),null}}function it(v,g){return li.apply(this,arguments)}function li(){return(li=(0,h.Z)(function*(v,g,m=!1){if(m)return g;try{return yield g}catch(w){throw w instanceof L.ZR&&ci(w)&&v.auth.currentUser===v&&(yield v.auth.signOut()),w}})).apply(this,arguments)}function ci({code:v}){return"auth/user-disabled"===v||"auth/user-token-expired"===v}class Wt{constructor(g){this.user=g,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(g){var m;if(g){const w=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),w}{this.errorBackoff=3e4;const S=(null!==(m=this.user.stsTokenManager.expirationTime)&&void 0!==m?m:0)-Date.now()-3e5;return Math.max(0,S)}}schedule(g=!1){var m=this;if(!this.isRunning)return;const w=this.getInterval(g);this.timerId=setTimeout((0,h.Z)(function*(){yield m.iteration()}),w)}iteration(){var g=this;return(0,h.Z)(function*(){try{yield g.user.getIdToken(!0)}catch(m){return void("auth/network-request-failed"===m.code&&g.schedule(!0))}g.schedule()})()}}class ki{constructor(g,m){this.createdAt=g,this.lastLoginAt=m,this._initializeTime()}_initializeTime(){this.lastSignInTime=or(this.lastLoginAt),this.creationTime=or(this.createdAt)}_copy(g){this.createdAt=g.createdAt,this.lastLoginAt=g.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function On(v){return cn.apply(this,arguments)}function cn(){return(cn=(0,h.Z)(function*(v){var g;const m=v.auth,w=yield v.getIdToken(),S=yield it(v,tn(m,{idToken:w}));ne(null==S?void 0:S.users.length,m,"internal-error");const P=S.users[0];v._notifyReloadListener(P);const te=(null===(g=P.providerUserInfo)||void 0===g?void 0:g.length)?Ee(P.providerUserInfo):[],Ne=W(v.providerData,te),Nt=!!v.isAnonymous&&!(v.email&&P.passwordHash||(null==Ne?void 0:Ne.length)),Vn={uid:P.localId,displayName:P.displayName||null,photoURL:P.photoUrl||null,email:P.email||null,emailVerified:P.emailVerified||!1,phoneNumber:P.phoneNumber||null,tenantId:P.tenantId||null,providerData:Ne,metadata:new ki(P.createdAt,P.lastLoginAt),isAnonymous:Nt};Object.assign(v,Vn)})).apply(this,arguments)}function G(){return(G=(0,h.Z)(function*(v){const g=(0,L.m9)(v);yield On(g),yield g.auth._persistUserIfCurrent(g),g.auth._notifyListenersIfCurrent(g)})).apply(this,arguments)}function W(v,g){return[...v.filter(w=>!g.some(S=>S.providerId===w.providerId)),...g]}function Ee(v){return v.map(g=>{var{providerId:m}=g,w=(0,oe._T)(g,["providerId"]);return{providerId:m,uid:w.rawId||"",displayName:w.displayName||null,email:w.email||null,phoneNumber:w.phoneNumber||null,photoURL:w.photoUrl||null}})}function X(){return(X=(0,h.Z)(function*(v,g){const m=yield Ri(v,{},(0,h.Z)(function*(){const w=(0,L.xO)({grant_type:"refresh_token",refresh_token:g}).slice(1),{tokenApiHost:S,apiKey:P}=v.config,te=ui(v,S,"/v1/token",`key=${P}`),Ne=yield v._getAdditionalHeaders();return Ne["Content-Type"]="application/x-www-form-urlencoded",Rn.fetch()(te,{method:"POST",headers:Ne,body:w})}));return{accessToken:m.access_token,expiresIn:m.expires_in,refreshToken:m.refresh_token}})).apply(this,arguments)}class Pe{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(g){ne(g.idToken,"internal-error"),ne(void 0!==g.idToken,"internal-error"),ne(void 0!==g.refreshToken,"internal-error");const m="expiresIn"in g&&void 0!==g.expiresIn?Number(g.expiresIn):function lt(v){const g=Zt(v);return ne(g,"internal-error"),ne(void 0!==g.exp,"internal-error"),ne(void 0!==g.iat,"internal-error"),Number(g.exp)-Number(g.iat)}(g.idToken);this.updateTokensAndExpiration(g.idToken,g.refreshToken,m)}getToken(g,m=!1){var w=this;return(0,h.Z)(function*(){return ne(!w.accessToken||w.refreshToken,g,"user-token-expired"),m||!w.accessToken||w.isExpired?w.refreshToken?(yield w.refresh(g,w.refreshToken),w.accessToken):null:w.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(g,m){var w=this;return(0,h.Z)(function*(){const{accessToken:S,refreshToken:P,expiresIn:te}=yield function j(v,g){return X.apply(this,arguments)}(g,m);w.updateTokensAndExpiration(S,P,Number(te))})()}updateTokensAndExpiration(g,m,w){this.refreshToken=m||null,this.accessToken=g||null,this.expirationTime=Date.now()+1e3*w}static fromJSON(g,m){const{refreshToken:w,accessToken:S,expirationTime:P}=m,te=new Pe;return w&&(ne("string"==typeof w,"internal-error",{appName:g}),te.refreshToken=w),S&&(ne("string"==typeof S,"internal-error",{appName:g}),te.accessToken=S),P&&(ne("number"==typeof P,"internal-error",{appName:g}),te.expirationTime=P),te}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(g){this.accessToken=g.accessToken,this.refreshToken=g.refreshToken,this.expirationTime=g.expirationTime}_clone(){return Object.assign(new Pe,this.toJSON())}_performRefresh(){return he("not implemented")}}function tt(v,g){ne("string"==typeof v||void 0===v,"internal-error",{appName:g})}class ht{constructor(g){var{uid:m,auth:w,stsTokenManager:S}=g,P=(0,oe._T)(g,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Wt(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=m,this.auth=w,this.stsTokenManager=S,this.accessToken=S.accessToken,this.displayName=P.displayName||null,this.email=P.email||null,this.emailVerified=P.emailVerified||!1,this.phoneNumber=P.phoneNumber||null,this.photoURL=P.photoURL||null,this.isAnonymous=P.isAnonymous||!1,this.tenantId=P.tenantId||null,this.providerData=P.providerData?[...P.providerData]:[],this.metadata=new ki(P.createdAt||void 0,P.lastLoginAt||void 0)}getIdToken(g){var m=this;return(0,h.Z)(function*(){const w=yield it(m,m.stsTokenManager.getToken(m.auth,g));return ne(w,m.auth,"internal-error"),m.accessToken!==w&&(m.accessToken=w,yield m.auth._persistUserIfCurrent(m),m.auth._notifyListenersIfCurrent(m)),w})()}getIdTokenResult(g){return function Dn(v){return ar.apply(this,arguments)}(this,g)}reload(){return function U(v){return G.apply(this,arguments)}(this)}_assign(g){this!==g&&(ne(this.uid===g.uid,this.auth,"internal-error"),this.displayName=g.displayName,this.photoURL=g.photoURL,this.email=g.email,this.emailVerified=g.emailVerified,this.phoneNumber=g.phoneNumber,this.isAnonymous=g.isAnonymous,this.tenantId=g.tenantId,this.providerData=g.providerData.map(m=>Object.assign({},m)),this.metadata._copy(g.metadata),this.stsTokenManager._assign(g.stsTokenManager))}_clone(g){return new ht(Object.assign(Object.assign({},this),{auth:g,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(g){ne(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=g,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(g){this.reloadListener?this.reloadListener(g):this.reloadUserInfo=g}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(g,m=!1){var w=this;return(0,h.Z)(function*(){let S=!1;g.idToken&&g.idToken!==w.stsTokenManager.accessToken&&(w.stsTokenManager.updateFromServerResponse(g),S=!0),m&&(yield On(w)),yield w.auth._persistUserIfCurrent(w),S&&w.auth._notifyListenersIfCurrent(w)})()}delete(){var g=this;return(0,h.Z)(function*(){const m=yield g.getIdToken();return yield it(g,function Pi(v,g){return pt.apply(this,arguments)}(g.auth,{idToken:m})),g.stsTokenManager.clearRefreshToken(),g.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(g=>Object.assign({},g)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(g,m){var w,S,P,te,Ne,et,gt,Nt;const Vn=null!==(w=m.displayName)&&void 0!==w?w:void 0,Ki=null!==(S=m.email)&&void 0!==S?S:void 0,zs=null!==(P=m.phoneNumber)&&void 0!==P?P:void 0,Tu=null!==(te=m.photoURL)&&void 0!==te?te:void 0,vl=null!==(Ne=m.tenantId)&&void 0!==Ne?Ne:void 0,Cu=null!==(et=m._redirectEventId)&&void 0!==et?et:void 0,Oh=null!==(gt=m.createdAt)&&void 0!==gt?gt:void 0,Au=null!==(Nt=m.lastLoginAt)&&void 0!==Nt?Nt:void 0,{uid:El,emailVerified:Up,isAnonymous:Ph,providerData:wl,stsTokenManager:bl}=m;ne(El&&bl,g,"internal-error");const Bp=Pe.fromJSON(this.name,bl);ne("string"==typeof El,g,"internal-error"),tt(Vn,g.name),tt(Ki,g.name),ne("boolean"==typeof Up,g,"internal-error"),ne("boolean"==typeof Ph,g,"internal-error"),tt(zs,g.name),tt(Tu,g.name),tt(vl,g.name),tt(Cu,g.name),tt(Oh,g.name),tt(Au,g.name);const ka=new ht({uid:El,auth:g,email:Ki,emailVerified:Up,displayName:Vn,isAnonymous:Ph,photoURL:Tu,phoneNumber:zs,tenantId:vl,stsTokenManager:Bp,createdAt:Oh,lastLoginAt:Au});return wl&&Array.isArray(wl)&&(ka.providerData=wl.map(Zi=>Object.assign({},Zi))),Cu&&(ka._redirectEventId=Cu),ka}static _fromIdTokenResponse(g,m,w=!1){return(0,h.Z)(function*(){const S=new Pe;S.updateFromServerResponse(m);const P=new ht({uid:m.localId,auth:g,stsTokenManager:S,isAnonymous:w});return yield On(P),P})()}}const on=(()=>{class v{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,h.Z)(function*(){return!0})()}_set(m,w){var S=this;return(0,h.Z)(function*(){S.storage[m]=w})()}_get(m){var w=this;return(0,h.Z)(function*(){const S=w.storage[m];return void 0===S?null:S})()}_remove(m){var w=this;return(0,h.Z)(function*(){delete w.storage[m]})()}_addListener(m,w){}_removeListener(m,w){}}return v.type="NONE",v})();function It(v,g,m){return`firebase:${v}:${g}:${m}`}class Gn{constructor(g,m,w){this.persistence=g,this.auth=m,this.userKey=w;const{config:S,name:P}=this.auth;this.fullUserKey=It(this.userKey,S.apiKey,P),this.fullPersistenceKey=It("persistence",S.apiKey,P),this.boundEventHandler=m._onStorageEvent.bind(m),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(g){return this.persistence._set(this.fullUserKey,g.toJSON())}getCurrentUser(){var g=this;return(0,h.Z)(function*(){const m=yield g.persistence._get(g.fullUserKey);return m?ht._fromJSON(g.auth,m):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(g){var m=this;return(0,h.Z)(function*(){if(m.persistence===g)return;const w=yield m.getCurrentUser();return yield m.removeCurrentUser(),m.persistence=g,w?m.setCurrentUser(w):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(g,m,w="authUser"){return(0,h.Z)(function*(){if(!m.length)return new Gn(re(on),g,w);const S=(yield Promise.all(m.map(function(){var gt=(0,h.Z)(function*(Nt){if(yield Nt._isAvailable())return Nt});return function(Nt){return gt.apply(this,arguments)}}()))).filter(gt=>gt);let P=S[0]||re(on);const te=It(w,g.config.apiKey,g.name);let Ne=null;for(const gt of m)try{const Nt=yield gt._get(te);if(Nt){const Vn=ht._fromJSON(g,Nt);gt!==P&&(Ne=Vn),P=gt;break}}catch(Nt){}const et=S.filter(gt=>gt._shouldAllowMigration);return P._shouldAllowMigration&&et.length?(P=et[0],Ne&&(yield P._set(te,Ne.toJSON())),yield Promise.all(m.map(function(){var gt=(0,h.Z)(function*(Nt){if(Nt!==P)try{yield Nt._remove(te)}catch(Vn){}});return function(Nt){return gt.apply(this,arguments)}}())),new Gn(P,g,w)):new Gn(P,g,w)})()}}function le(v){const g=v.toLowerCase();if(g.includes("opera/")||g.includes("opr/")||g.includes("opios/"))return"Opera";if(Qe(g))return"IEMobile";if(g.includes("msie")||g.includes("trident/"))return"IE";if(g.includes("edge/"))return"Edge";if(K(g))return"Firefox";if(g.includes("silk/"))return"Silk";if(Rt(g))return"Blackberry";if(Yt(g))return"Webos";if(z(g))return"Safari";if((g.includes("chrome/")||Ae(g))&&!g.includes("edge/"))return"Chrome";if(at(g))return"Android";{const w=v.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==w?void 0:w.length))return w[1]}return"Other"}function K(v=(0,L.z$)()){return/firefox\//i.test(v)}function z(v=(0,L.z$)()){const g=v.toLowerCase();return g.includes("safari/")&&!g.includes("chrome/")&&!g.includes("crios/")&&!g.includes("android")}function Ae(v=(0,L.z$)()){return/crios\//i.test(v)}function Qe(v=(0,L.z$)()){return/iemobile/i.test(v)}function at(v=(0,L.z$)()){return/android/i.test(v)}function Rt(v=(0,L.z$)()){return/blackberry/i.test(v)}function Yt(v=(0,L.z$)()){return/webos/i.test(v)}function $t(v=(0,L.z$)()){return/iphone|ipad|ipod/i.test(v)}function $n(v=(0,L.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(v)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(v)}function Ar(v=(0,L.z$)()){return $t(v)||at(v)||Yt(v)||Rt(v)||/windows phone/i.test(v)||Qe(v)}function ur(v,g=[]){let m;switch(v){case"Browser":m=le((0,L.z$)());break;case"Worker":m=`${le((0,L.z$)())}-${v}`;break;default:m=v}const w=g.length?g.join(","):"FirebaseCore-web";return`${m}/JsCore/${R.SDK_VERSION}/${w}`}class ha{constructor(g){this.auth=g,this.queue=[]}pushCallback(g,m){const w=P=>new Promise((te,Ne)=>{try{te(g(P))}catch(et){Ne(et)}});w.onAbort=m,this.queue.push(w);const S=this.queue.length-1;return()=>{this.queue[S]=()=>Promise.resolve()}}runMiddleware(g){var m=this;return(0,h.Z)(function*(){if(m.auth.currentUser===g)return;const w=[];try{for(const S of m.queue)yield S(g),S.onAbort&&w.push(S.onAbort)}catch(S){w.reverse();for(const P of w)try{P()}catch(te){}throw m.auth._errorFactory.create("login-blocked",{originalMessage:S.message})}})()}}class Jr{constructor(g,m,w){this.app=g,this.heartbeatServiceProvider=m,this.config=w,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Vt(this),this.idTokenSubscription=new Vt(this),this.beforeStateQueue=new ha(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=He,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=g.name,this.clientVersion=w.sdkClientVersion}_initializeWithPersistence(g,m){var w=this;return m&&(this._popupRedirectResolver=re(m)),this._initializationPromise=this.queue((0,h.Z)(function*(){var S,P;if(!w._deleted&&(w.persistenceManager=yield Gn.create(w,g),!w._deleted)){if(null===(S=w._popupRedirectResolver)||void 0===S?void 0:S._shouldInitProactively)try{yield w._popupRedirectResolver._initialize(w)}catch(te){}yield w.initializeCurrentUser(m),w.lastNotifiedUid=(null===(P=w.currentUser)||void 0===P?void 0:P.uid)||null,!w._deleted&&(w._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var g=this;return(0,h.Z)(function*(){if(g._deleted)return;const m=yield g.assertedPersistence.getCurrentUser();if(g.currentUser||m){if(g.currentUser&&m&&g.currentUser.uid===m.uid)return g._currentUser._assign(m),void(yield g.currentUser.getIdToken());yield g._updateCurrentUser(m,!0)}})()}initializeCurrentUser(g){var m=this;return(0,h.Z)(function*(){var w;const S=yield m.assertedPersistence.getCurrentUser();let P=S,te=!1;if(g&&m.config.authDomain){yield m.getOrInitRedirectPersistenceManager();const Ne=null===(w=m.redirectUser)||void 0===w?void 0:w._redirectEventId,et=null==P?void 0:P._redirectEventId,gt=yield m.tryRedirectSignIn(g);(!Ne||Ne===et)&&(null==gt?void 0:gt.user)&&(P=gt.user,te=!0)}if(!P)return m.directlySetCurrentUser(null);if(!P._redirectEventId){if(te)try{yield m.beforeStateQueue.runMiddleware(P)}catch(Ne){P=S,m._popupRedirectResolver._overrideRedirectResult(m,()=>Promise.reject(Ne))}return P?m.reloadAndSetCurrentUserOrClear(P):m.directlySetCurrentUser(null)}return ne(m._popupRedirectResolver,m,"argument-error"),yield m.getOrInitRedirectPersistenceManager(),m.redirectUser&&m.redirectUser._redirectEventId===P._redirectEventId?m.directlySetCurrentUser(P):m.reloadAndSetCurrentUserOrClear(P)})()}tryRedirectSignIn(g){var m=this;return(0,h.Z)(function*(){let w=null;try{w=yield m._popupRedirectResolver._completeRedirectFn(m,g,!0)}catch(S){yield m._setRedirectUser(null)}return w})()}reloadAndSetCurrentUserOrClear(g){var m=this;return(0,h.Z)(function*(){try{yield On(g)}catch(w){if("auth/network-request-failed"!==w.code)return m.directlySetCurrentUser(null)}return m.directlySetCurrentUser(g)})()}useDeviceLanguage(){this.languageCode=function zt(){if("undefined"==typeof navigator)return null;const v=navigator;return v.languages&&v.languages[0]||v.language||null}()}_delete(){var g=this;return(0,h.Z)(function*(){g._deleted=!0})()}updateCurrentUser(g){var m=this;return(0,h.Z)(function*(){const w=g?(0,L.m9)(g):null;return w&&ne(w.auth.config.apiKey===m.config.apiKey,m,"invalid-user-token"),m._updateCurrentUser(w&&w._clone(m))})()}_updateCurrentUser(g,m=!1){var w=this;return(0,h.Z)(function*(){if(!w._deleted)return g&&ne(w.tenantId===g.tenantId,w,"tenant-id-mismatch"),m||(yield w.beforeStateQueue.runMiddleware(g)),w.queue((0,h.Z)(function*(){yield w.directlySetCurrentUser(g),w.notifyAuthListeners()}))})()}signOut(){var g=this;return(0,h.Z)(function*(){return yield g.beforeStateQueue.runMiddleware(null),(g.redirectPersistenceManager||g._popupRedirectResolver)&&(yield g._setRedirectUser(null)),g._updateCurrentUser(null,!0)})()}setPersistence(g){var m=this;return this.queue((0,h.Z)(function*(){yield m.assertedPersistence.setPersistence(re(g))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(g){this._errorFactory=new L.LL("auth","Firebase",g())}onAuthStateChanged(g,m,w){return this.registerStateListener(this.authStateSubscription,g,m,w)}beforeAuthStateChanged(g,m){return this.beforeStateQueue.pushCallback(g,m)}onIdTokenChanged(g,m,w){return this.registerStateListener(this.idTokenSubscription,g,m,w)}toJSON(){var g;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(g=this._currentUser)||void 0===g?void 0:g.toJSON()}}_setRedirectUser(g,m){var w=this;return(0,h.Z)(function*(){const S=yield w.getOrInitRedirectPersistenceManager(m);return null===g?S.removeCurrentUser():S.setCurrentUser(g)})()}getOrInitRedirectPersistenceManager(g){var m=this;return(0,h.Z)(function*(){if(!m.redirectPersistenceManager){const w=g&&re(g)||m._popupRedirectResolver;ne(w,m,"argument-error"),m.redirectPersistenceManager=yield Gn.create(m,[re(w._redirectPersistence)],"redirectUser"),m.redirectUser=yield m.redirectPersistenceManager.getCurrentUser()}return m.redirectPersistenceManager})()}_redirectUserForId(g){var m=this;return(0,h.Z)(function*(){var w,S;return m._isInitialized&&(yield m.queue((0,h.Z)(function*(){}))),(null===(w=m._currentUser)||void 0===w?void 0:w._redirectEventId)===g?m._currentUser:(null===(S=m.redirectUser)||void 0===S?void 0:S._redirectEventId)===g?m.redirectUser:null})()}_persistUserIfCurrent(g){var m=this;return(0,h.Z)(function*(){if(g===m.currentUser)return m.queue((0,h.Z)(function*(){return m.directlySetCurrentUser(g)}))})()}_notifyListenersIfCurrent(g){g===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var g,m;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const w=null!==(m=null===(g=this.currentUser)||void 0===g?void 0:g.uid)&&void 0!==m?m:null;this.lastNotifiedUid!==w&&(this.lastNotifiedUid=w,this.authStateSubscription.next(this.currentUser))}registerStateListener(g,m,w,S){if(this._deleted)return()=>{};const P="function"==typeof m?m:m.next.bind(m),te=this._isInitialized?Promise.resolve():this._initializationPromise;return ne(te,this,"internal-error"),te.then(()=>P(this.currentUser)),"function"==typeof m?g.addObserver(m,w,S):g.addObserver(m)}directlySetCurrentUser(g){var m=this;return(0,h.Z)(function*(){m.currentUser&&m.currentUser!==g&&(m._currentUser._stopProactiveRefresh(),g&&m.isProactiveRefreshEnabled&&g._startProactiveRefresh()),m.currentUser=g,g?yield m.assertedPersistence.setCurrentUser(g):yield m.assertedPersistence.removeCurrentUser()})()}queue(g){return this.operations=this.operations.then(g,g),this.operations}get assertedPersistence(){return ne(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(g){!g||this.frameworks.includes(g)||(this.frameworks.push(g),this.frameworks.sort(),this.clientVersion=ur(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var g=this;return(0,h.Z)(function*(){var m;const w={"X-Client-Version":g.clientVersion};g.app.options.appId&&(w["X-Firebase-gmpid"]=g.app.options.appId);const S=yield null===(m=g.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===m?void 0:m.getHeartbeatsHeader();return S&&(w["X-Firebase-Client"]=S),w})()}}function je(v){return(0,L.m9)(v)}class Vt{constructor(g){this.auth=g,this.observer=null,this.addObserver=(0,L.ne)(m=>this.observer=m)}get next(){return ne(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function mn(v,g,m){const w=je(v);ne(w._canInitEmulator,w,"emulator-config-failed"),ne(/^https?:\/\//.test(g),w,"invalid-emulator-scheme");const S=!!(null==m?void 0:m.disableWarnings),P=Ur(g),{host:te,port:Ne}=function es(v){const g=Ur(v),m=/(\/\/)?([^?#/]+)/.exec(v.substr(g.length));if(!m)return{host:"",port:null};const w=m[2].split("@").pop()||"",S=/^(\[[^\]]+\])(:|$)/.exec(w);if(S){const P=S[1];return{host:P,port:Hn(w.substr(P.length+1))}}{const[P,te]=w.split(":");return{host:P,port:Hn(te)}}}(g);w.config.emulator={url:`${P}//${te}${null===Ne?"":`:${Ne}`}/`},w.settings.appVerificationDisabledForTesting=!0,w.emulatorConfig=Object.freeze({host:te,port:Ne,protocol:P.replace(":",""),options:Object.freeze({disableWarnings:S})}),S||function ts(){function v(){const g=document.createElement("p"),m=g.style;g.innerText="Running in emulator mode. Do not use with production credentials.",m.position="fixed",m.width="100%",m.backgroundColor="#ffffff",m.border=".1em solid #000000",m.color="#b50000",m.bottom="0px",m.left="0px",m.margin="0px",m.zIndex="10000",m.textAlign="center",g.classList.add("firebase-emulator-warning"),document.body.appendChild(g)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",v):v())}()}function Ur(v){const g=v.indexOf(":");return g<0?"":v.substr(0,g+1)}function Hn(v){if(!v)return null;const g=Number(v);return isNaN(g)?null:g}class an{constructor(g,m){this.providerId=g,this.signInMethod=m}toJSON(){return he("not implemented")}_getIdTokenResponse(g){return he("not implemented")}_linkToIdToken(g,m){return he("not implemented")}_getReauthenticationResolver(g){return he("not implemented")}}function Xs(v,g){return Pn.apply(this,arguments)}function Pn(){return(Pn=(0,h.Z)(function*(v,g){return en(v,"POST","/v1/accounts:resetPassword",jt(v,g))})).apply(this,arguments)}function kt(v,g){return So.apply(this,arguments)}function So(){return(So=(0,h.Z)(function*(v,g){return en(v,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function Mo(v,g){return xo.apply(this,arguments)}function xo(){return(xo=(0,h.Z)(function*(v,g){return en(v,"POST","/v1/accounts:update",jt(v,g))})).apply(this,arguments)}function zn(){return(zn=(0,h.Z)(function*(v,g){return Cn(v,"POST","/v1/accounts:signInWithPassword",jt(v,g))})).apply(this,arguments)}function As(v,g){return eo.apply(this,arguments)}function eo(){return(eo=(0,h.Z)(function*(v,g){return en(v,"POST","/v1/accounts:sendOobCode",jt(v,g))})).apply(this,arguments)}function lr(v,g){return dn.apply(this,arguments)}function dn(){return(dn=(0,h.Z)(function*(v,g){return As(v,g)})).apply(this,arguments)}function yc(v,g){return to.apply(this,arguments)}function to(){return(to=(0,h.Z)(function*(v,g){return As(v,g)})).apply(this,arguments)}function bi(v,g){return di.apply(this,arguments)}function di(){return(di=(0,h.Z)(function*(v,g){return As(v,g)})).apply(this,arguments)}function _c(v,g){return tu.apply(this,arguments)}function tu(){return(tu=(0,h.Z)(function*(v,g){return As(v,g)})).apply(this,arguments)}function hi(){return(hi=(0,h.Z)(function*(v,g){return Cn(v,"POST","/v1/accounts:signInWithEmailLink",jt(v,g))})).apply(this,arguments)}function vc(){return(vc=(0,h.Z)(function*(v,g){return Cn(v,"POST","/v1/accounts:signInWithEmailLink",jt(v,g))})).apply(this,arguments)}class nu extends an{constructor(g,m,w,S=null){super("password",w),this._email=g,this._password=m,this._tenantId=S}static _fromEmailAndPassword(g,m){return new nu(g,m,"password")}static _fromEmailAndCode(g,m,w=null){return new nu(g,m,"emailLink",w)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(g){const m="string"==typeof g?JSON.parse(g):g;if((null==m?void 0:m.email)&&(null==m?void 0:m.password)){if("password"===m.signInMethod)return this._fromEmailAndPassword(m.email,m.password);if("emailLink"===m.signInMethod)return this._fromEmailAndCode(m.email,m.password,m.tenantId)}return null}_getIdTokenResponse(g){var m=this;return(0,h.Z)(function*(){switch(m.signInMethod){case"password":return function No(v,g){return zn.apply(this,arguments)}(g,{returnSecureToken:!0,email:m._email,password:m._password});case"emailLink":return function Ss(v,g){return hi.apply(this,arguments)}(g,{email:m._email,oobCode:m._password});default:ze(g,"internal-error")}})()}_linkToIdToken(g,m){var w=this;return(0,h.Z)(function*(){switch(w.signInMethod){case"password":return kt(g,{idToken:m,returnSecureToken:!0,email:w._email,password:w._password});case"emailLink":return function dh(v,g){return vc.apply(this,arguments)}(g,{idToken:m,email:w._email,oobCode:w._password});default:ze(g,"internal-error")}})()}_getReauthenticationResolver(g){return this._getIdTokenResponse(g)}}function Wn(v,g){return Ec.apply(this,arguments)}function Ec(){return(Ec=(0,h.Z)(function*(v,g){return Cn(v,"POST","/v1/accounts:signInWithIdp",jt(v,g))})).apply(this,arguments)}class ns extends an{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(g){const m=new ns(g.providerId,g.signInMethod);return g.idToken||g.accessToken?(g.idToken&&(m.idToken=g.idToken),g.accessToken&&(m.accessToken=g.accessToken),g.nonce&&!g.pendingToken&&(m.nonce=g.nonce),g.pendingToken&&(m.pendingToken=g.pendingToken)):g.oauthToken&&g.oauthTokenSecret?(m.accessToken=g.oauthToken,m.secret=g.oauthTokenSecret):ze("argument-error"),m}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(g){const m="string"==typeof g?JSON.parse(g):g,{providerId:w,signInMethod:S}=m,P=(0,oe._T)(m,["providerId","signInMethod"]);if(!w||!S)return null;const te=new ns(w,S);return te.idToken=P.idToken||void 0,te.accessToken=P.accessToken||void 0,te.secret=P.secret,te.nonce=P.nonce,te.pendingToken=P.pendingToken||null,te}_getIdTokenResponse(g){return Wn(g,this.buildRequest())}_linkToIdToken(g,m){const w=this.buildRequest();return w.idToken=m,Wn(g,w)}_getReauthenticationResolver(g){const m=this.buildRequest();return m.autoCreate=!1,Wn(g,m)}buildRequest(){const g={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)g.pendingToken=this.pendingToken;else{const m={};this.idToken&&(m.id_token=this.idToken),this.accessToken&&(m.access_token=this.accessToken),this.secret&&(m.oauth_token_secret=this.secret),m.providerId=this.providerId,this.nonce&&!this.pendingToken&&(m.nonce=this.nonce),g.postBody=(0,L.xO)(m)}return g}}function bp(v,g){return wc.apply(this,arguments)}function wc(){return(wc=(0,h.Z)(function*(v,g){return en(v,"POST","/v1/accounts:sendVerificationCode",jt(v,g))})).apply(this,arguments)}function fa(){return(fa=(0,h.Z)(function*(v,g){return Cn(v,"POST","/v1/accounts:signInWithPhoneNumber",jt(v,g))})).apply(this,arguments)}function bc(){return(bc=(0,h.Z)(function*(v,g){const m=yield Cn(v,"POST","/v1/accounts:signInWithPhoneNumber",jt(v,g));if(m.temporaryProof)throw jn(v,"account-exists-with-different-credential",m);return m})).apply(this,arguments)}const Dp={USER_NOT_FOUND:"user-not-found"};function Ic(){return(Ic=(0,h.Z)(function*(v,g){return Cn(v,"POST","/v1/accounts:signInWithPhoneNumber",jt(v,Object.assign(Object.assign({},g),{operation:"REAUTH"})),Dp)})).apply(this,arguments)}class Oo extends an{constructor(g){super("phone","phone"),this.params=g}static _fromVerification(g,m){return new Oo({verificationId:g,verificationCode:m})}static _fromTokenResponse(g,m){return new Oo({phoneNumber:g,temporaryProof:m})}_getIdTokenResponse(g){return function Ip(v,g){return fa.apply(this,arguments)}(g,this._makeVerificationRequest())}_linkToIdToken(g,m){return function Ro(v,g){return bc.apply(this,arguments)}(g,Object.assign({idToken:m},this._makeVerificationRequest()))}_getReauthenticationResolver(g){return function Tp(v,g){return Ic.apply(this,arguments)}(g,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:g,phoneNumber:m,verificationId:w,verificationCode:S}=this.params;return g&&m?{temporaryProof:g,phoneNumber:m}:{sessionInfo:w,code:S}}toJSON(){const g={providerId:this.providerId};return this.params.phoneNumber&&(g.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(g.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(g.verificationCode=this.params.verificationCode),this.params.verificationId&&(g.verificationId=this.params.verificationId),g}static fromJSON(g){"string"==typeof g&&(g=JSON.parse(g));const{verificationId:m,verificationCode:w,phoneNumber:S,temporaryProof:P}=g;return w||m||S||P?new Oo({verificationId:m,verificationCode:w,phoneNumber:S,temporaryProof:P}):null}}class rs{constructor(g){var m,w,S,P,te,Ne;const et=(0,L.zd)((0,L.pd)(g)),gt=null!==(m=et.apiKey)&&void 0!==m?m:null,Nt=null!==(w=et.oobCode)&&void 0!==w?w:null,Vn=function Cp(v){switch(v){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(S=et.mode)&&void 0!==S?S:null);ne(gt&&Nt&&Vn,"argument-error"),this.apiKey=gt,this.operation=Vn,this.code=Nt,this.continueUrl=null!==(P=et.continueUrl)&&void 0!==P?P:null,this.languageCode=null!==(te=et.languageCode)&&void 0!==te?te:null,this.tenantId=null!==(Ne=et.tenantId)&&void 0!==Ne?Ne:null}static parseLink(g){const m=function hh(v){const g=(0,L.zd)((0,L.pd)(v)).link,m=g?(0,L.zd)((0,L.pd)(g)).deep_link_id:null,w=(0,L.zd)((0,L.pd)(v)).deep_link_id;return(w?(0,L.zd)((0,L.pd)(w)).link:null)||w||m||g||v}(g);try{return new rs(m)}catch(w){return null}}}let pa=(()=>{class v{constructor(){this.providerId=v.PROVIDER_ID}static credential(m,w){return nu._fromEmailAndPassword(m,w)}static credentialWithLink(m,w){const S=rs.parseLink(w);return ne(S,"argument-error"),nu._fromEmailAndCode(m,S.code,S.tenantId)}}return v.PROVIDER_ID="password",v.EMAIL_PASSWORD_SIGN_IN_METHOD="password",v.EMAIL_LINK_SIGN_IN_METHOD="emailLink",v})();class Ms{constructor(g){this.providerId=g,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(g){this.defaultLanguageCode=g}setCustomParameters(g){return this.customParameters=g,this}getCustomParameters(){return this.customParameters}}class fi extends Ms{constructor(){super(...arguments),this.scopes=[]}addScope(g){return this.scopes.includes(g)||this.scopes.push(g),this}getScopes(){return[...this.scopes]}}class no extends fi{static credentialFromJSON(g){const m="string"==typeof g?JSON.parse(g):g;return ne("providerId"in m&&"signInMethod"in m,"argument-error"),ns._fromParams(m)}credential(g){return this._credential(Object.assign(Object.assign({},g),{nonce:g.rawNonce}))}_credential(g){return ne(g.idToken||g.accessToken,"argument-error"),ns._fromParams(Object.assign(Object.assign({},g),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(g){return no.oauthCredentialFromTaggedObject(g)}static credentialFromError(g){return no.oauthCredentialFromTaggedObject(g.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthIdToken:m,oauthAccessToken:w,oauthTokenSecret:S,pendingToken:P,nonce:te,providerId:Ne}=g;if(!w&&!S&&!m&&!P||!Ne)return null;try{return new no(Ne)._credential({idToken:m,accessToken:w,nonce:te,pendingToken:P})}catch(et){return null}}}let ga=(()=>{class v extends fi{constructor(){super("facebook.com")}static credential(m){return ns._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.FACEBOOK_SIGN_IN_METHOD,accessToken:m})}static credentialFromResult(m){return v.credentialFromTaggedObject(m)}static credentialFromError(m){return v.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m||!("oauthAccessToken"in m)||!m.oauthAccessToken)return null;try{return v.credential(m.oauthAccessToken)}catch(w){return null}}}return v.FACEBOOK_SIGN_IN_METHOD="facebook.com",v.PROVIDER_ID="facebook.com",v})(),ma=(()=>{class v extends fi{constructor(){super("google.com"),this.addScope("profile")}static credential(m,w){return ns._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.GOOGLE_SIGN_IN_METHOD,idToken:m,accessToken:w})}static credentialFromResult(m){return v.credentialFromTaggedObject(m)}static credentialFromError(m){return v.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{oauthIdToken:w,oauthAccessToken:S}=m;if(!w&&!S)return null;try{return v.credential(w,S)}catch(P){return null}}}return v.GOOGLE_SIGN_IN_METHOD="google.com",v.PROVIDER_ID="google.com",v})(),fh=(()=>{class v extends fi{constructor(){super("github.com")}static credential(m){return ns._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.GITHUB_SIGN_IN_METHOD,accessToken:m})}static credentialFromResult(m){return v.credentialFromTaggedObject(m)}static credentialFromError(m){return v.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m||!("oauthAccessToken"in m)||!m.oauthAccessToken)return null;try{return v.credential(m.oauthAccessToken)}catch(w){return null}}}return v.GITHUB_SIGN_IN_METHOD="github.com",v.PROVIDER_ID="github.com",v})();class xs extends an{constructor(g,m){super(g,g),this.pendingToken=m}_getIdTokenResponse(g){return Wn(g,this.buildRequest())}_linkToIdToken(g,m){const w=this.buildRequest();return w.idToken=m,Wn(g,w)}_getReauthenticationResolver(g){const m=this.buildRequest();return m.autoCreate=!1,Wn(g,m)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(g){const m="string"==typeof g?JSON.parse(g):g,{providerId:w,signInMethod:S,pendingToken:P}=m;return w&&S&&P&&w===S?new xs(w,P):null}static _create(g,m){return new xs(g,m)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class is extends Ms{constructor(g){ne(g.startsWith("saml."),"argument-error"),super(g)}static credentialFromResult(g){return is.samlCredentialFromTaggedObject(g)}static credentialFromError(g){return is.samlCredentialFromTaggedObject(g.customData||{})}static credentialFromJSON(g){const m=xs.fromJSON(g);return ne(m,"argument-error"),m}static samlCredentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{pendingToken:m,providerId:w}=g;if(!m||!w)return null;try{return xs._create(w,m)}catch(S){return null}}}let Ii=(()=>{class v extends fi{constructor(){super("twitter.com")}static credential(m,w){return ns._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.TWITTER_SIGN_IN_METHOD,oauthToken:m,oauthTokenSecret:w})}static credentialFromResult(m){return v.credentialFromTaggedObject(m)}static credentialFromError(m){return v.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{oauthAccessToken:w,oauthTokenSecret:S}=m;if(!w||!S)return null;try{return v.credential(w,S)}catch(P){return null}}}return v.TWITTER_SIGN_IN_METHOD="twitter.com",v.PROVIDER_ID="twitter.com",v})();function Tc(v,g){return Sr.apply(this,arguments)}function Sr(){return(Sr=(0,h.Z)(function*(v,g){return Cn(v,"POST","/v1/accounts:signUp",jt(v,g))})).apply(this,arguments)}class Mr{constructor(g){this.user=g.user,this.providerId=g.providerId,this._tokenResponse=g._tokenResponse,this.operationType=g.operationType}static _fromIdTokenResponse(g,m,w,S=!1){return(0,h.Z)(function*(){const P=yield ht._fromIdTokenResponse(g,w,S),te=Cc(w);return new Mr({user:P,providerId:te,_tokenResponse:w,operationType:m})})()}static _forOperation(g,m,w){return(0,h.Z)(function*(){yield g._updateTokensIfNecessary(w,!0);const S=Cc(w);return new Mr({user:g,providerId:S,_tokenResponse:w,operationType:m})})()}}function Cc(v){return v.providerId?v.providerId:"phoneNumber"in v?"phone":null}function Ac(v){return ru.apply(this,arguments)}function ru(){return(ru=(0,h.Z)(function*(v){var g;const m=je(v);if(yield m._initializationPromise,null===(g=m.currentUser)||void 0===g?void 0:g.isAnonymous)return new Mr({user:m.currentUser,providerId:null,operationType:"signIn"});const w=yield Tc(m,{returnSecureToken:!0}),S=yield Mr._fromIdTokenResponse(m,"signIn",w,!0);return yield m._updateCurrentUser(S.user),S})).apply(this,arguments)}class iu extends L.ZR{constructor(g,m,w,S){var P;super(m.code,m.message),this.operationType=w,this.user=S,Object.setPrototypeOf(this,iu.prototype),this.customData={appName:g.name,tenantId:null!==(P=g.tenantId)&&void 0!==P?P:void 0,_serverResponse:m.customData._serverResponse,operationType:w}}static _fromErrorAndOperation(g,m,w,S){return new iu(g,m,w,S)}}function su(v,g,m,w){return("reauthenticate"===g?m._getReauthenticationResolver(v):m._getIdTokenResponse(v)).catch(P=>{throw"auth/multi-factor-auth-required"===P.code?iu._fromErrorAndOperation(v,P,g,w):P})}function rl(v){return new Set(v.map(({providerId:g})=>g).filter(g=>!!g))}function ss(v,g){return il.apply(this,arguments)}function il(){return(il=(0,h.Z)(function*(v,g){const m=(0,L.m9)(v);yield Ns(!0,m,g);const{providerUserInfo:w}=yield Lr(m.auth,{idToken:yield m.getIdToken(),deleteProvider:[g]}),S=rl(w||[]);return m.providerData=m.providerData.filter(P=>S.has(P.providerId)),S.has("phone")||(m.phoneNumber=null),yield m.auth._persistUserIfCurrent(m),m})).apply(this,arguments)}function yn(v,g){return ya.apply(this,arguments)}function ya(){return(ya=(0,h.Z)(function*(v,g,m=!1){const w=yield it(v,g._linkToIdToken(v.auth,yield v.getIdToken()),m);return Mr._forOperation(v,"link",w)})).apply(this,arguments)}function Ns(v,g,m){return hn.apply(this,arguments)}function hn(){return(hn=(0,h.Z)(function*(v,g,m){yield On(g);const S=!1===v?"provider-already-linked":"no-such-provider";ne(rl(g.providerData).has(m)===v,g.auth,S)})).apply(this,arguments)}function ou(v,g){return _a.apply(this,arguments)}function _a(){return(_a=(0,h.Z)(function*(v,g,m=!1){const{auth:w}=v,S="reauthenticate";try{const P=yield it(v,su(w,S,g,v),m);ne(P.idToken,w,"internal-error");const te=Zt(P.idToken);ne(te,w,"internal-error");const{sub:Ne}=te;return ne(v.uid===Ne,w,"user-mismatch"),Mr._forOperation(v,S,P)}catch(P){throw"auth/user-not-found"===(null==P?void 0:P.code)&&ze(w,"user-mismatch"),P}})).apply(this,arguments)}function ro(v,g){return cr.apply(this,arguments)}function cr(){return(cr=(0,h.Z)(function*(v,g,m=!1){const w="signIn",S=yield su(v,w,g),P=yield Mr._fromIdTokenResponse(v,w,S);return m||(yield v._updateCurrentUser(P.user)),P})).apply(this,arguments)}function au(v,g){return kn.apply(this,arguments)}function kn(){return(kn=(0,h.Z)(function*(v,g){return ro(je(v),g)})).apply(this,arguments)}function os(v,g){return dr.apply(this,arguments)}function dr(){return(dr=(0,h.Z)(function*(v,g){const m=(0,L.m9)(v);return yield Ns(!1,m,g.providerId),yn(m,g)})).apply(this,arguments)}function Po(v,g){return Li.apply(this,arguments)}function Li(){return(Li=(0,h.Z)(function*(v,g){return ou((0,L.m9)(v),g)})).apply(this,arguments)}function sl(v,g){return Xr.apply(this,arguments)}function Xr(){return(Xr=(0,h.Z)(function*(v,g){return Cn(v,"POST","/v1/accounts:signInWithCustomToken",jt(v,g))})).apply(this,arguments)}function Rs(v,g){return Os.apply(this,arguments)}function Os(){return(Os=(0,h.Z)(function*(v,g){const m=je(v),w=yield sl(m,{token:g,returnSecureToken:!0}),S=yield Mr._fromIdTokenResponse(m,"signIn",w);return yield m._updateCurrentUser(S.user),S})).apply(this,arguments)}class vt{constructor(g,m){this.factorId=g,this.uid=m.mfaEnrollmentId,this.enrollmentTime=new Date(m.enrolledAt).toUTCString(),this.displayName=m.displayName}static _fromServerResponse(g,m){return"phoneInfo"in m?io._fromServerResponse(g,m):ze(g,"internal-error")}}class io extends vt{constructor(g){super("phone",g),this.phoneNumber=g.phoneInfo}static _fromServerResponse(g,m){return new io(m)}}function uu(v,g,m){var w;ne((null===(w=m.url)||void 0===w?void 0:w.length)>0,v,"invalid-continue-uri"),ne(void 0===m.dynamicLinkDomain||m.dynamicLinkDomain.length>0,v,"invalid-dynamic-link-domain"),g.continueUrl=m.url,g.dynamicLinkDomain=m.dynamicLinkDomain,g.canHandleCodeInApp=m.handleCodeInApp,m.iOS&&(ne(m.iOS.bundleId.length>0,v,"missing-ios-bundle-id"),g.iOSBundleId=m.iOS.bundleId),m.android&&(ne(m.android.packageName.length>0,v,"missing-android-pkg-name"),g.androidInstallApp=m.android.installApp,g.androidMinimumVersionCode=m.android.minimumVersion,g.androidPackageName=m.android.packageName)}function Sc(v,g,m){return va.apply(this,arguments)}function va(){return(va=(0,h.Z)(function*(v,g,m){const w=(0,L.m9)(v),S={requestType:"PASSWORD_RESET",email:g};m&&uu(w,S,m),yield yc(w,S)})).apply(this,arguments)}function Mc(v,g,m){return ko.apply(this,arguments)}function ko(){return(ko=(0,h.Z)(function*(v,g,m){yield Xs((0,L.m9)(v),{oobCode:g,newPassword:m})})).apply(this,arguments)}function ph(v,g){return Ps.apply(this,arguments)}function Ps(){return(Ps=(0,h.Z)(function*(v,g){yield Mo((0,L.m9)(v),{oobCode:g})})).apply(this,arguments)}function Re(v,g){return qt.apply(this,arguments)}function qt(){return(qt=(0,h.Z)(function*(v,g){const m=(0,L.m9)(v),w=yield Xs(m,{oobCode:g}),S=w.requestType;switch(ne(S,m,"internal-error"),S){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":ne(w.newEmail,m,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":ne(w.mfaInfo,m,"internal-error");default:ne(w.email,m,"internal-error")}let P=null;return w.mfaInfo&&(P=vt._fromServerResponse(je(m),w.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===w.requestType?w.newEmail:w.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===w.requestType?w.email:w.newEmail)||null,multiFactorInfo:P},operation:S}})).apply(this,arguments)}function Ea(v,g){return wn.apply(this,arguments)}function wn(){return(wn=(0,h.Z)(function*(v,g){const{data:m}=yield Re((0,L.m9)(v),g);return m.email})).apply(this,arguments)}function xc(v,g,m){return as.apply(this,arguments)}function as(){return(as=(0,h.Z)(function*(v,g,m){const w=je(v),S=yield Tc(w,{returnSecureToken:!0,email:g,password:m}),P=yield Mr._fromIdTokenResponse(w,"signIn",S);return yield w._updateCurrentUser(P.user),P})).apply(this,arguments)}function Vi(v,g,m){return au((0,L.m9)(v),pa.credential(g,m))}function ol(v,g,m){return wa.apply(this,arguments)}function wa(){return(wa=(0,h.Z)(function*(v,g,m){const w=(0,L.m9)(v),S={requestType:"EMAIL_SIGNIN",email:g};ne(m.handleCodeInApp,w,"argument-error"),m&&uu(w,S,m),yield bi(w,S)})).apply(this,arguments)}function gh(v,g){const m=rs.parseLink(g);return"EMAIL_SIGNIN"===(null==m?void 0:m.operation)}function Nc(v,g,m){return Rc.apply(this,arguments)}function Rc(){return(Rc=(0,h.Z)(function*(v,g,m){const w=(0,L.m9)(v),S=pa.credentialWithLink(g,m||ce());return ne(S._tenantId===(w.tenantId||null),w,"tenant-id-mismatch"),au(w,S)})).apply(this,arguments)}function so(v,g){return hr.apply(this,arguments)}function hr(){return(hr=(0,h.Z)(function*(v,g){return en(v,"POST","/v1/accounts:createAuthUri",jt(v,g))})).apply(this,arguments)}function Ui(v,g){return Fo.apply(this,arguments)}function Fo(){return(Fo=(0,h.Z)(function*(v,g){const w={identifier:g,continueUri:Ve()?ce():"http://localhost"},{signinMethods:S}=yield so((0,L.m9)(v),w);return S||[]})).apply(this,arguments)}function Lo(v,g){return ei.apply(this,arguments)}function ei(){return(ei=(0,h.Z)(function*(v,g){const m=(0,L.m9)(v),S={requestType:"VERIFY_EMAIL",idToken:yield v.getIdToken()};g&&uu(m.auth,S,g);const{email:P}=yield lr(m.auth,S);P!==v.email&&(yield v.reload())})).apply(this,arguments)}function mh(v,g,m){return Vo.apply(this,arguments)}function Vo(){return(Vo=(0,h.Z)(function*(v,g,m){const w=(0,L.m9)(v),P={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield v.getIdToken(),newEmail:g};m&&uu(w.auth,P,m);const{email:te}=yield _c(w.auth,P);te!==v.email&&(yield v.reload())})).apply(this,arguments)}function Oc(v,g){return ba.apply(this,arguments)}function ba(){return(ba=(0,h.Z)(function*(v,g){return en(v,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function lu(v,g){return Uo.apply(this,arguments)}function Uo(){return(Uo=(0,h.Z)(function*(v,{displayName:g,photoURL:m}){if(void 0===g&&void 0===m)return;const w=(0,L.m9)(v),P={idToken:yield w.getIdToken(),displayName:g,photoUrl:m,returnSecureToken:!0},te=yield it(w,Oc(w.auth,P));w.displayName=te.displayName||null,w.photoURL=te.photoUrl||null;const Ne=w.providerData.find(({providerId:et})=>"password"===et);Ne&&(Ne.displayName=w.displayName,Ne.photoURL=w.photoURL),yield w._updateTokensIfNecessary(te)})).apply(this,arguments)}function Pc(v,g){return al((0,L.m9)(v),g,null)}function kc(v,g){return al((0,L.m9)(v),null,g)}function al(v,g,m){return Ia.apply(this,arguments)}function Ia(){return(Ia=(0,h.Z)(function*(v,g,m){const{auth:w}=v,P={idToken:yield v.getIdToken(),returnSecureToken:!0};g&&(P.email=g),m&&(P.password=m);const te=yield it(v,kt(w,P));yield v._updateTokensIfNecessary(te,!0)})).apply(this,arguments)}class oo{constructor(g,m,w={}){this.isNewUser=g,this.providerId=m,this.profile=w}}class Fc extends oo{constructor(g,m,w,S){super(g,m,w),this.username=S}}class yh extends oo{constructor(g,m){super(g,"facebook.com",m)}}class cu extends Fc{constructor(g,m){super(g,"github.com",m,"string"==typeof(null==m?void 0:m.login)?null==m?void 0:m.login:null)}}class ti extends oo{constructor(g,m){super(g,"google.com",m)}}class _h extends Fc{constructor(g,m,w){super(g,"twitter.com",m,w)}}function ul(v){const{user:g,_tokenResponse:m}=v;return g.isAnonymous&&!m?{providerId:null,isNewUser:!1,profile:null}:function Da(v){var g,m;if(!v)return null;const{providerId:w}=v,S=v.rawUserInfo?JSON.parse(v.rawUserInfo):{},P=v.isNewUser||"identitytoolkit#SignupNewUserResponse"===v.kind;if(!w&&(null==v?void 0:v.idToken)){const te=null===(m=null===(g=Zt(v.idToken))||void 0===g?void 0:g.firebase)||void 0===m?void 0:m.sign_in_provider;if(te)return new oo(P,"anonymous"!==te&&"custom"!==te?te:null)}if(!w)return null;switch(w){case"facebook.com":return new yh(P,S);case"github.com":return new cu(P,S);case"google.com":return new ti(P,S);case"twitter.com":return new _h(P,S,v.screenName||null);case"custom":case"anonymous":return new oo(P,null);default:return new oo(P,w,S)}}(m)}class us{constructor(g,m){this.type=g,this.credential=m}static _fromIdtoken(g){return new us("enroll",g)}static _fromMfaPendingCredential(g){return new us("signin",g)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(g){var m,w;if(null==g?void 0:g.multiFactorSession){if(null===(m=g.multiFactorSession)||void 0===m?void 0:m.pendingCredential)return us._fromMfaPendingCredential(g.multiFactorSession.pendingCredential);if(null===(w=g.multiFactorSession)||void 0===w?void 0:w.idToken)return us._fromIdtoken(g.multiFactorSession.idToken)}return null}}class Ta{constructor(g,m,w){this.session=g,this.hints=m,this.signInResolver=w}static _fromError(g,m){const w=je(g),S=m.customData._serverResponse,P=(S.mfaInfo||[]).map(Ne=>vt._fromServerResponse(w,Ne));ne(S.mfaPendingCredential,w,"internal-error");const te=us._fromMfaPendingCredential(S.mfaPendingCredential);return new Ta(te,P,function(){var Ne=(0,h.Z)(function*(et){const gt=yield et._process(w,te);delete S.mfaInfo,delete S.mfaPendingCredential;const Nt=Object.assign(Object.assign({},S),{idToken:gt.idToken,refreshToken:gt.refreshToken});switch(m.operationType){case"signIn":const Vn=yield Mr._fromIdTokenResponse(w,m.operationType,Nt);return yield w._updateCurrentUser(Vn.user),Vn;case"reauthenticate":return ne(m.user,w,"internal-error"),Mr._forOperation(m.user,m.operationType,Nt);default:ze(w,"internal-error")}});return function(et){return Ne.apply(this,arguments)}}())}resolveSignIn(g){var m=this;return(0,h.Z)(function*(){return m.signInResolver(g)})()}}function Ca(v,g){var m;const w=(0,L.m9)(v),S=g;return ne(g.customData.operationType,w,"argument-error"),ne(null===(m=S.customData._serverResponse)||void 0===m?void 0:m.mfaPendingCredential,w,"argument-error"),Ta._fromError(w,S)}function Qn(v,g){return en(v,"POST","/v2/accounts/mfaEnrollment:start",jt(v,g))}class ls{constructor(g){this.user=g,this.enrolledFactors=[],g._onReload(m=>{m.mfaInfo&&(this.enrolledFactors=m.mfaInfo.map(w=>vt._fromServerResponse(g.auth,w)))})}static _fromUser(g){return new ls(g)}getSession(){var g=this;return(0,h.Z)(function*(){return us._fromIdtoken(yield g.user.getIdToken())})()}enroll(g,m){var w=this;return(0,h.Z)(function*(){const S=g,P=yield w.getSession(),te=yield it(w.user,S._process(w.user.auth,P,m));return yield w.user._updateTokensIfNecessary(te),w.user.reload()})()}unenroll(g){var m=this;return(0,h.Z)(function*(){const w="string"==typeof g?g:g.uid,S=yield m.user.getIdToken(),P=yield it(m.user,function Mp(v,g){return en(v,"POST","/v2/accounts/mfaEnrollment:withdraw",jt(v,g))}(m.user.auth,{idToken:S,mfaEnrollmentId:w}));m.enrolledFactors=m.enrolledFactors.filter(({uid:te})=>te!==w),yield m.user._updateTokensIfNecessary(P);try{yield m.user.reload()}catch(te){if("auth/user-token-expired"!==te.code)throw te}})()}}const Bo=new WeakMap;function Bc(v){const g=(0,L.m9)(v);return Bo.has(g)||Bo.set(g,ls._fromUser(g)),Bo.get(g)}const Aa="__sak";class ks{constructor(g,m){this.storageRetriever=g,this.type=m}_isAvailable(){try{return this.storage?(this.storage.setItem(Aa,"1"),this.storage.removeItem(Aa),Promise.resolve(!0)):Promise.resolve(!1)}catch(g){return Promise.resolve(!1)}}_set(g,m){return this.storage.setItem(g,JSON.stringify(m)),Promise.resolve()}_get(g){const m=this.storage.getItem(g);return Promise.resolve(m?JSON.parse(m):null)}_remove(g){return this.storage.removeItem(g),Promise.resolve()}get storage(){return this.storageRetriever()}}const ut=(()=>{class v extends ks{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(m,w)=>this.onStorageEvent(m,w),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function du(){const v=(0,L.z$)();return z(v)||$t(v)}()&&function Fi(){try{return!(!window||window===window.top)}catch(v){return!1}}(),this.fallbackToPolling=Ar(),this._shouldAllowMigration=!0}forAllChangedKeys(m){for(const w of Object.keys(this.listeners)){const S=this.storage.getItem(w),P=this.localCache[w];S!==P&&m(w,P,S)}}onStorageEvent(m,w=!1){if(!m.key)return void this.forAllChangedKeys((Ne,et,gt)=>{this.notifyListeners(Ne,gt)});const S=m.key;if(w?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const Ne=this.storage.getItem(S);if(m.newValue!==Ne)null!==m.newValue?this.storage.setItem(S,m.newValue):this.storage.removeItem(S);else if(this.localCache[S]===m.newValue&&!w)return}const P=()=>{const Ne=this.storage.getItem(S);!w&&this.localCache[S]===Ne||this.notifyListeners(S,Ne)},te=this.storage.getItem(S);!function Ht(){return(0,L.w1)()&&10===document.documentMode}()||te===m.newValue||m.newValue===m.oldValue?P():setTimeout(P,10)}notifyListeners(m,w){this.localCache[m]=w;const S=this.listeners[m];if(S)for(const P of Array.from(S))P(w&&JSON.parse(w))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((m,w,S)=>{this.onStorageEvent(new StorageEvent("storage",{key:m,oldValue:w,newValue:S}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(m,w){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[m]||(this.listeners[m]=new Set,this.localCache[m]=this.storage.getItem(m)),this.listeners[m].add(w)}_removeListener(m,w){this.listeners[m]&&(this.listeners[m].delete(w),0===this.listeners[m].size&&delete this.listeners[m]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(m,w){var S=()=>super._set,P=this;return(0,h.Z)(function*(){yield S().call(P,m,w),P.localCache[m]=JSON.stringify(w)})()}_get(m){var w=()=>super._get,S=this;return(0,h.Z)(function*(){const P=yield w().call(S,m);return S.localCache[m]=JSON.stringify(P),P})()}_remove(m){var w=()=>super._remove,S=this;return(0,h.Z)(function*(){yield w().call(S,m),delete S.localCache[m]})()}}return v.type="LOCAL",v})(),Br=(()=>{class v extends ks{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(m,w){}_removeListener(m,w){}}return v.type="SESSION",v})();let Sa=(()=>{class v{constructor(m){this.eventTarget=m,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(m){const w=this.receivers.find(P=>P.isListeningto(m));if(w)return w;const S=new v(m);return this.receivers.push(S),S}isListeningto(m){return this.eventTarget===m}handleEvent(m){var w=this;return(0,h.Z)(function*(){const S=m,{eventId:P,eventType:te,data:Ne}=S.data,et=w.handlersMap[te];if(!(null==et?void 0:et.size))return;S.ports[0].postMessage({status:"ack",eventId:P,eventType:te});const gt=Array.from(et).map(function(){var Vn=(0,h.Z)(function*(Ki){return Ki(S.origin,Ne)});return function(Ki){return Vn.apply(this,arguments)}}()),Nt=yield function Di(v){return Promise.all(v.map(function(){var g=(0,h.Z)(function*(m){try{return{fulfilled:!0,value:yield m}}catch(w){return{fulfilled:!1,reason:w}}});return function(m){return g.apply(this,arguments)}}()))}(gt);S.ports[0].postMessage({status:"done",eventId:P,eventType:te,response:Nt})})()}_subscribe(m,w){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[m]||(this.handlersMap[m]=new Set),this.handlersMap[m].add(w)}_unsubscribe(m,w){this.handlersMap[m]&&w&&this.handlersMap[m].delete(w),(!w||0===this.handlersMap[m].size)&&delete this.handlersMap[m],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return v.receivers=[],v})();function jo(v="",g=10){let m="";for(let w=0;w<g;w++)m+=Math.floor(10*Math.random());return v+m}class jc{constructor(g){this.target=g,this.handlers=new Set}removeMessageHandler(g){g.messageChannel&&(g.messageChannel.port1.removeEventListener("message",g.onMessage),g.messageChannel.port1.close()),this.handlers.delete(g)}_send(g,m,w=50){var S=this;return(0,h.Z)(function*(){const P="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!P)throw new Error("connection_unavailable");let te,Ne;return new Promise((et,gt)=>{const Nt=jo("",20);P.port1.start();const Vn=setTimeout(()=>{gt(new Error("unsupported_event"))},w);Ne={messageChannel:P,onMessage(Ki){const zs=Ki;if(zs.data.eventId===Nt)switch(zs.data.status){case"ack":clearTimeout(Vn),te=setTimeout(()=>{gt(new Error("timeout"))},3e3);break;case"done":clearTimeout(te),et(zs.data.response);break;default:clearTimeout(Vn),clearTimeout(te),gt(new Error("invalid_response"))}}},S.handlers.add(Ne),P.port1.addEventListener("message",Ne.onMessage),S.target.postMessage({eventType:g,eventId:Nt,data:m},[P.port2])}).finally(()=>{Ne&&S.removeMessageHandler(Ne)})})()}}function _n(){return window}function Bi(){return void 0!==_n().WorkerGlobalScope&&"function"==typeof _n().importScripts}function St(){return(St=(0,h.Z)(function*(){if(!(null==navigator?void 0:navigator.serviceWorker))return null;try{return(yield navigator.serviceWorker.ready).active}catch(v){return null}})).apply(this,arguments)}const fu="firebaseLocalStorageDb",Kn="firebaseLocalStorage",$o="fbase_key";class cs{constructor(g){this.request=g}toPromise(){return new Promise((g,m)=>{this.request.addEventListener("success",()=>{g(this.request.result)}),this.request.addEventListener("error",()=>{m(this.request.error)})})}}function Ho(v,g){return v.transaction([Kn],g?"readwrite":"readonly").objectStore(Kn)}function ds(){const v=indexedDB.open(fu,1);return new Promise((g,m)=>{v.addEventListener("error",()=>{m(v.error)}),v.addEventListener("upgradeneeded",()=>{const w=v.result;try{w.createObjectStore(Kn,{keyPath:$o})}catch(S){m(S)}}),v.addEventListener("success",(0,h.Z)(function*(){const w=v.result;w.objectStoreNames.contains(Kn)?g(w):(w.close(),yield function ni(){const v=indexedDB.deleteDatabase(fu);return new cs(v).toPromise()}(),g(yield ds()))}))})}function Go(v,g,m){return uo.apply(this,arguments)}function uo(){return(uo=(0,h.Z)(function*(v,g,m){const w=Ho(v,!0).put({[$o]:g,value:m});return new cs(w).toPromise()})).apply(this,arguments)}function Ls(){return(Ls=(0,h.Z)(function*(v,g){const m=Ho(v,!1).get(g),w=yield new cs(m).toPromise();return void 0===w?null:w.value})).apply(this,arguments)}function lo(v,g){const m=Ho(v,!0).delete(g);return new cs(m).toPromise()}const Ti=(()=>{class v{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var m=this;return(0,h.Z)(function*(){return m.db||(m.db=yield ds()),m.db})()}_withRetries(m){var w=this;return(0,h.Z)(function*(){let S=0;for(;;)try{const P=yield w._openDb();return yield m(P)}catch(P){if(S++>3)throw P;w.db&&(w.db.close(),w.db=void 0)}})()}initializeServiceWorkerMessaging(){var m=this;return(0,h.Z)(function*(){return Bi()?m.initializeReceiver():m.initializeSender()})()}initializeReceiver(){var m=this;return(0,h.Z)(function*(){m.receiver=Sa._getInstance(function Hc(){return Bi()?self:null}()),m.receiver._subscribe("keyChanged",function(){var w=(0,h.Z)(function*(S,P){return{keyProcessed:(yield m._poll()).includes(P.key)}});return function(S,P){return w.apply(this,arguments)}}()),m.receiver._subscribe("ping",function(){var w=(0,h.Z)(function*(S,P){return["keyChanged"]});return function(S,P){return w.apply(this,arguments)}}())})()}initializeSender(){var m=this;return(0,h.Z)(function*(){var w,S;if(m.activeServiceWorker=yield function Fs(){return St.apply(this,arguments)}(),!m.activeServiceWorker)return;m.sender=new jc(m.activeServiceWorker);const P=yield m.sender._send("ping",{},800);!P||(null===(w=P[0])||void 0===w?void 0:w.fulfilled)&&(null===(S=P[0])||void 0===S?void 0:S.value.includes("keyChanged"))&&(m.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(m){var w=this;return(0,h.Z)(function*(){if(w.sender&&w.activeServiceWorker&&function Np(){var v;return(null===(v=null==navigator?void 0:navigator.serviceWorker)||void 0===v?void 0:v.controller)||null}()===w.activeServiceWorker)try{yield w.sender._send("keyChanged",{key:m},w.serviceWorkerReceiverAvailable?800:50)}catch(S){}})()}_isAvailable(){return(0,h.Z)(function*(){try{if(!indexedDB)return!1;const m=yield ds();return yield Go(m,Aa,"1"),yield lo(m,Aa),!0}catch(m){}return!1})()}_withPendingWrite(m){var w=this;return(0,h.Z)(function*(){w.pendingWrites++;try{yield m()}finally{w.pendingWrites--}})()}_set(m,w){var S=this;return(0,h.Z)(function*(){return S._withPendingWrite((0,h.Z)(function*(){return yield S._withRetries(P=>Go(P,m,w)),S.localCache[m]=w,S.notifyServiceWorker(m)}))})()}_get(m){var w=this;return(0,h.Z)(function*(){const S=yield w._withRetries(P=>function zo(v,g){return Ls.apply(this,arguments)}(P,m));return w.localCache[m]=S,S})()}_remove(m){var w=this;return(0,h.Z)(function*(){return w._withPendingWrite((0,h.Z)(function*(){return yield w._withRetries(S=>lo(S,m)),delete w.localCache[m],w.notifyServiceWorker(m)}))})()}_poll(){var m=this;return(0,h.Z)(function*(){const w=yield m._withRetries(te=>{const Ne=Ho(te,!1).getAll();return new cs(Ne).toPromise()});if(!w)return[];if(0!==m.pendingWrites)return[];const S=[],P=new Set;for(const{fbase_key:te,value:Ne}of w)P.add(te),JSON.stringify(m.localCache[te])!==JSON.stringify(Ne)&&(m.notifyListeners(te,Ne),S.push(te));for(const te of Object.keys(m.localCache))m.localCache[te]&&!P.has(te)&&(m.notifyListeners(te,null),S.push(te));return S})()}notifyListeners(m,w){this.localCache[m]=w;const S=this.listeners[m];if(S)for(const P of Array.from(S))P(w)}startPolling(){var m=this;this.stopPolling(),this.pollTimer=setInterval((0,h.Z)(function*(){return m._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(m,w){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[m]||(this.listeners[m]=new Set,this._get(m)),this.listeners[m].add(w)}_removeListener(m,w){this.listeners[m]&&(this.listeners[m].delete(w),0===this.listeners[m].size&&delete this.listeners[m]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return v.type="LOCAL",v})();function zc(v,g){return en(v,"POST","/v2/accounts/mfaSignIn:start",jt(v,g))}function ji(){return(ji=(0,h.Z)(function*(v){return(yield en(v,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Vs(v){return new Promise((g,m)=>{const w=document.createElement("script");w.setAttribute("src",v),w.onload=g,w.onerror=S=>{const P=Me("internal-error");P.customData=S,m(P)},w.type="text/javascript",w.charset="UTF-8",function wr(){var v,g;return null!==(g=null===(v=document.getElementsByTagName("head"))||void 0===v?void 0:v[0])&&void 0!==g?g:document}().appendChild(w)})}function co(v){return`__${v}${Math.floor(1e6*Math.random())}`}const Zn=1e12;class Bs{constructor(g){this.auth=g,this.counter=Zn,this._widgets=new Map}render(g,m){const w=this.counter;return this._widgets.set(w,new Jn(g,this.auth.name,m||{})),this.counter++,w}reset(g){var m;const w=g||Zn;null===(m=this._widgets.get(w))||void 0===m||m.delete(),this._widgets.delete(w)}getResponse(g){var m;return(null===(m=this._widgets.get(g||Zn))||void 0===m?void 0:m.getResponse())||""}execute(g){var m=this;return(0,h.Z)(function*(){var w;return null===(w=m._widgets.get(g||Zn))||void 0===w||w.execute(),""})()}}class Jn{constructor(g,m,w){this.params=w,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const S="string"==typeof g?document.getElementById(g):g;ne(S,"argument-error",{appName:m}),this.container=S,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function Hi(v){const g=[],m="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let w=0;w<v;w++)g.push(m.charAt(Math.floor(Math.random()*m.length)));return g.join("")}(50);const{callback:g,"expired-callback":m}=this.params;if(g)try{g(this.responseToken)}catch(w){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,m)try{m()}catch(w){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Wo=co("rcb"),Eh=new Ye(3e4,6e4);class wh{constructor(){this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!_n().grecaptcha}load(g,m=""){return ne(function Gm(v){return v.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(v)}(m),g,"argument-error"),this.shouldResolveImmediately(m)?Promise.resolve(_n().grecaptcha):new Promise((w,S)=>{const P=_n().setTimeout(()=>{S(Me(g,"network-request-failed"))},Eh.get());_n()[Wo]=()=>{_n().clearTimeout(P),delete _n()[Wo];const Ne=_n().grecaptcha;if(!Ne)return void S(Me(g,"internal-error"));const et=Ne.render;Ne.render=(gt,Nt)=>{const Vn=et(gt,Nt);return this.counter++,Vn},this.hostLanguage=m,w(Ne)},Vs(`https://www.google.com/recaptcha/api.js??${(0,L.xO)({onload:Wo,render:"explicit",hl:m})}`).catch(()=>{clearTimeout(P),S(Me(g,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(g){return!!_n().grecaptcha&&(g===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class qo{load(g){return(0,h.Z)(function*(){return new Bs(g)})()}clearedOneInstance(){}}const jr="recaptcha",bh={theme:"light",type:"image"};class js{constructor(g,m=Object.assign({},bh),w){this.parameters=m,this.type=jr,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=je(w),this.isInvisible="invisible"===this.parameters.size,ne("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const S="string"==typeof g?document.getElementById(g):g;ne(S,this.auth,"argument-error"),this.container=S,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new qo:new wh,this.validateStartingState()}verify(){var g=this;return(0,h.Z)(function*(){g.assertNotDestroyed();const m=yield g.render(),w=g.getAssertedRecaptcha();return w.getResponse(m)||new Promise(P=>{const te=Ne=>{!Ne||(g.tokenChangeListeners.delete(te),P(Ne))};g.tokenChangeListeners.add(te),g.isInvisible&&w.execute(m)})})()}render(){try{this.assertNotDestroyed()}catch(g){return Promise.reject(g)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(g=>{throw this.renderPromise=null,g})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(g=>{this.container.removeChild(g)})}validateStartingState(){ne(!this.parameters.sitekey,this.auth,"argument-error"),ne(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),ne("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(g){return m=>{if(this.tokenChangeListeners.forEach(w=>w(m)),"function"==typeof g)g(m);else if("string"==typeof g){const w=_n()[g];"function"==typeof w&&w(m)}}}assertNotDestroyed(){ne(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var g=this;return(0,h.Z)(function*(){if(yield g.init(),!g.widgetId){let m=g.container;if(!g.isInvisible){const w=document.createElement("div");m.appendChild(w),m=w}g.widgetId=g.getAssertedRecaptcha().render(m,g.parameters)}return g.widgetId})()}init(){var g=this;return(0,h.Z)(function*(){ne(Ve()&&!Bi(),g.auth,"internal-error"),yield function Wc(){let v=null;return new Promise(g=>{"complete"!==document.readyState?(v=()=>g(),window.addEventListener("load",v)):g()}).catch(g=>{throw v&&window.removeEventListener("load",v),g})}(),g.recaptcha=yield g._recaptchaLoader.load(g.auth,g.auth.languageCode||void 0);const m=yield function cl(v){return ji.apply(this,arguments)}(g.auth);ne(m,g.auth,"internal-error"),g.parameters.sitekey=m})()}getAssertedRecaptcha(){return ne(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Ci{constructor(g,m){this.verificationId=g,this.onConfirmation=m}confirm(g){const m=Oo._fromVerification(this.verificationId,g);return this.onConfirmation(m)}}function Ih(v,g,m){return Ln.apply(this,arguments)}function Ln(){return(Ln=(0,h.Z)(function*(v,g,m){const w=je(v),S=yield xr(w,g,(0,L.m9)(m));return new Ci(S,P=>au(w,P))})).apply(this,arguments)}function dl(v,g,m){return Ko.apply(this,arguments)}function Ko(){return(Ko=(0,h.Z)(function*(v,g,m){const w=(0,L.m9)(v);yield Ns(!1,w,"phone");const S=yield xr(w.auth,g,(0,L.m9)(m));return new Ci(S,P=>os(w,P))})).apply(this,arguments)}function Rp(v,g,m){return gu.apply(this,arguments)}function gu(){return(gu=(0,h.Z)(function*(v,g,m){const w=(0,L.m9)(v),S=yield xr(w.auth,g,(0,L.m9)(m));return new Ci(S,P=>Po(w,P))})).apply(this,arguments)}function xr(v,g,m){return $r.apply(this,arguments)}function $r(){return($r=(0,h.Z)(function*(v,g,m){var w;const S=yield m.verify();try{let P;if(ne("string"==typeof S,v,"argument-error"),ne(m.type===jr,v,"argument-error"),P="string"==typeof g?{phoneNumber:g}:g,"session"in P){const te=P.session;if("phoneNumber"in P)return ne("enroll"===te.type,v,"internal-error"),(yield Qn(v,{idToken:te.credential,phoneEnrollmentInfo:{phoneNumber:P.phoneNumber,recaptchaToken:S}})).phoneSessionInfo.sessionInfo;{ne("signin"===te.type,v,"internal-error");const Ne=(null===(w=P.multiFactorHint)||void 0===w?void 0:w.uid)||P.multiFactorUid;return ne(Ne,v,"missing-multi-factor-info"),(yield zc(v,{mfaPendingCredential:te.credential,mfaEnrollmentId:Ne,phoneSignInInfo:{recaptchaToken:S}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:te}=yield bp(v,{phoneNumber:P.phoneNumber,recaptchaToken:S});return te}}finally{m._reset()}})).apply(this,arguments)}function mu(v,g){return Zo.apply(this,arguments)}function Zo(){return(Zo=(0,h.Z)(function*(v,g){yield yn((0,L.m9)(v),g)})).apply(this,arguments)}let ho=(()=>{class v{constructor(m){this.providerId=v.PROVIDER_ID,this.auth=je(m)}verifyPhoneNumber(m,w){return xr(this.auth,m,(0,L.m9)(w))}static credential(m,w){return Oo._fromVerification(m,w)}static credentialFromResult(m){return v.credentialFromTaggedObject(m)}static credentialFromError(m){return v.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{phoneNumber:w,temporaryProof:S}=m;return w&&S?Oo._fromTokenResponse(w,S):null}}return v.PROVIDER_ID="phone",v.PHONE_SIGN_IN_METHOD="phone",v})();function Gi(v,g){return g?re(g):(ne(v._popupRedirectResolver,v,"argument-error"),v._popupRedirectResolver)}class xa extends an{constructor(g){super("custom","custom"),this.params=g}_getIdTokenResponse(g){return Wn(g,this._buildIdpRequest())}_linkToIdToken(g,m){return Wn(g,this._buildIdpRequest(m))}_getReauthenticationResolver(g){return Wn(g,this._buildIdpRequest())}_buildIdpRequest(g){const m={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return g&&(m.idToken=g),m}}function yu(v){return ro(v.auth,new xa(v),v.bypassAuthState)}function Ut(v){const{auth:g,user:m}=v;return ne(m,g,"internal-error"),ou(m,new xa(v),v.bypassAuthState)}function qc(v){return Ai.apply(this,arguments)}function Ai(){return(Ai=(0,h.Z)(function*(v){const{auth:g,user:m}=v;return ne(m,g,"internal-error"),yn(m,new xa(v),v.bypassAuthState)})).apply(this,arguments)}class Hr{constructor(g,m,w,S,P=!1){this.auth=g,this.resolver=w,this.user=S,this.bypassAuthState=P,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(m)?m:[m]}execute(){var g=this;return new Promise(function(){var m=(0,h.Z)(function*(w,S){g.pendingPromise={resolve:w,reject:S};try{g.eventManager=yield g.resolver._initialize(g.auth),yield g.onExecution(),g.eventManager.registerConsumer(g)}catch(P){g.reject(P)}});return function(w,S){return m.apply(this,arguments)}}())}onAuthEvent(g){var m=this;return(0,h.Z)(function*(){const{urlResponse:w,sessionId:S,postBody:P,tenantId:te,error:Ne,type:et}=g;if(Ne)return void m.reject(Ne);const gt={auth:m.auth,requestUri:w,sessionId:S,tenantId:te||void 0,postBody:P||void 0,user:m.user,bypassAuthState:m.bypassAuthState};try{m.resolve(yield m.getIdpTask(et)(gt))}catch(Nt){m.reject(Nt)}})()}onError(g){this.reject(g)}getIdpTask(g){switch(g){case"signInViaPopup":case"signInViaRedirect":return yu;case"linkViaPopup":case"linkViaRedirect":return qc;case"reauthViaPopup":case"reauthViaRedirect":return Ut;default:ze(this.auth,"internal-error")}}resolve(g){Ie(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(g),this.unregisterAndCleanUp()}reject(g){Ie(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(g),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const _u=new Ye(2e3,1e4);function Na(v,g,m){return Kc.apply(this,arguments)}function Kc(){return(Kc=(0,h.Z)(function*(v,g,m){const w=je(v);be(v,g,Ms);const S=Gi(w,m);return new Eu(w,"signInViaPopup",g,S).executeNotNull()})).apply(this,arguments)}function Zc(v,g,m){return pr.apply(this,arguments)}function pr(){return(pr=(0,h.Z)(function*(v,g,m){const w=(0,L.m9)(v);be(w.auth,g,Ms);const S=Gi(w.auth,m);return new Eu(w.auth,"reauthViaPopup",g,S,w).executeNotNull()})).apply(this,arguments)}function hl(v,g,m){return vu.apply(this,arguments)}function vu(){return(vu=(0,h.Z)(function*(v,g,m){const w=(0,L.m9)(v);be(w.auth,g,Ms);const S=Gi(w.auth,m);return new Eu(w.auth,"linkViaPopup",g,S,w).executeNotNull()})).apply(this,arguments)}let Eu=(()=>{class v extends Hr{constructor(m,w,S,P,te){super(m,w,P,te),this.provider=S,this.authWindow=null,this.pollId=null,v.currentPopupAction&&v.currentPopupAction.cancel(),v.currentPopupAction=this}executeNotNull(){var m=this;return(0,h.Z)(function*(){const w=yield m.execute();return ne(w,m.auth,"internal-error"),w})()}onExecution(){var m=this;return(0,h.Z)(function*(){Ie(1===m.filter.length,"Popup operations only handle one event");const w=jo();m.authWindow=yield m.resolver._openPopup(m.auth,m.provider,m.filter[0],w),m.authWindow.associatedEvent=w,m.resolver._originValidation(m.auth).catch(S=>{m.reject(S)}),m.resolver._isIframeWebStorageSupported(m.auth,S=>{S||m.reject(Me(m.auth,"web-storage-unsupported"))}),m.pollUserCancellation()})()}get eventId(){var m;return(null===(m=this.authWindow)||void 0===m?void 0:m.associatedEvent)||null}cancel(){this.reject(Me(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,v.currentPopupAction=null}pollUserCancellation(){const m=()=>{var w,S;this.pollId=(null===(S=null===(w=this.authWindow)||void 0===w?void 0:w.window)||void 0===S?void 0:S.closed)?window.setTimeout(()=>{this.pollId=null,this.reject(Me(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(m,_u.get())};m()}}return v.currentPopupAction=null,v})();const Mn=new Map;class Xn extends Hr{constructor(g,m,w=!1){super(g,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],m,void 0,w),this.eventId=null}execute(){var g=()=>super.execute,m=this;return(0,h.Z)(function*(){let w=Mn.get(m.auth._key());if(!w){try{const P=(yield function fl(v,g){return Dh.apply(this,arguments)}(m.resolver,m.auth))?yield g().call(m):null;w=()=>Promise.resolve(P)}catch(S){w=()=>Promise.reject(S)}Mn.set(m.auth._key(),w)}return m.bypassAuthState||Mn.set(m.auth._key(),()=>Promise.resolve(null)),w()})()}onAuthEvent(g){var m=()=>super.onAuthEvent,w=this;return(0,h.Z)(function*(){if("signInViaRedirect"===g.type)return m().call(w,g);if("unknown"!==g.type){if(g.eventId){const S=yield w.auth._redirectUserForId(g.eventId);if(S)return w.user=S,m().call(w,g);w.resolve(null)}}else w.resolve(null)})()}onExecution(){return(0,h.Z)(function*(){})()}cleanUp(){}}function Dh(){return(Dh=(0,h.Z)(function*(v,g){const m=T(g),w=D(v);if(!(yield w._isAvailable()))return!1;const S="true"===(yield w._get(m));return yield w._remove(m),S})).apply(this,arguments)}function hs(v,g){return Qo.apply(this,arguments)}function Qo(){return(Qo=(0,h.Z)(function*(v,g){return D(v)._set(T(g),"true")})).apply(this,arguments)}function wu(){Mn.clear()}function pl(v,g){Mn.set(v._key(),g)}function D(v){return re(v._redirectPersistence)}function T(v){return It("pendingRedirect",v.config.apiKey,v.name)}function N(v,g,m){return function F(v,g,m){return Q.apply(this,arguments)}(v,g,m)}function Q(){return(Q=(0,h.Z)(function*(v,g,m){const w=je(v);be(v,g,Ms);const S=Gi(w,m);return yield hs(S,w),S._openRedirect(w,g,"signInViaRedirect")})).apply(this,arguments)}function J(v,g,m){return function Le(v,g,m){return We.apply(this,arguments)}(v,g,m)}function We(){return(We=(0,h.Z)(function*(v,g,m){const w=(0,L.m9)(v);be(w.auth,g,Ms);const S=Gi(w.auth,m);yield hs(S,w.auth);const P=yield $s(w);return S._openRedirect(w.auth,g,"reauthViaRedirect",P)})).apply(this,arguments)}function mt(v,g,m){return function Mt(v,g,m){return Kt.apply(this,arguments)}(v,g,m)}function Kt(){return(Kt=(0,h.Z)(function*(v,g,m){const w=(0,L.m9)(v);be(w.auth,g,Ms);const S=Gi(w.auth,m);yield Ns(!1,w,g.providerId),yield hs(S,w.auth);const P=yield $s(w);return S._openRedirect(w.auth,g,"linkViaRedirect",P)})).apply(this,arguments)}function Dt(v,g){return Gr.apply(this,arguments)}function Gr(){return(Gr=(0,h.Z)(function*(v,g){return yield je(v)._initializationPromise,xn(v,g,!1)})).apply(this,arguments)}function xn(v,g){return zi.apply(this,arguments)}function zi(){return(zi=(0,h.Z)(function*(v,g,m=!1){const w=je(v),S=Gi(w,g),te=yield new Xn(w,S,m).execute();return te&&!m&&(delete te.user._redirectEventId,yield w._persistUserIfCurrent(te.user),yield w._setRedirectUser(null,g)),te})).apply(this,arguments)}function $s(v){return zr.apply(this,arguments)}function zr(){return(zr=(0,h.Z)(function*(v){const g=jo(`${v.uid}:::`);return v._redirectEventId=g,yield v.auth._setRedirectUser(v),yield v.auth._persistUserIfCurrent(v),g})).apply(this,arguments)}class ri{constructor(g){this.auth=g,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(g){this.consumers.add(g),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,g)&&(this.sendToConsumer(this.queuedRedirectEvent,g),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(g){this.consumers.delete(g)}onEvent(g){if(this.hasEventBeenHandled(g))return!1;let m=!1;return this.consumers.forEach(w=>{this.isEventForConsumer(g,w)&&(m=!0,this.sendToConsumer(g,w),this.saveEventToCache(g))}),this.hasHandledPotentialRedirect||!function Qc(v){switch(v.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Yc(v);default:return!1}}(g)||(this.hasHandledPotentialRedirect=!0,m||(this.queuedRedirectEvent=g,m=!0)),m}sendToConsumer(g,m){var w;if(g.error&&!Yc(g)){const S=(null===(w=g.error.code)||void 0===w?void 0:w.split("auth/")[1])||"internal-error";m.onError(Me(this.auth,S))}else m.onAuthEvent(g)}isEventForConsumer(g,m){const w=null===m.eventId||!!g.eventId&&g.eventId===m.eventId;return m.filter.includes(g.type)&&w}hasEventBeenHandled(g){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Jo(g))}saveEventToCache(g){this.cachedEventUids.add(Jo(g)),this.lastProcessedEventTime=Date.now()}}function Jo(v){return[v.type,v.eventId,v.sessionId,v.tenantId].filter(g=>g).join("-")}function Yc({type:v,error:g}){return"unknown"===v&&"auth/no-auth-event"===(null==g?void 0:g.code)}function gl(v){return Jc.apply(this,arguments)}function Jc(){return(Jc=(0,h.Z)(function*(v,g={}){return en(v,"GET","/v1/projects",g)})).apply(this,arguments)}const zm=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Xc=/^https?/;function Ra(){return(Ra=(0,h.Z)(function*(v){if(v.config.emulator)return;const{authorizedDomains:g}=yield gl(v);for(const m of g)try{if(Wm(m))return}catch(w){}ze(v,"unauthorized-domain")})).apply(this,arguments)}function Wm(v){const g=ce(),{protocol:m,hostname:w}=new URL(g);if(v.startsWith("chrome-extension://")){const te=new URL(v);return""===te.hostname&&""===w?"chrome-extension:"===m&&v.replace("chrome-extension://","")===g.replace("chrome-extension://",""):"chrome-extension:"===m&&te.hostname===w}if(!Xc.test(m))return!1;if(zm.test(v))return w===v;const S=v.replace(/\./g,"\\.");return new RegExp("^(.+\\."+S+"|"+S+")$","i").test(w)}const fE=new Ye(3e4,6e4);function Th(){const v=_n().___jsl;if(null==v?void 0:v.H)for(const g of Object.keys(v.H))if(v.H[g].r=v.H[g].r||[],v.H[g].L=v.H[g].L||[],v.H[g].r=[...v.H[g].L],v.CP)for(let m=0;m<v.CP.length;m++)v.CP[m]=null}let ml=null;function Ch(v){return ml=ml||function Op(v){return new Promise((g,m)=>{var w,S,P;function te(){Th(),gapi.load("gapi.iframes",{callback:()=>{g(gapi.iframes.getContext())},ontimeout:()=>{Th(),m(Me(v,"network-request-failed"))},timeout:fE.get()})}if(null===(S=null===(w=_n().gapi)||void 0===w?void 0:w.iframes)||void 0===S?void 0:S.Iframe)g(gapi.iframes.getContext());else{if(!(null===(P=_n().gapi)||void 0===P?void 0:P.load)){const Ne=co("iframefcb");return _n()[Ne]=()=>{gapi.load?te():m(Me(v,"network-request-failed"))},Vs(`https://apis.google.com/js/api.js?onload=${Ne}`).catch(et=>m(et))}te()}}).catch(g=>{throw ml=null,g})}(v),ml}const fo=new Ye(5e3,15e3),ed={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Du=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Oa(v){const g=v.config;ne(g.authDomain,v,"auth-domain-config-required");const m=g.emulator?ln(g,"emulator/auth/iframe"):`https://${v.config.authDomain}/__/auth/iframe`,w={apiKey:g.apiKey,appName:v.name,v:R.SDK_VERSION},S=Du.get(v.config.apiHost);S&&(w.eid=S);const P=v._getFrameworks();return P.length&&(w.fw=P.join(",")),`${m}?${(0,L.xO)(w).slice(1)}`}function kp(){return kp=(0,h.Z)(function*(v){const g=yield Ch(v),m=_n().gapi;return ne(m,v,"internal-error"),g.open({where:document.body,url:Oa(v),messageHandlersFilter:m.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:ed,dontclear:!0},w=>new Promise(function(){var S=(0,h.Z)(function*(P,te){yield w.restyle({setHideOnLeave:!1});const Ne=Me(v,"network-request-failed"),et=_n().setTimeout(()=>{te(Ne)},fo.get());function gt(){_n().clearTimeout(et),P(w)}w.ping(gt).then(gt,()=>{te(Ne)})});return function(P,te){return S.apply(this,arguments)}}()))}),kp.apply(this,arguments)}const Pa={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Gs{constructor(g){this.window=g,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(g){}}}function Sh(v,g,m,w,S,P){ne(v.config.authDomain,v,"auth-domain-config-required"),ne(v.config.apiKey,v,"invalid-api-key");const te={apiKey:v.config.apiKey,appName:v.name,authType:m,redirectUrl:w,v:R.SDK_VERSION,eventId:S};if(g instanceof Ms){g.setDefaultLanguage(v.languageCode),te.providerId=g.providerId||"",(0,L.xb)(g.getCustomParameters())||(te.customParameters=JSON.stringify(g.getCustomParameters()));for(const[et,gt]of Object.entries(P||{}))te[et]=gt}if(g instanceof fi){const et=g.getScopes().filter(gt=>""!==gt);et.length>0&&(te.scopes=et.join(","))}v.tenantId&&(te.tid=v.tenantId);const Ne=te;for(const et of Object.keys(Ne))void 0===Ne[et]&&delete Ne[et];return`${function Wi({config:v}){return v.emulator?ln(v,"emulator/auth/handler"):`https://${v.authDomain}/__/auth/handler`}(v)}?${(0,L.xO)(Ne).slice(1)}`}const qi="webStorageSupport",Mh=class id{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Br,this._completeRedirectFn=xn,this._overrideRedirectResult=pl}_openPopup(g,m,w,S){var P=this;return(0,h.Z)(function*(){var te;Ie(null===(te=P.eventManagers[g._key()])||void 0===te?void 0:te.manager,"_initialize() not called before _openPopup()");const Ne=Sh(g,m,w,ce(),S);return function qm(v,g,m,w=500,S=600){const P=Math.max((window.screen.availHeight-S)/2,0).toString(),te=Math.max((window.screen.availWidth-w)/2,0).toString();let Ne="";const et=Object.assign(Object.assign({},Pa),{width:w.toString(),height:S.toString(),top:P,left:te}),gt=(0,L.z$)().toLowerCase();m&&(Ne=Ae(gt)?"_blank":m),K(gt)&&(g=g||"http://localhost",et.scrollbars="yes");const Nt=Object.entries(et).reduce((Ki,[zs,Tu])=>`${Ki}${zs}=${Tu},`,"");if(function Qr(v=(0,L.z$)()){var g;return $t(v)&&!!(null===(g=window.navigator)||void 0===g?void 0:g.standalone)}(gt)&&"_self"!==Ne)return function _l(v,g){const m=document.createElement("a");m.href=v,m.target=g;const w=document.createEvent("MouseEvent");w.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),m.dispatchEvent(w)}(g||"",Ne),new Gs(null);const Vn=window.open(g||"",Ne,Nt);ne(Vn,v,"popup-blocked");try{Vn.focus()}catch(Ki){}return new Gs(Vn)}(g,Ne,jo())})()}_openRedirect(g,m,w,S){var P=this;return(0,h.Z)(function*(){return yield P._originValidation(g),function $c(v){_n().location.href=v}(Sh(g,m,w,ce(),S)),new Promise(()=>{})})()}_initialize(g){const m=g._key();if(this.eventManagers[m]){const{manager:S,promise:P}=this.eventManagers[m];return S?Promise.resolve(S):(Ie(P,"If manager is not set, promise should be"),P)}const w=this.initAndGetManager(g);return this.eventManagers[m]={promise:w},w.catch(()=>{delete this.eventManagers[m]}),w}initAndGetManager(g){var m=this;return(0,h.Z)(function*(){const w=yield function Pp(v){return kp.apply(this,arguments)}(g),S=new ri(g);return w.register("authEvent",P=>(ne(null==P?void 0:P.authEvent,g,"invalid-auth-event"),{status:S.onEvent(P.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),m.eventManagers[g._key()]={manager:S},m.iframes[g._key()]=w,S})()}_isIframeWebStorageSupported(g,m){this.iframes[g._key()].send(qi,{type:qi},S=>{var P;const te=null===(P=null==S?void 0:S[0])||void 0===P?void 0:P[qi];void 0!==te&&m(!!te),ze(g,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(g){const m=g._key();return this.originValidationPromises[m]||(this.originValidationPromises[m]=function bu(v){return Ra.apply(this,arguments)}(g)),this.originValidationPromises[m]}get _shouldInitProactively(){return Ar()||z()||$t()}};class xh extends class Fp{constructor(g){this.factorId=g}_process(g,m,w){switch(m.type){case"enroll":return this._finalizeEnroll(g,m.credential,w);case"signin":return this._finalizeSignIn(g,m.credential);default:return he("unexpected MultiFactorSessionType")}}}{constructor(g){super("phone"),this.credential=g}static _fromCredential(g){return new xh(g)}_finalizeEnroll(g,m,w){return function Uc(v,g){return en(v,"POST","/v2/accounts/mfaEnrollment:finalize",jt(v,g))}(g,{idToken:m,displayName:w,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(g,m){return function Er(v,g){return en(v,"POST","/v2/accounts/mfaSignIn:finalize",jt(v,g))}(g,{mfaPendingCredential:m,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let Nh=(()=>{class v{constructor(){}static assertion(m){return xh._fromCredential(m)}}return v.FACTOR_ID="phone",v})();var Lp="@firebase/auth";class Ym{constructor(g){this.auth=g,this.internalListeners=new Map}getUid(){var g;return this.assertAuthConfigured(),(null===(g=this.auth.currentUser)||void 0===g?void 0:g.uid)||null}getToken(g){var m=this;return(0,h.Z)(function*(){return m.assertAuthConfigured(),yield m.auth._initializationPromise,m.auth.currentUser?{accessToken:yield m.auth.currentUser.getIdToken(g)}:null})()}addAuthTokenListener(g){if(this.assertAuthConfigured(),this.internalListeners.has(g))return;const m=this.auth.onIdTokenChanged(w=>{var S;g((null===(S=w)||void 0===S?void 0:S.stsTokenManager.accessToken)||null)});this.internalListeners.set(g,m),this.updateProactiveRefresh()}removeAuthTokenListener(g){this.assertAuthConfigured();const m=this.internalListeners.get(g);!m||(this.internalListeners.delete(g),m(),this.updateProactiveRefresh())}assertAuthConfigured(){ne(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}!function sd(v){(0,R._registerComponent)(new me.wA("auth",(g,{options:m})=>{const w=g.getProvider("app").getImmediate(),S=g.getProvider("heartbeat"),{apiKey:P,authDomain:te}=w.options;return((Ne,et)=>{ne(P&&!P.includes(":"),"invalid-api-key",{appName:Ne.name}),ne(!(null==te?void 0:te.includes(":")),"argument-error",{appName:Ne.name});const gt={apiKey:P,authDomain:te,clientPlatform:v,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:ur(v)},Nt=new Jr(Ne,et,gt);return function _e(v,g){const m=(null==g?void 0:g.persistence)||[],w=(Array.isArray(m)?m:[m]).map(re);(null==g?void 0:g.errorMap)&&v._updateErrorMap(g.errorMap),v._initializeWithPersistence(w,null==g?void 0:g.popupRedirectResolver)}(Nt,m),Nt})(w,S)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((g,m,w)=>{g.getProvider("auth-internal").initialize()})),(0,R._registerComponent)(new me.wA("auth-internal",g=>{const m=je(g.getProvider("auth").getImmediate());return new Ym(m)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,R.registerVersion)(Lp,"0.20.2",function Vp(v){switch(v){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(v)),(0,R.registerVersion)(Lp,"0.20.2","esm2017")}("Browser")},2090:(rt,De,O)=>{O.d(De,{$s:()=>Wt,BH:()=>Ke,G6:()=>ne,L:()=>ue,LL:()=>ce,Mn:()=>be,Sg:()=>Se,UG:()=>ge,US:()=>me,ZB:()=>B,ZR:()=>_e,b$:()=>ze,d:()=>Me,eu:()=>Ie,hl:()=>he,jU:()=>Te,m9:()=>cn,ne:()=>Pi,pd:()=>wi,r3:()=>jt,ru:()=>qe,tV:()=>ye,uI:()=>He,vZ:()=>Tr,w1:()=>xe,xO:()=>Oi,xb:()=>In,z$:()=>Fe,zI:()=>Z,zd:()=>ui});const oe=function(U){const G=[];let W=0;for(let Ee=0;Ee<U.length;Ee++){let j=U.charCodeAt(Ee);j<128?G[W++]=j:j<2048?(G[W++]=j>>6|192,G[W++]=63&j|128):55296==(64512&j)&&Ee+1<U.length&&56320==(64512&U.charCodeAt(Ee+1))?(j=65536+((1023&j)<<10)+(1023&U.charCodeAt(++Ee)),G[W++]=j>>18|240,G[W++]=j>>12&63|128,G[W++]=j>>6&63|128,G[W++]=63&j|128):(G[W++]=j>>12|224,G[W++]=j>>6&63|128,G[W++]=63&j|128)}return G},me={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(U,G){if(!Array.isArray(U))throw Error("encodeByteArray takes an array as a parameter");this.init_();const W=G?this.byteToCharMapWebSafe_:this.byteToCharMap_,Ee=[];for(let j=0;j<U.length;j+=3){const X=U[j],Pe=j+1<U.length,tt=Pe?U[j+1]:0,ht=j+2<U.length,Pt=ht?U[j+2]:0;let Gn=(15&tt)<<2|Pt>>6,le=63&Pt;ht||(le=64,Pe||(Gn=64)),Ee.push(W[X>>2],W[(3&X)<<4|tt>>4],W[Gn],W[le])}return Ee.join("")},encodeString(U,G){return this.HAS_NATIVE_SUPPORT&&!G?btoa(U):this.encodeByteArray(oe(U),G)},decodeString(U,G){return this.HAS_NATIVE_SUPPORT&&!G?atob(U):function(U){const G=[];let W=0,Ee=0;for(;W<U.length;){const j=U[W++];if(j<128)G[Ee++]=String.fromCharCode(j);else if(j>191&&j<224){const X=U[W++];G[Ee++]=String.fromCharCode((31&j)<<6|63&X)}else if(j>239&&j<365){const ht=((7&j)<<18|(63&U[W++])<<12|(63&U[W++])<<6|63&U[W++])-65536;G[Ee++]=String.fromCharCode(55296+(ht>>10)),G[Ee++]=String.fromCharCode(56320+(1023&ht))}else{const X=U[W++],Pe=U[W++];G[Ee++]=String.fromCharCode((15&j)<<12|(63&X)<<6|63&Pe)}}return G.join("")}(this.decodeStringToByteArray(U,G))},decodeStringToByteArray(U,G){this.init_();const W=G?this.charToByteMapWebSafe_:this.charToByteMap_,Ee=[];for(let j=0;j<U.length;){const X=W[U.charAt(j++)],tt=j<U.length?W[U.charAt(j)]:0;++j;const Pt=j<U.length?W[U.charAt(j)]:64;++j;const It=j<U.length?W[U.charAt(j)]:64;if(++j,null==X||null==tt||null==Pt||null==It)throw Error();Ee.push(X<<2|tt>>4),64!==Pt&&(Ee.push(tt<<4&240|Pt>>2),64!==It&&Ee.push(Pt<<6&192|It))}return Ee},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let U=0;U<this.ENCODED_VALS.length;U++)this.byteToCharMap_[U]=this.ENCODED_VALS.charAt(U),this.charToByteMap_[this.byteToCharMap_[U]]=U,this.byteToCharMapWebSafe_[U]=this.ENCODED_VALS_WEBSAFE.charAt(U),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[U]]=U,U>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(U)]=U,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(U)]=U)}}},ue=function(U){return function(U){const G=oe(U);return me.encodeByteArray(G,!0)}(U).replace(/\./g,"")},ye=function(U){try{return me.decodeString(U,!0)}catch(G){console.error("base64Decode failed: ",G)}return null};function B(U,G){if(!(G instanceof Object))return G;switch(G.constructor){case Date:return new Date(G.getTime());case Object:void 0===U&&(U={});break;case Array:U=[];break;default:return G}for(const W in G)!G.hasOwnProperty(W)||!ie(W)||(U[W]=B(U[W],G[W]));return U}function ie(U){return"__proto__"!==U}class Ke{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((G,W)=>{this.resolve=G,this.reject=W})}wrapCallback(G){return(W,Ee)=>{W?this.reject(W):this.resolve(Ee),"function"==typeof G&&(this.promise.catch(()=>{}),1===G.length?G(W):G(W,Ee))}}}function Se(U,G){if(U.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const Ee=G||"demo-project",j=U.iat||0,X=U.sub||U.user_id;if(!X)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const Pe=Object.assign({iss:`https://securetoken.google.com/${Ee}`,aud:Ee,iat:j,exp:j+3600,auth_time:j,sub:X,user_id:X,firebase:{sign_in_provider:"custom",identities:{}}},U);return[ue(JSON.stringify({alg:"none",type:"JWT"})),ue(JSON.stringify(Pe)),""].join(".")}function Fe(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function He(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Fe())}function ge(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(U){return!1}}function Te(){return"object"==typeof self&&self.self===self}function qe(){const U="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof U&&void 0!==U.id}function ze(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Me(){return Fe().indexOf("Electron/")>=0}function xe(){const U=Fe();return U.indexOf("MSIE ")>=0||U.indexOf("Trident/")>=0}function be(){return Fe().indexOf("MSAppHost/")>=0}function ne(){return!ge()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function he(){return"object"==typeof indexedDB}function Ie(){return new Promise((U,G)=>{try{let W=!0;const Ee="validate-browser-context-for-indexeddb-analytics-module",j=self.indexedDB.open(Ee);j.onsuccess=()=>{j.result.close(),W||self.indexedDB.deleteDatabase(Ee),U(!0)},j.onupgradeneeded=()=>{W=!1},j.onerror=()=>{var X;G((null===(X=j.error)||void 0===X?void 0:X.message)||"")}}catch(W){G(W)}})}function Z(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)}class _e extends Error{constructor(G,W,Ee){super(W),this.code=G,this.customData=Ee,this.name="FirebaseError",Object.setPrototypeOf(this,_e.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ce.prototype.create)}}class ce{constructor(G,W,Ee){this.service=G,this.serviceName=W,this.errors=Ee}create(G,...W){const Ee=W[0]||{},j=`${this.service}/${G}`,X=this.errors[G],Pe=X?function Ve(U,G){return U.replace(dt,(W,Ee)=>{const j=G[Ee];return null!=j?String(j):`<${Ee}?>`})}(X,Ee):"Error";return new _e(j,`${this.serviceName}: ${Pe} (${j}).`,Ee)}}const dt=/\{\$([^}]+)}/g;function jt(U,G){return Object.prototype.hasOwnProperty.call(U,G)}function In(U){for(const G in U)if(Object.prototype.hasOwnProperty.call(U,G))return!1;return!0}function Tr(U,G){if(U===G)return!0;const W=Object.keys(U),Ee=Object.keys(G);for(const j of W){if(!Ee.includes(j))return!1;const X=U[j],Pe=G[j];if(Cn(X)&&Cn(Pe)){if(!Tr(X,Pe))return!1}else if(X!==Pe)return!1}for(const j of Ee)if(!W.includes(j))return!1;return!0}function Cn(U){return null!==U&&"object"==typeof U}function Oi(U){const G=[];for(const[W,Ee]of Object.entries(U))Array.isArray(Ee)?Ee.forEach(j=>{G.push(encodeURIComponent(W)+"="+encodeURIComponent(j))}):G.push(encodeURIComponent(W)+"="+encodeURIComponent(Ee));return G.length?"&"+G.join("&"):""}function ui(U){const G={};return U.replace(/^\?/,"").split("&").forEach(Ee=>{if(Ee){const[j,X]=Ee.split("=");G[decodeURIComponent(j)]=decodeURIComponent(X)}}),G}function wi(U){const G=U.indexOf("?");if(!G)return"";const W=U.indexOf("#",G);return U.substring(G,W>0?W:void 0)}function Pi(U,G){const W=new pt(U,G);return W.subscribe.bind(W)}class pt{constructor(G,W){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=W,this.task.then(()=>{G(this)}).catch(Ee=>{this.error(Ee)})}next(G){this.forEachObserver(W=>{W.next(G)})}error(G){this.forEachObserver(W=>{W.error(G)}),this.close(G)}complete(){this.forEachObserver(G=>{G.complete()}),this.close()}subscribe(G,W,Ee){let j;if(void 0===G&&void 0===W&&void 0===Ee)throw new Error("Missing Observer.");j=function En(U,G){if("object"!=typeof U||null===U)return!1;for(const W of G)if(W in U&&"function"==typeof U[W])return!0;return!1}(G,["next","error","complete"])?G:{next:G,error:W,complete:Ee},void 0===j.next&&(j.next=tn),void 0===j.error&&(j.error=tn),void 0===j.complete&&(j.complete=tn);const X=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?j.error(this.finalError):j.complete()}catch(Pe){}}),this.observers.push(j),X}unsubscribeOne(G){void 0===this.observers||void 0===this.observers[G]||(delete this.observers[G],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(G){if(!this.finalized)for(let W=0;W<this.observers.length;W++)this.sendOne(W,G)}sendOne(G,W){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[G])try{W(this.observers[G])}catch(Ee){"undefined"!=typeof console&&console.error&&console.error(Ee)}})}close(G){this.finalized||(this.finalized=!0,void 0!==G&&(this.finalError=G),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function tn(){}function Wt(U,G=1e3,W=2){const Ee=G*Math.pow(W,U),j=Math.round(.5*Ee*(Math.random()-.5)*2);return Math.min(144e5,Ee+j)}function cn(U){return U&&U._delegate?U._delegate:U}},1780:(rt,De,O)=>{var h=O(5e3);let L=null;function R(){return L}const de=new h.OlP("DocumentToken");let ue=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:function(){return function ye(){return(0,h.LFG)(B)}()},providedIn:"platform"}),n})();const H=new h.OlP("Location Initialized");let B=(()=>{class n extends ue{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return R().getBaseHref(this._doc)}onPopState(t){const r=R().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=R().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,r,s){ie()?this._history.pushState(t,r,s):this.location.hash=s}replaceState(t,r,s){ie()?this._history.replaceState(t,r,s):this.location.hash=s}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(de))},n.\u0275prov=h.Yz7({token:n,factory:function(){return function Ke(){return new B((0,h.LFG)(de))}()},providedIn:"platform"}),n})();function ie(){return!!window.history.pushState}function Se(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function Fe(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function He(n){return n&&"?"!==n[0]?"?"+n:n}let ge=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:function(){return function Te(n){const e=(0,h.LFG)(de).location;return new ze((0,h.LFG)(ue),e&&e.origin||"")}()},providedIn:"root"}),n})();const qe=new h.OlP("appBaseHref");let ze=(()=>{class n extends ge{constructor(t,r){if(super(),this._platformLocation=t,this._removeListenerFns=[],null==r&&(r=this._platformLocation.getBaseHrefFromDOM()),null==r)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=r}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Se(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+He(this._platformLocation.search),s=this._platformLocation.hash;return s&&t?`${r}${s}`:r}pushState(t,r,s,u){const c=this.prepareExternalUrl(s+He(u));this._platformLocation.pushState(t,r,c)}replaceState(t,r,s,u){const c=this.prepareExternalUrl(s+He(u));this._platformLocation.replaceState(t,r,c)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,s;null===(s=(r=this._platformLocation).historyGo)||void 0===s||s.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(ue),h.LFG(qe,8))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})(),Me=(()=>{class n extends ge{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=Se(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,s,u){let c=this.prepareExternalUrl(s+He(u));0==c.length&&(c=this._platformLocation.pathname),this._platformLocation.pushState(t,r,c)}replaceState(t,r,s,u){let c=this.prepareExternalUrl(s+He(u));0==c.length&&(c=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,c)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,s;null===(s=(r=this._platformLocation).historyGo)||void 0===s||s.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(ue),h.LFG(qe,8))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})(),xe=(()=>{class n{constructor(t,r){this._subject=new h.vpe,this._urlChangeListeners=[],this._platformStrategy=t;const s=this._platformStrategy.getBaseHref();this._platformLocation=r,this._baseHref=Fe(ne(s)),this._platformStrategy.onPopState(u=>{this._subject.emit({url:this.path(!0),pop:!0,state:u.state,type:u.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+He(r))}normalize(t){return n.stripTrailingSlash(function Ze(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,ne(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,r="",s=null){this._platformStrategy.pushState(s,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+He(r)),s)}replaceState(t,r="",s=null){this._platformStrategy.replaceState(s,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+He(r)),s)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(t=0){var r,s;null===(s=(r=this._platformStrategy).historyGo)||void 0===s||s.call(r,t)}onUrlChange(t){this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}))}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(s=>s(t,r))}subscribe(t,r,s){return this._subject.subscribe({next:t,error:r,complete:s})}}return n.normalizeQueryParams=He,n.joinWithSlash=Se,n.stripTrailingSlash=Fe,n.\u0275fac=function(t){return new(t||n)(h.LFG(ge),h.LFG(ue))},n.\u0275prov=h.Yz7({token:n,factory:function(){return function be(){return new xe((0,h.LFG)(ge),(0,h.LFG)(ue))}()},providedIn:"root"}),n})();function ne(n){return n.replace(/\/index.html$/,"")}const he={ADP:[void 0,void 0,0],AFN:[void 0,"\u060b",0],ALL:[void 0,void 0,0],AMD:[void 0,"\u058f",2],AOA:[void 0,"Kz"],ARS:[void 0,"$"],AUD:["A$","$"],AZN:[void 0,"\u20bc"],BAM:[void 0,"KM"],BBD:[void 0,"$"],BDT:[void 0,"\u09f3"],BHD:[void 0,void 0,3],BIF:[void 0,void 0,0],BMD:[void 0,"$"],BND:[void 0,"$"],BOB:[void 0,"Bs"],BRL:["R$"],BSD:[void 0,"$"],BWP:[void 0,"P"],BYN:[void 0,"\u0440.",2],BYR:[void 0,void 0,0],BZD:[void 0,"$"],CAD:["CA$","$",2],CHF:[void 0,void 0,2],CLF:[void 0,void 0,4],CLP:[void 0,"$",0],CNY:["CN\xa5","\xa5"],COP:[void 0,"$",2],CRC:[void 0,"\u20a1",2],CUC:[void 0,"$"],CUP:[void 0,"$"],CZK:[void 0,"K\u010d",2],DJF:[void 0,void 0,0],DKK:[void 0,"kr",2],DOP:[void 0,"$"],EGP:[void 0,"E\xa3"],ESP:[void 0,"\u20a7",0],EUR:["\u20ac"],FJD:[void 0,"$"],FKP:[void 0,"\xa3"],GBP:["\xa3"],GEL:[void 0,"\u20be"],GHS:[void 0,"GH\u20b5"],GIP:[void 0,"\xa3"],GNF:[void 0,"FG",0],GTQ:[void 0,"Q"],GYD:[void 0,"$",2],HKD:["HK$","$"],HNL:[void 0,"L"],HRK:[void 0,"kn"],HUF:[void 0,"Ft",2],IDR:[void 0,"Rp",2],ILS:["\u20aa"],INR:["\u20b9"],IQD:[void 0,void 0,0],IRR:[void 0,void 0,0],ISK:[void 0,"kr",0],ITL:[void 0,void 0,0],JMD:[void 0,"$"],JOD:[void 0,void 0,3],JPY:["\xa5",void 0,0],KHR:[void 0,"\u17db"],KMF:[void 0,"CF",0],KPW:[void 0,"\u20a9",0],KRW:["\u20a9",void 0,0],KWD:[void 0,void 0,3],KYD:[void 0,"$"],KZT:[void 0,"\u20b8"],LAK:[void 0,"\u20ad",0],LBP:[void 0,"L\xa3",0],LKR:[void 0,"Rs"],LRD:[void 0,"$"],LTL:[void 0,"Lt"],LUF:[void 0,void 0,0],LVL:[void 0,"Ls"],LYD:[void 0,void 0,3],MGA:[void 0,"Ar",0],MGF:[void 0,void 0,0],MMK:[void 0,"K",0],MNT:[void 0,"\u20ae",2],MRO:[void 0,void 0,0],MUR:[void 0,"Rs",2],MXN:["MX$","$"],MYR:[void 0,"RM"],NAD:[void 0,"$"],NGN:[void 0,"\u20a6"],NIO:[void 0,"C$"],NOK:[void 0,"kr",2],NPR:[void 0,"Rs"],NZD:["NZ$","$"],OMR:[void 0,void 0,3],PHP:["\u20b1"],PKR:[void 0,"Rs",2],PLN:[void 0,"z\u0142"],PYG:[void 0,"\u20b2",0],RON:[void 0,"lei"],RSD:[void 0,void 0,0],RUB:[void 0,"\u20bd"],RUR:[void 0,"\u0440."],RWF:[void 0,"RF",0],SBD:[void 0,"$"],SEK:[void 0,"kr",2],SGD:[void 0,"$"],SHP:[void 0,"\xa3"],SLL:[void 0,void 0,0],SOS:[void 0,void 0,0],SRD:[void 0,"$"],SSP:[void 0,"\xa3"],STD:[void 0,void 0,0],STN:[void 0,"Db"],SYP:[void 0,"\xa3",0],THB:[void 0,"\u0e3f"],TMM:[void 0,void 0,0],TND:[void 0,void 0,3],TOP:[void 0,"T$"],TRL:[void 0,void 0,0],TRY:[void 0,"\u20ba"],TTD:[void 0,"$"],TWD:["NT$","$",2],TZS:[void 0,void 0,2],UAH:[void 0,"\u20b4"],UGX:[void 0,void 0,0],USD:["$"],UYI:[void 0,void 0,0],UYU:[void 0,"$"],UYW:[void 0,void 0,4],UZS:[void 0,void 0,2],VEF:[void 0,"Bs",2],VND:["\u20ab",void 0,0],VUV:[void 0,void 0,0],XAF:["FCFA",void 0,0],XCD:["EC$","$"],XOF:["F\u202fCFA",void 0,0],XPF:["CFPF",void 0,0],XXX:["\xa4"],YER:[void 0,void 0,0],ZAR:[void 0,"R"],ZMK:[void 0,void 0,0],ZMW:[void 0,"ZK"],ZWD:[void 0,void 0,0]};var Ie=(()=>((Ie=Ie||{})[Ie.Decimal=0]="Decimal",Ie[Ie.Percent=1]="Percent",Ie[Ie.Currency=2]="Currency",Ie[Ie.Scientific=3]="Scientific",Ie))(),ce=(()=>((ce=ce||{})[ce.Decimal=0]="Decimal",ce[ce.Group=1]="Group",ce[ce.List=2]="List",ce[ce.PercentSign=3]="PercentSign",ce[ce.PlusSign=4]="PlusSign",ce[ce.MinusSign=5]="MinusSign",ce[ce.Exponential=6]="Exponential",ce[ce.SuperscriptingExponent=7]="SuperscriptingExponent",ce[ce.PerMille=8]="PerMille",ce[ce.Infinity=9]="Infinity",ce[ce.NaN=10]="NaN",ce[ce.TimeSeparator=11]="TimeSeparator",ce[ce.CurrencyDecimal=12]="CurrencyDecimal",ce[ce.CurrencyGroup=13]="CurrencyGroup",ce))();function In(n,e){const t=(0,h.cg1)(n),r=t[h.wAp.NumberSymbols][e];if(void 0===r){if(e===ce.CurrencyDecimal)return t[h.wAp.NumberSymbols][ce.Decimal];if(e===ce.CurrencyGroup)return t[h.wAp.NumberSymbols][ce.Group]}return r}const Rt=/^(\d+)?\.((\d+)(-(\d+))?)?$/;function Jr(n,e,t,r,s){const c=function mn(n,e="-"){const t={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},r=n.split(";"),s=r[0],u=r[1],c=-1!==s.indexOf(".")?s.split("."):[s.substring(0,s.lastIndexOf("0")+1),s.substring(s.lastIndexOf("0")+1)],p=c[0],_=c[1]||"";t.posPre=p.substr(0,p.indexOf("#"));for(let A=0;A<_.length;A++){const x=_.charAt(A);"0"===x?t.minFrac=t.maxFrac=A+1:"#"===x?t.maxFrac=A+1:t.posSuf+=x}const b=p.split(",");if(t.gSize=b[1]?b[1].length:0,t.lgSize=b[2]||b[1]?(b[2]||b[1]).length:0,u){const A=s.length-t.posPre.length-t.posSuf.length,x=u.indexOf("#");t.negPre=u.substr(0,x).replace(/'/g,""),t.negSuf=u.substr(x+A).replace(/'/g,"")}else t.negPre=e+t.posPre,t.negSuf=t.posSuf;return t}(function Ri(n,e){return(0,h.cg1)(n)[h.wAp.NumberFormats][e]}(e,Ie.Currency),In(e,ce.MinusSign));return c.minFrac=function Vr(n){let e;const t=he[n];return t&&(e=t[2]),"number"==typeof e?e:2}(r),c.maxFrac=c.minFrac,function ha(n,e,t,r,s,u,c=!1){let p="",_=!1;if(isFinite(n)){let b=function es(n){let r,s,u,c,p,e=Math.abs(n)+"",t=0;for((s=e.indexOf("."))>-1&&(e=e.replace(".","")),(u=e.search(/e/i))>0?(s<0&&(s=u),s+=+e.slice(u+1),e=e.substring(0,u)):s<0&&(s=e.length),u=0;"0"===e.charAt(u);u++);if(u===(p=e.length))r=[0],s=1;else{for(p--;"0"===e.charAt(p);)p--;for(s-=u,r=[],c=0;u<=p;u++,c++)r[c]=Number(e.charAt(u))}return s>22&&(r=r.splice(0,21),t=s-1,s=1),{digits:r,exponent:t,integerLen:s}}(n);c&&(b=function Ur(n){if(0===n.digits[0])return n;const e=n.digits.length-n.integerLen;return n.exponent?n.exponent+=2:(0===e?n.digits.push(0,0):1===e&&n.digits.push(0),n.integerLen+=2),n}(b));let A=e.minInt,x=e.minFrac,V=e.maxFrac;if(u){const wt=u.match(Rt);if(null===wt)throw new Error(`${u} is not a valid digit info`);const Ct=wt[1],ft=wt[3],Bt=wt[5];null!=Ct&&(A=ts(Ct)),null!=ft&&(x=ts(ft)),null!=Bt?V=ts(Bt):null!=ft&&x>V&&(V=x)}!function Hn(n,e,t){if(e>t)throw new Error(`The minimum number of digits after fraction (${e}) is higher than the maximum (${t}).`);let r=n.digits,s=r.length-n.integerLen;const u=Math.min(Math.max(e,s),t);let c=u+n.integerLen,p=r[c];if(c>0){r.splice(Math.max(n.integerLen,c));for(let x=c;x<r.length;x++)r[x]=0}else{s=Math.max(0,s),n.integerLen=1,r.length=Math.max(1,c=u+1),r[0]=0;for(let x=1;x<c;x++)r[x]=0}if(p>=5)if(c-1<0){for(let x=0;x>c;x--)r.unshift(0),n.integerLen++;r.unshift(1),n.integerLen++}else r[c-1]++;for(;s<Math.max(0,u);s++)r.push(0);let _=0!==u;const b=e+n.integerLen,A=r.reduceRight(function(x,V,q,Y){return Y[q]=(V+=x)<10?V:V-10,_&&(0===Y[q]&&q>=b?Y.pop():_=!1),V>=10?1:0},0);A&&(r.unshift(A),n.integerLen++)}(b,x,V);let q=b.digits,Y=b.integerLen;const ve=b.exponent;let Ue=[];for(_=q.every(wt=>!wt);Y<A;Y++)q.unshift(0);for(;Y<0;Y++)q.unshift(0);Y>0?Ue=q.splice(Y,q.length):(Ue=q,q=[0]);const _t=[];for(q.length>=e.lgSize&&_t.unshift(q.splice(-e.lgSize,q.length).join(""));q.length>e.gSize;)_t.unshift(q.splice(-e.gSize,q.length).join(""));q.length&&_t.unshift(q.join("")),p=_t.join(In(t,r)),Ue.length&&(p+=In(t,s)+Ue.join("")),ve&&(p+=In(t,ce.Exponential)+"+"+ve)}else p=In(t,ce.Infinity);return p=n<0&&!_?e.negPre+p+e.negSuf:e.posPre+p+e.posSuf,p}(n,c,e,ce.CurrencyGroup,ce.CurrencyDecimal,s).replace("\xa4",t).replace("\xa4","").trim()}function ts(n){const e=parseInt(n);if(isNaN(e))throw new Error("Invalid integer literal when parsing "+n);return e}class No{constructor(e,t,r,s){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=s}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let zn=(()=>{class n{constructor(t,r,s){this._viewContainer=t,this._template=r,this._differs=s,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((s,u,c)=>{if(null==s.previousIndex)r.createEmbeddedView(this._template,new No(s.item,this._ngForOf,-1,-1),null===c?void 0:c);else if(null==c)r.remove(null===u?void 0:u);else if(null!==u){const p=r.get(u);r.move(p,c),As(p,s)}});for(let s=0,u=r.length;s<u;s++){const p=r.get(s).context;p.index=s,p.count=u,p.ngForOf=this._ngForOf}t.forEachIdentityChange(s=>{As(r.get(s.currentIndex),s)})}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.s_b),h.Y36(h.Rgc),h.Y36(h.ZZ4))},n.\u0275dir=h.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),n})();function As(n,e){n.context.$implicit=e.item}let lr=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new dn,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){yc("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){yc("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.s_b),h.Y36(h.Rgc))},n.\u0275dir=h.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),n})();class dn{constructor(){this.$implicit=null,this.ngIf=null}}function yc(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,h.AaK)(e)}'.`)}let no=(()=>{class n{constructor(t,r="USD"){this._locale=t,this._defaultCurrencyCode=r}transform(t,r=this._defaultCurrencyCode,s="symbol",u,c){if(!function ga(n){return!(null==n||""===n||n!=n)}(t))return null;c=c||this._locale,"boolean"==typeof s&&(s=s?"symbol":"code");let p=r||this._defaultCurrencyCode;"code"!==s&&(p="symbol"===s||"symbol-narrow"===s?function Cr(n,e,t="en"){const r=function ui(n){return(0,h.cg1)(n)[h.wAp.Currencies]}(t)[n]||he[n]||[],s=r[1];return"narrow"===e&&"string"==typeof s?s:r[0]||n}(p,"symbol"===s?"wide":"narrow",c):s);try{return Jr(function ma(n){if("string"==typeof n&&!isNaN(Number(n)-parseFloat(n)))return Number(n);if("number"!=typeof n)throw new Error(`${n} is not a number`);return n}(t),c,p,r,u)}catch(_){throw function Wn(n,e){return new h.vHH(2100,"")}()}}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.soG,16),h.Y36(h.EJc,16))},n.\u0275pipe=h.Yjl({name:"currency",type:n,pure:!0}),n})();let xs=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({}),n})();function Mr(n){return"server"===n}let iu=(()=>{class n{}return n.\u0275prov=(0,h.Yz7)({token:n,providedIn:"root",factory:()=>new su((0,h.LFG)(de),window)}),n})();class su{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function ss(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let s=r.currentNode;for(;s;){const u=s.shadowRoot;if(u){const c=u.getElementById(e)||u.querySelector(`[name="${e}"]`);if(c)return c}s=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,s=t.top+this.window.pageYOffset,u=this.offset();this.window.scrollTo(r-u[0],s-u[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=rl(this.window.history)||rl(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch(e){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(e){return!1}}}function rl(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class Ns extends class ya extends class me{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function ae(n){L||(L=n)}(new Ns)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function ou(){return hn=hn||document.querySelector("base"),hn?hn.getAttribute("href"):null}();return null==t?null:function ro(n){_a=_a||document.createElement("a"),_a.setAttribute("href",n);const e=_a.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){hn=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function So(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[s,u]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(s.trim()===e)return decodeURIComponent(u)}return null}(document.cookie,e)}}let _a,hn=null;const cr=new h.OlP("TRANSITION_ID"),kn=[{provide:h.ip1,useFactory:function au(n,e,t){return()=>{t.get(h.CZH).donePromise.then(()=>{const r=R(),s=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let u=0;u<s.length;u++)r.remove(s[u])})}},deps:[cr,de,h.zs3],multi:!0}];class os{static init(){(0,h.VLi)(new os)}addToWindow(e){h.dqk.getAngularTestability=(r,s=!0)=>{const u=e.findTestabilityInTree(r,s);if(null==u)throw new Error("Could not find testability for element.");return u},h.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),h.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),h.dqk.frameworkStabilizers||(h.dqk.frameworkStabilizers=[]),h.dqk.frameworkStabilizers.push(r=>{const s=h.dqk.getAllAngularTestabilities();let u=s.length,c=!1;const p=function(_){c=c||_,u--,0==u&&r(c)};s.forEach(function(_){_.whenStable(p)})})}findTestabilityInTree(e,t,r){if(null==t)return null;const s=e.getTestability(t);return null!=s?s:r?R().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null}}let dr=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();const Po=new h.OlP("EventManagerPlugins");let Li=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(s=>s.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,s){return this._findPluginFor(r).addEventListener(t,r,s)}addGlobalEventListener(t,r,s){return this._findPluginFor(r).addGlobalEventListener(t,r,s)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const s=this._plugins;for(let u=0;u<s.length;u++){const c=s[u];if(c.supports(t))return this._eventNameToPlugin.set(t,c),c}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Po),h.LFG(h.R0b))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();class sl{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const s=R().getGlobalEventTarget(this._doc,e);if(!s)throw new Error(`Unsupported event target ${s} for event ${t}`);return this.addEventListener(s,t,r)}}let Xr=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(s=>{this._stylesSet.has(s)||(this._stylesSet.add(s),r.add(s))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})(),Rs=(()=>{class n extends Xr{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,s){t.forEach(u=>{const c=this._doc.createElement("style");c.textContent=u,s.push(r.appendChild(c))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(Os),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,s)=>{this._addStylesToHost(t,s,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(Os))}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(de))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();function Os(n){R().remove(n)}const vt={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},io=/%COMP%/g;function Ps(n,e,t){for(let r=0;r<e.length;r++){let s=e[r];Array.isArray(s)?Ps(n,s,t):(s=s.replace(io,n),t.push(s))}return t}function Re(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let Ea=(()=>{class n{constructor(t,r,s){this.eventManager=t,this.sharedStylesHost=r,this.appId=s,this.rendererByCompId=new Map,this.defaultRenderer=new wn(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case h.ifc.Emulated:{let s=this.rendererByCompId.get(r.id);return s||(s=new Vi(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,s)),s.applyToHost(t),s}case 1:case h.ifc.ShadowDom:return new ol(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const s=Ps(r.id,r.styles,[]);this.sharedStylesHost.addStyles(s),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Li),h.LFG(Rs),h.LFG(h.AFp))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();class wn{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(vt[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){e.appendChild(t)}insertBefore(e,t,r){e&&e.insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,s){if(s){t=s+":"+t;const u=vt[s];u?e.setAttributeNS(u,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const s=vt[r];s?e.removeAttributeNS(s,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,s){s&(h.JOm.DashCase|h.JOm.Important)?e.style.setProperty(t,r,s&h.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&h.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,Re(r)):this.eventManager.addEventListener(e,t,Re(r))}}class Vi extends wn{constructor(e,t,r,s){super(e),this.component=r;const u=Ps(s+"-"+r.id,r.styles,[]);t.addStyles(u),this.contentAttr=function ko(n){return"_ngcontent-%COMP%".replace(io,n)}(s+"-"+r.id),this.hostAttr=function ph(n){return"_nghost-%COMP%".replace(io,n)}(s+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class ol extends wn{constructor(e,t,r,s){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const u=Ps(s.id,s.styles,[]);for(let c=0;c<u.length;c++){const p=document.createElement("style");p.textContent=u[c],this.shadowRoot.appendChild(p)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let wa=(()=>{class n extends sl{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,s){return t.addEventListener(r,s,!1),()=>this.removeEventListener(t,r,s)}removeEventListener(t,r,s){return t.removeEventListener(r,s)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(de))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();const gh=["alt","control","meta","shift"],Rc={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},so={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},hr={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let Ui=(()=>{class n extends sl{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,s){const u=n.parseEventName(r),c=n.eventCallback(u.fullKey,s,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>R().onAndCancel(t,u.domEventName,c))}static parseEventName(t){const r=t.toLowerCase().split("."),s=r.shift();if(0===r.length||"keydown"!==s&&"keyup"!==s)return null;const u=n._normalizeKey(r.pop());let c="";if(gh.forEach(_=>{const b=r.indexOf(_);b>-1&&(r.splice(b,1),c+=_+".")}),c+=u,0!=r.length||0===u.length)return null;const p={};return p.domEventName=s,p.fullKey=c,p}static getEventFullKey(t){let r="",s=function Fo(n){let e=n.key;if(null==e){if(e=n.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===n.location&&so.hasOwnProperty(e)&&(e=so[e]))}return Rc[e]||e}(t);return s=s.toLowerCase()," "===s?s="space":"."===s&&(s="dot"),gh.forEach(u=>{u!=s&&hr[u](t)&&(r+=u+".")}),r+=s,r}static eventCallback(t,r,s){return u=>{n.getEventFullKey(u)===t&&s.runGuarded(()=>r(u))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(de))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();const Oc=(0,h.eFA)(h._c5,"browser",[{provide:h.Lbi,useValue:"browser"},{provide:h.g9A,useValue:function Lo(){Ns.makeCurrent(),os.init()},multi:!0},{provide:de,useFactory:function mh(){return(0,h.RDi)(document),document},deps:[]}]),ba=[{provide:h.zSh,useValue:"root"},{provide:h.qLn,useFactory:function ei(){return new h.qLn},deps:[]},{provide:Po,useClass:wa,multi:!0,deps:[de,h.R0b,h.Lbi]},{provide:Po,useClass:Ui,multi:!0,deps:[de]},{provide:Ea,useClass:Ea,deps:[Li,Rs,h.AFp]},{provide:h.FYo,useExisting:Ea},{provide:Xr,useExisting:Rs},{provide:Rs,useClass:Rs,deps:[de]},{provide:h.dDg,useClass:h.dDg,deps:[h.R0b]},{provide:Li,useClass:Li,deps:[Po,h.R0b]},{provide:class yn{},useClass:dr,deps:[]}];let lu=(()=>{class n{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(t){return{ngModule:n,providers:[{provide:h.AFp,useValue:t.appId},{provide:cr,useExisting:h.AFp},kn]}}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(n,12))},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:ba,imports:[xs,h.hGG]}),n})();"undefined"!=typeof window&&window;let Aa=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:function(t){let r=null;return r=t?new(t||n):h.LFG(du),r},providedIn:"root"}),n})(),du=(()=>{class n extends Aa{constructor(t){super(),this._doc=t}sanitize(t,r){if(null==r)return null;switch(t){case h.q3G.NONE:return r;case h.q3G.HTML:return(0,h.qzn)(r,"HTML")?(0,h.z3N)(r):(0,h.EiD)(this._doc,String(r)).toString();case h.q3G.STYLE:return(0,h.qzn)(r,"Style")?(0,h.z3N)(r):r;case h.q3G.SCRIPT:if((0,h.qzn)(r,"Script"))return(0,h.z3N)(r);throw new Error("unsafe value used in a script context");case h.q3G.URL:return(0,h.yhl)(r),(0,h.qzn)(r,"URL")?(0,h.z3N)(r):(0,h.mCW)(String(r));case h.q3G.RESOURCE_URL:if((0,h.qzn)(r,"ResourceURL"))return(0,h.z3N)(r);throw new Error("unsafe value used in a resource URL context (see https://g.co/ng/security#xss)");default:throw new Error(`Unexpected SecurityContext ${t} (see https://g.co/ng/security#xss)`)}}bypassSecurityTrustHtml(t){return(0,h.JVY)(t)}bypassSecurityTrustStyle(t){return(0,h.L6k)(t)}bypassSecurityTrustScript(t){return(0,h.eBb)(t)}bypassSecurityTrustUrl(t){return(0,h.LAX)(t)}bypassSecurityTrustResourceUrl(t){return(0,h.pB0)(t)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(de))},n.\u0275prov=h.Yz7({token:n,factory:function(t){let r=null;return r=t?new t:function ks(n){return new du(n.get(de))}(h.LFG(h.zs3)),r},providedIn:"root"}),n})();var Sn=O(8996),hu=O(7669);function ut(...n){const e=(0,hu.yG)(n);return(0,Sn.D)(n,e)}var fr=O(7579);class Br extends fr.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}var Di=O(8306);const{isArray:Sa}=Array,{getPrototypeOf:jo,prototype:jc,keys:_n}=Object;function $c(n){if(1===n.length){const e=n[0];if(Sa(e))return{args:e,keys:null};if(function Bi(n){return n&&"object"==typeof n&&jo(n)===jc}(e)){const t=_n(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}var Fs=O(4671),St=O(4004);const{isArray:Np}=Array;function fu(n){return(0,St.U)(e=>function Hc(n,e){return Np(e)?n(...e):n(e)}(n,e))}function Gc(n,e){return n.reduce((t,r,s)=>(t[r]=e[s],t),{})}var Kn=O(5403),$o=O(9672);function ni(n,e,t){n?(0,$o.f)(t,n,e):e()}var ds=O(576);function Go(n,e){const t=(0,ds.m)(n)?n:()=>n,r=s=>s.error(t());return new Di.y(e?s=>e.schedule(r,0,s):r)}const zo=(0,O(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var Ls=O(8189);function Ma(...n){return function lo(){return(0,Ls.J)(1)}()((0,Sn.D)(n,(0,hu.yG)(n)))}var ll=O(8421);function pu(n){return new Di.y(e=>{(0,ll.Xf)(n()).subscribe(e)})}var Ti=O(515),zc=O(727),Er=O(4482);function cl(){return(0,Er.e)((n,e)=>{let t=null;n._refCount++;const r=(0,Kn.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const s=n._connection,u=t;t=null,s&&(!u||s===u)&&s.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class ji extends Di.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,Er.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,null==e||e.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new zc.w0;const t=this.getSubject();e.add(this.source.subscribe((0,Kn.x)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=zc.w0.EMPTY)}return e}refCount(){return cl()(this)}}function wr(n,e){return(0,Er.e)((t,r)=>{let s=null,u=0,c=!1;const p=()=>c&&!s&&r.complete();t.subscribe((0,Kn.x)(r,_=>{null==s||s.unsubscribe();let b=0;const A=u++;(0,ll.Xf)(n(_,A)).subscribe(s=(0,Kn.x)(r,x=>r.next(e?e(_,x,A,b++):x),()=>{s=null,p()}))},()=>{c=!0,p()}))})}var Vs=O(5698);function co(...n){const e=(0,hu.yG)(n);return(0,Er.e)((t,r)=>{(e?Ma(n,t,e):Ma(n,t)).subscribe(r)})}function Us(n,e,t,r,s){return(u,c)=>{let p=t,_=e,b=0;u.subscribe((0,Kn.x)(c,A=>{const x=b++;_=p?n(_,A,x):(p=!0,A),r&&c.next(_)},s&&(()=>{p&&c.next(_),c.complete()})))}}function $i(n,e){return(0,Er.e)(Us(n,e,arguments.length>=2,!0))}function Zn(n,e){return(0,Er.e)((t,r)=>{let s=0;t.subscribe((0,Kn.x)(r,u=>n.call(e,u,s++)&&r.next(u)))})}function Bs(n){return(0,Er.e)((e,t)=>{let u,r=null,s=!1;r=e.subscribe((0,Kn.x)(t,void 0,void 0,c=>{u=(0,ll.Xf)(n(c,Bs(n)(e))),r?(r.unsubscribe(),r=null,u.subscribe(t)):s=!0})),s&&(r.unsubscribe(),r=null,u.subscribe(t))})}var Jn=O(5577);function Hi(n,e){return(0,ds.m)(e)?(0,Jn.z)(n,e,1):(0,Jn.z)(n,1)}function Wo(n){return n<=0?()=>Ti.E:(0,Er.e)((e,t)=>{let r=[];e.subscribe((0,Kn.x)(t,s=>{r.push(s),n<r.length&&r.shift()},()=>{for(const s of r)t.next(s);t.complete()},void 0,()=>{r=null}))})}function Eh(n=Fn){return(0,Er.e)((e,t)=>{let r=!1;e.subscribe((0,Kn.x)(t,s=>{r=!0,t.next(s)},()=>r?t.complete():t.error(n())))})}function Fn(){return new zo}function wh(n){return(0,Er.e)((e,t)=>{let r=!1;e.subscribe((0,Kn.x)(t,s=>{r=!0,t.next(s)},()=>{r||t.next(n),t.complete()}))})}function qo(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Zn((s,u)=>n(s,u,r)):Fs.y,(0,Vs.q)(1),t?wh(e):Eh(()=>new zo))}var jr=O(8505);class js{constructor(e,t){this.id=e,this.url=t}}class Wc extends js{constructor(e,t,r="imperative",s=null){super(e,t),this.navigationTrigger=r,this.restoredState=s}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Ci extends js{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Ih extends js{constructor(e,t,r){super(e,t),this.reason=r}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Ln extends js{constructor(e,t,r){super(e,t),this.error=r}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class dl extends js{constructor(e,t,r,s){super(e,t),this.urlAfterRedirects=r,this.state=s}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ko extends js{constructor(e,t,r,s){super(e,t),this.urlAfterRedirects=r,this.state=s}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Rp extends js{constructor(e,t,r,s,u){super(e,t),this.urlAfterRedirects=r,this.state=s,this.shouldActivate=u}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class gu extends js{constructor(e,t,r,s){super(e,t),this.urlAfterRedirects=r,this.state=s}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class xr extends js{constructor(e,t,r,s){super(e,t),this.urlAfterRedirects=r,this.state=s}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class $r{constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class mu{constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Zo{constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ho{constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Gi{constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class xa{constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class yu{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const Ut="primary";class qc{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function Ai(n){return new qc(n)}const Hr="ngNavigationCancelingError";function _u(n){const e=Error("NavigationCancelingError: "+n);return e[Hr]=!0,e}function Kc(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const s={};for(let u=0;u<r.length;u++){const c=r[u],p=n[u];if(c.startsWith(":"))s[c.substring(1)]=p;else if(c!==p.path)return null}return{consumed:n.slice(0,r.length),posParams:s}}function pr(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let s;for(let u=0;u<t.length;u++)if(s=t[u],!hl(n[s],e[s]))return!1;return!0}function hl(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((s,u)=>r[u]===s)}return n===e}function vu(n){return Array.prototype.concat.apply([],n)}function Eu(n){return n.length>0?n[n.length-1]:null}function Mn(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function Xn(n){return(0,h.CqO)(n)?n:(0,h.QGY)(n)?(0,Sn.D)(Promise.resolve(n)):ut(n)}const Dh={exact:function pl(n,e,t){if(!mt(n.segments,e.segments)||!F(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!pl(n.children[r],e.children[r],t))return!1;return!0},subset:T},hs={exact:function wu(n,e){return pr(n,e)},subset:function D(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>hl(n[t],e[t]))},ignored:()=>!0};function Qo(n,e,t){return Dh[t.paths](n.root,e.root,t.matrixParams)&&hs[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function T(n,e,t){return N(n,e,e.segments,t)}function N(n,e,t,r){if(n.segments.length>t.length){const s=n.segments.slice(0,t.length);return!(!mt(s,t)||e.hasChildren()||!F(s,t,r))}if(n.segments.length===t.length){if(!mt(n.segments,t)||!F(n.segments,t,r))return!1;for(const s in e.children)if(!n.children[s]||!T(n.children[s],e.children[s],r))return!1;return!0}{const s=t.slice(0,n.segments.length),u=t.slice(n.segments.length);return!!(mt(n.segments,s)&&F(n.segments,s,r)&&n.children[Ut])&&N(n.children[Ut],e,u,r)}}function F(n,e,t){return e.every((r,s)=>hs[t](n[s].parameters,r.parameters))}class Q{constructor(e,t,r){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Ai(this.queryParams)),this._queryParamMap}toString(){return Gr.serialize(this)}}class J{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Mn(t,(r,s)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return xn(this)}}class Le{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=Ai(this.parameters)),this._parameterMap}toString(){return Qc(this)}}function mt(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}class Kt{}class Dt{parse(e){const t=new Th(e);return new Q(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${zi(e.root,!0)}`,r=function Jc(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(s=>`${zr(t)}=${zr(s)}`).join("&"):`${zr(t)}=${zr(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function Hs(n){return encodeURI(n)}(e.fragment)}`:""}`}}const Gr=new Dt;function xn(n){return n.segments.map(e=>Qc(e)).join("/")}function zi(n,e){if(!n.hasChildren())return xn(n);if(e){const t=n.children[Ut]?zi(n.children[Ut],!1):"",r=[];return Mn(n.children,(s,u)=>{u!==Ut&&r.push(`${u}:${zi(s,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function Mt(n,e){let t=[];return Mn(n.children,(r,s)=>{s===Ut&&(t=t.concat(e(r,s)))}),Mn(n.children,(r,s)=>{s!==Ut&&(t=t.concat(e(r,s)))}),t}(n,(r,s)=>s===Ut?[zi(n.children[Ut],!1)]:[`${s}:${zi(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[Ut]?`${xn(n)}/${t[0]}`:`${xn(n)}/(${t.join("//")})`}}function $s(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function zr(n){return $s(n).replace(/%3B/gi,";")}function ri(n){return $s(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Jo(n){return decodeURIComponent(n)}function Yc(n){return Jo(n.replace(/\+/g,"%20"))}function Qc(n){return`${ri(n.path)}${function gl(n){return Object.keys(n).map(e=>`;${ri(e)}=${ri(n[e])}`).join("")}(n.parameters)}`}const zm=/^[^\/()?;=#]+/;function Xc(n){const e=n.match(zm);return e?e[0]:""}const bu=/^[^=?&#]+/,Wm=/^[^&#]+/;class Th{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new J([],{}):new J([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[Ut]=new J(e,t)),r}parseSegment(){const e=Xc(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(e),new Le(Jo(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=Xc(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const s=Xc(this.remaining);s&&(r=s,this.capture(r))}e[Jo(t)]=Jo(r)}parseQueryParam(e){const t=function Ra(n){const e=n.match(bu);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const c=function fE(n){const e=n.match(Wm);return e?e[0]:""}(this.remaining);c&&(r=c,this.capture(r))}const s=Yc(t),u=Yc(r);if(e.hasOwnProperty(s)){let c=e[s];Array.isArray(c)||(c=[c],e[s]=c),c.push(u)}else e[s]=u}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=Xc(this.remaining),s=this.remaining[r.length];if("/"!==s&&")"!==s&&";"!==s)throw new Error(`Cannot parse url '${this.url}'`);let u;r.indexOf(":")>-1?(u=r.substr(0,r.indexOf(":")),this.capture(u),this.capture(":")):e&&(u=Ut);const c=this.parseChildren();t[u]=1===Object.keys(c).length?c[Ut]:new J([],c),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new Error(`Expected "${e}".`)}}class Op{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=ml(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=ml(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=Ch(e,this._root);return t.length<2?[]:t[t.length-2].children.map(s=>s.value).filter(s=>s!==e)}pathFromRoot(e){return Ch(e,this._root).map(t=>t.value)}}function ml(n,e){if(n===e.value)return e;for(const t of e.children){const r=ml(n,t);if(r)return r}return null}function Ch(n,e){if(n===e.value)return[e];for(const t of e.children){const r=Ch(n,t);if(r.length)return r.unshift(e),r}return[]}class fo{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function Iu(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class yl extends Op{constructor(e,t){super(e),this.snapshot=t,nd(this,e)}toString(){return this.snapshot.toString()}}function ed(n,e){const t=function Du(n,e){const c=new Pa([],{},{},"",{},Ut,e,null,n.root,-1,{});return new td("",new fo(c,[]))}(n,e),r=new Br([new Le("",{})]),s=new Br({}),u=new Br({}),c=new Br({}),p=new Br(""),_=new Oa(r,s,c,p,u,Ut,e,t.root);return _.snapshot=t.root,new yl(new fo(_,[]),t)}class Oa{constructor(e,t,r,s,u,c,p,_){this.url=e,this.params=t,this.queryParams=r,this.fragment=s,this.data=u,this.outlet=c,this.component=p,this._futureSnapshot=_}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,St.U)(e=>Ai(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,St.U)(e=>Ai(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Pp(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const s=t[r],u=t[r-1];if(s.routeConfig&&""===s.routeConfig.path)r--;else{if(u.component)break;r--}}return function kp(n){return n.reduce((e,t)=>({params:Object.assign(Object.assign({},e.params),t.params),data:Object.assign(Object.assign({},e.data),t.data),resolve:Object.assign(Object.assign({},e.resolve),t._resolvedData)}),{params:{},data:{},resolve:{}})}(t.slice(r))}class Pa{constructor(e,t,r,s,u,c,p,_,b,A,x){this.url=e,this.params=t,this.queryParams=r,this.fragment=s,this.data=u,this.outlet=c,this.component=p,this.routeConfig=_,this._urlSegment=b,this._lastPathIndex=A,this._resolve=x}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Ai(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Ai(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class td extends Op{constructor(e,t){super(t),this.url=e,nd(this,t)}toString(){return Ah(this._root)}}function nd(n,e){e.value._routerState=n,e.children.forEach(t=>nd(n,t))}function Ah(n){const e=n.children.length>0?` { ${n.children.map(Ah).join(", ")} } `:"";return`${n.value}${e}`}function rd(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,pr(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),pr(e.params,t.params)||n.params.next(t.params),function Zc(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!pr(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),pr(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function Gs(n,e){const t=pr(n.params,e.params)&&function We(n,e){return mt(n,e)&&n.every((t,r)=>pr(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||Gs(n.parent,e.parent))}function _l(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const s=function Km(n,e,t){return e.children.map(r=>{for(const s of t.children)if(n.shouldReuseRoute(r.value,s.value.snapshot))return _l(n,r,s);return _l(n,r)})}(n,e,t);return new fo(r,s)}{if(n.shouldAttach(e.value)){const u=n.retrieve(e.value);if(null!==u){const c=u.route;return c.value._futureSnapshot=e.value,c.children=e.children.map(p=>_l(n,p)),c}}const r=function Zm(n){return new Oa(new Br(n.url),new Br(n.params),new Br(n.queryParams),new Br(n.fragment),new Br(n.data),n.outlet,n.component,n)}(e.value),s=e.children.map(u=>_l(n,u));return new fo(r,s)}}function Wi(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function qi(n){return"object"==typeof n&&null!=n&&n.outlets}function id(n,e,t,r,s){let u={};if(r&&Mn(r,(p,_)=>{u[_]=Array.isArray(p)?p.map(b=>`${b}`):`${p}`}),n===e)return new Q(t,u,s);const c=Mh(n,e,t);return new Q(c,u,s)}function Mh(n,e,t){const r={};return Mn(n.children,(s,u)=>{r[u]=s===e?t:Mh(s,e,t)}),new J(n.segments,r)}class Fp{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&Wi(r[0]))throw new Error("Root segment cannot have matrix parameters");const s=r.find(qi);if(s&&s!==Eu(r))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Nh{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function Vp(n,e,t){if(n||(n=new J([],{})),0===n.segments.length&&n.hasChildren())return sd(n,e,t);const r=function pE(n,e,t){let r=0,s=e;const u={match:!1,pathIndex:0,commandIndex:0};for(;s<n.segments.length;){if(r>=t.length)return u;const c=n.segments[s],p=t[r];if(qi(p))break;const _=`${p}`,b=r<t.length-1?t[r+1]:null;if(s>0&&void 0===_)break;if(_&&b&&"object"==typeof b&&void 0===b.outlets){if(!w(_,b,c))return u;r+=2}else{if(!w(_,{},c))return u;r++}s++}return{match:!0,pathIndex:s,commandIndex:r}}(n,e,t),s=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const u=new J(n.segments.slice(0,r.pathIndex),{});return u.children[Ut]=new J(n.segments.slice(r.pathIndex),n.children),sd(u,0,s)}return r.match&&0===s.length?new J(n.segments,{}):r.match&&!n.hasChildren()?v(n,e,t):r.match?sd(n,0,s):v(n,e,t)}function sd(n,e,t){if(0===t.length)return new J(n.segments,{});{const r=function Ym(n){return qi(n[0])?n[0].outlets:{[Ut]:n}}(t),s={};return Mn(r,(u,c)=>{"string"==typeof u&&(u=[u]),null!==u&&(s[c]=Vp(n.children[c],e,u))}),Mn(n.children,(u,c)=>{void 0===r[c]&&(s[c]=u)}),new J(n.segments,s)}}function v(n,e,t){const r=n.segments.slice(0,e);let s=0;for(;s<t.length;){const u=t[s];if(qi(u)){const _=g(u.outlets);return new J(r,_)}if(0===s&&Wi(t[0])){r.push(new Le(n.segments[e].path,m(t[0]))),s++;continue}const c=qi(u)?u.outlets[Ut]:`${u}`,p=s<t.length-1?t[s+1]:null;c&&p&&Wi(p)?(r.push(new Le(c,m(p))),s+=2):(r.push(new Le(c,{})),s++)}return new J(r,{})}function g(n){const e={};return Mn(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=v(new J([],{}),0,t))}),e}function m(n){const e={};return Mn(n,(t,r)=>e[r]=`${t}`),e}function w(n,e,t){return n==t.path&&pr(e,t.parameters)}class P{constructor(e,t,r,s){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=s}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),rd(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const s=Iu(t);e.children.forEach(u=>{const c=u.value.outlet;this.deactivateRoutes(u,s[c],r),delete s[c]}),Mn(s,(u,c)=>{this.deactivateRouteAndItsChildren(u,r)})}deactivateRoutes(e,t,r){const s=e.value,u=t?t.value:null;if(s===u)if(s.component){const c=r.getContext(s.outlet);c&&this.deactivateChildRoutes(e,t,c.children)}else this.deactivateChildRoutes(e,t,r);else u&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),s=r&&e.value.component?r.children:t,u=Iu(e);for(const c of Object.keys(u))this.deactivateRouteAndItsChildren(u[c],s);if(r&&r.outlet){const c=r.outlet.detach(),p=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:c,route:e,contexts:p})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),s=r&&e.value.component?r.children:t,u=Iu(e);for(const c of Object.keys(u))this.deactivateRouteAndItsChildren(u[c],s);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const s=Iu(t);e.children.forEach(u=>{this.activateRoutes(u,s[u.value.outlet],r),this.forwardEvent(new xa(u.value.snapshot))}),e.children.length&&this.forwardEvent(new ho(e.value.snapshot))}activateRoutes(e,t,r){const s=e.value,u=t?t.value:null;if(rd(s),s===u)if(s.component){const c=r.getOrCreateContext(s.outlet);this.activateChildRoutes(e,t,c.children)}else this.activateChildRoutes(e,t,r);else if(s.component){const c=r.getOrCreateContext(s.outlet);if(this.routeReuseStrategy.shouldAttach(s.snapshot)){const p=this.routeReuseStrategy.retrieve(s.snapshot);this.routeReuseStrategy.store(s.snapshot,null),c.children.onOutletReAttached(p.contexts),c.attachRef=p.componentRef,c.route=p.route.value,c.outlet&&c.outlet.attach(p.componentRef,p.route.value),rd(p.route.value),this.activateChildRoutes(e,null,c.children)}else{const p=function te(n){for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(s.snapshot),_=p?p.module.componentFactoryResolver:null;c.attachRef=null,c.route=s,c.resolver=_,c.outlet&&c.outlet.activateWith(s,_),this.activateChildRoutes(e,null,c.children)}}else this.activateChildRoutes(e,null,r)}}class Ne{constructor(e,t){this.routes=e,this.module=t}}function et(n){return"function"==typeof n}function Nt(n){return n instanceof Q}const vl=Symbol("INITIAL_VALUE");function Cu(){return wr(n=>function cs(...n){const e=(0,hu.yG)(n),t=(0,hu.jO)(n),{args:r,keys:s}=$c(n);if(0===r.length)return(0,Sn.D)([],e);const u=new Di.y(function Ho(n,e,t=Fs.y){return r=>{ni(e,()=>{const{length:s}=n,u=new Array(s);let c=s,p=s;for(let _=0;_<s;_++)ni(e,()=>{const b=(0,Sn.D)(n[_],e);let A=!1;b.subscribe((0,Kn.x)(r,x=>{u[_]=x,A||(A=!0,p--),p||r.next(t(u.slice()))},()=>{--c||r.complete()}))},r)},r)}}(r,e,s?c=>Gc(s,c):Fs.y));return t?u.pipe(fu(t)):u}(n.map(e=>e.pipe((0,Vs.q)(1),co(vl)))).pipe($i((e,t)=>{let r=!1;return t.reduce((s,u,c)=>s!==vl?s:(u===vl&&(r=!0),r||!1!==u&&c!==t.length-1&&!Nt(u)?s:u),e)},vl),Zn(e=>e!==vl),(0,St.U)(e=>Nt(e)?e:!0===e),(0,Vs.q)(1)))}class Oh{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new Au,this.attachRef=null}}class Au{constructor(){this.contexts=new Map}onChildOutletCreated(e,t){const r=this.getOrCreateContext(e);r.outlet=t,this.contexts.set(e,r)}onChildOutletDestroyed(e){const t=this.getContext(e);t&&(t.outlet=null,t.attachRef=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let t=this.getContext(e);return t||(t=new Oh,this.contexts.set(e,t)),t}getContext(e){return this.contexts.get(e)||null}}let El=(()=>{class n{constructor(t,r,s,u,c){this.parentContexts=t,this.location=r,this.resolver=s,this.changeDetector=c,this.activated=null,this._activatedRoute=null,this.activateEvents=new h.vpe,this.deactivateEvents=new h.vpe,this.attachEvents=new h.vpe,this.detachEvents=new h.vpe,this.name=u||Ut,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const c=(r=r||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),p=this.parentContexts.getOrCreateContext(this.name).children,_=new Up(t,p,this.location.injector);this.activated=this.location.createComponent(c,this.location.length,_),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(Au),h.Y36(h.s_b),h.Y36(h._Vd),h.$8M("name"),h.Y36(h.sBO))},n.\u0275dir=h.lG2({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),n})();class Up{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===Oa?this.route:e===Au?this.childContexts:this.parent.get(e,t)}}let Ph=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=h.Xpm({type:n,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,r){1&t&&h._UZ(0,"router-outlet")},directives:[El],encapsulation:2}),n})();function wl(n,e=""){for(let t=0;t<n.length;t++){const r=n[t];bl(r,Bp(e,r))}}function bl(n,e){n.children&&wl(n.children,e)}function Bp(n,e){return e?n||e.path?n&&!e.path?`${n}/`:!n&&e.path?e.path:`${n}/${e.path}`:"":n}function ka(n){const e=n.children&&n.children.map(ka),t=e?Object.assign(Object.assign({},n),{children:e}):Object.assign({},n);return!t.component&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Ut&&(t.component=Ph),t}function Zi(n){return n.outlet||Ut}function er(n,e){const t=n.filter(r=>Zi(r)===e);return t.push(...n.filter(r=>Zi(r)!==e)),t}const Qm={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function jp(n,e,t){var r;if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?Object.assign({},Qm):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const u=(e.matcher||Kc)(t,n,e);if(!u)return Object.assign({},Qm);const c={};Mn(u.posParams,(_,b)=>{c[b]=_.path});const p=u.consumed.length>0?Object.assign(Object.assign({},c),u.consumed[u.consumed.length-1].parameters):c;return{matched:!0,consumedSegments:u.consumed,remainingSegments:t.slice(u.consumed.length),parameters:p,positionalParamSegments:null!==(r=u.posParams)&&void 0!==r?r:{}}}function od(n,e,t,r,s="corrected"){if(t.length>0&&function zI(n,e,t){return t.some(r=>$p(n,e,r)&&Zi(r)!==Ut)}(n,t,r)){const c=new J(e,function GI(n,e,t,r){const s={};s[Ut]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const u of t)if(""===u.path&&Zi(u)!==Ut){const c=new J([],{});c._sourceSegment=n,c._segmentIndexShift=e.length,s[Zi(u)]=c}return s}(n,e,r,new J(t,n.children)));return c._sourceSegment=n,c._segmentIndexShift=e.length,{segmentGroup:c,slicedSegments:[]}}if(0===t.length&&function WI(n,e,t){return t.some(r=>$p(n,e,r))}(n,t,r)){const c=new J(n.segments,function gE(n,e,t,r,s,u){const c={};for(const p of r)if($p(n,t,p)&&!s[Zi(p)]){const _=new J([],{});_._sourceSegment=n,_._segmentIndexShift="legacy"===u?n.segments.length:e.length,c[Zi(p)]=_}return Object.assign(Object.assign({},s),c)}(n,e,t,r,n.children,s));return c._sourceSegment=n,c._segmentIndexShift=e.length,{segmentGroup:c,slicedSegments:t}}const u=new J(n.segments,n.children);return u._sourceSegment=n,u._segmentIndexShift=e.length,{segmentGroup:u,slicedSegments:t}}function $p(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function mE(n,e,t,r){return!!(Zi(n)===r||r!==Ut&&$p(e,t,n))&&("**"===n.path||jp(e,n,t).matched)}function qI(n,e,t){return 0===e.length&&!n.children[t]}class Jm{constructor(e){this.segmentGroup=e||null}}class ad{constructor(e){this.urlTree=e}}function Nr(n){return Go(new Jm(n))}function Hp(n){return Go(new ad(n))}class kh{constructor(e,t,r,s,u){this.configLoader=t,this.urlSerializer=r,this.urlTree=s,this.config=u,this.allowRedirects=!0,this.ngModule=e.get(h.h0i)}apply(){const e=od(this.urlTree.root,[],[],this.config).segmentGroup,t=new J(e.segments,e.children);return this.expandSegmentGroup(this.ngModule,this.config,t,Ut).pipe((0,St.U)(u=>this.createUrlTree(ey(u),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Bs(u=>{if(u instanceof ad)return this.allowRedirects=!1,this.match(u.urlTree);throw u instanceof Jm?this.noMatchError(u):u}))}match(e){return this.expandSegmentGroup(this.ngModule,this.config,e.root,Ut).pipe((0,St.U)(s=>this.createUrlTree(ey(s),e.queryParams,e.fragment))).pipe(Bs(s=>{throw s instanceof Jm?this.noMatchError(s):s}))}noMatchError(e){return new Error(`Cannot match any routes. URL Segment: '${e.segmentGroup}'`)}createUrlTree(e,t,r){const s=e.segments.length>0?new J([],{[Ut]:e}):e;return new Q(s,t,r)}expandSegmentGroup(e,t,r,s){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,St.U)(u=>new J([],u))):this.expandSegment(e,r,t,r.segments,s,!0)}expandChildren(e,t,r){const s=[];for(const u of Object.keys(r.children))"primary"===u?s.unshift(u):s.push(u);return(0,Sn.D)(s).pipe(Hi(u=>{const c=r.children[u],p=er(t,u);return this.expandSegmentGroup(e,p,c,u).pipe((0,St.U)(_=>({segment:_,outlet:u})))}),$i((u,c)=>(u[c.outlet]=c.segment,u),{}),function Gm(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Zn((s,u)=>n(s,u,r)):Fs.y,Wo(1),t?wh(e):Eh(()=>new zo))}())}expandSegment(e,t,r,s,u,c){return(0,Sn.D)(r).pipe(Hi(p=>this.expandSegmentAgainstRoute(e,t,r,p,s,u,c).pipe(Bs(b=>{if(b instanceof Jm)return ut(null);throw b}))),qo(p=>!!p),Bs((p,_)=>{if(p instanceof zo||"EmptyError"===p.name)return qI(t,s,u)?ut(new J([],{})):Nr(t);throw p}))}expandSegmentAgainstRoute(e,t,r,s,u,c,p){return mE(s,t,u,c)?void 0===s.redirectTo?this.matchSegmentAgainstRoute(e,t,s,u,c):p&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,s,u,c):Nr(t):Nr(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,s,u,c){return"**"===s.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,s,c):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,s,u,c)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,s){const u=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?Hp(u):this.lineralizeSegments(r,u).pipe((0,Jn.z)(c=>{const p=new J(c,{});return this.expandSegment(e,p,t,c,s,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,s,u,c){const{matched:p,consumedSegments:_,remainingSegments:b,positionalParamSegments:A}=jp(t,s,u);if(!p)return Nr(t);const x=this.applyRedirectCommands(_,s.redirectTo,A);return s.redirectTo.startsWith("/")?Hp(x):this.lineralizeSegments(s,x).pipe((0,Jn.z)(V=>this.expandSegment(e,t,r,V.concat(b),c,!1)))}matchSegmentAgainstRoute(e,t,r,s,u){if("**"===r.path)return r.loadChildren?(r._loadedConfig?ut(r._loadedConfig):this.configLoader.load(e.injector,r)).pipe((0,St.U)(x=>(r._loadedConfig=x,new J(s,{})))):ut(new J(s,{}));const{matched:c,consumedSegments:p,remainingSegments:_}=jp(t,r,s);return c?this.getChildConfig(e,r,s).pipe((0,Jn.z)(A=>{const x=A.module,V=A.routes,{segmentGroup:q,slicedSegments:Y}=od(t,p,_,V),ve=new J(q.segments,q.children);if(0===Y.length&&ve.hasChildren())return this.expandChildren(x,V,ve).pipe((0,St.U)(Ct=>new J(p,Ct)));if(0===V.length&&0===Y.length)return ut(new J(p,{}));const Ue=Zi(r)===u;return this.expandSegment(x,ve,V,Y,Ue?Ut:u,!0).pipe((0,St.U)(wt=>new J(p.concat(wt.segments),wt.children)))})):Nr(t)}getChildConfig(e,t,r){return t.children?ut(new Ne(t.children,e)):t.loadChildren?void 0!==t._loadedConfig?ut(t._loadedConfig):this.runCanLoadGuards(e.injector,t,r).pipe((0,Jn.z)(s=>s?this.configLoader.load(e.injector,t).pipe((0,St.U)(u=>(t._loadedConfig=u,u))):function _E(n){return Go(_u(`Cannot load children because the guard of the route "path: '${n.path}'" returned false`))}(t))):ut(new Ne([],e))}runCanLoadGuards(e,t,r){const s=t.canLoad;return s&&0!==s.length?ut(s.map(c=>{const p=e.get(c);let _;if(function Vn(n){return n&&et(n.canLoad)}(p))_=p.canLoad(t,r);else{if(!et(p))throw new Error("Invalid CanLoad guard");_=p(t,r)}return Xn(_)})).pipe(Cu(),(0,jr.b)(c=>{if(!Nt(c))return;const p=_u(`Redirecting to "${this.urlSerializer.serialize(c)}"`);throw p.url=c,p}),(0,St.U)(c=>!0===c)):ut(!0)}lineralizeSegments(e,t){let r=[],s=t.root;for(;;){if(r=r.concat(s.segments),0===s.numberOfChildren)return ut(r);if(s.numberOfChildren>1||!s.children[Ut])return Go(new Error(`Only absolute redirects can have named outlets. redirectTo: '${e.redirectTo}'`));s=s.children[Ut]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreatreUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreatreUrlTree(e,t,r,s){const u=this.createSegmentGroup(e,t.root,r,s);return new Q(u,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return Mn(e,(s,u)=>{if("string"==typeof s&&s.startsWith(":")){const p=s.substring(1);r[u]=t[p]}else r[u]=s}),r}createSegmentGroup(e,t,r,s){const u=this.createSegments(e,t.segments,r,s);let c={};return Mn(t.children,(p,_)=>{c[_]=this.createSegmentGroup(e,p,r,s)}),new J(u,c)}createSegments(e,t,r,s){return t.map(u=>u.path.startsWith(":")?this.findPosParam(e,u,s):this.findOrReturn(u,r))}findPosParam(e,t,r){const s=r[t.path.substring(1)];if(!s)throw new Error(`Cannot redirect to '${e}'. Cannot find '${t.path}'.`);return s}findOrReturn(e,t){let r=0;for(const s of t){if(s.path===e.path)return t.splice(r),s;r++}return e}}function ey(n){const e={};for(const r of Object.keys(n.children)){const u=ey(n.children[r]);(u.segments.length>0||u.hasChildren())&&(e[r]=u)}return function Xm(n){if(1===n.numberOfChildren&&n.children[Ut]){const e=n.children[Ut];return new J(n.segments.concat(e.segments),e.children)}return n}(new J(n.segments,e))}class ty{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class Gp{constructor(e,t){this.component=e,this.route=t}}function vE(n,e,t){const r=n._root;return Lh(r,e?e._root:null,t,[r.value])}function Fh(n,e,t){const r=function YI(n){if(!n)return null;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(r?r.module.injector:t).get(n)}function Lh(n,e,t,r,s={canDeactivateChecks:[],canActivateChecks:[]}){const u=Iu(e);return n.children.forEach(c=>{(function ny(n,e,t,r,s={canDeactivateChecks:[],canActivateChecks:[]}){const u=n.value,c=e?e.value:null,p=t?t.getContext(n.value.outlet):null;if(c&&u.routeConfig===c.routeConfig){const _=function QI(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!mt(n.url,e.url);case"pathParamsOrQueryParamsChange":return!mt(n.url,e.url)||!pr(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Gs(n,e)||!pr(n.queryParams,e.queryParams);default:return!Gs(n,e)}}(c,u,u.routeConfig.runGuardsAndResolvers);_?s.canActivateChecks.push(new ty(r)):(u.data=c.data,u._resolvedData=c._resolvedData),Lh(n,e,u.component?p?p.children:null:t,r,s),_&&p&&p.outlet&&p.outlet.isActivated&&s.canDeactivateChecks.push(new Gp(p.outlet.component,c))}else c&&Vh(e,p,s),s.canActivateChecks.push(new ty(r)),Lh(n,null,u.component?p?p.children:null:t,r,s)})(c,u[c.value.outlet],t,r.concat([c.value]),s),delete u[c.value.outlet]}),Mn(u,(c,p)=>Vh(c,t.getContext(p),s)),s}function Vh(n,e,t){const r=Iu(n),s=n.value;Mn(r,(u,c)=>{Vh(u,s.component?e?e.children.getContext(c):null:e,t)}),t.canDeactivateChecks.push(new Gp(s.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,s))}class iD{}function iy(n){return new Di.y(e=>e.error(n))}class oD{constructor(e,t,r,s,u,c){this.rootComponentType=e,this.config=t,this.urlTree=r,this.url=s,this.paramsInheritanceStrategy=u,this.relativeLinkResolution=c}recognize(){const e=od(this.urlTree.root,[],[],this.config.filter(c=>void 0===c.redirectTo),this.relativeLinkResolution).segmentGroup,t=this.processSegmentGroup(this.config,e,Ut);if(null===t)return null;const r=new Pa([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},Ut,this.rootComponentType,null,this.urlTree.root,-1,{}),s=new fo(r,t),u=new td(this.url,s);return this.inheritParamsAndData(u._root),u}inheritParamsAndData(e){const t=e.value,r=Pp(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(s=>this.inheritParamsAndData(s))}processSegmentGroup(e,t,r){return 0===t.segments.length&&t.hasChildren()?this.processChildren(e,t):this.processSegment(e,t,t.segments,r)}processChildren(e,t){const r=[];for(const u of Object.keys(t.children)){const c=t.children[u],p=er(e,u),_=this.processSegmentGroup(p,c,u);if(null===_)return null;r.push(..._)}const s=EE(r);return function aD(n){n.sort((e,t)=>e.value.outlet===Ut?-1:t.value.outlet===Ut?1:e.value.outlet.localeCompare(t.value.outlet))}(s),s}processSegment(e,t,r,s){for(const u of e){const c=this.processSegmentAgainstRoute(u,t,r,s);if(null!==c)return c}return qI(t,r,s)?[]:null}processSegmentAgainstRoute(e,t,r,s){if(e.redirectTo||!mE(e,t,r,s))return null;let u,c=[],p=[];if("**"===e.path){const q=r.length>0?Eu(r).parameters:{};u=new Pa(r,q,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,po(e),Zi(e),e.component,e,wE(t),Il(t)+r.length,cD(e))}else{const q=jp(t,e,r);if(!q.matched)return null;c=q.consumedSegments,p=q.remainingSegments,u=new Pa(c,q.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,po(e),Zi(e),e.component,e,wE(t),Il(t)+c.length,cD(e))}const _=function uD(n){return n.children?n.children:n.loadChildren?n._loadedConfig.routes:[]}(e),{segmentGroup:b,slicedSegments:A}=od(t,c,p,_.filter(q=>void 0===q.redirectTo),this.relativeLinkResolution);if(0===A.length&&b.hasChildren()){const q=this.processChildren(_,b);return null===q?null:[new fo(u,q)]}if(0===_.length&&0===A.length)return[new fo(u,[])];const x=Zi(e)===s,V=this.processSegment(_,b,A,x?Ut:s);return null===V?null:[new fo(u,V)]}}function lD(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function EE(n){const e=[],t=new Set;for(const r of n){if(!lD(r)){e.push(r);continue}const s=e.find(u=>r.value.routeConfig===u.value.routeConfig);void 0!==s?(s.children.push(...r.children),t.add(s)):e.push(r)}for(const r of t){const s=EE(r.children);e.push(new fo(r.value,s))}return e.filter(r=>!t.has(r))}function wE(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function Il(n){let e=n,t=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift?e._segmentIndexShift:0;return t-1}function po(n){return n.data||{}}function cD(n){return n.resolve||{}}function Wp(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function oy(n){return wr(e=>{const t=n(e);return t?(0,Sn.D)(t).pipe((0,St.U)(()=>e)):ut(e)})}class DE extends class Uh{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const qp=new h.OlP("ROUTES");class Kp{constructor(e,t,r,s){this.injector=e,this.compiler=t,this.onLoadStartListener=r,this.onLoadEndListener=s}load(e,t){if(t._loader$)return t._loader$;this.onLoadStartListener&&this.onLoadStartListener(t);const s=this.loadModuleFactory(t.loadChildren).pipe((0,St.U)(u=>{this.onLoadEndListener&&this.onLoadEndListener(t);const c=u.create(e);return new Ne(vu(c.injector.get(qp,void 0,h.XFs.Self|h.XFs.Optional)).map(ka),c)}),Bs(u=>{throw t._loader$=void 0,u}));return t._loader$=new ji(s,()=>new fr.x).pipe(cl()),t._loader$}loadModuleFactory(e){return Xn(e()).pipe((0,Jn.z)(t=>t instanceof h.YKP?ut(t):(0,Sn.D)(this.compiler.compileModuleAsync(t))))}}class TE{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function aS(n){throw n}function ud(n,e,t){return e.parse("/")}function Zp(n,e){return ut(null)}const CE={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},dD={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let gi=(()=>{class n{constructor(t,r,s,u,c,p,_){this.rootComponentType=t,this.urlSerializer=r,this.rootContexts=s,this.location=u,this.config=_,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new fr.x,this.errorHandler=aS,this.malformedUriErrorHandler=ud,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:Zp,afterPreactivation:Zp},this.urlHandlingStrategy=new TE,this.routeReuseStrategy=new DE,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=c.get(h.h0i),this.console=c.get(h.c2e);const x=c.get(h.R0b);this.isNgZoneEnabled=x instanceof h.R0b&&h.R0b.isInAngularZone(),this.resetConfig(_),this.currentUrlTree=function fl(){return new Q(new J([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new Kp(c,p,V=>this.triggerEvent(new $r(V)),V=>this.triggerEvent(new mu(V))),this.routerState=ed(this.currentUrlTree,this.rootComponentType),this.transitions=new Br({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var t;return null===(t=this.location.getState())||void 0===t?void 0:t.\u0275routerPageId}setupNavigations(t){const r=this.events;return t.pipe(Zn(s=>0!==s.id),(0,St.U)(s=>Object.assign(Object.assign({},s),{extractedUrl:this.urlHandlingStrategy.extract(s.rawUrl)})),wr(s=>{let u=!1,c=!1;return ut(s).pipe((0,jr.b)(p=>{this.currentNavigation={id:p.id,initialUrl:p.currentRawUrl,extractedUrl:p.extractedUrl,trigger:p.source,extras:p.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),wr(p=>{const _=this.browserUrlTree.toString(),b=!this.navigated||p.extractedUrl.toString()!==_||_!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||b)&&this.urlHandlingStrategy.shouldProcessUrl(p.rawUrl))return AE(p.source)&&(this.browserUrlTree=p.extractedUrl),ut(p).pipe(wr(x=>{const V=this.transitions.getValue();return r.next(new Wc(x.id,this.serializeUrl(x.extractedUrl),x.source,x.restoredState)),V!==this.transitions.getValue()?Ti.E:Promise.resolve(x)}),function KI(n,e,t,r){return wr(s=>function pi(n,e,t,r,s){return new kh(n,e,t,r,s).apply()}(n,e,t,s.extractedUrl,r).pipe((0,St.U)(u=>Object.assign(Object.assign({},s),{urlAfterRedirects:u}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,jr.b)(x=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:x.urlAfterRedirects})}),function sS(n,e,t,r,s){return(0,Jn.z)(u=>function sD(n,e,t,r,s="emptyOnly",u="legacy"){try{const c=new oD(n,e,t,r,s,u).recognize();return null===c?iy(new iD):ut(c)}catch(c){return iy(c)}}(n,e,u.urlAfterRedirects,t(u.urlAfterRedirects),r,s).pipe((0,St.U)(c=>Object.assign(Object.assign({},u),{targetSnapshot:c}))))}(this.rootComponentType,this.config,x=>this.serializeUrl(x),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,jr.b)(x=>{if("eager"===this.urlUpdateStrategy){if(!x.extras.skipLocationChange){const q=this.urlHandlingStrategy.merge(x.urlAfterRedirects,x.rawUrl);this.setBrowserUrl(q,x)}this.browserUrlTree=x.urlAfterRedirects}const V=new dl(x.id,this.serializeUrl(x.extractedUrl),this.serializeUrl(x.urlAfterRedirects),x.targetSnapshot);r.next(V)}));if(b&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:V,extractedUrl:q,source:Y,restoredState:ve,extras:Ue}=p,_t=new Wc(V,this.serializeUrl(q),Y,ve);r.next(_t);const wt=ed(q,this.rootComponentType).snapshot;return ut(Object.assign(Object.assign({},p),{targetSnapshot:wt,urlAfterRedirects:q,extras:Object.assign(Object.assign({},Ue),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=p.rawUrl,p.resolve(null),Ti.E}),oy(p=>{const{targetSnapshot:_,id:b,extractedUrl:A,rawUrl:x,extras:{skipLocationChange:V,replaceUrl:q}}=p;return this.hooks.beforePreactivation(_,{navigationId:b,appliedUrlTree:A,rawUrlTree:x,skipLocationChange:!!V,replaceUrl:!!q})}),(0,jr.b)(p=>{const _=new Ko(p.id,this.serializeUrl(p.extractedUrl),this.serializeUrl(p.urlAfterRedirects),p.targetSnapshot);this.triggerEvent(_)}),(0,St.U)(p=>Object.assign(Object.assign({},p),{guards:vE(p.targetSnapshot,p.currentSnapshot,this.rootContexts)})),function ry(n,e){return(0,Jn.z)(t=>{const{targetSnapshot:r,currentSnapshot:s,guards:{canActivateChecks:u,canDeactivateChecks:c}}=t;return 0===c.length&&0===u.length?ut(Object.assign(Object.assign({},t),{guardsResult:!0})):function JI(n,e,t,r){return(0,Sn.D)(n).pipe((0,Jn.z)(s=>function rD(n,e,t,r,s){const u=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return u&&0!==u.length?ut(u.map(p=>{const _=Fh(p,e,s);let b;if(function Tu(n){return n&&et(n.canDeactivate)}(_))b=Xn(_.canDeactivate(n,e,t,r));else{if(!et(_))throw new Error("Invalid CanDeactivate guard");b=Xn(_(n,e,t,r))}return b.pipe(qo())})).pipe(Cu()):ut(!0)}(s.component,s.route,t,e,r)),qo(s=>!0!==s,!0))}(c,r,s,n).pipe((0,Jn.z)(p=>p&&function gt(n){return"boolean"==typeof n}(p)?function XI(n,e,t,r){return(0,Sn.D)(e).pipe(Hi(s=>Ma(function eD(n,e){return null!==n&&e&&e(new Zo(n)),ut(!0)}(s.route.parent,r),function zp(n,e){return null!==n&&e&&e(new Gi(n)),ut(!0)}(s.route,r),function nD(n,e,t){const r=e[e.length-1],u=e.slice(0,e.length-1).reverse().map(c=>function ZI(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(c)).filter(c=>null!==c).map(c=>pu(()=>ut(c.guards.map(_=>{const b=Fh(_,c.node,t);let A;if(function zs(n){return n&&et(n.canActivateChild)}(b))A=Xn(b.canActivateChild(r,n));else{if(!et(b))throw new Error("Invalid CanActivateChild guard");A=Xn(b(r,n))}return A.pipe(qo())})).pipe(Cu())));return ut(u).pipe(Cu())}(n,s.path,t),function tD(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return ut(!0);const s=r.map(u=>pu(()=>{const c=Fh(u,e,t);let p;if(function Ki(n){return n&&et(n.canActivate)}(c))p=Xn(c.canActivate(e,n));else{if(!et(c))throw new Error("Invalid CanActivate guard");p=Xn(c(e,n))}return p.pipe(qo())}));return ut(s).pipe(Cu())}(n,s.route,t))),qo(s=>!0!==s,!0))}(r,u,n,e):ut(p)),(0,St.U)(p=>Object.assign(Object.assign({},t),{guardsResult:p})))})}(this.ngModule.injector,p=>this.triggerEvent(p)),(0,jr.b)(p=>{if(Nt(p.guardsResult)){const b=_u(`Redirecting to "${this.serializeUrl(p.guardsResult)}"`);throw b.url=p.guardsResult,b}const _=new Rp(p.id,this.serializeUrl(p.extractedUrl),this.serializeUrl(p.urlAfterRedirects),p.targetSnapshot,!!p.guardsResult);this.triggerEvent(_)}),Zn(p=>!!p.guardsResult||(this.restoreHistory(p),this.cancelNavigationTransition(p,""),!1)),oy(p=>{if(p.guards.canActivateChecks.length)return ut(p).pipe((0,jr.b)(_=>{const b=new gu(_.id,this.serializeUrl(_.extractedUrl),this.serializeUrl(_.urlAfterRedirects),_.targetSnapshot);this.triggerEvent(b)}),wr(_=>{let b=!1;return ut(_).pipe(function bE(n,e){return(0,Jn.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:s}}=t;if(!s.length)return ut(t);let u=0;return(0,Sn.D)(s).pipe(Hi(c=>function oS(n,e,t,r){return function Xo(n,e,t,r){const s=Wp(n);if(0===s.length)return ut({});const u={};return(0,Sn.D)(s).pipe((0,Jn.z)(c=>function sy(n,e,t,r){const s=Fh(n,e,r);return Xn(s.resolve?s.resolve(e,t):s(e,t))}(n[c],e,t,r).pipe((0,jr.b)(p=>{u[c]=p}))),Wo(1),(0,Jn.z)(()=>Wp(u).length===s.length?ut(u):Ti.E))}(n._resolve,n,e,r).pipe((0,St.U)(u=>(n._resolvedData=u,n.data=Object.assign(Object.assign({},n.data),Pp(n,t).resolve),null)))}(c.route,r,n,e)),(0,jr.b)(()=>u++),Wo(1),(0,Jn.z)(c=>u===s.length?ut(t):Ti.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,jr.b)({next:()=>b=!0,complete:()=>{b||(this.restoreHistory(_),this.cancelNavigationTransition(_,"At least one route resolver didn't emit any value."))}}))}),(0,jr.b)(_=>{const b=new xr(_.id,this.serializeUrl(_.extractedUrl),this.serializeUrl(_.urlAfterRedirects),_.targetSnapshot);this.triggerEvent(b)}))}),oy(p=>{const{targetSnapshot:_,id:b,extractedUrl:A,rawUrl:x,extras:{skipLocationChange:V,replaceUrl:q}}=p;return this.hooks.afterPreactivation(_,{navigationId:b,appliedUrlTree:A,rawUrlTree:x,skipLocationChange:!!V,replaceUrl:!!q})}),(0,St.U)(p=>{const _=function qm(n,e,t){const r=_l(n,e._root,t?t._root:void 0);return new yl(r,e)}(this.routeReuseStrategy,p.targetSnapshot,p.currentRouterState);return Object.assign(Object.assign({},p),{targetRouterState:_})}),(0,jr.b)(p=>{this.currentUrlTree=p.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(p.urlAfterRedirects,p.rawUrl),this.routerState=p.targetRouterState,"deferred"===this.urlUpdateStrategy&&(p.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,p),this.browserUrlTree=p.urlAfterRedirects)}),((n,e,t)=>(0,St.U)(r=>(new P(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,this.routeReuseStrategy,p=>this.triggerEvent(p)),(0,jr.b)({next(){u=!0},complete(){u=!0}}),function bh(n){return(0,Er.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}(()=>{var p;u||c||this.cancelNavigationTransition(s,`Navigation ID ${s.id} is not equal to the current navigation id ${this.navigationId}`),(null===(p=this.currentNavigation)||void 0===p?void 0:p.id)===s.id&&(this.currentNavigation=null)}),Bs(p=>{if(c=!0,function Na(n){return n&&n[Hr]}(p)){const _=Nt(p.url);_||(this.navigated=!0,this.restoreHistory(s,!0));const b=new Ih(s.id,this.serializeUrl(s.extractedUrl),p.message);r.next(b),_?setTimeout(()=>{const A=this.urlHandlingStrategy.merge(p.url,this.rawUrlTree),x={skipLocationChange:s.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||AE(s.source)};this.scheduleNavigation(A,"imperative",null,x,{resolve:s.resolve,reject:s.reject,promise:s.promise})},0):s.resolve(!1)}else{this.restoreHistory(s,!0);const _=new Ln(s.id,this.serializeUrl(s.extractedUrl),p);r.next(_);try{s.resolve(this.errorHandler(p))}catch(b){s.reject(b)}}return Ti.E}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}setTransition(t){this.transitions.next(Object.assign(Object.assign({},this.transitions.value),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{var s;const u={replaceUrl:!0},c=(null===(s=t.state)||void 0===s?void 0:s.navigationId)?t.state:null;if(c){const _=Object.assign({},c);delete _.navigationId,delete _.\u0275routerPageId,0!==Object.keys(_).length&&(u.state=_)}const p=this.parseUrl(t.url);this.scheduleNavigation(p,r,c,u)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){wl(t),this.config=t.map(ka),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:s,queryParams:u,fragment:c,queryParamsHandling:p,preserveFragment:_}=r,b=s||this.routerState.root,A=_?this.currentUrlTree.fragment:c;let x=null;switch(p){case"merge":x=Object.assign(Object.assign({},this.currentUrlTree.queryParams),u);break;case"preserve":x=this.currentUrlTree.queryParams;break;default:x=u||null}return null!==x&&(x=this.removeEmptyProps(x)),function Sh(n,e,t,r,s){if(0===t.length)return id(e.root,e.root,e.root,r,s);const u=function xh(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new Fp(!0,0,n);let e=0,t=!1;const r=n.reduce((s,u,c)=>{if("object"==typeof u&&null!=u){if(u.outlets){const p={};return Mn(u.outlets,(_,b)=>{p[b]="string"==typeof _?_.split("/"):_}),[...s,{outlets:p}]}if(u.segmentPath)return[...s,u.segmentPath]}return"string"!=typeof u?[...s,u]:0===c?(u.split("/").forEach((p,_)=>{0==_&&"."===p||(0==_&&""===p?t=!0:".."===p?e++:""!=p&&s.push(p))}),s):[...s,u]},[]);return new Fp(t,e,r)}(t);if(u.toRoot())return id(e.root,e.root,new J([],{}),r,s);const c=function Lp(n,e,t){if(n.isAbsolute)return new Nh(e.root,!0,0);if(-1===t.snapshot._lastPathIndex){const u=t.snapshot._urlSegment;return new Nh(u,u===e.root,0)}const r=Wi(n.commands[0])?0:1;return function Rh(n,e,t){let r=n,s=e,u=t;for(;u>s;){if(u-=s,r=r.parent,!r)throw new Error("Invalid number of '../'");s=r.segments.length}return new Nh(r,!1,s-u)}(t.snapshot._urlSegment,t.snapshot._lastPathIndex+r,n.numberOfDoubleDots)}(u,e,n),p=c.processChildren?sd(c.segmentGroup,c.index,u.commands):Vp(c.segmentGroup,c.index,u.commands);return id(e.root,c.segmentGroup,p,r,s)}(b,this.currentUrlTree,t,x,null!=A?A:null)}navigateByUrl(t,r={skipLocationChange:!1}){const s=Nt(t)?t:this.parseUrl(t),u=this.urlHandlingStrategy.merge(s,this.rawUrlTree);return this.scheduleNavigation(u,"imperative",null,r)}navigate(t,r={skipLocationChange:!1}){return function hD(n){for(let e=0;e<n.length;e++){const t=n[e];if(null==t)throw new Error(`The requested path contains ${t} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(s){r=this.malformedUriErrorHandler(s,this.urlSerializer,t)}return r}isActive(t,r){let s;if(s=!0===r?Object.assign({},CE):!1===r?Object.assign({},dD):r,Nt(t))return Qo(this.currentUrlTree,t,s);const u=this.parseUrl(t);return Qo(this.currentUrlTree,u,s)}removeEmptyProps(t){return Object.keys(t).reduce((r,s)=>{const u=t[s];return null!=u&&(r[s]=u),r},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new Ci(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,r,s,u,c){var p,_;if(this.disposed)return Promise.resolve(!1);let b,A,x;c?(b=c.resolve,A=c.reject,x=c.promise):x=new Promise((Y,ve)=>{b=Y,A=ve});const V=++this.navigationId;let q;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(s=this.location.getState()),q=s&&s.\u0275routerPageId?s.\u0275routerPageId:u.replaceUrl||u.skipLocationChange?null!==(p=this.browserPageId)&&void 0!==p?p:0:(null!==(_=this.browserPageId)&&void 0!==_?_:0)+1):q=0,this.setTransition({id:V,targetPageId:q,source:r,restoredState:s,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:u,resolve:b,reject:A,promise:x,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),x.catch(Y=>Promise.reject(Y))}setBrowserUrl(t,r){const s=this.urlSerializer.serialize(t),u=Object.assign(Object.assign({},r.extras.state),this.generateNgRouterState(r.id,r.targetPageId));this.location.isCurrentPathEqualTo(s)||r.extras.replaceUrl?this.location.replaceState(s,"",u):this.location.go(s,"",u)}restoreHistory(t,r=!1){var s,u;if("computed"===this.canceledNavigationResolution){const c=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(s=this.currentNavigation)||void 0===s?void 0:s.finalUrl)||0===c?this.currentUrlTree===(null===(u=this.currentNavigation)||void 0===u?void 0:u.finalUrl)&&0===c&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(c)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,r){const s=new Ih(t.id,this.serializeUrl(t.extractedUrl),r);this.triggerEvent(s),t.resolve(!1)}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){h.$Z()},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();function AE(n){return"imperative"!==n}let Bh=(()=>{class n{constructor(t,r,s,u,c){this.router=t,this.route=r,this.tabIndexAttribute=s,this.renderer=u,this.el=c,this.commands=null,this.onChanges=new fr.x,this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(t){if(null!=this.tabIndexAttribute)return;const r=this.renderer,s=this.el.nativeElement;null!==t?r.setAttribute(s,"tabindex",t):r.removeAttribute(s,"tabindex")}ngOnChanges(t){this.onChanges.next(this)}set routerLink(t){null!=t?(this.commands=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(){if(null===this.urlTree)return!0;const t={skipLocationChange:ld(this.skipLocationChange),replaceUrl:ld(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,t),!0}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:ld(this.preserveFragment)})}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(gi),h.Y36(Oa),h.$8M("tabindex"),h.Y36(h.Qsj),h.Y36(h.SBq))},n.\u0275dir=h.lG2({type:n,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(t,r){1&t&&h.NdJ("click",function(){return r.onClick()})},inputs:{queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[h.TTD]}),n})();function ld(n){return""===n||!!n}class Yp{}class Qp{preload(e,t){return ut(null)}}let xE=(()=>{class n{constructor(t,r,s,u){this.router=t,this.injector=s,this.preloadingStrategy=u,this.loader=new Kp(s,r,_=>t.triggerEvent(new $r(_)),_=>t.triggerEvent(new mu(_)))}setUpPreloading(){this.subscription=this.router.events.pipe(Zn(t=>t instanceof Ci),Hi(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(h.h0i);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const s=[];for(const u of r)if(u.loadChildren&&!u.canLoad&&u._loadedConfig){const c=u._loadedConfig;s.push(this.processRoutes(c.module,c.routes))}else u.loadChildren&&!u.canLoad?s.push(this.preloadConfig(t,u)):u.children&&s.push(this.processRoutes(t,u.children));return(0,Sn.D)(s).pipe((0,Ls.J)(),(0,St.U)(u=>{}))}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>(r._loadedConfig?ut(r._loadedConfig):this.loader.load(t.injector,r)).pipe((0,Jn.z)(u=>(r._loadedConfig=u,this.processRoutes(u.module,u.routes)))))}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(gi),h.LFG(h.Sil),h.LFG(h.zs3),h.LFG(Yp))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})(),ly=(()=>{class n{constructor(t,r,s={}){this.router=t,this.viewportScroller=r,this.options=s,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},s.scrollPositionRestoration=s.scrollPositionRestoration||"disabled",s.anchorScrolling=s.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof Wc?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Ci&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof yu&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.router.triggerEvent(new yu(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){h.$Z()},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();const Su=new h.OlP("ROUTER_CONFIGURATION"),Mu=new h.OlP("ROUTER_FORROOT_GUARD"),NE=[xe,{provide:Kt,useClass:Dt},{provide:gi,useFactory:function kE(n,e,t,r,s,u,c={},p,_){const b=new gi(null,n,e,t,r,s,vu(u));return p&&(b.urlHandlingStrategy=p),_&&(b.routeReuseStrategy=_),function dy(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(e.canceledNavigationResolution=n.canceledNavigationResolution)}(c,b),c.enableTracing&&b.events.subscribe(A=>{var x,V;null===(x=console.group)||void 0===x||x.call(console,`Router Event: ${A.constructor.name}`),console.log(A.toString()),console.log(A),null===(V=console.groupEnd)||void 0===V||V.call(console)}),b},deps:[Kt,Au,xe,h.zs3,h.Sil,qp,Su,[class ay{},new h.FiY],[class IE{},new h.FiY]]},Au,{provide:Oa,useFactory:function FE(n){return n.routerState.root},deps:[gi]},xE,Qp,class ME{preload(e,t){return t().pipe(Bs(()=>ut(null)))}},{provide:Su,useValue:{enableTracing:!1}}];function RE(){return new h.PXZ("Router",gi)}let OE=(()=>{class n{constructor(t,r){}static forRoot(t,r){return{ngModule:n,providers:[NE,cy(t),{provide:Mu,useFactory:PE,deps:[[gi,new h.FiY,new h.tp0]]},{provide:Su,useValue:r||{}},{provide:ge,useFactory:gD,deps:[ue,[new h.tBr(qe),new h.FiY],Su]},{provide:ly,useFactory:Jp,deps:[gi,iu,Su]},{provide:Yp,useExisting:r&&r.preloadingStrategy?r.preloadingStrategy:Qp},{provide:h.PXZ,multi:!0,useFactory:RE},[cd,{provide:h.ip1,multi:!0,useFactory:Xp,deps:[cd]},{provide:eg,useFactory:LE,deps:[cd]},{provide:h.tb,multi:!0,useExisting:eg}]]}}static forChild(t){return{ngModule:n,providers:[cy(t)]}}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Mu,8),h.LFG(gi,8))},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({}),n})();function Jp(n,e,t){return t.scrollOffset&&e.setOffset(t.scrollOffset),new ly(n,e,t)}function gD(n,e,t={}){return t.useHash?new Me(n,e):new ze(n,e)}function PE(n){return"guarded"}function cy(n){return[{provide:h.deG,multi:!0,useValue:n},{provide:qp,multi:!0,useValue:n}]}let cd=(()=>{class n{constructor(t){this.injector=t,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new fr.x}appInitializer(){return this.injector.get(H,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let r=null;const s=new Promise(p=>r=p),u=this.injector.get(gi),c=this.injector.get(Su);return"disabled"===c.initialNavigation?(u.setUpLocationChangeListener(),r(!0)):"enabled"===c.initialNavigation||"enabledBlocking"===c.initialNavigation?(u.hooks.afterPreactivation=()=>this.initNavigation?ut(null):(this.initNavigation=!0,r(!0),this.resultOfPreactivationDone),u.initialNavigation()):r(!0),s})}bootstrapListener(t){const r=this.injector.get(Su),s=this.injector.get(xE),u=this.injector.get(ly),c=this.injector.get(gi),p=this.injector.get(h.z2F);t===p.components[0]&&(("enabledNonBlocking"===r.initialNavigation||void 0===r.initialNavigation)&&c.initialNavigation(),s.setUpPreloading(),u.init(),c.resetRootComponentType(p.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(h.zs3))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();function Xp(n){return n.appInitializer.bind(n)}function LE(n){return n.bootstrapListener.bind(n)}const eg=new h.OlP("Router Initializer");var jh=O(4986),Tn=O(5813);function tg(){return(0,Er.e)((n,e)=>{let t,r=!1;n.subscribe((0,Kn.x)(e,s=>{const u=t;t=s,r&&e.next([u,s]),r=!0}))})}function yD(n,e){return n===e}var st,Ws=O(2011),jE=(O(5881),O(3942)),Ce=O(5861),ea=O(9681),ng=O(4859),Fa=O(1877),Jt=O(2090),_D="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},Rr={},rg=rg||{},Ft=_D||self;function ig(){}function hy(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function $h(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var fy="closure_uid_"+(1e9*Math.random()>>>0),vD=0;function ED(n,e,t){return n.call.apply(n.bind,arguments)}function Lt(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var s=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(s,r),n.apply(e,s)}}return function(){return n.apply(e,arguments)}}function Wr(n,e,t){return(Wr=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?ED:Lt).apply(null,arguments)}function Hh(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function qr(n,e){function t(){}t.prototype=e.prototype,n.Z=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Vb=function(r,s,u){for(var c=Array(arguments.length-2),p=2;p<arguments.length;p++)c[p-2]=arguments[p];return e.prototype[s].apply(r,c)}}function go(){this.s=this.s,this.o=this.o}var HE={};go.prototype.s=!1,go.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var n=function $E(n){return Object.prototype.hasOwnProperty.call(n,fy)&&n[fy]||(n[fy]=++vD)}(this);delete HE[n]}},go.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const GE=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1},sg=Array.prototype.forEach?function(n,e,t){Array.prototype.forEach.call(n,e,t)}:function(n,e,t){const r=n.length,s="string"==typeof n?n.split(""):n;for(let u=0;u<r;u++)u in s&&e.call(t,s[u],u,n)};function og(n){return Array.prototype.concat.apply([],arguments)}function ag(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function dd(n){return/^[\s\xa0]*$/.test(n)}var Kr,wD=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function mi(n,e){return-1!=n.indexOf(e)}function zE(n,e){return n<e?-1:n>e?1:0}e:{var Gh=Ft.navigator;if(Gh){var ug=Gh.userAgent;if(ug){Kr=ug;break e}}Kr=""}function zh(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function lg(n){const e={};for(const t in n)e[t]=n[t];return e}var bD="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function WE(n,e){let t,r;for(let s=1;s<arguments.length;s++){for(t in r=arguments[s],r)n[t]=r[t];for(let u=0;u<bD.length;u++)t=bD[u],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function py(n){return py[" "](n),n}py[" "]=ig;var cg,n,DD=mi(Kr,"Opera"),Dl=mi(Kr,"Trident")||mi(Kr,"MSIE"),TD=mi(Kr,"Edge"),gy=TD||Dl,CD=mi(Kr,"Gecko")&&!(mi(Kr.toLowerCase(),"webkit")&&!mi(Kr,"Edge"))&&!(mi(Kr,"Trident")||mi(Kr,"MSIE"))&&!mi(Kr,"Edge"),qE=mi(Kr.toLowerCase(),"webkit")&&!mi(Kr,"Edge");function my(){var n=Ft.document;return n?n.documentMode:void 0}e:{var Wh="",KE=(n=Kr,CD?/rv:([^\);]+)(\)|;)/.exec(n):TD?/Edge\/([\d\.]+)/.exec(n):Dl?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):qE?/WebKit\/(\S+)/.exec(n):DD?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(KE&&(Wh=KE?KE[1]:""),Dl){var ZE=my();if(null!=ZE&&ZE>parseFloat(Wh)){cg=String(ZE);break e}}cg=Wh}var uS={};var cS=Ft.document&&Dl&&(my()||parseInt(cg,10))||void 0,dS=function(){if(!Ft.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{Ft.addEventListener("test",ig,e),Ft.removeEventListener("test",ig,e)}catch(t){}return n}();function Si(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}function dg(n,e){if(Si.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(CD){e:{try{py(e.nodeName);var s=!0;break e}catch(u){}s=!1}s||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:xu[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&dg.Z.h.call(this)}}Si.prototype.h=function(){this.defaultPrevented=!0},qr(dg,Si);var xu={2:"touch",3:"pen",4:"mouse"};dg.prototype.h=function(){dg.Z.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var Tl="closure_listenable_"+(1e6*Math.random()|0),SD=0;function QE(n,e,t,r,s){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.ia=s,this.key=++SD,this.ca=this.fa=!1}function hd(n){n.ca=!0,n.listener=null,n.proxy=null,n.src=null,n.ia=null}function qh(n){this.src=n,this.g={},this.h=0}function Kh(n,e){var t=e.type;if(t in n.g){var u,r=n.g[t],s=GE(r,e);(u=0<=s)&&Array.prototype.splice.call(r,s,1),u&&(hd(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function yy(n,e,t,r){for(var s=0;s<n.length;++s){var u=n[s];if(!u.ca&&u.listener==e&&u.capture==!!t&&u.ia==r)return s}return-1}qh.prototype.add=function(n,e,t,r,s){var u=n.toString();(n=this.g[u])||(n=this.g[u]=[],this.h++);var c=yy(n,e,r,s);return-1<c?(e=n[c],t||(e.fa=!1)):((e=new QE(e,this.src,u,!!r,s)).fa=t,n.push(e)),e};var ta="closure_lm_"+(1e6*Math.random()|0),hg={};function JE(n,e,t,r,s){if(r&&r.once)return _y(n,e,t,r,s);if(Array.isArray(e)){for(var u=0;u<e.length;u++)JE(n,e[u],t,r,s);return null}return t=Cl(t),n&&n[Tl]?n.N(e,t,$h(r)?!!r.capture:!!r,s):fg(n,e,t,!1,r,s)}function fg(n,e,t,r,s,u){if(!e)throw Error("Invalid event type");var c=$h(s)?!!s.capture:!!s,p=Zh(n);if(p||(n[ta]=p=new qh(n)),(t=p.add(e,t,r,c,u)).proxy)return t;if(r=function MD(){var e=pd;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)dS||(s=c),void 0===s&&(s=!1),n.addEventListener(e.toString(),r,s);else if(n.attachEvent)n.attachEvent(fd(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function _y(n,e,t,r,s){if(Array.isArray(e)){for(var u=0;u<e.length;u++)_y(n,e[u],t,r,s);return null}return t=Cl(t),n&&n[Tl]?n.O(e,t,$h(r)?!!r.capture:!!r,s):fg(n,e,t,!0,r,s)}function XE(n,e,t,r,s){if(Array.isArray(e))for(var u=0;u<e.length;u++)XE(n,e[u],t,r,s);else r=$h(r)?!!r.capture:!!r,t=Cl(t),n&&n[Tl]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=yy(u=n.g[e],t,r,s))&&(hd(u[t]),Array.prototype.splice.call(u,t,1),0==u.length&&(delete n.g[e],n.h--))):n&&(n=Zh(n))&&(e=n.g[e.toString()],n=-1,e&&(n=yy(e,t,r,s)),(t=-1<n?e[n]:null)&&vy(t))}function vy(n){if("number"!=typeof n&&n&&!n.ca){var e=n.src;if(e&&e[Tl])Kh(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(fd(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=Zh(e))?(Kh(t,n),0==t.h&&(t.src=null,e[ta]=null)):hd(n)}}}function fd(n){return n in hg?hg[n]:hg[n]="on"+n}function pd(n,e){if(n.ca)n=!0;else{e=new dg(e,this);var t=n.listener,r=n.ia||n.src;n.fa&&vy(n),n=t.call(r,e)}return n}function Zh(n){return(n=n[ta])instanceof qh?n:null}var Nu="__closure_events_fn_"+(1e9*Math.random()>>>0);function Cl(n){return"function"==typeof n?n:(n[Nu]||(n[Nu]=function(e){return n.handleEvent(e)}),n[Nu])}function Yn(){go.call(this),this.i=new qh(this),this.P=this,this.I=null}function ii(n,e){var t,r=n.I;if(r)for(t=[];r;r=r.I)t.push(r);if(n=n.P,r=e.type||e,"string"==typeof e)e=new Si(e,n);else if(e instanceof Si)e.target=e.target||n;else{var s=e;WE(e=new Si(r,n),s)}if(s=!0,t)for(var u=t.length-1;0<=u;u--){var c=e.g=t[u];s=Yh(c,r,!0,e)&&s}if(s=Yh(c=e.g=n,r,!0,e)&&s,s=Yh(c,r,!1,e)&&s,t)for(u=0;u<t.length;u++)s=Yh(c=e.g=t[u],r,!1,e)&&s}function Yh(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var s=!0,u=0;u<e.length;++u){var c=e[u];if(c&&!c.ca&&c.capture==t){var p=c.listener,_=c.ia||c.src;c.fa&&Kh(n.i,c),s=!1!==p.call(_,r)&&s}}return s&&!r.defaultPrevented}qr(Yn,go),Yn.prototype[Tl]=!0,Yn.prototype.removeEventListener=function(n,e,t,r){XE(this,n,e,t,r)},Yn.prototype.M=function(){if(Yn.Z.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)hd(t[r]);delete n.g[e],n.h--}}this.I=null},Yn.prototype.N=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},Yn.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var pg=Ft.JSON.stringify;function Ey(){var n=n0;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var e0,by=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new gg,n=>n.reset());class gg{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function xD(n){Ft.setTimeout(()=>{throw n},0)}function mg(n,e){e0||function t0(){var n=Ft.Promise.resolve(void 0);e0=function(){n.then(r0)}}(),yg||(e0(),yg=!0),n0.add(n,e)}var yg=!1,n0=new class wy{constructor(){this.h=this.g=null}add(e,t){const r=by.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function r0(){for(var n;n=Ey();){try{n.h.call(n.g)}catch(t){xD(t)}var e=by;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}yg=!1}function _g(n,e){Yn.call(this),this.h=n||1,this.g=e||Ft,this.j=Wr(this.kb,this),this.l=Date.now()}function Iy(n){n.da=!1,n.S&&(n.g.clearTimeout(n.S),n.S=null)}function Mi(n,e,t){if("function"==typeof n)t&&(n=Wr(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=Wr(n.handleEvent,n)}return 2147483647<Number(e)?-1:Ft.setTimeout(n,e||0)}function s0(n){n.g=Mi(()=>{n.g=null,n.i&&(n.i=!1,s0(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}qr(_g,Yn),(st=_g.prototype).da=!1,st.S=null,st.kb=function(){if(this.da){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-n):(this.S&&(this.g.clearTimeout(this.S),this.S=null),ii(this,"tick"),this.da&&(Iy(this),this.start()))}},st.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},st.M=function(){_g.Z.M.call(this),Iy(this),delete this.g};class ND extends go{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:s0(this)}M(){super.M(),this.g&&(Ft.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function vg(n){go.call(this),this.h=n,this.g={}}qr(vg,go);var RD=[];function Dy(n,e,t,r){Array.isArray(t)||(t&&(RD[0]=t.toString()),t=RD);for(var s=0;s<t.length;s++){var u=JE(e,t[s],r||n.handleEvent,!1,n.h||n);if(!u)break;n.g[u.key]=u}}function OD(n){zh(n.g,function(e,t){this.g.hasOwnProperty(t)&&vy(e)},n),n.g={}}function Eg(){this.g=!0}function gd(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function kD(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var s=r[1];if(Array.isArray(s)&&!(1>s.length)){var u=s[0];if("noop"!=u&&"stop"!=u&&"close"!=u)for(var c=1;c<s.length;c++)s[c]=""}}}return pg(t)}catch(p){return e}}(n,t)+(r?" "+r:"")})}vg.prototype.M=function(){vg.Z.M.call(this),OD(this)},vg.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Eg.prototype.Aa=function(){this.g=!1},Eg.prototype.info=function(){};var Ru={},a0=null;function Qh(){return a0=a0||new Yn}function u0(n){Si.call(this,Ru.Ma,n)}function Jh(n){const e=Qh();ii(e,new u0(e,n))}function Cy(n,e){Si.call(this,Ru.STAT_EVENT,n),this.stat=e}function yi(n){const e=Qh();ii(e,new Cy(e,n))}function l0(n,e){Si.call(this,Ru.Na,n),this.size=e}function Yi(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return Ft.setTimeout(function(){n()},e)}Ru.Ma="serverreachability",qr(u0,Si),Ru.STAT_EVENT="statevent",qr(Cy,Si),Ru.Na="timingevent",qr(l0,Si);var md={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},c0={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function Ay(){}function Sy(){}Ay.prototype.h=null;var ef,Xh={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function My(){Si.call(this,"d")}function xy(){Si.call(this,"c")}function wg(){}function tf(n,e,t,r){this.l=n,this.j=e,this.m=t,this.X=r||1,this.V=new vg(this),this.P=Ny,this.W=new _g(n=gy?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new nf}function nf(){this.i=null,this.g="",this.h=!1}qr(My,Si),qr(xy,Si),qr(wg,Ay),wg.prototype.g=function(){return new XMLHttpRequest},wg.prototype.i=function(){return{}},ef=new wg;var Ny=45e3,Ry={},yd={};function rf(n,e,t){n.K=1,n.v=of(_o(e)),n.s=t,n.U=!0,Oy(n,null)}function Oy(n,e){n.F=Date.now(),bg(n),n.A=_o(n.v);var t=n.A,r=n.X;Array.isArray(r)||(r=[String(r)]),vo(t.h,"t",r),n.C=0,t=n.l.H,n.h=new nf,n.g=Pl(n.l,t?e:null,!n.s),0<n.O&&(n.L=new ND(Wr(n.Ia,n,n.g),n.O)),Dy(n.V,n.g,"readystatechange",n.gb),e=n.H?lg(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ea(n.A,n.u,n.s,e)):(n.u="GET",n.g.ea(n.A,n.u,null,e)),Jh(1),function Ty(n,e,t,r,s,u){n.info(function(){if(n.g)if(u)for(var c="",p=u.split("&"),_=0;_<p.length;_++){var b=p[_].split("=");if(1<b.length){var A=b[0];b=b[1];var x=A.split("_");c=2<=x.length&&"type"==x[1]?c+(A+"=")+b+"&":c+(A+"=redacted&")}}else c=null;else c=u;return"XMLHTTP REQ ("+r+") [attempt "+s+"]: "+e+"\n"+t+"\n"+c})}(n.j,n.u,n.A,n.m,n.X,n.s)}function LD(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Ba}function VD(n,e,t){let s,r=!0;for(;!n.I&&n.C<t.length;){if(s=Py(n,t),s==yd){4==e&&(n.o=4,yi(14),r=!1),gd(n.j,n.m,null,"[Incomplete Response]");break}if(s==Ry){n.o=4,yi(15),gd(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}gd(n.j,n.m,s,null),Ig(n,s)}LD(n)&&s!=yd&&s!=Ry&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,yi(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.aa&&(n.aa=!0,(e=n.l).g==n&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+t.length),Qi(e),e.L=!0,yi(11))):(gd(n.j,n.m,t,"[Invalid Chunked Response]"),Ou(n),_d(n))}function Py(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?yd:(t=Number(e.substring(t,r)),isNaN(t)?Ry:(r+=1)+t>e.length?yd:(e=e.substr(r,t),n.C=r+t,e))}function bg(n){n.Y=Date.now()+n.P,d0(n,n.P)}function d0(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=Yi(Wr(n.eb,n),e)}function sf(n){n.B&&(Ft.clearTimeout(n.B),n.B=null)}function _d(n){0==n.l.G||n.I||xl(n.l,n)}function Ou(n){sf(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,Iy(n.W),OD(n.V),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function Ig(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||By(t.i,n)))if(t.I=n.N,!n.J&&By(t.i,n)&&3==t.G){try{var r=t.Ca.g.parse(e)}catch(b){r=null}if(Array.isArray(r)&&3==r.length){var s=r;if(0==s[0])e:if(t.u)t.ta=s[1],0<t.ta-t.U&&37500>s[2]&&t.N&&0==t.A&&!t.v&&(t.v=Yi(Wr(t.ab,t),6e3));else{if(t.g){if(!(t.g.F+3e3<n.F))break e;ja(t),xg(t)}Id(t),yi(18)}if(1>=w0(t.i)&&t.ka){try{t.ka()}catch(b){}t.ka=void 0}}else qs(t,11)}else if((n.J||t.g==n)&&ja(t),!dd(e))for(s=t.Ca.g.parse(e),e=0;e<s.length;e++){let b=s[e];if(t.U=b[0],b=b[1],2==t.G)if("c"==b[0]){t.J=b[1],t.la=b[2];const A=b[3];null!=A&&(t.ma=A,t.h.info("VER="+t.ma));const x=b[4];null!=x&&(t.za=x,t.h.info("SVER="+t.za));const V=b[5];null!=V&&"number"==typeof V&&0<V&&(t.K=r=1.5*V,t.h.info("backChannelRequestTimeoutMs_="+r)),r=t;const q=n.g;if(q){const Y=q.g?q.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Y){var u=r.i;!u.g&&(mi(Y,"spdy")||mi(Y,"quic")||mi(Y,"h2"))&&(u.j=u.l,u.g=new Set,u.h&&(jy(u,u.h),u.h=null))}if(r.D){const ve=q.g?q.g.getResponseHeader("X-HTTP-Session-Id"):null;ve&&(r.sa=ve,Un(r.F,r.D,ve))}}t.G=3,t.j&&t.j.xa(),t.$&&(t.O=Date.now()-n.F,t.h.info("Handshake RTT: "+t.O+"ms"));var c=n;if((r=t).oa=Ol(r,r.H?r.la:null,r.W),c.J){$y(r.i,c);var p=c,_=r.K;_&&p.setTimeout(_),p.B&&(sf(p),bg(p)),r.g=c}else Uu(r);0<t.l.length&&Ng(t)}else"stop"!=b[0]&&"close"!=b[0]||qs(t,7);else 3==t.G&&("stop"==b[0]||"close"==b[0]?"stop"==b[0]?qs(t,7):Vu(t):"noop"!=b[0]&&t.j&&t.j.wa(b),t.A=0)}Jh(4)}catch(b){}}function yo(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(hy(n)||"string"==typeof n)sg(n,e,void 0);else{if(n.T&&"function"==typeof n.T)var t=n.T();else if(n.R&&"function"==typeof n.R)t=void 0;else if(hy(n)||"string"==typeof n){t=[];for(var r=n.length,s=0;s<r;s++)t.push(s)}else for(s in t=[],r=0,n)t[r++]=s;r=function h0(n){if(n.R&&"function"==typeof n.R)return n.R();if("string"==typeof n)return n.split("");if(hy(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),s=r.length;for(var u=0;u<s;u++)e.call(void 0,r[u],t&&t[u],n)}}function Va(n,e){this.h={},this.g=[],this.i=0;var t=arguments.length;if(1<t){if(t%2)throw Error("Uneven number of arguments");for(var r=0;r<t;r+=2)this.set(arguments[r],arguments[r+1])}else if(n)if(n instanceof Va)for(t=n.T(),r=0;r<t.length;r++)this.set(t[r],n.get(t[r]));else for(r in n)this.set(r,n[r])}function ky(n){if(n.i!=n.g.length){for(var e=0,t=0;e<n.g.length;){var r=n.g[e];Al(n.h,r)&&(n.g[t++]=r),e++}n.g.length=t}if(n.i!=n.g.length){var s={};for(t=e=0;e<n.g.length;)Al(s,r=n.g[e])||(n.g[t++]=r,s[r]=1),e++;n.g.length=t}}function Al(n,e){return Object.prototype.hasOwnProperty.call(n,e)}(st=tf.prototype).setTimeout=function(n){this.P=n},st.gb=function(n){n=n.target;const e=this.L;e&&3==Ua(n)?e.l():this.Ia(n)},st.Ia=function(n){try{if(n==this.g)e:{const A=Ua(this.g);var e=this.g.Da();const x=this.g.ba();if(!(3>A)&&(3!=A||gy||this.g&&(this.h.h||this.g.ga()||C0(this.g)))){this.I||4!=A||7==e||Jh(8==e||0>=x?3:2),sf(this);var t=this.g.ba();this.N=t;t:if(LD(this)){var r=C0(this.g);n="";var s=r.length,u=4==Ua(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){Ou(this),_d(this);var c="";break t}this.h.i=new Ft.TextDecoder}for(e=0;e<s;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:u&&e==s-1});r.splice(0,s),this.h.g+=n,this.C=0,c=this.h.g}else c=this.g.ga();if(this.i=200==t,function o0(n,e,t,r,s,u,c){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+s+"]: "+e+"\n"+t+"\n"+u+" "+c})}(this.j,this.u,this.A,this.m,this.X,A,t),this.i){if(this.$&&!this.J){t:{if(this.g){var p,_=this.g;if((p=_.g?_.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!dd(p)){var b=p;break t}}b=null}if(!(t=b)){this.i=!1,this.o=3,yi(12),Ou(this),_d(this);break e}gd(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Ig(this,t)}this.U?(VD(this,A,c),gy&&this.i&&3==A&&(Dy(this.V,this.W,"tick",this.fb),this.W.start())):(gd(this.j,this.m,c,null),Ig(this,c)),4==A&&Ou(this),this.i&&!this.I&&(4==A?xl(this.l,this):(this.i=!1,bg(this)))}else 400==t&&0<c.indexOf("Unknown SID")?(this.o=3,yi(12)):(this.o=0,yi(13)),Ou(this),_d(this)}}}catch(A){}},st.fb=function(){if(this.g){var n=Ua(this.g),e=this.g.ga();this.C<e.length&&(sf(this),VD(this,n,e),this.i&&4!=n&&bg(this))}},st.cancel=function(){this.I=!0,Ou(this)},st.eb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function PD(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(Jh(3),yi(17)),Ou(this),this.o=2,_d(this)):d0(this,this.Y-n)},(st=Va.prototype).R=function(){ky(this);for(var n=[],e=0;e<this.g.length;e++)n.push(this.h[this.g[e]]);return n},st.T=function(){return ky(this),this.g.concat()},st.get=function(n,e){return Al(this.h,n)?this.h[n]:e},st.set=function(n,e){Al(this.h,n)||(this.i++,this.g.push(n)),this.h[n]=e},st.forEach=function(n,e){for(var t=this.T(),r=0;r<t.length;r++){var s=t[r],u=this.get(s);n.call(e,u,s,this)}};var UD=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Pu(n,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,n instanceof Pu){this.g=void 0!==e?e:n.g,ku(this,n.j),this.s=n.s,Dg(this,n.i),vd(this,n.m),this.l=n.l,e=n.h;var t=new lf;t.i=e.i,e.g&&(t.g=new Va(e.g),t.h=e.h),Ly(this,t),this.o=n.o}else n&&(t=String(n).match(UD))?(this.g=!!e,ku(this,t[1]||"",!0),this.s=af(t[2]||""),Dg(this,t[3]||"",!0),vd(this,t[4]),this.l=af(t[5]||"",!0),Ly(this,t[6]||"",!0),this.o=af(t[7]||"")):(this.g=!!e,this.h=new lf(null,this.g))}function _o(n){return new Pu(n)}function ku(n,e,t){n.j=t?af(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function Dg(n,e,t){n.i=t?af(e,!0):e}function vd(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function Ly(n,e,t){e instanceof lf?(n.h=e,function y0(n,e){e&&!n.j&&(Fu(n),n.i=null,n.g.forEach(function(t,r){var s=r.toLowerCase();r!=s&&(g0(this,r),vo(this,s,t))},n)),n.j=e}(n.h,n.g)):(t||(e=uf(e,$D)),n.h=new lf(e,n.g))}function Un(n,e,t){n.h.set(e,t)}function of(n){return Un(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function af(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function uf(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,f0),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function f0(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}Pu.prototype.toString=function(){var n=[],e=this.j;e&&n.push(uf(e,Sl,!0),":");var t=this.i;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(uf(e,Sl,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.i&&"/"!=t.charAt(0)&&n.push("/"),n.push(uf(t,"/"==t.charAt(0)?jD:p0,!0))),(t=this.h.toString())&&n.push("?",t),(t=this.o)&&n.push("#",uf(t,Ed)),n.join("")};var Sl=/[#\/\?@]/g,p0=/[#\?:]/g,jD=/[#\?]/g,$D=/[#\?@]/g,Ed=/#/g;function lf(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function Fu(n){n.g||(n.g=new Va,n.h=0,n.i&&function Fy(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),s=null;if(0<=r){var u=n[t].substring(0,r);s=n[t].substring(r+1)}else u=n[t];e(u,s?decodeURIComponent(s.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function g0(n,e){Fu(n),e=Lu(n,e),Al(n.g.h,e)&&(n.i=null,n.h-=n.g.get(e).length,Al((n=n.g).h,e)&&(delete n.h[e],n.i--,n.g.length>2*n.i&&ky(n)))}function m0(n,e){return Fu(n),e=Lu(n,e),Al(n.g.h,e)}function vo(n,e,t){g0(n,e),0<t.length&&(n.i=null,n.g.set(Lu(n,e),ag(t)),n.h+=t.length)}function Lu(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function Uy(n){this.l=n||v0,n=Ft.PerformanceNavigationTiming?0<(n=Ft.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(Ft.g&&Ft.g.Ea&&Ft.g.Ea()&&Ft.g.Ea().Zb),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(st=lf.prototype).add=function(n,e){Fu(this),this.i=null,n=Lu(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},st.forEach=function(n,e){Fu(this),this.g.forEach(function(t,r){sg(t,function(s){n.call(e,s,r,this)},this)},this)},st.T=function(){Fu(this);for(var n=this.g.R(),e=this.g.T(),t=[],r=0;r<e.length;r++)for(var s=n[r],u=0;u<s.length;u++)t.push(e[r]);return t},st.R=function(n){Fu(this);var e=[];if("string"==typeof n)m0(this,n)&&(e=og(e,this.g.get(Lu(this,n))));else{n=this.g.R();for(var t=0;t<n.length;t++)e=og(e,n[t])}return e},st.set=function(n,e){return Fu(this),this.i=null,m0(this,n=Lu(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},st.get=function(n,e){return n&&0<(n=this.R(n)).length?String(n[0]):e},st.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var n=[],e=this.g.T(),t=0;t<e.length;t++){var r=e[t],s=encodeURIComponent(String(r));r=this.R(r);for(var u=0;u<r.length;u++){var c=s;""!==r[u]&&(c+="="+encodeURIComponent(String(r[u]))),n.push(c)}}return this.i=n.join("&")};var v0=10;function E0(n){return!!n.h||!!n.g&&n.g.size>=n.j}function w0(n){return n.h?1:n.g?n.g.size:0}function By(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function jy(n,e){n.g?n.g.add(e):n.h=e}function $y(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function HD(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return ag(n.i)}function Tg(){}function GD(){this.g=new Tg}function zD(n,e,t){const r=t||"";try{yo(n,function(s,u){let c=s;$h(s)&&(c=pg(s)),e.push(r+u+"="+encodeURIComponent(c))})}catch(s){throw e.push(r+"type="+encodeURIComponent("_badmap")),s}}function Hy(n,e,t,r,s){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,s(r)}catch(u){}}function Ml(n){this.l=n.$b||null,this.j=n.ib||!1}function Cg(n,e){Yn.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=Ag,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Uy.prototype.cancel=function(){if(this.i=HD(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},Tg.prototype.stringify=function(n){return Ft.JSON.stringify(n,void 0)},Tg.prototype.parse=function(n){return Ft.JSON.parse(n,void 0)},qr(Ml,Ay),Ml.prototype.g=function(){return new Cg(this.l,this.j)},Ml.prototype.i=function(n){return function(){return n}}({}),qr(Cg,Yn);var Ag=0;function Gy(n){n.j.read().then(n.Sa.bind(n)).catch(n.ha.bind(n))}function Sg(n){n.readyState=4,n.l=null,n.j=null,n.A=null,xi(n)}function xi(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(st=Cg.prototype).open=function(n,e){if(this.readyState!=Ag)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,xi(this)},st.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||Ft).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},st.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Sg(this)),this.readyState=Ag},st.Va=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,xi(this)),this.g&&(this.readyState=3,xi(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==Ft.ReadableStream&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Gy(this)}else n.text().then(this.Ua.bind(this),this.ha.bind(this))},st.Sa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?Sg(this):xi(this),3==this.readyState&&Gy(this)}},st.Ua=function(n){this.g&&(this.response=this.responseText=n,Sg(this))},st.Ta=function(n){this.g&&(this.response=n,Sg(this))},st.ha=function(){this.g&&Sg(this)},st.setRequestHeader=function(n,e){this.v.append(n,e)},st.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},st.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(Cg.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var fS=Ft.JSON.parse;function Or(n){Yn.call(this),this.headers=new Va,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=zy,this.K=this.L=!1}qr(Or,Yn);var zy="",b0=/^https?$/i,I0=["POST","PUT"];function pS(n){return"content-type"==n.toLowerCase()}function Wy(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,Mg(n),wd(n)}function Mg(n){n.D||(n.D=!0,ii(n,"complete"),ii(n,"error"))}function D0(n){if(n.h&&void 0!==rg&&(!n.C[1]||4!=Ua(n)||2!=n.ba()))if(n.v&&4==Ua(n))Mi(n.Fa,0,n);else if(ii(n,"readystatechange"),4==Ua(n)){n.h=!1;try{const p=n.ba();e:switch(p){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===p){var s=String(n.H).match(UD)[1]||null;if(!s&&Ft.self&&Ft.self.location){var u=Ft.self.location.protocol;s=u.substr(0,u.length-1)}r=!b0.test(s?s.toLowerCase():"")}t=r}if(t)ii(n,"complete"),ii(n,"success");else{n.m=6;try{var c=2<Ua(n)?n.g.statusText:""}catch(_){c=""}n.j=c+" ["+n.ba()+"]",Mg(n)}}finally{wd(n)}}}function wd(n,e){if(n.g){T0(n);const t=n.g,r=n.C[0]?ig:null;n.g=null,n.C=null,e||ii(n,"ready");try{t.onreadystatechange=r}catch(s){}}}function T0(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(Ft.clearTimeout(n.A),n.A=null)}function Ua(n){return n.g?n.g.readyState:0}function C0(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case zy:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch(e){return null}}function qy(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=function qD(n){let e="";return zh(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):Un(n,e,t))}function cf(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function df(n){this.za=0,this.l=[],this.h=new Eg,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=cf("failFast",!1,n),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=cf("baseRetryDelayMs",5e3,n),this.$a=cf("retryDelaySeedMs",1e4,n),this.Ya=cf("forwardChannelMaxRetries",2,n),this.ra=cf("forwardChannelRequestTimeoutMs",2e4,n),this.qa=n&&n.xmlHttpFactory||void 0,this.Ba=n&&n.Yb||!1,this.K=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.J="",this.i=new Uy(n&&n.concurrentRequestLimit),this.Ca=new GD,this.ja=n&&n.fastHandshake||!1,this.Ra=n&&n.Wb||!1,n&&n.Aa&&this.h.Aa(),n&&n.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&n&&n.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!n||!1!==n.Xb}function Vu(n){if(bd(n),3==n.G){var e=n.V++,t=_o(n.F);Un(t,"SID",n.J),Un(t,"RID",e),Un(t,"TYPE","terminate"),Ba(n,t),(e=new tf(n,n.h,e,void 0)).K=2,e.v=of(_o(t)),t=!1,Ft.navigator&&Ft.navigator.sendBeacon&&(t=Ft.navigator.sendBeacon(e.v.toString(),"")),!t&&Ft.Image&&((new Image).src=e.v,t=!0),t||(e.g=Pl(e.l,null),e.g.ea(e.v)),e.F=Date.now(),bg(e)}Rl(n)}function xg(n){n.g&&(Qi(n),n.g.cancel(),n.g=null)}function bd(n){xg(n),n.u&&(Ft.clearTimeout(n.u),n.u=null),ja(n),n.i.cancel(),n.m&&("number"==typeof n.m&&Ft.clearTimeout(n.m),n.m=null)}function Ky(n,e){n.l.push(new class{constructor(n,e){this.h=n,this.g=e}}(n.Za++,e)),3==n.G&&Ng(n)}function Ng(n){E0(n.i)||n.m||(n.m=!0,mg(n.Ha,n),n.C=0)}function Eo(n,e){var t;t=e?e.m:n.V++;const r=_o(n.F);Un(r,"SID",n.J),Un(r,"RID",t),Un(r,"AID",n.U),Ba(n,r),n.o&&n.s&&qy(r,n.o,n.s),t=new tf(n,n.h,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.l=e.D.concat(n.l)),e=si(n,t,1e3),t.setTimeout(Math.round(.5*n.ra)+Math.round(.5*n.ra*Math.random())),jy(n.i,t),rf(t,r,e)}function Ba(n,e){n.j&&yo({},function(t,r){Un(e,r,t)})}function si(n,e,t){t=Math.min(n.l.length,t);var r=n.j?Wr(n.j.Oa,n.j,n):null;e:{var s=n.l;let u=-1;for(;;){const c=["count="+t];-1==u?0<t?(u=s[0].h,c.push("ofs="+u)):u=0:c.push("ofs="+u);let p=!0;for(let _=0;_<t;_++){let b=s[_].h;const A=s[_].g;if(b-=u,0>b)u=Math.max(0,s[_].h-100),p=!1;else try{zD(A,c,"req"+b+"_")}catch(x){r&&r(A)}}if(p){r=c.join("&");break e}}}return n=n.l.splice(0,t),e.D=n,r}function Uu(n){n.g||n.u||(n.Y=1,mg(n.Ga,n),n.A=0)}function Id(n){return!(n.g||n.u||3<=n.A||(n.Y++,n.u=Yi(Wr(n.Ga,n),Nl(n,n.A)),n.A++,0))}function Qi(n){null!=n.B&&(Ft.clearTimeout(n.B),n.B=null)}function Rg(n){n.g=new tf(n,n.h,"rpc",n.Y),null===n.o&&(n.g.H=n.s),n.g.O=0;var e=_o(n.oa);Un(e,"RID","rpc"),Un(e,"SID",n.J),Un(e,"CI",n.N?"0":"1"),Un(e,"AID",n.U),Ba(n,e),Un(e,"TYPE","xmlhttp"),n.o&&n.s&&qy(e,n.o,n.s),n.K&&n.g.setTimeout(n.K);var t=n.g;n=n.la,t.K=1,t.v=of(_o(e)),t.s=null,t.U=!0,Oy(t,n)}function ja(n){null!=n.v&&(Ft.clearTimeout(n.v),n.v=null)}function xl(n,e){var t=null;if(n.g==e){ja(n),Qi(n),n.g=null;var r=2}else{if(!By(n.i,e))return;t=e.D,$y(n.i,e),r=1}if(n.I=e.N,0!=n.G)if(e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.F;var s=n.C;ii(r=Qh(),new l0(r,t,e,s)),Ng(n)}else Uu(n);else if(3==(s=e.o)||0==s&&0<n.I||!(1==r&&function Zy(n,e){return!(w0(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.l=e.D.concat(n.l),0):1==n.G||2==n.G||n.C>=(n.Xa?0:n.Ya)||(n.m=Yi(Wr(n.Ha,n,e),Nl(n,n.C)),n.C++,0)))}(n,e)||2==r&&Id(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),s){case 1:qs(n,5);break;case 4:qs(n,10);break;case 3:qs(n,6);break;default:qs(n,2)}}function Nl(n,e){let t=n.Pa+Math.floor(Math.random()*n.$a);return n.j||(t*=2),t*e}function qs(n,e){if(n.h.info("Error code "+e),2==e){var t=null;n.j&&(t=null);var r=Wr(n.jb,n);t||(t=new Pu("//www.google.com/images/cleardot.gif"),Ft.location&&"http"==Ft.location.protocol||ku(t,"https"),of(t)),function hS(n,e){const t=new Eg;if(Ft.Image){const r=new Image;r.onload=Hh(Hy,t,r,"TestLoadImage: loaded",!0,e),r.onerror=Hh(Hy,t,r,"TestLoadImage: error",!1,e),r.onabort=Hh(Hy,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=Hh(Hy,t,r,"TestLoadImage: timeout",!1,e),Ft.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else yi(2);n.G=0,n.j&&n.j.va(e),Rl(n),bd(n)}function Rl(n){n.G=0,n.I=-1,n.j&&((0!=HD(n.i).length||0!=n.l.length)&&(n.i.i.length=0,ag(n.l),n.l.length=0),n.j.ua())}function Ol(n,e,t){let r=function BD(n){return n instanceof Pu?_o(n):new Pu(n,void 0)}(t);if(""!=r.i)e&&Dg(r,e+"."+r.i),vd(r,r.m);else{const s=Ft.location;r=function Vy(n,e,t,r){var s=new Pu(null,void 0);return n&&ku(s,n),e&&Dg(s,e),t&&vd(s,t),r&&(s.l=r),s}(s.protocol,e?e+"."+s.hostname:s.hostname,+s.port,t)}return n.aa&&zh(n.aa,function(s,u){Un(r,u,s)}),t=n.sa,(e=n.D)&&t&&Un(r,e,t),Un(r,"VER",n.ma),Ba(n,r),r}function Pl(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Or(t&&n.Ba&&!n.qa?new Ml({ib:!0}):n.qa)).L=n.H,e}function kl(){}function $a(){if(Dl&&!(10<=Number(cS)))throw Error("Environmental error: no available transport.")}function Ji(n,e){Yn.call(this),this.g=new df(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.P=n,(n=e&&e.httpHeadersOverwriteParam)&&!dd(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!dd(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new Fl(this)}function Yy(n){My.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function Qy(){xy.call(this),this.status=1}function Fl(n){this.g=n}(st=Or.prototype).ea=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():ef.g(),this.C=function FD(n){return n.h||(n.h=n.i())}(this.u?this.u:ef),this.g.onreadystatechange=Wr(this.Fa,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(u){return void Wy(this,u)}n=t||"";const s=new Va(this.headers);r&&yo(r,function(u,c){s.set(c,u)}),r=function La(n){e:{var e=pS;const t=n.length,r="string"==typeof n?n.split(""):n;for(let s=0;s<t;s++)if(s in r&&e.call(void 0,r[s],s,n)){e=s;break e}e=-1}return 0>e?null:"string"==typeof n?n.charAt(e):n[e]}(s.T()),t=Ft.FormData&&n instanceof Ft.FormData,!(0<=GE(I0,e))||r||t||s.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),s.forEach(function(u,c){this.g.setRequestHeader(c,u)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{T0(this),0<this.B&&((this.K=function WD(n){return Dl&&function lS(){return function ID(n){var e=uS;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=n(9)}(function(){let n=0;const e=wD(String(cg)).split("."),t=wD("9").split("."),r=Math.max(e.length,t.length);for(let c=0;0==n&&c<r;c++){var s=e[c]||"",u=t[c]||"";do{if(s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],u=/(\d*)(\D*)(.*)/.exec(u)||["","","",""],0==s[0].length&&0==u[0].length)break;n=zE(0==s[1].length?0:parseInt(s[1],10),0==u[1].length?0:parseInt(u[1],10))||zE(0==s[2].length,0==u[2].length)||zE(s[2],u[2]),s=s[3],u=u[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Wr(this.pa,this)):this.A=Mi(this.pa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(u){Wy(this,u)}},st.pa=function(){void 0!==rg&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,ii(this,"timeout"),this.abort(8))},st.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,ii(this,"complete"),ii(this,"abort"),wd(this))},st.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),wd(this,!0)),Or.Z.M.call(this)},st.Fa=function(){this.s||(this.F||this.v||this.l?D0(this):this.cb())},st.cb=function(){D0(this)},st.ba=function(){try{return 2<Ua(this)?this.g.status:-1}catch(n){return-1}},st.ga=function(){try{return this.g?this.g.responseText:""}catch(n){return""}},st.Qa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),fS(e)}},st.Da=function(){return this.m},st.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(st=df.prototype).ma=8,st.G=1,st.hb=function(n){try{this.h.info("Origin Trials invoked: "+n)}catch(e){}},st.Ha=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.V=Math.floor(1e5*Math.random()),n=this.V++;const s=new tf(this,this.h,n,void 0);let u=this.s;if(this.P&&(u?(u=lg(u),WE(u,this.P)):u=this.P),null===this.o&&(s.H=u),this.ja)e:{for(var e=0,t=0;t<this.l.length;t++){var r=this.l[t];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.l.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=si(this,s,e),Un(t=_o(this.F),"RID",n),Un(t,"CVER",22),this.D&&Un(t,"X-HTTP-Session-Id",this.D),Ba(this,t),this.o&&u&&qy(t,this.o,u),jy(this.i,s),this.Ra&&Un(t,"TYPE","init"),this.ja?(Un(t,"$req",e),Un(t,"SID","null"),s.$=!0,rf(s,t,null)):rf(s,t,e),this.G=2}}else 3==this.G&&(n?Eo(this,n):0==this.l.length||E0(this.i)||Eo(this))},st.Ga=function(){if(this.u=null,Rg(this),this.$&&!(this.L||null==this.g||0>=this.O)){var n=2*this.O;this.h.info("BP detection timer enabled: "+n),this.B=Yi(Wr(this.bb,this),n)}},st.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,yi(10),xg(this),Rg(this))},st.ab=function(){null!=this.v&&(this.v=null,xg(this),Id(this),yi(19))},st.jb=function(n){n?(this.h.info("Successfully pinged google.com"),yi(2)):(this.h.info("Failed to ping google.com"),yi(1))},(st=kl.prototype).xa=function(){},st.wa=function(){},st.va=function(){},st.ua=function(){},st.Oa=function(){},$a.prototype.g=function(n,e){return new Ji(n,e)},qr(Ji,Yn),Ji.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;n.Wa&&(n.h.info("Origin Trials enabled."),mg(Wr(n.hb,n,e))),yi(0),n.W=e,n.aa=t||{},n.N=n.X,n.F=Ol(n,null,n.W),Ng(n)},Ji.prototype.close=function(){Vu(this.g)},Ji.prototype.u=function(n){if("string"==typeof n){var e={};e.__data__=n,Ky(this.g,e)}else this.v?((e={}).__data__=pg(n),Ky(this.g,e)):Ky(this.g,n)},Ji.prototype.M=function(){this.g.j=null,delete this.j,Vu(this.g),delete this.g,Ji.Z.M.call(this)},qr(Yy,My),qr(Qy,xy),qr(Fl,kl),Fl.prototype.xa=function(){ii(this.g,"a")},Fl.prototype.wa=function(n){ii(this.g,new Yy(n))},Fl.prototype.va=function(n){ii(this.g,new Qy(n))},Fl.prototype.ua=function(){ii(this.g,"b")},$a.prototype.createWebChannel=$a.prototype.g,Ji.prototype.send=Ji.prototype.u,Ji.prototype.open=Ji.prototype.m,Ji.prototype.close=Ji.prototype.close,md.NO_ERROR=0,md.TIMEOUT=8,md.HTTP_ERROR=6,c0.COMPLETE="complete",Sy.EventType=Xh,Xh.OPEN="a",Xh.CLOSE="b",Xh.ERROR="c",Xh.MESSAGE="d",Yn.prototype.listen=Yn.prototype.N,Or.prototype.listenOnce=Or.prototype.O,Or.prototype.getLastError=Or.prototype.La,Or.prototype.getLastErrorCode=Or.prototype.Da,Or.prototype.getStatus=Or.prototype.ba,Or.prototype.getResponseJson=Or.prototype.Qa,Or.prototype.getResponseText=Or.prototype.ga,Or.prototype.send=Or.prototype.ea;var A0=Rr.createWebChannelTransport=function(){return new $a},S0=Rr.getStatEventTarget=function(){return Qh()},Og=Rr.ErrorCode=md,M0=Rr.EventType=c0,x0=Rr.Event=Ru,N0=Rr.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},R0=Rr.FetchXmlHttpFactory=Ml,Pg=Rr.WebChannel=Sy,KD=Rr.XhrIo=Or;const Jy="@firebase/firestore";class oi{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}oi.UNAUTHENTICATED=new oi(null),oi.GOOGLE_CREDENTIALS=new oi("google-credentials-uid"),oi.FIRST_PARTY=new oi("first-party-uid"),oi.MOCK_USER=new oi("mock-user");let Dd="9.8.0";const Ha=new Fa.Yd("@firebase/firestore");function Xy(){return Ha.logLevel}function Be(n,...e){if(Ha.logLevel<=Fa.in.DEBUG){const t=e.map(e_);Ha.debug(`Firestore (${Dd}): ${n}`,...t)}}function br(n,...e){if(Ha.logLevel<=Fa.in.ERROR){const t=e.map(e_);Ha.error(`Firestore (${Dd}): ${n}`,...t)}}function kg(n,...e){if(Ha.logLevel<=Fa.in.WARN){const t=e.map(e_);Ha.warn(`Firestore (${Dd}): ${n}`,...t)}}function e_(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch(t){return n}}function ot(n="Unexpected state"){const e=`FIRESTORE (${Dd}) INTERNAL ASSERTION FAILED: `+n;throw br(e),new Error(e)}function xt(n,e){n||ot()}function nt(n,e){return n}const fe={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ke extends Jt.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Zr{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class t_{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class gS{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(oi.UNAUTHENTICATED))}shutdown(){}}class YD{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class Td{constructor(e){this.t=e,this.currentUser=oi.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let s=this.i;const u=b=>this.i!==s?(s=this.i,t(b)):Promise.resolve();let c=new Zr;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new Zr,e.enqueueRetryable(()=>u(this.currentUser))};const p=()=>{const b=c;e.enqueueRetryable((0,Ce.Z)(function*(){yield b.promise,yield u(r.currentUser)}))},_=b=>{Be("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=b,this.auth.addAuthTokenListener(this.o),p()};this.t.onInit(b=>_(b)),setTimeout(()=>{if(!this.auth){const b=this.t.getImmediate({optional:!0});b?_(b):(Be("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new Zr)}},0),p()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Be("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(xt("string"==typeof r.accessToken),new t_(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return xt(null===e||"string"==typeof e),new oi(e)}}class QD{constructor(e,t,r){this.type="FirstParty",this.user=oi.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",t);const s=e.auth.getAuthHeaderValueForFirstParty([]);s&&this.headers.set("Authorization",s),r&&this.headers.set("X-Goog-Iam-Authorization-Token",r)}}class P0{constructor(e,t,r){this.h=e,this.l=t,this.m=r}getToken(){return Promise.resolve(new QD(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(oi.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class k0{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class F0{constructor(e){this.g=e,this.forceRefresh=!1,this.appCheck=null,this.p=null}start(e,t){const r=u=>{null!=u.error&&Be("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const c=u.token!==this.p;return this.p=u.token,Be("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable(()=>r(u))};const s=u=>{Be("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.appCheck.addTokenListener(this.o)};this.g.onInit(u=>s(u)),setTimeout(()=>{if(!this.appCheck){const u=this.g.getImmediate({optional:!0});u?s(u):Be("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(xt("string"==typeof t.token),this.p=t.token,new k0(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}class fs{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.I(r),this.T=r=>t.writeSequenceNumber(r))}I(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.T&&this.T(e),e}}function L0(n){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}fs.A=-1;class V0{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const s=L0(40);for(let u=0;u<s.length;++u)r.length<20&&s[u]<t&&(r+=e.charAt(s[u]%e.length))}return r}}function Gt(n,e){return n<e?-1:n>e?1:0}function Cd(n,e,t){return n.length===e.length&&n.every((r,s)=>t(r,e[s]))}function U0(n){return n+"\0"}class gr{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ke(fe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ke(fe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new ke(fe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ke(fe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return gr.fromMillis(Date.now())}static fromDate(e){return gr.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new gr(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Gt(this.nanoseconds,e.nanoseconds):Gt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Tt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Tt(e)}static min(){return new Tt(new gr(0,0))}static max(){return new Tt(new gr(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}function B0(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Bu(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function r_(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class Ll{constructor(e,t,r){void 0===t?t=0:t>e.length&&ot(),void 0===r?r=e.length-t:r>e.length-t&&ot(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===Ll.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Ll?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let s=0;s<r;s++){const u=e.get(s),c=t.get(s);if(u<c)return-1;if(u>c)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class un extends Ll{construct(e,t,r){return new un(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new ke(fe.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(s=>s.length>0))}return new un(t)}static emptyPath(){return new un([])}}const i_=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Pr extends Ll{construct(e,t,r){return new Pr(e,t,r)}static isValidIdentifier(e){return i_.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Pr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Pr(["__name__"])}static fromServerFormat(e){const t=[];let r="",s=0;const u=()=>{if(0===r.length)throw new ke(fe.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let c=!1;for(;s<e.length;){const p=e[s];if("\\"===p){if(s+1===e.length)throw new ke(fe.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const _=e[s+1];if("\\"!==_&&"."!==_&&"`"!==_)throw new ke(fe.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=_,s+=2}else"`"===p?(c=!c,s++):"."!==p||c?(r+=p,s++):(u(),s++)}if(u(),c)throw new ke(fe.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Pr(t)}static emptyPath(){return new Pr([])}}class hf{constructor(e){this.fields=e,e.sort(Pr.comparator)}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Cd(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class Ir{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new Ir(t)}static fromUint8Array(e){const t=function(r){let s="";for(let u=0;u<r.length;++u)s+=String.fromCharCode(r[u]);return s}(e);return new Ir(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Gt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Ir.EMPTY_BYTE_STRING=new Ir("");const s_=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function na(n){if(xt(!!n),"string"==typeof n){let e=0;const t=s_.exec(n);if(xt(!!t),t[1]){let s=t[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:tr(n.seconds),nanos:tr(n.nanos)}}function tr(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function ra(n){return"string"==typeof n?Ir.fromBase64String(n):Ir.fromUint8Array(n)}function Ad(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=null==n?void 0:n.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function Fg(n){const e=n.mapValue.fields.__previous_value__;return Ad(e)?Fg(e):e}function Lg(n){const e=na(n.mapValue.fields.__local_write_time__.timestampValue);return new gr(e.seconds,e.nanos)}class JD{constructor(e,t,r,s,u,c,p,_){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=s,this.ssl=u,this.forceLongPolling=c,this.autoDetectLongPolling=p,this.useFetchStreams=_}}class Ks{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Ks("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Ks&&e.projectId===this.projectId&&e.database===this.database}}function ju(n){return null==n}function Sd(n){return 0===n&&1/n==-1/0}function o_(n){return"number"==typeof n&&Number.isInteger(n)&&!Sd(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}class Je{constructor(e){this.path=e}static fromPath(e){return new Je(un.fromString(e))}static fromName(e){return new Je(un.fromString(e).popFirst(5))}static empty(){return new Je(un.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===un.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return un.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Je(new un(e.slice()))}}const Ga={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},pf={nullValue:"NULL_VALUE"};function za(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Ad(n)?4:c_(n)?9007199254740991:10:ot()}function wo(n,e){if(n===e)return!0;const t=za(n);if(t!==za(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Lg(n).isEqual(Lg(e));case 3:return function(r,s){if("string"==typeof r.timestampValue&&"string"==typeof s.timestampValue&&r.timestampValue.length===s.timestampValue.length)return r.timestampValue===s.timestampValue;const u=na(r.timestampValue),c=na(s.timestampValue);return u.seconds===c.seconds&&u.nanos===c.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return s=e,ra(n.bytesValue).isEqual(ra(s.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,s){return tr(r.geoPointValue.latitude)===tr(s.geoPointValue.latitude)&&tr(r.geoPointValue.longitude)===tr(s.geoPointValue.longitude)}(n,e);case 2:return function(r,s){if("integerValue"in r&&"integerValue"in s)return tr(r.integerValue)===tr(s.integerValue);if("doubleValue"in r&&"doubleValue"in s){const u=tr(r.doubleValue),c=tr(s.doubleValue);return u===c?Sd(u)===Sd(c):isNaN(u)&&isNaN(c)}return!1}(n,e);case 9:return Cd(n.arrayValue.values||[],e.arrayValue.values||[],wo);case 10:return function(r,s){const u=r.mapValue.fields||{},c=s.mapValue.fields||{};if(B0(u)!==B0(c))return!1;for(const p in u)if(u.hasOwnProperty(p)&&(void 0===c[p]||!wo(u[p],c[p])))return!1;return!0}(n,e);default:return ot()}var s}function gf(n,e){return void 0!==(n.values||[]).find(t=>wo(t,e))}function Wa(n,e){if(n===e)return 0;const t=za(n),r=za(e);if(t!==r)return Gt(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Gt(n.booleanValue,e.booleanValue);case 2:return function(s,u){const c=tr(s.integerValue||s.doubleValue),p=tr(u.integerValue||u.doubleValue);return c<p?-1:c>p?1:c===p?0:isNaN(c)?isNaN(p)?0:-1:1}(n,e);case 3:return a_(n.timestampValue,e.timestampValue);case 4:return a_(Lg(n),Lg(e));case 5:return Gt(n.stringValue,e.stringValue);case 6:return function(s,u){const c=ra(s),p=ra(u);return c.compareTo(p)}(n.bytesValue,e.bytesValue);case 7:return function(s,u){const c=s.split("/"),p=u.split("/");for(let _=0;_<c.length&&_<p.length;_++){const b=Gt(c[_],p[_]);if(0!==b)return b}return Gt(c.length,p.length)}(n.referenceValue,e.referenceValue);case 8:return function(s,u){const c=Gt(tr(s.latitude),tr(u.latitude));return 0!==c?c:Gt(tr(s.longitude),tr(u.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(s,u){const c=s.values||[],p=u.values||[];for(let _=0;_<c.length&&_<p.length;++_){const b=Wa(c[_],p[_]);if(b)return b}return Gt(c.length,p.length)}(n.arrayValue,e.arrayValue);case 10:return function(s,u){if(s===Ga.mapValue&&u===Ga.mapValue)return 0;if(s===Ga.mapValue)return 1;if(u===Ga.mapValue)return-1;const c=s.fields||{},p=Object.keys(c),_=u.fields||{},b=Object.keys(_);p.sort(),b.sort();for(let A=0;A<p.length&&A<b.length;++A){const x=Gt(p[A],b[A]);if(0!==x)return x;const V=Wa(c[p[A]],_[b[A]]);if(0!==V)return V}return Gt(p.length,b.length)}(n.mapValue,e.mapValue);default:throw ot()}}function a_(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return Gt(n,e);const t=na(n),r=na(e),s=Gt(t.seconds,r.seconds);return 0!==s?s:Gt(t.nanos,r.nanos)}function $u(n){return Vg(n)}function Vg(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const s=na(r);return`time(${s.seconds},${s.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?ra(n.bytesValue).toBase64():"referenceValue"in n?Je.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let s="[",u=!0;for(const c of r.values||[])u?u=!1:s+=",",s+=Vg(c);return s+"]"}(n.arrayValue):"mapValue"in n?function(r){const s=Object.keys(r.fields||{}).sort();let u="{",c=!0;for(const p of s)c?c=!1:u+=",",u+=`${p}:${Vg(r.fields[p])}`;return u+"}"}(n.mapValue):ot();var e}function Vl(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function u_(n){return!!n&&"integerValue"in n}function mf(n){return!!n&&"arrayValue"in n}function l_(n){return!!n&&"nullValue"in n}function Ug(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function yf(n){return!!n&&"mapValue"in n}function Md(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Bu(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Md(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Md(n.arrayValue.values[t]);return e}return Object.assign({},n)}function c_(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function j0(n){return"nullValue"in n?pf:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?Vl(Ks.empty(),Je.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:ot()}function $0(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?Vl(Ks.empty(),Je.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?Ga:ot()}function d_(n,e){const t=Wa(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function h_(n,e){const t=Wa(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class ai{constructor(e){this.value=e}static empty(){return new ai({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!yf(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Md(t)}setAll(e){let t=Pr.emptyPath(),r={},s=[];e.forEach((c,p)=>{if(!t.isImmediateParentOf(p)){const _=this.getFieldsMap(t);this.applyChanges(_,r,s),r={},s=[],t=p.popLast()}c?r[p.lastSegment()]=Md(c):s.push(p.lastSegment())});const u=this.getFieldsMap(t);this.applyChanges(u,r,s)}delete(e){const t=this.field(e.popLast());yf(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return wo(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=t.mapValue.fields[e.get(r)];yf(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=s),t=s}return t.mapValue.fields}applyChanges(e,t,r){Bu(t,(s,u)=>e[s]=u);for(const s of r)delete e[s]}clone(){return new ai(Md(this.value))}}function XD(n){const e=[];return Bu(n.fields,(t,r)=>{const s=new Pr([t]);if(yf(r)){const u=XD(r.mapValue).fields;if(0===u.length)e.push(s);else for(const c of u)e.push(s.child(c))}else e.push(s)}),new hf(e)}class Bn{constructor(e,t,r,s,u,c){this.key=e,this.documentType=t,this.version=r,this.readTime=s,this.data=u,this.documentState=c}static newInvalidDocument(e){return new Bn(e,0,Tt.min(),Tt.min(),ai.empty(),0)}static newFoundDocument(e,t,r){return new Bn(e,1,t,Tt.min(),r,0)}static newNoDocument(e,t){return new Bn(e,2,t,Tt.min(),ai.empty(),0)}static newUnknownDocument(e,t){return new Bn(e,3,t,Tt.min(),ai.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ai.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ai.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Bn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Bn(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Bg{constructor(e,t,r,s){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=s}}function jg(n){return n.fields.find(e=>2===e.kind)}function Ul(n){return n.fields.filter(e=>2!==e.kind)}Bg.UNKNOWN_ID=-1;class nr{constructor(e,t){this.fieldPath=e,this.kind=t}}class xd{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new xd(0,Zs.min())}}function H0(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,s=Tt.fromTimestamp(1e9===r?new gr(t+1,0):new gr(t,r));return new Zs(s,Je.empty(),e)}function eT(n){return new Zs(n.readTime,n.key,-1)}class Zs{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Zs(Tt.min(),Je.empty(),-1)}static max(){return new Zs(Tt.max(),Je.empty(),-1)}}function G0(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=Je.comparator(n.documentKey,e.documentKey),0!==t?t:Gt(n.largestBatchId,e.largestBatchId))}class rr{constructor(e,t){this.comparator=e,this.root=t||ir.EMPTY}insert(e,t){return new rr(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,ir.BLACK,null,null))}remove(e){return new rr(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ir.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(0===s)return t+r.left.size;s<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new _f(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new _f(this.root,e,this.comparator,!1)}getReverseIterator(){return new _f(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new _f(this.root,e,this.comparator,!0)}}class _f{constructor(e,t,r,s){this.isReverse=s,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=t?r(e.key,t):1,t&&s&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(0===u){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ir{constructor(e,t,r,s,u){this.key=e,this.value=t,this.color=null!=r?r:ir.RED,this.left=null!=s?s:ir.EMPTY,this.right=null!=u?u:ir.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,s,u){return new ir(null!=e?e:this.key,null!=t?t:this.value,null!=r?r:this.color,null!=s?s:this.left,null!=u?u:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let s=this;const u=r(e,s.key);return s=u<0?s.copy(null,null,null,s.left.insert(e,t,r),null):0===u?s.copy(null,t,null,null,null):s.copy(null,null,null,null,s.right.insert(e,t,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return ir.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,s=this;if(t(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,t),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),0===t(e,s.key)){if(s.right.isEmpty())return ir.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,t))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ir.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ir.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ot();const e=this.left.check();if(e!==this.right.check())throw ot();return e+(this.isRed()?0:1)}}ir.EMPTY=null,ir.RED=!0,ir.BLACK=!1,ir.EMPTY=new class{constructor(){this.size=0}get key(){throw ot()}get value(){throw ot()}get color(){throw ot()}get left(){throw ot()}get right(){throw ot()}copy(n,e,t,r,s){return this}insert(n,e,t){return new ir(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Nn{constructor(e){this.comparator=e,this.data=new rr(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;t(s.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new z0(this.data.getIterator())}getIteratorFrom(e){return new z0(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof Nn)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const s=t.getNext().key,u=r.getNext().key;if(0!==this.comparator(s,u))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Nn(this.comparator);return t.data=e,t}}class z0{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Bl(n){return n.hasNext()?n.getNext():void 0}class tT{constructor(e,t=null,r=[],s=[],u=null,c=null,p=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=s,this.limit=u,this.startAt=c,this.endAt=p,this.P=null}}function f_(n,e=null,t=[],r=[],s=null,u=null,c=null){return new tT(n,e,t,r,s,u,c)}function Nd(n){const e=nt(n);if(null===e.P){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>{return(s=r).field.canonicalString()+s.op.toString()+$u(s.value);var s}).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(s=r).field.canonicalString()+s.dir;var s}).join(","),ju(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>$u(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>$u(r)).join(",")),e.P=t}return e.P}function jl(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let s=0;s<n.orderBy.length;s++)if(!Z0(n.orderBy[s],e.orderBy[s]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let s=0;s<n.filters.length;s++)if((t=n.filters[s]).op!==(r=e.filters[s]).op||!t.field.isEqual(r.field)||!wo(t.value,r.value))return!1;var t,r;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!y_(n.startAt,e.startAt)&&y_(n.endAt,e.endAt)}function ps(n){return Je.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function $g(n,e){return n.filters.filter(t=>t instanceof An&&t.field.isEqual(e))}function g_(n,e,t){let r=pf,s=!0;for(const u of $g(n,e)){let c=pf,p=!0;switch(u.op){case"<":case"<=":c=j0(u.value);break;case"==":case"in":case">=":c=u.value;break;case">":c=u.value,p=!1;break;case"!=":case"not-in":c=pf}d_({value:r,inclusive:s},{value:c,inclusive:p})<0&&(r=c,s=p)}if(null!==t)for(let u=0;u<n.orderBy.length;++u)if(n.orderBy[u].field.isEqual(e)){const c=t.position[u];d_({value:r,inclusive:s},{value:c,inclusive:t.inclusive})<0&&(r=c,s=t.inclusive);break}return{value:r,inclusive:s}}function bo(n,e,t){let r=Ga,s=!0;for(const u of $g(n,e)){let c=Ga,p=!0;switch(u.op){case">=":case">":c=$0(u.value),p=!1;break;case"==":case"in":case"<=":c=u.value;break;case"<":c=u.value,p=!1;break;case"!=":case"not-in":c=Ga}h_({value:r,inclusive:s},{value:c,inclusive:p})>0&&(r=c,s=p)}if(null!==t)for(let u=0;u<n.orderBy.length;++u)if(n.orderBy[u].field.isEqual(e)){const c=t.position[u];h_({value:r,inclusive:s},{value:c,inclusive:t.inclusive})>0&&(r=c,s=t.inclusive);break}return{value:r,inclusive:s}}class An extends class{}{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.V(e,t,r):new Io(e,t,r):"array-contains"===t?new nT(e,r):"in"===t?new rT(e,r):"not-in"===t?new iT(e,r):"array-contains-any"===t?new m_(e,r):new An(e,t,r)}static V(e,t,r){return"in"===t?new W0(e,r):new q0(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.v(Wa(t,this.value)):null!==t&&za(this.value)===za(t)&&this.v(Wa(t,this.value))}v(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return ot()}}S(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class Io extends An{constructor(e,t,r){super(e,t,r),this.key=Je.fromName(r.referenceValue)}matches(e){const t=Je.comparator(e.key,this.key);return this.v(t)}}class W0 extends An{constructor(e,t){super(e,"in",t),this.keys=K0(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class q0 extends An{constructor(e,t){super(e,"not-in",t),this.keys=K0(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function K0(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>Je.fromName(r.referenceValue))}class nT extends An{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return mf(t)&&gf(t.arrayValue,this.value)}}class rT extends An{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&gf(this.value.arrayValue,t)}}class iT extends An{constructor(e,t){super(e,"not-in",t)}matches(e){if(gf(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!gf(this.value.arrayValue,t)}}class m_ extends An{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!mf(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>gf(this.value.arrayValue,r))}}class Ys{constructor(e,t){this.position=e,this.inclusive=t}}class Rd{constructor(e,t="asc"){this.field=e,this.dir=t}}function Z0(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}function Y0(n,e,t){let r=0;for(let s=0;s<n.position.length;s++){const u=e[s],c=n.position[s];if(r=u.field.isKeyField()?Je.comparator(Je.fromName(c.referenceValue),t.key):Wa(c,t.data.field(u.field)),"desc"===u.dir&&(r*=-1),0!==r)break}return r}function y_(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!wo(n.position[t],e.position[t]))return!1;return!0}class ia{constructor(e,t=null,r=[],s=[],u=null,c="F",p=null,_=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=s,this.limit=u,this.limitType=c,this.startAt=p,this.endAt=_,this.D=null,this.C=null}}function vf(n,e,t,r,s,u,c,p){return new ia(n,e,t,r,s,u,c,p)}function Od(n){return new ia(n)}function Hg(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function Ef(n){for(const e of n.filters)if(e.S())return e.field;return null}function Pd(n){return null!==n.collectionGroup}function $l(n){const e=nt(n);if(null===e.D){e.D=[];const t=Ef(e),r=Hg(e);if(null!==t&&null===r)t.isKeyField()||e.D.push(new Rd(t)),e.D.push(new Rd(Pr.keyField(),"asc"));else{let s=!1;for(const u of e.explicitOrderBy)e.D.push(u),u.field.isKeyField()&&(s=!0);if(!s){const u=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.D.push(new Rd(Pr.keyField(),u))}}}return e.D}function gs(n){const e=nt(n);if(!e.C)if("F"===e.limitType)e.C=f_(e.path,e.collectionGroup,$l(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const u of $l(e))t.push(new Rd(u.field,"desc"===u.dir?"asc":"desc"));const r=e.endAt?new Ys(e.endAt.position,e.endAt.inclusive):null,s=e.startAt?new Ys(e.startAt.position,e.startAt.inclusive):null;e.C=f_(e.path,e.collectionGroup,t,e.filters,e.limit,r,s)}return e.C}function __(n,e,t){return new ia(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function kd(n,e){return jl(gs(n),gs(e))&&n.limitType===e.limitType}function v_(n){return`${Nd(gs(n))}|lt:${n.limitType}`}function Gg(n){return`Query(target=${function p_(n){let e=n.path.canonicalString();return null!==n.collectionGroup&&(e+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(e+=`, filters: [${n.filters.map(t=>{return`${(r=t).field.canonicalString()} ${r.op} ${$u(r.value)}`;var r}).join(", ")}]`),ju(n.limit)||(e+=", limit: "+n.limit),n.orderBy.length>0&&(e+=`, orderBy: [${n.orderBy.map(t=>{return`${(r=t).field.canonicalString()} (${r.dir})`;var r}).join(", ")}]`),n.startAt&&(e+=", startAt: ",e+=n.startAt.inclusive?"b:":"a:",e+=n.startAt.position.map(t=>$u(t)).join(",")),n.endAt&&(e+=", endAt: ",e+=n.endAt.inclusive?"a:":"b:",e+=n.endAt.position.map(t=>$u(t)).join(",")),`Target(${e})`}(gs(n))}; limitType=${n.limitType})`}function zg(n,e){return e.isFoundDocument()&&function(t,r){const s=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(s):Je.isDocumentKey(t.path)?t.path.isEqual(s):t.path.isImmediateParentOf(s)}(n,e)&&function(t,r){for(const s of t.explicitOrderBy)if(!s.field.isKeyField()&&null===r.data.field(s.field))return!1;return!0}(n,e)&&function(t,r){for(const s of t.filters)if(!s.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(s,u,c){const p=Y0(s,u,c);return s.inclusive?p<=0:p<0}(t.startAt,$l(t),r)||t.endAt&&!function(s,u,c){const p=Y0(s,u,c);return s.inclusive?p>=0:p>0}(t.endAt,$l(t),r)));var t,r}function E_(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function J0(n){return(e,t)=>{let r=!1;for(const s of $l(n)){const u=sT(s,e,t);if(0!==u)return u;r=r||s.field.isKeyField()}return 0}}function sT(n,e,t){const r=n.field.isKeyField()?Je.comparator(e.key,t.key):function(s,u,c){const p=u.data.field(s),_=c.data.field(s);return null!==p&&null!==_?Wa(p,_):ot()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return ot()}}function X0(n,e){if(n.N){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Sd(e)?"-0":e}}function ew(n){return{integerValue:""+n}}function tw(n,e){return o_(e)?ew(e):X0(n,e)}class Wg{constructor(){this._=void 0}}function oT(n,e,t){return n instanceof Fd?function(r,s){const u={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return s&&(u.fields.__previous_value__=s),{mapValue:u}}(t,e):n instanceof Hl?rw(n,e):n instanceof Gl?iw(n,e):function(r,s){const u=nw(r,s),c=sw(u)+sw(r.k);return u_(u)&&u_(r.k)?ew(c):X0(r.M,c)}(n,e)}function aT(n,e,t){return n instanceof Hl?rw(n,e):n instanceof Gl?iw(n,e):t}function nw(n,e){return n instanceof Ld?u_(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class Fd extends Wg{}class Hl extends Wg{constructor(e){super(),this.elements=e}}function rw(n,e){const t=ow(e);for(const r of n.elements)t.some(s=>wo(s,r))||t.push(r);return{arrayValue:{values:t}}}class Gl extends Wg{constructor(e){super(),this.elements=e}}function iw(n,e){let t=ow(e);for(const r of n.elements)t=t.filter(s=>!wo(s,r));return{arrayValue:{values:t}}}class Ld extends Wg{constructor(e,t){super(),this.M=e,this.k=t}}function sw(n){return tr(n.integerValue||n.doubleValue)}function ow(n){return mf(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class wf{constructor(e,t){this.field=e,this.transform=t}}class uw{constructor(e,t){this.version=e,this.transformResults=t}}class mr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new mr}static exists(e){return new mr(void 0,e)}static updateTime(e){return new mr(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function bf(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class If{}function lw(n,e,t){n instanceof zl?function(r,s,u){const c=r.value.clone(),p=hw(r.fieldTransforms,s,u.transformResults);c.setAll(p),s.convertToFoundDocument(u.version,c).setHasCommittedMutations()}(n,e,t):n instanceof ms?function(r,s,u){if(!bf(r.precondition,s))return void s.convertToUnknownDocument(u.version);const c=hw(r.fieldTransforms,s,u.transformResults),p=s.data;p.setAll(dw(r)),p.setAll(c),s.convertToFoundDocument(u.version,p).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function qg(n,e,t){var s;n instanceof zl?function(r,s,u){if(!bf(r.precondition,s))return;const c=r.value.clone(),p=Wl(r.fieldTransforms,u,s);c.setAll(p),s.convertToFoundDocument(b_(s),c).setHasLocalMutations()}(n,e,t):n instanceof ms?function(r,s,u){if(!bf(r.precondition,s))return;const c=Wl(r.fieldTransforms,u,s),p=s.data;p.setAll(dw(r)),p.setAll(c),s.convertToFoundDocument(b_(s),p).setHasLocalMutations()}(n,e,t):bf(n.precondition,s=e)&&s.convertToNoDocument(Tt.min())}function cw(n,e){let t=null;for(const r of n.fieldTransforms){const s=e.data.field(r.field),u=nw(r.transform,s||null);null!=u&&(null==t&&(t=ai.empty()),t.set(r.field,u))}return t||null}function w_(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&Cd(t,r,(s,u)=>function aw(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof Hl&&r instanceof Hl||t instanceof Gl&&r instanceof Gl?Cd(t.elements,r.elements,wo):t instanceof Ld&&r instanceof Ld?wo(t.k,r.k):t instanceof Fd&&r instanceof Fd);var t,r}(s,u))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}function b_(n){return n.isFoundDocument()?n.version:Tt.min()}class zl extends If{constructor(e,t,r,s=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=s,this.type=0}}class ms extends If{constructor(e,t,r,s,u=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=s,this.fieldTransforms=u,this.type=1}}function dw(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function hw(n,e,t){const r=new Map;xt(n.length===t.length);for(let s=0;s<t.length;s++){const u=n[s],c=u.transform,p=e.data.field(u.field);r.set(u.field,aT(c,p,t[s]))}return r}function Wl(n,e,t){const r=new Map;for(const s of n){const u=s.transform,c=t.data.field(s.field);r.set(s.field,oT(u,c,e))}return r}class Kg extends If{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}}class Df extends If{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}}class mS{constructor(e){this.count=e}}var yr,rn;function uT(n){switch(n){default:return ot();case fe.CANCELLED:case fe.UNKNOWN:case fe.DEADLINE_EXCEEDED:case fe.RESOURCE_EXHAUSTED:case fe.INTERNAL:case fe.UNAVAILABLE:case fe.UNAUTHENTICATED:return!1;case fe.INVALID_ARGUMENT:case fe.NOT_FOUND:case fe.ALREADY_EXISTS:case fe.PERMISSION_DENIED:case fe.FAILED_PRECONDITION:case fe.ABORTED:case fe.OUT_OF_RANGE:case fe.UNIMPLEMENTED:case fe.DATA_LOSS:return!0}}function bt(n){if(void 0===n)return br("GRPC error has no .code"),fe.UNKNOWN;switch(n){case yr.OK:return fe.OK;case yr.CANCELLED:return fe.CANCELLED;case yr.UNKNOWN:return fe.UNKNOWN;case yr.DEADLINE_EXCEEDED:return fe.DEADLINE_EXCEEDED;case yr.RESOURCE_EXHAUSTED:return fe.RESOURCE_EXHAUSTED;case yr.INTERNAL:return fe.INTERNAL;case yr.UNAVAILABLE:return fe.UNAVAILABLE;case yr.UNAUTHENTICATED:return fe.UNAUTHENTICATED;case yr.INVALID_ARGUMENT:return fe.INVALID_ARGUMENT;case yr.NOT_FOUND:return fe.NOT_FOUND;case yr.ALREADY_EXISTS:return fe.ALREADY_EXISTS;case yr.PERMISSION_DENIED:return fe.PERMISSION_DENIED;case yr.FAILED_PRECONDITION:return fe.FAILED_PRECONDITION;case yr.ABORTED:return fe.ABORTED;case yr.OUT_OF_RANGE:return fe.OUT_OF_RANGE;case yr.UNIMPLEMENTED:return fe.UNIMPLEMENTED;case yr.DATA_LOSS:return fe.DATA_LOSS;default:return ot()}}(rn=yr||(yr={}))[rn.OK=0]="OK",rn[rn.CANCELLED=1]="CANCELLED",rn[rn.UNKNOWN=2]="UNKNOWN",rn[rn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",rn[rn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",rn[rn.NOT_FOUND=5]="NOT_FOUND",rn[rn.ALREADY_EXISTS=6]="ALREADY_EXISTS",rn[rn.PERMISSION_DENIED=7]="PERMISSION_DENIED",rn[rn.UNAUTHENTICATED=16]="UNAUTHENTICATED",rn[rn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",rn[rn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",rn[rn.ABORTED=10]="ABORTED",rn[rn.OUT_OF_RANGE=11]="OUT_OF_RANGE",rn[rn.UNIMPLEMENTED=12]="UNIMPLEMENTED",rn[rn.INTERNAL=13]="INTERNAL",rn[rn.UNAVAILABLE=14]="UNAVAILABLE",rn[rn.DATA_LOSS=15]="DATA_LOSS";class Hu{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[s,u]of r)if(this.equalsFn(s,e))return u}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),s=this.inner[r];if(void 0===s)return this.inner[r]=[[e,t]],void this.innerSize++;for(let u=0;u<s.length;u++)if(this.equalsFn(s[u][0],e))return void(s[u]=[e,t]);s.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return 1===r.length?delete this.inner[t]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Bu(this.inner,(t,r)=>{for(const[s,u]of r)e(s,u)})}isEmpty(){return r_(this.inner)}size(){return this.innerSize}}const lT=new rr(Je.comparator);function Qs(){return lT}const Zg=new rr(Je.comparator);function I_(...n){let e=Zg;for(const t of n)e=e.insert(t.key,t);return e}function Gu(){return new Hu(n=>n.toString(),(n,e)=>n.isEqual(e))}const Yg=new rr(Je.comparator),sr=new Nn(Je.comparator);function bn(...n){let e=sr;for(const t of n)e=e.add(t);return e}const fw=new Nn(Gt);function Qg(){return fw}class Tf{constructor(e,t,r,s,u){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,t){const r=new Map;return r.set(e,Vd.createSynthesizedTargetChangeForCurrentChange(e,t)),new Tf(Tt.min(),r,Qg(),Qs(),bn())}}class Vd{constructor(e,t,r,s,u){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,t){return new Vd(Ir.EMPTY_BYTE_STRING,t,bn(),bn(),bn())}}class Cf{constructor(e,t,r,s){this.O=e,this.removedTargetIds=t,this.key=r,this.F=s}}class D_{constructor(e,t){this.targetId=e,this.$=t}}class T_{constructor(e,t,r=Ir.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=s}}class pw{constructor(){this.B=0,this.L=Ud(),this.U=Ir.EMPTY_BYTE_STRING,this.q=!1,this.K=!0}get current(){return this.q}get resumeToken(){return this.U}get G(){return 0!==this.B}get j(){return this.K}W(e){e.approximateByteSize()>0&&(this.K=!0,this.U=e)}H(){let e=bn(),t=bn(),r=bn();return this.L.forEach((s,u)=>{switch(u){case 0:e=e.add(s);break;case 2:t=t.add(s);break;case 1:r=r.add(s);break;default:ot()}}),new Vd(this.U,this.q,e,t,r)}J(){this.K=!1,this.L=Ud()}Y(e,t){this.K=!0,this.L=this.L.insert(e,t)}X(e){this.K=!0,this.L=this.L.remove(e)}Z(){this.B+=1}tt(){this.B-=1}et(){this.K=!0,this.q=!0}}class cT{constructor(e){this.nt=e,this.st=new Map,this.it=Qs(),this.rt=gw(),this.ot=new Nn(Gt)}ut(e){for(const t of e.O)e.F&&e.F.isFoundDocument()?this.at(t,e.F):this.ct(t,e.key,e.F);for(const t of e.removedTargetIds)this.ct(t,e.key,e.F)}ht(e){this.forEachTarget(e,t=>{const r=this.lt(t);switch(e.state){case 0:this.ft(t)&&r.W(e.resumeToken);break;case 1:r.tt(),r.G||r.J(),r.W(e.resumeToken);break;case 2:r.tt(),r.G||this.removeTarget(t);break;case 3:this.ft(t)&&(r.et(),r.W(e.resumeToken));break;case 4:this.ft(t)&&(this.dt(t),r.W(e.resumeToken));break;default:ot()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.st.forEach((r,s)=>{this.ft(s)&&t(s)})}_t(e){const t=e.targetId,r=e.$.count,s=this.wt(t);if(s){const u=s.target;if(ps(u))if(0===r){const c=new Je(u.path);this.ct(t,c,Bn.newNoDocument(c,Tt.min()))}else xt(1===r);else this.gt(t)!==r&&(this.dt(t),this.ot=this.ot.add(t))}}yt(e){const t=new Map;this.st.forEach((u,c)=>{const p=this.wt(c);if(p){if(u.current&&ps(p.target)){const _=new Je(p.target.path);null!==this.it.get(_)||this.It(c,_)||this.ct(c,_,Bn.newNoDocument(_,e))}u.j&&(t.set(c,u.H()),u.J())}});let r=bn();this.rt.forEach((u,c)=>{let p=!0;c.forEachWhile(_=>{const b=this.wt(_);return!b||2===b.purpose||(p=!1,!1)}),p&&(r=r.add(u))}),this.it.forEach((u,c)=>c.setReadTime(e));const s=new Tf(e,t,this.ot,this.it,r);return this.it=Qs(),this.rt=gw(),this.ot=new Nn(Gt),s}at(e,t){if(!this.ft(e))return;const r=this.It(e,t.key)?2:0;this.lt(e).Y(t.key,r),this.it=this.it.insert(t.key,t),this.rt=this.rt.insert(t.key,this.Tt(t.key).add(e))}ct(e,t,r){if(!this.ft(e))return;const s=this.lt(e);this.It(e,t)?s.Y(t,1):s.X(t),this.rt=this.rt.insert(t,this.Tt(t).delete(e)),r&&(this.it=this.it.insert(t,r))}removeTarget(e){this.st.delete(e)}gt(e){const t=this.lt(e).H();return this.nt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Z(e){this.lt(e).Z()}lt(e){let t=this.st.get(e);return t||(t=new pw,this.st.set(e,t)),t}Tt(e){let t=this.rt.get(e);return t||(t=new Nn(Gt),this.rt=this.rt.insert(e,t)),t}ft(e){const t=null!==this.wt(e);return t||Be("WatchChangeAggregator","Detected inactive target",e),t}wt(e){const t=this.st.get(e);return t&&t.G?null:this.nt.Et(e)}dt(e){this.st.set(e,new pw),this.nt.getRemoteKeysForTarget(e).forEach(t=>{this.ct(e,t,null)})}It(e,t){return this.nt.getRemoteKeysForTarget(e).has(t)}}function gw(){return new rr(Je.comparator)}function Ud(){return new rr(Je.comparator)}const dT={asc:"ASCENDING",desc:"DESCENDING"},hT={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class fT{constructor(e,t){this.databaseId=e,this.N=t}}function zu(n,e){return n.N?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function C_(n,e){return n.N?e.toBase64():e.toUint8Array()}function mw(n,e){return zu(n,e.toTimestamp())}function kr(n){return xt(!!n),Tt.fromTimestamp(function(e){const t=na(e);return new gr(t.seconds,t.nanos)}(n))}function A_(n,e){return(t=n,new un(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function Bd(n){const e=un.fromString(n);return xt(Iw(e)),e}function qa(n,e){return A_(n.databaseId,e.path)}function sa(n,e){const t=Bd(e);if(t.get(1)!==n.databaseId.projectId)throw new ke(fe.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new ke(fe.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Je(M_(t))}function S_(n,e){return A_(n.databaseId,e)}function yw(n){const e=Bd(n);return 4===e.length?un.emptyPath():M_(e)}function jd(n){return new un(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function M_(n){return xt(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function x_(n,e,t){return{name:qa(n,e),fields:t.value.mapValue.fields}}function _w(n,e,t){const r=sa(n,e.name),s=kr(e.updateTime),u=new ai({mapValue:{fields:e.fields}}),c=Bn.newFoundDocument(r,s,u);return t&&c.setHasCommittedMutations(),t?c.setHasCommittedMutations():c}function Af(n,e){let t;if(e instanceof zl)t={update:x_(n,e.key,e.value)};else if(e instanceof Kg)t={delete:qa(n,e.key)};else if(e instanceof ms)t={update:x_(n,e.key,e.data),updateMask:ET(e.fieldMask)};else{if(!(e instanceof Df))return ot();t={verify:qa(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(s,u){const c=u.transform;if(c instanceof Fd)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof Hl)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof Gl)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof Ld)return{fieldPath:u.field.canonicalString(),increment:c.k};throw ot()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(s=e.precondition).updateTime?{updateTime:mw(n,s.updateTime)}:void 0!==s.exists?{exists:s.exists}:ot()),t;var s}function Ew(n,e){const t=e.currentDocument?void 0!==(s=e.currentDocument).updateTime?mr.updateTime(kr(s.updateTime)):void 0!==s.exists?mr.exists(s.exists):mr.none():mr.none(),r=e.updateTransforms?e.updateTransforms.map(s=>function(u,c){let p=null;"setToServerValue"in c?(xt("REQUEST_TIME"===c.setToServerValue),p=new Fd):"appendMissingElements"in c?p=new Hl(c.appendMissingElements.values||[]):"removeAllFromArray"in c?p=new Gl(c.removeAllFromArray.values||[]):"increment"in c?p=new Ld(u,c.increment):ot();const _=Pr.fromServerFormat(c.fieldPath);return new wf(_,p)}(n,s)):[];var s;if(e.update){const s=sa(n,e.update.name),u=new ai({mapValue:{fields:e.update.fields}});if(e.updateMask){const c=new hf((e.updateMask.fieldPaths||[]).map(b=>Pr.fromServerFormat(b)));return new ms(s,u,c,t,r)}return new zl(s,u,t,r)}if(e.delete){const s=sa(n,e.delete);return new Kg(s,t)}if(e.verify){const s=sa(n,e.verify);return new Df(s,t)}return ot()}function gT(n,e){return{documents:[S_(n,e.path)]}}function mT(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=S_(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=S_(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const s=function(_){if(0===_.length)return;const b=_.map(A=>function(x){if("=="===x.op){if(Ug(x.value))return{unaryFilter:{field:oa(x.field),op:"IS_NAN"}};if(l_(x.value))return{unaryFilter:{field:oa(x.field),op:"IS_NULL"}}}else if("!="===x.op){if(Ug(x.value))return{unaryFilter:{field:oa(x.field),op:"IS_NOT_NAN"}};if(l_(x.value))return{unaryFilter:{field:oa(x.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:oa(x.field),op:bw(x.op),value:x.value}}}(A));return 1===b.length?b[0]:{compositeFilter:{op:"AND",filters:b}}}(e.filters);s&&(t.structuredQuery.where=s);const u=function(_){if(0!==_.length)return _.map(b=>{return{field:oa((A=b).field),direction:yT(A.dir)};var A})}(e.orderBy);u&&(t.structuredQuery.orderBy=u);const c=(b=e.limit,n.N||ju(b)?b:{value:b});var b,p,_;return null!==c&&(t.structuredQuery.limit=c),e.startAt&&(t.structuredQuery.startAt={before:(p=e.startAt).inclusive,values:p.position}),e.endAt&&(t.structuredQuery.endAt={before:!(_=e.endAt).inclusive,values:_.position}),t}function N_(n){let e=yw(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let s=null;if(r>0){xt(1===r);const A=t.from[0];A.allDescendants?s=A.collectionId:e=e.child(A.collectionId)}let u=[];t.where&&(u=ww(t.where));let c=[];t.orderBy&&(c=t.orderBy.map(A=>{return new Rd($d((x=A).field),function(V){switch(V){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(x.direction));var x}));let p=null;t.limit&&(p=function(A){let x;return x="object"==typeof A?A.value:A,ju(x)?null:x}(t.limit));let _=null;var A;t.startAt&&(_=new Ys((A=t.startAt).values||[],!!A.before));let b=null;return t.endAt&&(b=function(A){return new Ys(A.values||[],!A.before)}(t.endAt)),vf(e,s,c,u,p,"F",_,b)}function ww(n){return n?void 0!==n.unaryFilter?[vT(n)]:void 0!==n.fieldFilter?[_T(n)]:void 0!==n.compositeFilter?n.compositeFilter.filters.map(e=>ww(e)).reduce((e,t)=>e.concat(t)):ot():[]}function yT(n){return dT[n]}function bw(n){return hT[n]}function oa(n){return{fieldPath:n.canonicalString()}}function $d(n){return Pr.fromServerFormat(n.fieldPath)}function _T(n){return An.create($d(n.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ot()}}(n.fieldFilter.op),n.fieldFilter.value)}function vT(n){switch(n.unaryFilter.op){case"IS_NAN":const e=$d(n.unaryFilter.field);return An.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=$d(n.unaryFilter.field);return An.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=$d(n.unaryFilter.field);return An.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=$d(n.unaryFilter.field);return An.create(s,"!=",{nullValue:"NULL_VALUE"});default:return ot()}}function ET(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function Iw(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function _i(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=Dw(e)),e=wT(n.get(t),e);return Dw(e)}function wT(n,e){let t=e;const r=n.length;for(let s=0;s<r;s++){const u=n.charAt(s);switch(u){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=u}}return t}function Dw(n){return n+"\x01\x01"}function Ni(n){const e=n.length;if(xt(e>=2),2===e)return xt("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),un.emptyPath();const t=e-2,r=[];let s="";for(let u=0;u<e;){const c=n.indexOf("\x01",u);switch((c<0||c>t)&&ot(),n.charAt(c+1)){case"\x01":const p=n.substring(u,c);let _;0===s.length?_=p:(s+=p,_=s,s=""),r.push(_);break;case"\x10":s+=n.substring(u,c),s+="\0";break;case"\x11":s+=n.substring(u,c+1);break;default:ot()}u=c+2}return new un(r)}const Tw=["userId","batchId"];function Sf(n,e){return[n,_i(e)]}function Cw(n,e,t){return[n,_i(e),t]}const Aw={},bT=["prefixPath","collectionGroup","readTime","documentId"],Sw=["prefixPath","collectionGroup","documentId"],IT=["collectionGroup","readTime","prefixPath","documentId"],R_=["canonicalId","targetId"],DT=["targetId","path"],Mw=["path","targetId"],xw=["collectionId","parent"],TT=["indexId","uid"],CT=["uid","sequenceNumber"],AT=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],O_=["indexId","uid","orderedDocumentKey"],ST=["userId","collectionPath","documentId"],Nw=["userId","collectionPath","largestBatchId"],MT=["userId","collectionGroup","largestBatchId"],Rw=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],xT=[...Rw,"documentOverlays"],Ow=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],NT=[...Ow,"indexConfiguration","indexState","indexEntries"],Pw="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class kw{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}class pe{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&ot(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new pe((r,s)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(r,s)},this.catchCallback=u=>{this.wrapFailure(t,u).next(r,s)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof pe?t:pe.resolve(t)}catch(t){return pe.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):pe.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):pe.reject(t)}static resolve(e){return new pe((t,r)=>{t(e)})}static reject(e){return new pe((t,r)=>{r(e)})}static waitFor(e){return new pe((t,r)=>{let s=0,u=0,c=!1;e.forEach(p=>{++s,p.next(()=>{++u,c&&u===s&&t()},_=>r(_))}),c=!0,u===s&&t()})}static or(e){let t=pe.resolve(!1);for(const r of e)t=t.next(s=>s?pe.resolve(s):r());return t}static forEach(e,t){const r=[];return e.forEach((s,u)=>{r.push(t.call(this,s,u))}),this.waitFor(r)}}class Mf{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.At=new Zr,this.transaction.oncomplete=()=>{this.At.resolve()},this.transaction.onabort=()=>{t.error?this.At.reject(new xf(e,t.error)):this.At.resolve()},this.transaction.onerror=r=>{const s=Nf(r.target.error);this.At.reject(new xf(e,s))}}static open(e,t,r,s){try{return new Mf(t,e.transaction(s,r))}catch(u){throw new xf(t,u)}}get Rt(){return this.At.promise}abort(e){e&&this.At.reject(e),this.aborted||(Be("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}bt(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new OT(t)}}class Js{constructor(e,t,r){this.name=e,this.version=t,this.Pt=r,12.2===Js.Vt((0,Jt.z$)())&&br("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Be("SimpleDb","Removing database:",e),ql(window.indexedDB.deleteDatabase(e)).toPromise()}static vt(){if(!(0,Jt.hl)())return!1;if(Js.St())return!0;const e=(0,Jt.z$)(),t=Js.Vt(e),r=0<t&&t<10,s=Js.Dt(e),u=0<s&&s<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||u)}static St(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.Ct)}static xt(e,t){return e.store(t)}static Vt(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static Dt(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}Nt(e){var t=this;return(0,Ce.Z)(function*(){return t.db||(Be("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,s)=>{const u=indexedDB.open(t.name,t.version);u.onsuccess=c=>{r(c.target.result)},u.onblocked=()=>{s(new xf(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},u.onerror=c=>{const p=c.target.error;s("VersionError"===p.name?new ke(fe.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===p.name?new ke(fe.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+p):new xf(e,p))},u.onupgradeneeded=c=>{Be("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',c.oldVersion),t.Pt.kt(c.target.result,u.transaction,c.oldVersion,t.version).next(()=>{Be("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.Mt&&(t.db.onversionchange=r=>t.Mt(r)),t.db})()}Ot(e){this.Mt=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,s){var u=this;return(0,Ce.Z)(function*(){const c="readonly"===t;let p=0;for(;;){++p;try{u.db=yield u.Nt(e);const _=Mf.open(u.db,e,c?"readonly":"readwrite",r),b=s(_).next(A=>(_.bt(),A)).catch(A=>(_.abort(A),pe.reject(A))).toPromise();return b.catch(()=>{}),yield _.Rt,b}catch(_){const b="FirebaseError"!==_.name&&p<3;if(Be("SimpleDb","Transaction failed with error:",_.message,"Retrying:",b),u.close(),!b)return Promise.reject(_)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class RT{constructor(e){this.Ft=e,this.$t=!1,this.Bt=null}get isDone(){return this.$t}get Lt(){return this.Bt}set cursor(e){this.Ft=e}done(){this.$t=!0}Ut(e){this.Bt=e}delete(){return ql(this.Ft.delete())}}class xf extends ke{constructor(e,t){super(fe.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Wu(n){return"IndexedDbTransactionError"===n.name}class OT{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(Be("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(Be("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),ql(r)}add(e){return Be("SimpleDb","ADD",this.store.name,e,e),ql(this.store.add(e))}get(e){return ql(this.store.get(e)).next(t=>(void 0===t&&(t=null),Be("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Be("SimpleDb","DELETE",this.store.name,e),ql(this.store.delete(e))}count(){return Be("SimpleDb","COUNT",this.store.name),ql(this.store.count())}qt(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const s=this.cursor(r),u=[];return this.Kt(s,(c,p)=>{u.push(p)}).next(()=>u)}{const s=this.store.getAll(r.range);return new pe((u,c)=>{s.onerror=p=>{c(p.target.error)},s.onsuccess=p=>{u(p.target.result)}})}}Gt(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new pe((s,u)=>{r.onerror=c=>{u(c.target.error)},r.onsuccess=c=>{s(c.target.result)}})}Qt(e,t){Be("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.jt=!1;const s=this.cursor(r);return this.Kt(s,(u,c,p)=>p.delete())}Wt(e,t){let r;t?r=e:(r={},t=e);const s=this.cursor(r);return this.Kt(s,t)}zt(e){const t=this.cursor({});return new pe((r,s)=>{t.onerror=u=>{const c=Nf(u.target.error);s(c)},t.onsuccess=u=>{const c=u.target.result;c?e(c.primaryKey,c.value).next(p=>{p?c.continue():r()}):r()}})}Kt(e,t){const r=[];return new pe((s,u)=>{e.onerror=c=>{u(c.target.error)},e.onsuccess=c=>{const p=c.target.result;if(!p)return void s();const _=new RT(p),b=t(p.primaryKey,p.value,_);if(b instanceof pe){const A=b.catch(x=>(_.done(),pe.reject(x)));r.push(A)}_.isDone?s():null===_.Lt?p.continue():p.continue(_.Lt)}}).next(()=>pe.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.jt?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function ql(n){return new pe((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const s=Nf(r.target.error);t(s)}})}let Fw=!1;function Nf(n){const e=Js.Vt((0,Jt.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new ke("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Fw||(Fw=!0,setTimeout(()=>{throw r},0)),r}}return n}class Xg extends kw{constructor(e,t){super(),this.Ht=e,this.currentSequenceNumber=t}}function Fr(n,e){const t=nt(n);return Js.xt(t.Ht,e)}class Rf{constructor(e,t,r,s){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let s=0;s<this.mutations.length;s++){const u=this.mutations[s];u.key.isEqual(e.key)&&lw(u,e,r[s])}}applyToLocalView(e){for(const t of this.baseMutations)t.key.isEqual(e.key)&&qg(t,e,this.localWriteTime);for(const t of this.mutations)t.key.isEqual(e.key)&&qg(t,e,this.localWriteTime)}applyToLocalDocumentSet(e){this.mutations.forEach(t=>{const r=e.get(t.key),s=r;this.applyToLocalView(s),r.isValidDocument()||s.convertToNoDocument(Tt.min())})}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),bn())}isEqual(e){return this.batchId===e.batchId&&Cd(this.mutations,e.mutations,(t,r)=>w_(t,r))&&Cd(this.baseMutations,e.baseMutations,(t,r)=>w_(t,r))}}class P_{constructor(e,t,r,s){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=s}static from(e,t,r){xt(e.mutations.length===r.length);let s=Yg;const u=e.mutations;for(let c=0;c<u.length;c++)s=s.insert(u[c].key,r[c].version);return new P_(e,t,r,s)}}class k_{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class aa{constructor(e,t,r,s,u=Tt.min(),c=Tt.min(),p=Ir.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=p}withSequenceNumber(e){return new aa(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new aa(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new aa(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class Lw{constructor(e){this.Jt=e}}function Uw(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:Of(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:qa(s=n.Jt,(u=e).key),fields:u.data.value.mapValue.fields,updateTime:zu(s,u.version.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:Kl(e.version)};else{if(!e.isUnknownDocument())return ot();r.unknownDocument={path:t.path.toArray(),version:Kl(e.version)}}var s,u;return r}function Of(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Kl(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function qu(n){const e=new gr(n.seconds,n.nanoseconds);return Tt.fromTimestamp(e)}function Pf(n,e){const t=(e.baseMutations||[]).map(u=>Ew(n.Jt,u));for(let u=0;u<e.mutations.length-1;++u){const c=e.mutations[u];u+1<e.mutations.length&&void 0!==e.mutations[u+1].transform&&(c.updateTransforms=e.mutations[u+1].transform.fieldTransforms,e.mutations.splice(u+1,1),++u)}const r=e.mutations.map(u=>Ew(n.Jt,u)),s=gr.fromMillis(e.localWriteTimeMs);return new Rf(e.batchId,s,t,r)}function kf(n){const e=qu(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?qu(n.lastLimboFreeSnapshotVersion):Tt.min();let r;var s;return void 0!==n.query.documents?(xt(1===(s=n.query).documents.length),r=gs(Od(yw(s.documents[0])))):r=gs(N_(n.query)),new aa(r,n.targetId,0,n.lastListenSequenceNumber,e,t,Ir.fromBase64String(n.resumeToken))}function Ff(n,e){const t=Kl(e.snapshotVersion),r=Kl(e.lastLimboFreeSnapshotVersion);let s;s=ps(e.target)?gT(n.Jt,e.target):mT(n.Jt,e.target);const u=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Nd(e.target),readTime:t,resumeToken:u,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:s}}function F_(n){const e=N_({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?__(e,e.limit,"L"):e}function Ku(n,e){return new k_(e.largestBatchId,Ew(n.Jt,e.overlayMutation))}function Hd(n,e){const t=e.path.lastSegment();return[n,_i(e.path.popLast()),t]}class PT{getBundleMetadata(e,t){return kT(e).get(t).next(r=>{if(r)return{id:(s=r).bundleId,createTime:qu(s.createTime),version:s.version};var s})}saveBundleMetadata(e,t){return kT(e).put({bundleId:(r=t).id,createTime:Kl(kr(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return L_(e).get(t).next(r=>{if(r)return{name:(s=r).name,query:F_(s.bundledQuery),readTime:qu(s.readTime)};var s})}saveNamedQuery(e,t){return L_(e).put({name:(r=t).name,readTime:Kl(kr(r.readTime)),bundledQuery:r.bundledQuery});var r}}function kT(n){return Fr(n,"bundles")}function L_(n){return Fr(n,"namedQueries")}class V_{constructor(e,t){this.M=e,this.userId=t}static Yt(e,t){return new V_(e,t.uid||"")}getOverlay(e,t){return Lf(e).get(Hd(this.userId,t)).next(r=>r?Ku(this.M,r):null)}saveOverlays(e,t,r){const s=[];return r.forEach((u,c)=>{const p=new k_(t,c);s.push(this.Xt(e,p))}),pe.waitFor(s)}removeOverlaysForBatchId(e,t,r){const s=new Set;t.forEach(c=>s.add(_i(c.getCollectionPath())));const u=[];return s.forEach(c=>{const p=IDBKeyRange.bound([this.userId,c,r],[this.userId,c,r+1],!1,!0);u.push(Lf(e).Qt("collectionPathOverlayIndex",p))}),pe.waitFor(u)}getOverlaysForCollection(e,t,r){const s=Gu(),u=_i(t),c=IDBKeyRange.bound([this.userId,u,r],[this.userId,u,Number.POSITIVE_INFINITY],!0);return Lf(e).qt("collectionPathOverlayIndex",c).next(p=>{for(const _ of p){const b=Ku(this.M,_);s.set(b.getKey(),b)}return s})}getOverlaysForCollectionGroup(e,t,r,s){const u=Gu();let c;const p=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Lf(e).Wt({index:"collectionGroupOverlayIndex",range:p},(_,b,A)=>{const x=Ku(this.M,b);u.size()<s||x.largestBatchId===c?(u.set(x.getKey(),x),c=x.largestBatchId):A.done()}).next(()=>u)}Xt(e,t){return Lf(e).put(function(r,s,u){const[c,p,_]=Hd(s,u.mutation.key);return{userId:s,collectionPath:p,documentId:_,collectionGroup:u.mutation.key.getCollectionGroup(),largestBatchId:u.largestBatchId,overlayMutation:Af(r.Jt,u.mutation)}}(this.M,this.userId,t))}}function Lf(n){return Fr(n,"documentOverlays")}class Zl{constructor(){}Zt(e,t){this.te(e,t),t.ee()}te(e,t){if("nullValue"in e)this.ne(t,5);else if("booleanValue"in e)this.ne(t,10),t.se(e.booleanValue?1:0);else if("integerValue"in e)this.ne(t,15),t.se(tr(e.integerValue));else if("doubleValue"in e){const r=tr(e.doubleValue);isNaN(r)?this.ne(t,13):(this.ne(t,15),Sd(r)?t.se(0):t.se(r))}else if("timestampValue"in e){const r=e.timestampValue;this.ne(t,20),"string"==typeof r?t.ie(r):(t.ie(`${r.seconds||""}`),t.se(r.nanos||0))}else if("stringValue"in e)this.re(e.stringValue,t),this.oe(t);else if("bytesValue"in e)this.ne(t,30),t.ue(ra(e.bytesValue)),this.oe(t);else if("referenceValue"in e)this.ae(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.ne(t,45),t.se(r.latitude||0),t.se(r.longitude||0)}else"mapValue"in e?c_(e)?this.ne(t,Number.MAX_SAFE_INTEGER):(this.ce(e.mapValue,t),this.oe(t)):"arrayValue"in e?(this.he(e.arrayValue,t),this.oe(t)):ot()}re(e,t){this.ne(t,25),this.le(e,t)}le(e,t){t.ie(e)}ce(e,t){const r=e.fields||{};this.ne(t,55);for(const s of Object.keys(r))this.re(s,t),this.te(r[s],t)}he(e,t){const r=e.values||[];this.ne(t,50);for(const s of r)this.te(s,t)}ae(e,t){this.ne(t,37),Je.fromName(e).path.forEach(r=>{this.ne(t,60),this.le(r,t)})}ne(e,t){e.se(t)}oe(e){e.se(2)}}function FT(n){if(0===n)return 8;let e=0;return n>>4==0&&(e+=4,n<<=4),n>>6==0&&(e+=2,n<<=2),n>>7==0&&(e+=1),e}function U_(n){const e=64-function(t){let r=0;for(let s=0;s<8;++s){const u=FT(255&t[s]);if(r+=u,8!==u)break}return r}(n);return Math.ceil(e/8)}Zl.fe=new Zl;class Bw{constructor(){this.buffer=new Uint8Array(1024),this.position=0}de(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this._e(r.value),r=t.next();this.we()}me(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.ge(r.value),r=t.next();this.ye()}pe(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this._e(r);else if(r<2048)this._e(960|r>>>6),this._e(128|63&r);else if(t<"\ud800"||"\udbff"<t)this._e(480|r>>>12),this._e(128|63&r>>>6),this._e(128|63&r);else{const s=t.codePointAt(0);this._e(240|s>>>18),this._e(128|63&s>>>12),this._e(128|63&s>>>6),this._e(128|63&s)}}this.we()}Ie(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.ge(r);else if(r<2048)this.ge(960|r>>>6),this.ge(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.ge(480|r>>>12),this.ge(128|63&r>>>6),this.ge(128|63&r);else{const s=t.codePointAt(0);this.ge(240|s>>>18),this.ge(128|63&s>>>12),this.ge(128|63&s>>>6),this.ge(128|63&s)}}this.ye()}Te(e){const t=this.Ee(e),r=U_(t);this.Ae(1+r),this.buffer[this.position++]=255&r;for(let s=t.length-r;s<t.length;++s)this.buffer[this.position++]=255&t[s]}Re(e){const t=this.Ee(e),r=U_(t);this.Ae(1+r),this.buffer[this.position++]=~(255&r);for(let s=t.length-r;s<t.length;++s)this.buffer[this.position++]=~(255&t[s])}be(){this.Pe(255),this.Pe(255)}Ve(){this.ve(255),this.ve(255)}reset(){this.position=0}seed(e){this.Ae(e.length),this.buffer.set(e,this.position),this.position+=e.length}Se(){return this.buffer.slice(0,this.position)}Ee(e){const t=function(s){const u=new DataView(new ArrayBuffer(8));return u.setFloat64(0,s,!1),new Uint8Array(u.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let s=1;s<t.length;++s)t[s]^=r?255:0;return t}_e(e){const t=255&e;0===t?(this.Pe(0),this.Pe(255)):255===t?(this.Pe(255),this.Pe(0)):this.Pe(t)}ge(e){const t=255&e;0===t?(this.ve(0),this.ve(255)):255===t?(this.ve(255),this.ve(0)):this.ve(e)}we(){this.Pe(0),this.Pe(1)}ye(){this.ve(0),this.ve(1)}Pe(e){this.Ae(1),this.buffer[this.position++]=e}ve(e){this.Ae(1),this.buffer[this.position++]=~e}Ae(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const s=new Uint8Array(r);s.set(this.buffer),this.buffer=s}}class B_{constructor(e){this.De=e}ue(e){this.De.de(e)}ie(e){this.De.pe(e)}se(e){this.De.Te(e)}ee(){this.De.be()}}class em{constructor(e){this.De=e}ue(e){this.De.me(e)}ie(e){this.De.Ie(e)}se(e){this.De.Re(e)}ee(){this.De.Ve()}}class Ka{constructor(){this.De=new Bw,this.Ce=new B_(this.De),this.xe=new em(this.De)}seed(e){this.De.seed(e)}Ne(e){return 0===e?this.Ce:this.xe}Se(){return this.De.Se()}reset(){this.De.reset()}}class Yl{constructor(e,t,r,s){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=s}ke(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new Yl(this.indexId,this.documentKey,this.arrayValue,r)}}function Zu(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=j_(n.arrayValue,e.arrayValue),0!==t?t:(t=j_(n.directionalValue,e.directionalValue),0!==t?t:Je.comparator(n.documentKey,e.documentKey)))}function j_(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class LT{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Me=e.orderBy,this.Oe=[];for(const t of e.filters){const r=t;r.S()?this.Fe=r:this.Oe.push(r)}}$e(e){const t=jg(e);if(void 0!==t&&!this.Be(t))return!1;const r=Ul(e);let s=0,u=0;for(;s<r.length&&this.Be(r[s]);++s);if(s===r.length)return!0;if(void 0!==this.Fe){const c=r[s];if(!this.Le(this.Fe,c)||!this.Ue(this.Me[u++],c))return!1;++s}for(;s<r.length;++s){const c=r[s];if(u>=this.Me.length||!this.Ue(this.Me[u++],c))return!1}return!0}Be(e){for(const t of this.Oe)if(this.Le(t,e))return!0;return!1}Le(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}Ue(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}class VT{constructor(){this.qe=new Vf}addToCollectionParentIndex(e,t){return this.qe.add(t),pe.resolve()}getCollectionParents(e,t){return pe.resolve(this.qe.getEntries(t))}addFieldIndex(e,t){return pe.resolve()}deleteFieldIndex(e,t){return pe.resolve()}getDocumentsMatchingTarget(e,t){return pe.resolve(null)}getIndexType(e,t){return pe.resolve(0)}getFieldIndexes(e,t){return pe.resolve([])}getNextCollectionGroupToUpdate(e){return pe.resolve(null)}getMinOffset(e,t){return pe.resolve(Zs.min())}updateCollectionGroup(e,t,r){return pe.resolve()}updateIndexEntries(e,t){return pe.resolve()}}class Vf{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),s=this.index[t]||new Nn(un.comparator),u=!s.has(r);return this.index[t]=s.add(r),u}has(e){const t=e.lastSegment(),r=e.popLast(),s=this.index[t];return s&&s.has(r)}getEntries(e){return(this.index[e]||new Nn(un.comparator)).toArray()}}const tm=new Uint8Array(0);class _S{constructor(e,t){this.user=e,this.databaseId=t,this.Ke=new Vf,this.Ge=new Hu(r=>Nd(r),(r,s)=>jl(r,s)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Ke.has(t)){const r=t.lastSegment(),s=t.popLast();e.addOnCommittedListener(()=>{this.Ke.add(t)});const u={collectionId:r,parent:_i(s)};return jw(e).put(u)}return pe.resolve()}getCollectionParents(e,t){const r=[],s=IDBKeyRange.bound([t,""],[U0(t),""],!1,!0);return jw(e).qt(s).next(u=>{for(const c of u){if(c.collectionId!==t)break;r.push(Ni(c.parent))}return r})}addFieldIndex(e,t){const r=Za(e),s={indexId:(u=t).indexId,collectionGroup:u.collectionGroup,fields:u.fields.map(c=>[c.fieldPath.canonicalString(),c.kind])};var u;return delete s.indexId,r.add(s).next()}deleteFieldIndex(e,t){const r=Za(e),s=Bf(e),u=Uf(e);return r.delete(t.indexId).next(()=>s.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>u.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=Uf(e);let s=!0;const u=new Map;return pe.forEach(this.Qe(t),c=>this.je(e,c).next(p=>{s&&(s=!!p),u.set(c,p)})).next(()=>{if(s){let c=bn();const p=[];return pe.forEach(u,(_,b)=>{var A;Be("IndexedDbIndexManager",`Using index ${A=_,`id=${A.indexId}|cg=${A.collectionGroup}|f=${A.fields.map(Ct=>`${Ct.fieldPath}:${Ct.kind}`).join(",")}`} to execute ${Nd(t)}`);const x=function(Ct,ft){const Bt=jg(ft);if(void 0===Bt)return null;for(const Qt of $g(Ct,Bt.fieldPath))switch(Qt.op){case"array-contains-any":return Qt.value.arrayValue.values||[];case"array-contains":return[Qt.value]}return null}(b,_),V=function(Ct,ft){const Bt=new Map;for(const Qt of Ul(ft))for(const vn of $g(Ct,Qt.fieldPath))switch(vn.op){case"==":case"in":Bt.set(Qt.fieldPath.canonicalString(),vn.value);break;case"not-in":case"!=":return Bt.set(Qt.fieldPath.canonicalString(),vn.value),Array.from(Bt.values())}return null}(b,_),q=function(Ct,ft){const Bt=[];let Qt=!0;for(const vn of Ul(ft)){const Ds=0===vn.kind?g_(Ct,vn.fieldPath,Ct.startAt):bo(Ct,vn.fieldPath,Ct.startAt);Bt.push(Ds.value),Qt&&(Qt=Ds.inclusive)}return new Ys(Bt,Qt)}(b,_),Y=function(Ct,ft){const Bt=[];let Qt=!0;for(const vn of Ul(ft)){const Ds=0===vn.kind?bo(Ct,vn.fieldPath,Ct.endAt):g_(Ct,vn.fieldPath,Ct.endAt);Bt.push(Ds.value),Qt&&(Qt=Ds.inclusive)}return new Ys(Bt,Qt)}(b,_),ve=this.We(_,b,q),Ue=this.We(_,b,Y),_t=this.ze(_,b,V),wt=this.He(_.indexId,x,ve,q.inclusive,Ue,Y.inclusive,_t);return pe.forEach(wt,Ct=>r.Gt(Ct,t.limit).next(ft=>{ft.forEach(Bt=>{const Qt=Je.fromSegments(Bt.documentKey);c.has(Qt)||(c=c.add(Qt),p.push(Qt))})}))}).next(()=>p)}return pe.resolve(null)})}Qe(e){let t=this.Ge.get(e);return t||(t=[e],this.Ge.set(e,t),t)}He(e,t,r,s,u,c,p){const _=(null!=t?t.length:1)*Math.max(r.length,u.length),b=_/(null!=t?t.length:1),A=[];for(let x=0;x<_;++x){const V=t?this.Je(t[x/b]):tm,q=this.Ye(e,V,r[x%b],s),Y=this.Xe(e,V,u[x%b],c),ve=p.map(Ue=>this.Ye(e,V,Ue,!0));A.push(...this.createRange(q,Y,ve))}return A}Ye(e,t,r,s){const u=new Yl(e,Je.empty(),t,r);return s?u:u.ke()}Xe(e,t,r,s){const u=new Yl(e,Je.empty(),t,r);return s?u.ke():u}je(e,t){const r=new LT(t),s=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,s).next(u=>{let c=null;for(const p of u)r.$e(p)&&(!c||p.fields.length>c.fields.length)&&(c=p);return c})}getIndexType(e,t){let r=2;return pe.forEach(this.Qe(t),s=>this.je(e,s).next(u=>{u?0!==r&&u.fields.length<function(c){let p=new Nn(Pr.comparator),_=!1;for(const b of c.filters){const A=b;A.field.isKeyField()||("array-contains"===A.op||"array-contains-any"===A.op?_=!0:p=p.add(A.field))}for(const b of c.orderBy)b.field.isKeyField()||(p=p.add(b.field));return p.size+(_?1:0)}(s)&&(r=1):r=0})).next(()=>r)}Ze(e,t){const r=new Ka;for(const s of Ul(e)){const u=t.data.field(s.fieldPath);if(null==u)return null;const c=r.Ne(s.kind);Zl.fe.Zt(u,c)}return r.Se()}Je(e){const t=new Ka;return Zl.fe.Zt(e,t.Ne(0)),t.Se()}tn(e,t){const r=new Ka;return Zl.fe.Zt(Vl(this.databaseId,t),r.Ne(function(s){const u=Ul(s);return 0===u.length?0:u[u.length-1].kind}(e))),r.Se()}ze(e,t,r){if(null===r)return[];let s=[];s.push(new Ka);let u=0;for(const c of Ul(e)){const p=r[u++];for(const _ of s)if(this.en(t,c.fieldPath)&&mf(p))s=this.nn(s,c,p);else{const b=_.Ne(c.kind);Zl.fe.Zt(p,b)}}return this.sn(s)}We(e,t,r){return this.ze(e,t,r.position)}sn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].Se();return t}nn(e,t,r){const s=[...e],u=[];for(const c of r.arrayValue.values||[])for(const p of s){const _=new Ka;_.seed(p.Se()),Zl.fe.Zt(c,_.Ne(t.kind)),u.push(_)}return u}en(e,t){return!!e.filters.find(r=>r instanceof An&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=Za(e),s=Bf(e);return(t?r.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.qt()).next(u=>{const c=[];return pe.forEach(u,p=>s.get([p.indexId,this.uid]).next(_=>{c.push(function(b,A){const x=A?new xd(A.sequenceNumber,new Zs(qu(A.readTime),new Je(Ni(A.documentKey)),A.largestBatchId)):xd.empty(),V=b.fields.map(([q,Y])=>new nr(Pr.fromServerFormat(q),Y));return new Bg(b.indexId,b.collectionGroup,V,x)}(p,_))})).next(()=>c)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,s)=>{const u=r.indexState.sequenceNumber-s.indexState.sequenceNumber;return 0!==u?u:Gt(r.collectionGroup,s.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const s=Za(e),u=Bf(e);return this.rn(e).next(c=>s.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(p=>pe.forEach(p,_=>{return u.put({indexId:_.indexId,uid:this.user.uid||"",sequenceNumber:c,readTime:Kl((V=r).readTime),documentKey:_i(V.documentKey.path),largestBatchId:V.largestBatchId});var V})))}updateIndexEntries(e,t){const r=new Map;return pe.forEach(t,(s,u)=>{const c=r.get(s.collectionGroup);return(c?pe.resolve(c):this.getFieldIndexes(e,s.collectionGroup)).next(p=>(r.set(s.collectionGroup,p),pe.forEach(p,_=>this.on(e,s,_).next(b=>{const A=this.un(u,_);return b.isEqual(A)?pe.resolve():this.an(e,u,_,b,A)}))))})}cn(e,t,r,s){return Uf(e).put({indexId:s.indexId,uid:this.uid,arrayValue:s.arrayValue,directionalValue:s.directionalValue,orderedDocumentKey:this.tn(r,t.key),documentKey:t.key.path.toArray()})}hn(e,t,r,s){return Uf(e).delete([s.indexId,this.uid,s.arrayValue,s.directionalValue,this.tn(r,t.key),t.key.path.toArray()])}on(e,t,r){const s=Uf(e);let u=new Nn(Zu);return s.Wt({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.tn(r,t)])},(c,p)=>{u=u.add(new Yl(r.indexId,t,p.arrayValue,p.directionalValue))}).next(()=>u)}un(e,t){let r=new Nn(Zu);const s=this.Ze(t,e);if(null==s)return r;const u=jg(t);if(null!=u){const c=e.data.field(u.fieldPath);if(mf(c))for(const p of c.arrayValue.values||[])r=r.add(new Yl(t.indexId,e.key,this.Je(p),s))}else r=r.add(new Yl(t.indexId,e.key,tm,s));return r}an(e,t,r,s,u){Be("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const c=[];return function(p,_,b,A,x){const V=p.getIterator(),q=_.getIterator();let Y=Bl(V),ve=Bl(q);for(;Y||ve;){let Ue=!1,_t=!1;if(Y&&ve){const wt=b(Y,ve);wt<0?_t=!0:wt>0&&(Ue=!0)}else null!=Y?_t=!0:Ue=!0;Ue?(A(ve),ve=Bl(q)):_t?(x(Y),Y=Bl(V)):(Y=Bl(V),ve=Bl(q))}}(s,u,Zu,p=>{c.push(this.cn(e,t,r,p))},p=>{c.push(this.hn(e,t,r,p))}),pe.waitFor(c)}rn(e){let t=1;return Bf(e).Wt({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,s,u)=>{u.done(),t=s.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((c,p)=>Zu(c,p)).filter((c,p,_)=>!p||0!==Zu(c,_[p-1]));const s=[];s.push(e);for(const c of r){const p=Zu(c,e),_=Zu(c,t);if(0===p)s[0]=e.ke();else if(p>0&&_<0)s.push(c),s.push(c.ke());else if(_>0)break}s.push(t);const u=[];for(let c=0;c<s.length;c+=2)u.push(IDBKeyRange.bound([s[c].indexId,this.uid,s[c].arrayValue,s[c].directionalValue,tm,[]],[s[c+1].indexId,this.uid,s[c+1].arrayValue,s[c+1].directionalValue,tm,[]]));return u}getMinOffset(e,t){let r;return pe.forEach(this.Qe(t),s=>this.je(e,s).next(u=>{u?(!r||G0(u.indexState.offset,r)<0)&&(r=u.indexState.offset):r=Zs.min()})).next(()=>r)}}function jw(n){return Fr(n,"collectionParents")}function Uf(n){return Fr(n,"indexEntries")}function Za(n){return Fr(n,"indexConfiguration")}function Bf(n){return Fr(n,"indexState")}const Ql={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class ys{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new ys(e,ys.DEFAULT_COLLECTION_PERCENTILE,ys.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function $_(n,e,t){const r=n.store("mutations"),s=n.store("documentMutations"),u=[],c=IDBKeyRange.only(t.batchId);let p=0;const _=r.Wt({range:c},(A,x,V)=>(p++,V.delete()));u.push(_.next(()=>{xt(1===p)}));const b=[];for(const A of t.mutations){const x=Cw(e,A.key.path,t.batchId);u.push(s.delete(x)),b.push(A.key)}return pe.waitFor(u).next(()=>b)}function nm(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw ot();e=n.noDocument}return JSON.stringify(e).length}ys.DEFAULT_COLLECTION_PERCENTILE=10,ys.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ys.DEFAULT=new ys(41943040,ys.DEFAULT_COLLECTION_PERCENTILE,ys.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ys.DISABLED=new ys(-1,0,0);class $w{constructor(e,t,r,s){this.userId=e,this.M=t,this.indexManager=r,this.referenceDelegate=s,this.ln={}}static Yt(e,t,r,s){xt(""!==e.uid);const u=e.isAuthenticated()?e.uid:"";return new $w(u,t,r,s)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Jl(e).Wt({index:"userMutationsIndex",range:r},(s,u,c)=>{t=!1,c.done()}).next(()=>t)}addMutationBatch(e,t,r,s){const u=Xl(e),c=Jl(e);return c.add({}).next(p=>{xt("number"==typeof p);const _=new Rf(p,t,r,s),b=function(V,q,Y){const ve=Y.baseMutations.map(_t=>Af(V.Jt,_t)),Ue=Y.mutations.map(_t=>Af(V.Jt,_t));return{userId:q,batchId:Y.batchId,localWriteTimeMs:Y.localWriteTime.toMillis(),baseMutations:ve,mutations:Ue}}(this.M,this.userId,_),A=[];let x=new Nn((V,q)=>Gt(V.canonicalString(),q.canonicalString()));for(const V of s){const q=Cw(this.userId,V.key.path,p);x=x.add(V.key.path.popLast()),A.push(c.put(b)),A.push(u.put(q,Aw))}return x.forEach(V=>{A.push(this.indexManager.addToCollectionParentIndex(e,V))}),e.addOnCommittedListener(()=>{this.ln[p]=_.keys()}),pe.waitFor(A).next(()=>_)})}lookupMutationBatch(e,t){return Jl(e).get(t).next(r=>r?(xt(r.userId===this.userId),Pf(this.M,r)):null)}fn(e,t){return this.ln[t]?pe.resolve(this.ln[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const s=r.keys();return this.ln[t]=s,s}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,s=IDBKeyRange.lowerBound([this.userId,r]);let u=null;return Jl(e).Wt({index:"userMutationsIndex",range:s},(c,p,_)=>{p.userId===this.userId&&(xt(p.batchId>=r),u=Pf(this.M,p)),_.done()}).next(()=>u)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return Jl(e).Wt({index:"userMutationsIndex",range:t,reverse:!0},(s,u,c)=>{r=u.batchId,c.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Jl(e).qt("userMutationsIndex",t).next(r=>r.map(s=>Pf(this.M,s)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=Sf(this.userId,t.path),s=IDBKeyRange.lowerBound(r),u=[];return Xl(e).Wt({range:s},(c,p,_)=>{const[b,A,x]=c,V=Ni(A);if(b===this.userId&&t.path.isEqual(V))return Jl(e).get(x).next(q=>{if(!q)throw ot();xt(q.userId===this.userId),u.push(Pf(this.M,q))});_.done()}).next(()=>u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Nn(Gt);const s=[];return t.forEach(u=>{const c=Sf(this.userId,u.path),p=IDBKeyRange.lowerBound(c),_=Xl(e).Wt({range:p},(b,A,x)=>{const[V,q,Y]=b,ve=Ni(q);V===this.userId&&u.path.isEqual(ve)?r=r.add(Y):x.done()});s.push(_)}),pe.waitFor(s).next(()=>this.dn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,s=r.length+1,u=Sf(this.userId,r),c=IDBKeyRange.lowerBound(u);let p=new Nn(Gt);return Xl(e).Wt({range:c},(_,b,A)=>{const[x,V,q]=_,Y=Ni(V);x===this.userId&&r.isPrefixOf(Y)?Y.length===s&&(p=p.add(q)):A.done()}).next(()=>this.dn(e,p))}dn(e,t){const r=[],s=[];return t.forEach(u=>{s.push(Jl(e).get(u).next(c=>{if(null===c)throw ot();xt(c.userId===this.userId),r.push(Pf(this.M,c))}))}),pe.waitFor(s).next(()=>r)}removeMutationBatch(e,t){return $_(e.Ht,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this._n(t.batchId)}),pe.forEach(r,s=>this.referenceDelegate.markPotentiallyOrphaned(e,s))))}_n(e){delete this.ln[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return pe.resolve();const r=IDBKeyRange.lowerBound([this.userId]),s=[];return Xl(e).Wt({range:r},(u,c,p)=>{if(u[0]===this.userId){const _=Ni(u[1]);s.push(_)}else p.done()}).next(()=>{xt(0===s.length)})})}containsKey(e,t){return H_(e,this.userId,t)}wn(e){return rm(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function H_(n,e,t){const r=Sf(e,t.path),s=r[1],u=IDBKeyRange.lowerBound(r);let c=!1;return Xl(n).Wt({range:u,jt:!0},(p,_,b)=>{const[A,x,V]=p;A===e&&x===s&&(c=!0),b.done()}).next(()=>c)}function Jl(n){return Fr(n,"mutations")}function Xl(n){return Fr(n,"documentMutations")}function rm(n){return Fr(n,"mutationQueues")}class ec{constructor(e){this.mn=e}next(){return this.mn+=2,this.mn}static gn(){return new ec(0)}static yn(){return new ec(-1)}}class Hw{constructor(e,t){this.referenceDelegate=e,this.M=t}allocateTargetId(e){return this.pn(e).next(t=>{const r=new ec(t.highestTargetId);return t.highestTargetId=r.next(),this.In(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.pn(e).next(t=>Tt.fromTimestamp(new gr(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.pn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.pn(e).next(s=>(s.highestListenSequenceNumber=t,r&&(s.lastRemoteSnapshotVersion=r.toTimestamp()),t>s.highestListenSequenceNumber&&(s.highestListenSequenceNumber=t),this.In(e,s)))}addTargetData(e,t){return this.Tn(e,t).next(()=>this.pn(e).next(r=>(r.targetCount+=1,this.En(t,r),this.In(e,r))))}updateTargetData(e,t){return this.Tn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Gd(e).delete(t.targetId)).next(()=>this.pn(e)).next(r=>(xt(r.targetCount>0),r.targetCount-=1,this.In(e,r)))}removeTargets(e,t,r){let s=0;const u=[];return Gd(e).Wt((c,p)=>{const _=kf(p);_.sequenceNumber<=t&&null===r.get(_.targetId)&&(s++,u.push(this.removeTargetData(e,_)))}).next(()=>pe.waitFor(u)).next(()=>s)}forEachTarget(e,t){return Gd(e).Wt((r,s)=>{const u=kf(s);t(u)})}pn(e){return Gw(e).get("targetGlobalKey").next(t=>(xt(null!==t),t))}In(e,t){return Gw(e).put("targetGlobalKey",t)}Tn(e,t){return Gd(e).put(Ff(this.M,t))}En(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.pn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=Nd(t),s=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let u=null;return Gd(e).Wt({range:s,index:"queryTargetsIndex"},(c,p,_)=>{const b=kf(p);jl(t,b.target)&&(u=b,_.done())}).next(()=>u)}addMatchingKeys(e,t,r){const s=[],u=Yu(e);return t.forEach(c=>{const p=_i(c.path);s.push(u.put({targetId:r,path:p})),s.push(this.referenceDelegate.addReference(e,r,c))}),pe.waitFor(s)}removeMatchingKeys(e,t,r){const s=Yu(e);return pe.forEach(t,u=>{const c=_i(u.path);return pe.waitFor([s.delete([r,c]),this.referenceDelegate.removeReference(e,r,u)])})}removeMatchingKeysForTargetId(e,t){const r=Yu(e),s=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(s)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),s=Yu(e);let u=bn();return s.Wt({range:r,jt:!0},(c,p,_)=>{const b=Ni(c[1]),A=new Je(b);u=u.add(A)}).next(()=>u)}containsKey(e,t){const r=_i(t.path),s=IDBKeyRange.bound([r],[U0(r)],!1,!0);let u=0;return Yu(e).Wt({index:"documentTargetsIndex",jt:!0,range:s},([c,p],_,b)=>{0!==c&&(u++,b.done())}).next(()=>u>0)}Et(e,t){return Gd(e).get(t).next(r=>r?kf(r):null)}}function Gd(n){return Fr(n,"targets")}function Gw(n){return Fr(n,"targetGlobal")}function Yu(n){return Fr(n,"targetDocuments")}function tc(n){return G_.apply(this,arguments)}function G_(){return G_=(0,Ce.Z)(function*(n){if(n.code!==fe.FAILED_PRECONDITION||n.message!==Pw)throw n;Be("LocalStore","Unexpectedly lost primary lease")}),G_.apply(this,arguments)}function zw([n,e],[t,r]){const s=Gt(n,t);return 0===s?Gt(e,r):s}class UT{constructor(e){this.An=e,this.buffer=new Nn(zw),this.Rn=0}bn(){return++this.Rn}Pn(e){const t=[e,this.bn()];if(this.buffer.size<this.An)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();zw(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class BT{constructor(e,t){this.garbageCollector=e,this.asyncQueue=t,this.Vn=!1,this.vn=null}start(e){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Sn(e)}stop(){this.vn&&(this.vn.cancel(),this.vn=null)}get started(){return null!==this.vn}Sn(e){var t=this;const r=this.Vn?3e5:6e4;Be("LruGarbageCollector",`Garbage collection scheduled in ${r}ms`),this.vn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",r,(0,Ce.Z)(function*(){t.vn=null,t.Vn=!0;try{yield e.collectGarbage(t.garbageCollector)}catch(s){Wu(s)?Be("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",s):yield tc(s)}yield t.Sn(e)}))}}class jf{constructor(e,t){this.Dn=e,this.params=t}calculateTargetCount(e,t){return this.Dn.Cn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return pe.resolve(fs.A);const r=new UT(t);return this.Dn.forEachTarget(e,s=>r.Pn(s.sequenceNumber)).next(()=>this.Dn.xn(e,s=>r.Pn(s))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Dn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Dn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Be("LruGarbageCollector","Garbage collection skipped; disabled"),pe.resolve(Ql)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Be("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Ql):this.Nn(e,t))}getCacheSize(e){return this.Dn.getCacheSize(e)}Nn(e,t){let r,s,u,c,p,_,b;const A=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(x=>(x>this.params.maximumSequenceNumbersToCollect?(Be("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${x}`),s=this.params.maximumSequenceNumbersToCollect):s=x,c=Date.now(),this.nthSequenceNumber(e,s))).next(x=>(r=x,p=Date.now(),this.removeTargets(e,r,t))).next(x=>(u=x,_=Date.now(),this.removeOrphanedDocuments(e,r))).next(x=>(b=Date.now(),Xy()<=Fa.in.DEBUG&&Be("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${c-A}ms\n\tDetermined least recently used ${s} in `+(p-c)+`ms\n\tRemoved ${u} targets in `+(_-p)+`ms\n\tRemoved ${x} documents in `+(b-_)+`ms\nTotal Duration: ${b-A}ms`),pe.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:u,documentsRemoved:x})))}}class Ww{constructor(e,t){this.db=e,this.garbageCollector=new jf(this,t)}Cn(e){const t=this.kn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(s=>r+s))}kn(e){let t=0;return this.xn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}xn(e,t){return this.Mn(e,(r,s)=>t(s))}addReference(e,t,r){return $f(e,r)}removeReference(e,t,r){return $f(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return $f(e,t)}On(e,t){return function(r,s){let u=!1;return rm(r).zt(c=>H_(r,c,s).next(p=>(p&&(u=!0),pe.resolve(!p)))).next(()=>u)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),s=[];let u=0;return this.Mn(e,(c,p)=>{if(p<=t){const _=this.On(e,c).next(b=>{if(!b)return u++,r.getEntry(e,c).next(()=>(r.removeEntry(c,Tt.min()),Yu(e).delete([0,_i(c.path)])))});s.push(_)}}).next(()=>pe.waitFor(s)).next(()=>r.apply(e)).next(()=>u)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return $f(e,t)}Mn(e,t){const r=Yu(e);let s,u=fs.A;return r.Wt({index:"documentTargetsIndex"},([c,p],{path:_,sequenceNumber:b})=>{0===c?(u!==fs.A&&t(new Je(Ni(s)),u),u=b,s=_):u=fs.A}).next(()=>{u!==fs.A&&t(new Je(Ni(s)),u)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function $f(n,e){return Yu(n).put((r=n.currentSequenceNumber,{targetId:0,path:_i(e.path),sequenceNumber:r}));var r}class z_{constructor(){this.changes=new Hu(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Bn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?pe.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class qw{constructor(e){this.M=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return nc(e).put(r)}removeEntry(e,t,r){return nc(e).delete(function(s,u){const c=s.path.toArray();return[c.slice(0,c.length-2),c[c.length-2],Of(u),c[c.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.Fn(e,r)))}getEntry(e,t){let r=Bn.newInvalidDocument(t);return nc(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(zd(t))},(s,u)=>{r=this.$n(t,u)}).next(()=>r)}Bn(e,t){let r={size:0,document:Bn.newInvalidDocument(t)};return nc(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(zd(t))},(s,u)=>{r={document:this.$n(t,u),size:nm(u)}}).next(()=>r)}getEntries(e,t){let r=Qs();return this.Ln(e,t,(s,u)=>{const c=this.$n(s,u);r=r.insert(s,c)}).next(()=>r)}Un(e,t){let r=Qs(),s=new rr(Je.comparator);return this.Ln(e,t,(u,c)=>{const p=this.$n(u,c);r=r.insert(u,p),s=s.insert(u,nm(c))}).next(()=>({documents:r,qn:s}))}Ln(e,t,r){if(t.isEmpty())return pe.resolve();let s=new Nn(Yw);t.forEach(_=>s=s.add(_));const u=IDBKeyRange.bound(zd(s.first()),zd(s.last())),c=s.getIterator();let p=c.getNext();return nc(e).Wt({index:"documentKeyIndex",range:u},(_,b,A)=>{const x=Je.fromSegments([...b.prefixPath,b.collectionGroup,b.documentId]);for(;p&&Yw(p,x)<0;)r(p,null),p=c.getNext();p&&p.isEqual(x)&&(r(p,b),p=c.hasNext()?c.getNext():null),p?A.Ut(zd(p)):A.done()}).next(()=>{for(;p;)r(p,null),p=c.hasNext()?c.getNext():null})}getAllFromCollection(e,t,r){const s=[t.popLast().toArray(),t.lastSegment(),Of(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],u=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return nc(e).qt(IDBKeyRange.bound(s,u,!0)).next(c=>{let p=Qs();for(const _ of c){const b=this.$n(Je.fromSegments(_.prefixPath.concat(_.collectionGroup,_.documentId)),_);p=p.insert(b.key,b)}return p})}getAllFromCollectionGroup(e,t,r,s){let u=Qs();const c=Zw(t,r),p=Zw(t,Zs.max());return nc(e).Wt({index:"collectionGroupIndex",range:IDBKeyRange.bound(c,p,!0)},(_,b,A)=>{const x=this.$n(Je.fromSegments(b.prefixPath.concat(b.collectionGroup,b.documentId)),b);u=u.insert(x.key,x),u.size===s&&A.done()}).next(()=>u)}newChangeBuffer(e){return new Kw(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return W_(e).get("remoteDocumentGlobalKey").next(t=>(xt(!!t),t))}Fn(e,t){return W_(e).put("remoteDocumentGlobalKey",t)}$n(e,t){if(t){const r=function Vw(n,e){let t;if(e.document)t=_w(n.Jt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=Je.fromSegments(e.noDocument.path),s=qu(e.noDocument.readTime);t=Bn.newNoDocument(r,s),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return ot();{const r=Je.fromSegments(e.unknownDocument.path),s=qu(e.unknownDocument.version);t=Bn.newUnknownDocument(r,s)}}return e.readTime&&t.setReadTime(function(r){const s=new gr(r[0],r[1]);return Tt.fromTimestamp(s)}(e.readTime)),t}(this.M,t);if(!r.isNoDocument()||!r.version.isEqual(Tt.min()))return r}return Bn.newInvalidDocument(e)}}class Kw extends z_{constructor(e,t){super(),this.Kn=e,this.trackRemovals=t,this.Gn=new Hu(r=>r.toString(),(r,s)=>r.isEqual(s))}applyChanges(e){const t=[];let r=0,s=new Nn((u,c)=>Gt(u.canonicalString(),c.canonicalString()));return this.changes.forEach((u,c)=>{const p=this.Gn.get(u);if(t.push(this.Kn.removeEntry(e,u,p.readTime)),c.isValidDocument()){const _=Uw(this.Kn.M,c);s=s.add(u.path.popLast()),r+=nm(_)-p.size,t.push(this.Kn.addEntry(e,u,_))}else if(r-=p.size,this.trackRemovals){const _=Uw(this.Kn.M,c.convertToNoDocument(Tt.min()));t.push(this.Kn.addEntry(e,u,_))}}),s.forEach(u=>{t.push(this.Kn.indexManager.addToCollectionParentIndex(e,u))}),t.push(this.Kn.updateMetadata(e,r)),pe.waitFor(t)}getFromCache(e,t){return this.Kn.Bn(e,t).next(r=>(this.Gn.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.Kn.Un(e,t).next(({documents:r,qn:s})=>(s.forEach((u,c)=>{this.Gn.set(u,{size:c,readTime:r.get(u).readTime})}),r))}}function W_(n){return Fr(n,"remoteDocumentGlobal")}function nc(n){return Fr(n,"remoteDocumentsV14")}function zd(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function Zw(n,e){const t=e.documentKey.path.toArray();return[n,Of(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function Yw(n,e){const t=n.path.toArray(),r=e.path.toArray();let s=0;for(let u=0;u<t.length-2&&u<r.length-2;++u)if(s=Gt(t[u],r[u]),s)return s;return s=Gt(t.length,r.length),s||(s=Gt(t[t.length-2],r[r.length-2]),s||Gt(t[t.length-1],r[r.length-1]))}class jT{constructor(e){this.M=e}kt(e,t,r,s){const u=new Mf("createOrUpgrade",t);var p;r<1&&s>=1&&(e.createObjectStore("owner"),(p=e).createObjectStore("mutationQueues",{keyPath:"userId"}),p.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Tw,{unique:!0}),p.createObjectStore("documentMutations"),Qw(e),function(p){p.createObjectStore("remoteDocuments")}(e));let c=pe.resolve();return r<3&&s>=3&&(0!==r&&(function(p){p.deleteObjectStore("targetDocuments"),p.deleteObjectStore("targets"),p.deleteObjectStore("targetGlobal")}(e),Qw(e)),c=c.next(()=>function(p){const _=p.store("targetGlobal"),b={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Tt.min().toTimestamp(),targetCount:0};return _.put("targetGlobalKey",b)}(u))),r<4&&s>=4&&(0!==r&&(c=c.next(()=>function(p,_){return _.store("mutations").qt().next(b=>{p.deleteObjectStore("mutations"),p.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Tw,{unique:!0});const A=_.store("mutations"),x=b.map(V=>A.put(V));return pe.waitFor(x)})}(e,u))),c=c.next(()=>{!function(p){p.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&s>=5&&(c=c.next(()=>this.Qn(u))),r<6&&s>=6&&(c=c.next(()=>(function(p){p.createObjectStore("remoteDocumentGlobal")}(e),this.jn(u)))),r<7&&s>=7&&(c=c.next(()=>this.Wn(u))),r<8&&s>=8&&(c=c.next(()=>this.zn(e,u))),r<9&&s>=9&&(c=c.next(()=>{!function(p){p.objectStoreNames.contains("remoteDocumentChanges")&&p.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&s>=10&&(c=c.next(()=>this.Hn(u))),r<11&&s>=11&&(c=c.next(()=>{(function(p){p.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(p){p.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&s>=12&&(c=c.next(()=>{!function(p){const _=p.createObjectStore("documentOverlays",{keyPath:ST});_.createIndex("collectionPathOverlayIndex",Nw,{unique:!1}),_.createIndex("collectionGroupOverlayIndex",MT,{unique:!1})}(e)})),r<13&&s>=13&&(c=c.next(()=>function(p){const _=p.createObjectStore("remoteDocumentsV14",{keyPath:bT});_.createIndex("documentKeyIndex",Sw),_.createIndex("collectionGroupIndex",IT)}(e)).next(()=>this.Jn(e,u)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&s>=14&&(c=c.next(()=>{!function(p){p.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),p.createObjectStore("indexState",{keyPath:TT}).createIndex("sequenceNumberIndex",CT,{unique:!1}),p.createObjectStore("indexEntries",{keyPath:AT}).createIndex("documentKeyIndex",O_,{unique:!1})}(e)})),c}jn(e){let t=0;return e.store("remoteDocuments").Wt((r,s)=>{t+=nm(s)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Qn(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.qt().next(s=>pe.forEach(s,u=>{const c=IDBKeyRange.bound([u.userId,-1],[u.userId,u.lastAcknowledgedBatchId]);return r.qt("userMutationsIndex",c).next(p=>pe.forEach(p,_=>{xt(_.userId===u.userId);const b=Pf(this.M,_);return $_(e,u.userId,b).next(()=>{})}))}))}Wn(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(s=>{const u=[];return r.Wt((c,p)=>{const _=new un(c),b=[0,_i(_)];u.push(t.get(b).next(A=>A?pe.resolve():t.put({targetId:0,path:_i(_),sequenceNumber:s.highestListenSequenceNumber})))}).next(()=>pe.waitFor(u))})}zn(e,t){e.createObjectStore("collectionParents",{keyPath:xw});const r=t.store("collectionParents"),s=new Vf,u=c=>{if(s.add(c)){const p=c.lastSegment(),_=c.popLast();return r.put({collectionId:p,parent:_i(_)})}};return t.store("remoteDocuments").Wt({jt:!0},(c,p)=>{const _=new un(c);return u(_.popLast())}).next(()=>t.store("documentMutations").Wt({jt:!0},([c,p,_],b)=>{const A=Ni(p);return u(A.popLast())}))}Hn(e){const t=e.store("targets");return t.Wt((r,s)=>{const u=kf(s),c=Ff(this.M,u);return t.put(c)})}Jn(e,t){const r=t.store("remoteDocuments"),s=[];return r.Wt((u,c)=>{const p=t.store("remoteDocumentsV14"),_=(b=c,b.document?new Je(un.fromString(b.document.name).popFirst(5)):b.noDocument?Je.fromSegments(b.noDocument.path):b.unknownDocument?Je.fromSegments(b.unknownDocument.path):ot()).path.toArray();var b;const A={prefixPath:_.slice(0,_.length-2),collectionGroup:_[_.length-2],documentId:_[_.length-1],readTime:c.readTime||[0,0],unknownDocument:c.unknownDocument,noDocument:c.noDocument,document:c.document,hasCommittedMutations:!!c.hasCommittedMutations};s.push(p.put(A))}).next(()=>pe.waitFor(s))}}function Qw(n){n.createObjectStore("targetDocuments",{keyPath:DT}).createIndex("documentTargetsIndex",Mw,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",R_,{unique:!0}),n.createObjectStore("targetGlobal")}const rc="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class q_{constructor(e,t,r,s,u,c,p,_,b,A,x=13){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Yn=u,this.window=c,this.document=p,this.Xn=b,this.Zn=A,this.ts=x,this.es=null,this.ns=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ss=null,this.inForeground=!1,this.rs=null,this.os=null,this.us=Number.NEGATIVE_INFINITY,this.cs=V=>Promise.resolve(),!q_.vt())throw new ke(fe.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Ww(this,s),this.hs=t+"main",this.M=new Lw(_),this.ls=new Js(this.hs,this.ts,new jT(this.M)),this.fs=new Hw(this.referenceDelegate,this.M),this.ds=new qw(this.M),this._s=new PT,this.window&&this.window.localStorage?this.ws=this.window.localStorage:(this.ws=null,!1===A&&br("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.gs().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new ke(fe.FAILED_PRECONDITION,rc);return this.ys(),this.ps(),this.Is(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.fs.getHighestSequenceNumber(e))}).then(e=>{this.es=new fs(e,this.Xn)}).then(()=>{this.ns=!0}).catch(e=>(this.ls&&this.ls.close(),Promise.reject(e)))}Ts(e){var t=this;return this.cs=function(){var r=(0,Ce.Z)(function*(s){if(t.started)return e(s)});return function(s){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ls.Ot(function(){var t=(0,Ce.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Yn.enqueueAndForget((0,Ce.Z)(function*(){t.started&&(yield t.gs())})))}gs(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>_s(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Es(e).next(t=>{t||(this.isPrimary=!1,this.Yn.enqueueRetryable(()=>this.cs(!1)))})}).next(()=>this.As(e)).next(t=>this.isPrimary&&!t?this.Rs(e).next(()=>!1):!!t&&this.bs(e).next(()=>!0))).catch(e=>{if(Wu(e))return Be("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Be("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Yn.enqueueRetryable(()=>this.cs(e)),this.isPrimary=e})}Es(e){return ic(e).get("owner").next(t=>pe.resolve(this.Ps(t)))}Vs(e){return _s(e).delete(this.clientId)}vs(){var e=this;return(0,Ce.Z)(function*(){if(e.isPrimary&&!e.Ss(e.us,18e5)){e.us=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const s=Fr(r,"clientMetadata");return s.qt().next(u=>{const c=e.Ds(u,18e5),p=u.filter(_=>-1===c.indexOf(_));return pe.forEach(p,_=>s.delete(_.clientId)).next(()=>p)})}).catch(()=>[]);if(e.ws)for(const r of t)e.ws.removeItem(e.Cs(r.clientId))}})()}Is(){this.os=this.Yn.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.gs().then(()=>this.vs()).then(()=>this.Is()))}Ps(e){return!!e&&e.ownerId===this.clientId}As(e){return this.Zn?pe.resolve(!0):ic(e).get("owner").next(t=>{if(null!==t&&this.Ss(t.leaseTimestampMs,5e3)&&!this.xs(t.ownerId)){if(this.Ps(t)&&this.networkEnabled)return!0;if(!this.Ps(t)){if(!t.allowTabSynchronization)throw new ke(fe.FAILED_PRECONDITION,rc);return!1}}return!(!this.networkEnabled||!this.inForeground)||_s(e).qt().next(r=>void 0===this.Ds(r,5e3).find(s=>{if(this.clientId!==s.clientId){const c=!this.inForeground&&s.inForeground,p=this.networkEnabled===s.networkEnabled;if(!this.networkEnabled&&s.networkEnabled||c&&p)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&Be("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,Ce.Z)(function*(){e.ns=!1,e.Ns(),e.os&&(e.os.cancel(),e.os=null),e.ks(),e.Ms(),yield e.ls.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new Xg(t,fs.A);return e.Rs(r).next(()=>e.Vs(r))}),e.ls.close(),e.Os()})()}Ds(e,t){return e.filter(r=>this.Ss(r.updateTimeMs,t)&&!this.xs(r.clientId))}Fs(){return this.runTransaction("getActiveClients","readonly",e=>_s(e).qt().next(t=>this.Ds(t,18e5).map(r=>r.clientId)))}get started(){return this.ns}getMutationQueue(e,t){return $w.Yt(e,this.M,t,this.referenceDelegate)}getTargetCache(){return this.fs}getRemoteDocumentCache(){return this.ds}getIndexManager(e){return new _S(e,this.M.Jt.databaseId)}getDocumentOverlayCache(e){return V_.Yt(this.M,e)}getBundleCache(){return this._s}runTransaction(e,t,r){Be("IndexedDbPersistence","Starting transaction:",e);const s="readonly"===t?"readonly":"readwrite",u=14===(c=this.ts)?NT:13===c?Ow:12===c?xT:11===c?Rw:void ot();var c;let p;return this.ls.runTransaction(e,s,u,_=>(p=new Xg(_,this.es?this.es.next():fs.A),"readwrite-primary"===t?this.Es(p).next(b=>!!b||this.As(p)).next(b=>{if(!b)throw br(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Yn.enqueueRetryable(()=>this.cs(!1)),new ke(fe.FAILED_PRECONDITION,Pw);return r(p)}).next(b=>this.bs(p).next(()=>b)):this.$s(p).next(()=>r(p)))).then(_=>(p.raiseOnCommittedEvent(),_))}$s(e){return ic(e).get("owner").next(t=>{if(null!==t&&this.Ss(t.leaseTimestampMs,5e3)&&!this.xs(t.ownerId)&&!this.Ps(t)&&!(this.Zn||this.allowTabSynchronization&&t.allowTabSynchronization))throw new ke(fe.FAILED_PRECONDITION,rc)})}bs(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return ic(e).put("owner",t)}static vt(){return Js.vt()}Rs(e){const t=ic(e);return t.get("owner").next(r=>this.Ps(r)?(Be("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):pe.resolve())}Ss(e,t){const r=Date.now();return!(e<r-t||e>r&&(br(`Detected an update time that is in the future: ${e} > ${r}`),1))}ys(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.rs=()=>{this.Yn.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.gs()))},this.document.addEventListener("visibilitychange",this.rs),this.inForeground="visible"===this.document.visibilityState)}ks(){this.rs&&(this.document.removeEventListener("visibilitychange",this.rs),this.rs=null)}ps(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ss=()=>{this.Ns(),(0,Jt.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Yn.enterRestrictedMode(!0),this.Yn.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ss))}Ms(){this.ss&&(this.window.removeEventListener("pagehide",this.ss),this.ss=null)}xs(e){var t;try{const r=null!==(null===(t=this.ws)||void 0===t?void 0:t.getItem(this.Cs(e)));return Be("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return br("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Ns(){if(this.ws)try{this.ws.setItem(this.Cs(this.clientId),String(Date.now()))}catch(e){br("Failed to set zombie client id.",e)}}Os(){if(this.ws)try{this.ws.removeItem(this.Cs(this.clientId))}catch(e){}}Cs(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function ic(n){return Fr(n,"owner")}function _s(n){return Fr(n,"clientMetadata")}function K_(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class Z_{constructor(e,t,r){this.ds=e,this.Bs=t,this.indexManager=r}Ls(e,t){return this.Bs.getAllMutationBatchesAffectingDocumentKey(e,t).next(r=>this.Us(e,t,r))}Us(e,t,r){return this.ds.getEntry(e,t).next(s=>{for(const u of r)u.applyToLocalView(s);return s})}qs(e,t){e.forEach((r,s)=>{for(const u of t)u.applyToLocalView(s)})}Ks(e,t){return this.ds.getEntries(e,t).next(r=>this.Gs(e,r).next(()=>r))}Gs(e,t){return this.Bs.getAllMutationBatchesAffectingDocumentKeys(e,t).next(r=>this.qs(t,r))}Qs(e,t,r){return Je.isDocumentKey((s=t).path)&&null===s.collectionGroup&&0===s.filters.length?this.js(e,t.path):Pd(t)?this.Ws(e,t,r):this.zs(e,t,r);var s}js(e,t){return this.Ls(e,new Je(t)).next(r=>{let s=I_();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}Ws(e,t,r){const s=t.collectionGroup;let u=I_();return this.indexManager.getCollectionParents(e,s).next(c=>pe.forEach(c,p=>{const _=(b=t,A=p.child(s),new ia(A,null,b.explicitOrderBy.slice(),b.filters.slice(),b.limit,b.limitType,b.startAt,b.endAt));var b,A;return this.zs(e,_,r).next(b=>{b.forEach((A,x)=>{u=u.insert(A,x)})})}).next(()=>u))}zs(e,t,r){let s;return this.ds.getAllFromCollection(e,t.path,r).next(u=>(s=u,this.Bs.getAllMutationBatchesAffectingQuery(e,t))).next(u=>{for(const c of u)for(const p of c.mutations){const _=p.key;let b=s.get(_);null==b&&(b=Bn.newInvalidDocument(_),s=s.insert(_,b)),qg(p,b,c.localWriteTime),b.isFoundDocument()||(s=s.remove(_))}}).next(()=>(s.forEach((u,c)=>{zg(t,c)||(s=s.remove(u))}),s))}}class sc{constructor(e,t,r,s){this.targetId=e,this.fromCache=t,this.Hs=r,this.Js=s}static Ys(e,t){let r=bn(),s=bn();for(const u of t.docChanges)switch(u.type){case 0:r=r.add(u.doc.key);break;case 1:s=s.add(u.doc.key)}return new sc(e,t.fromCache,r,s)}}class Jw{constructor(){this.Xs=!1}initialize(e,t){this.Zs=e,this.indexManager=t,this.Xs=!0}Qs(e,t,r,s){return this.ti(e,t).next(u=>u||this.ei(e,t,s,r)).next(u=>u||this.ni(e,t))}ti(e,t){return pe.resolve(null)}ei(e,t,r,s){return function Q0(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}(t)||s.isEqual(Tt.min())?this.ni(e,t):this.Zs.Ks(e,r).next(u=>{const c=this.si(t,u);return this.ii(t,c,r,s)?this.ni(e,t):(Xy()<=Fa.in.DEBUG&&Be("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Gg(t)),this.ri(e,c,t,H0(s,-1)))})}si(e,t){let r=new Nn(J0(e));return t.forEach((s,u)=>{zg(e,u)&&(r=r.add(u))}),r}ii(e,t,r,s){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const u="F"===e.limitType?t.last():t.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(s)>0)}ni(e,t){return Xy()<=Fa.in.DEBUG&&Be("QueryEngine","Using full collection scan to execute query:",Gg(t)),this.Zs.Qs(e,t,Zs.min())}ri(e,t,r,s){return this.Zs.Qs(e,r,s).next(u=>(t.forEach(c=>{u=u.insert(c.key,c)}),u))}}class $T{constructor(e,t,r,s){this.persistence=e,this.oi=t,this.M=s,this.ui=new rr(Gt),this.ai=new Hu(u=>Nd(u),jl),this.ci=new Map,this.hi=e.getRemoteDocumentCache(),this.fs=e.getTargetCache(),this._s=e.getBundleCache(),this.li(r)}li(e){this.indexManager=this.persistence.getIndexManager(e),this.Bs=this.persistence.getMutationQueue(e,this.indexManager),this.fi=new Z_(this.hi,this.Bs,this.indexManager),this.hi.setIndexManager(this.indexManager),this.oi.initialize(this.fi,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.ui))}}function Xw(n,e,t,r){return new $T(n,e,t,r)}function Hf(n,e){return Wd.apply(this,arguments)}function Wd(){return Wd=(0,Ce.Z)(function*(n,e){const t=nt(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let s;return t.Bs.getAllMutationBatches(r).next(u=>(s=u,t.li(e),t.Bs.getAllMutationBatches(r))).next(u=>{const c=[],p=[];let _=bn();for(const b of s){c.push(b.batchId);for(const A of b.mutations)_=_.add(A.key)}for(const b of u){p.push(b.batchId);for(const A of b.mutations)_=_.add(A.key)}return t.fi.Ks(r,_).next(b=>({di:b,removedBatchIds:c,addedBatchIds:p}))})})}),Wd.apply(this,arguments)}function HT(n,e){const t=nt(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),u=t.hi.newChangeBuffer({trackRemovals:!0});return function(c,p,_,b){const A=_.batch,x=A.keys();let V=pe.resolve();return x.forEach(q=>{V=V.next(()=>b.getEntry(p,q)).next(Y=>{const ve=_.docVersions.get(q);xt(null!==ve),Y.version.compareTo(ve)<0&&(A.applyToRemoteDocument(Y,_),Y.isValidDocument()&&(Y.setReadTime(_.commitVersion),b.addEntry(Y)))})}),V.next(()=>c.Bs.removeMutationBatch(p,A))}(t,r,e,u).next(()=>u.apply(r)).next(()=>t.Bs.performConsistencyCheck(r)).next(()=>t.fi.Ks(r,s))})}function eb(n){const e=nt(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.fs.getLastRemoteSnapshotVersion(t))}function tb(n,e){const t=nt(n),r=e.snapshotVersion;let s=t.ui;return t.persistence.runTransaction("Apply remote event","readwrite-primary",u=>{const c=t.hi.newChangeBuffer({trackRemovals:!0});s=t.ui;const p=[];e.targetChanges.forEach((b,A)=>{const x=s.get(A);if(!x)return;p.push(t.fs.removeMatchingKeys(u,b.removedDocuments,A).next(()=>t.fs.addMatchingKeys(u,b.addedDocuments,A)));let V=x.withSequenceNumber(u.currentSequenceNumber);var q,Y,ve;e.targetMismatches.has(A)?V=V.withResumeToken(Ir.EMPTY_BYTE_STRING,Tt.min()).withLastLimboFreeSnapshotVersion(Tt.min()):b.resumeToken.approximateByteSize()>0&&(V=V.withResumeToken(b.resumeToken,r)),s=s.insert(A,V),Y=V,ve=b,(0===(q=x).resumeToken.approximateByteSize()||Y.snapshotVersion.toMicroseconds()-q.snapshotVersion.toMicroseconds()>=3e8||ve.addedDocuments.size+ve.modifiedDocuments.size+ve.removedDocuments.size>0)&&p.push(t.fs.updateTargetData(u,V))});let _=Qs();if(e.documentUpdates.forEach(b=>{e.resolvedLimboDocuments.has(b)&&p.push(t.persistence.referenceDelegate.updateLimboDocument(u,b))}),p.push(Y_(u,c,e.documentUpdates).next(b=>{_=b})),!r.isEqual(Tt.min())){const b=t.fs.getLastRemoteSnapshotVersion(u).next(A=>t.fs.setTargetsMetadata(u,u.currentSequenceNumber,r));p.push(b)}return pe.waitFor(p).next(()=>c.apply(u)).next(()=>t.fi.Gs(u,_)).next(()=>_)}).then(u=>(t.ui=s,u))}function Y_(n,e,t){let r=bn();return t.forEach(s=>r=r.add(s)),e.getEntries(n,r).next(s=>{let u=Qs();return t.forEach((c,p)=>{const _=s.get(c);p.isNoDocument()&&p.version.isEqual(Tt.min())?(e.removeEntry(c,p.readTime),u=u.insert(c,p)):!_.isValidDocument()||p.version.compareTo(_.version)>0||0===p.version.compareTo(_.version)&&_.hasPendingWrites?(e.addEntry(p),u=u.insert(c,p)):Be("LocalStore","Ignoring outdated watch update for ",c,". Current version:",_.version," Watch version:",p.version)}),u})}function Q_(n,e){const t=nt(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.Bs.getNextMutationBatchAfterBatchId(r,e)))}function oc(n,e){const t=nt(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return t.fs.getTargetData(r,e).next(u=>u?(s=u,pe.resolve(s)):t.fs.allocateTargetId(r).next(c=>(s=new aa(e,c,0,r.currentSequenceNumber),t.fs.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=t.ui.get(r.targetId);return(null===s||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(t.ui=t.ui.insert(r.targetId,r),t.ai.set(e,r.targetId)),r})}function qd(n,e,t){return J_.apply(this,arguments)}function J_(){return J_=(0,Ce.Z)(function*(n,e,t){const r=nt(n),s=r.ui.get(e),u=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",u,c=>r.persistence.referenceDelegate.removeTarget(c,s)))}catch(c){if(!Wu(c))throw c;Be("LocalStore",`Failed to update sequence numbers for target ${e}: ${c}`)}r.ui=r.ui.remove(e),r.ai.delete(s.target)}),J_.apply(this,arguments)}function X_(n,e,t){const r=nt(n);let s=Tt.min(),u=bn();return r.persistence.runTransaction("Execute query","readonly",c=>function(p,_,b){const A=nt(p),x=A.ai.get(b);return void 0!==x?pe.resolve(A.ui.get(x)):A.fs.getTargetData(_,b)}(r,c,gs(e)).next(p=>{if(p)return s=p.lastLimboFreeSnapshotVersion,r.fs.getMatchingKeysForTargetId(c,p.targetId).next(_=>{u=_})}).next(()=>r.oi.Qs(c,e,t?s:Tt.min(),t?u:bn())).next(p=>(ev(r,E_(e),p),{documents:p,_i:u})))}function im(n,e){const t=nt(n),r=nt(t.fs),s=t.ui.get(e);return s?Promise.resolve(s.target):t.persistence.runTransaction("Get target data","readonly",u=>r.Et(u,e).next(c=>c?c.target:null))}function sm(n,e){const t=nt(n),r=t.ci.get(e)||Tt.min();return t.persistence.runTransaction("Get new document changes","readonly",s=>t.hi.getAllFromCollectionGroup(s,e,H0(r,-1),Number.MAX_SAFE_INTEGER)).then(s=>(ev(t,e,s),s))}function ev(n,e,t){let r=Tt.min();t.forEach((s,u)=>{u.readTime.compareTo(r)>0&&(r=u.readTime)}),n.ci.set(e,r)}function Gf(){return Gf=(0,Ce.Z)(function*(n,e,t,r){const s=nt(n);let u=bn(),c=Qs();for(const b of t){const A=e.wi(b.metadata.name);b.document&&(u=u.add(A));const x=e.mi(b);x.setReadTime(e.gi(b.metadata.readTime)),c=c.insert(A,x)}const p=s.hi.newChangeBuffer({trackRemovals:!0}),_=yield oc(s,(b=r,gs(Od(un.fromString(`__bundle__/docs/${b}`)))));var b;return s.persistence.runTransaction("Apply bundle documents","readwrite",b=>Y_(b,p,c).next(A=>(p.apply(b),A)).next(A=>s.fs.removeMatchingKeysForTargetId(b,_.targetId).next(()=>s.fs.addMatchingKeys(b,u,_.targetId)).next(()=>s.fi.Gs(b,A)).next(()=>A)))}),Gf.apply(this,arguments)}function GT(n,e){return nv.apply(this,arguments)}function nv(){return nv=(0,Ce.Z)(function*(n,e,t=bn()){const r=yield oc(n,gs(F_(e.bundledQuery))),s=nt(n);return s.persistence.runTransaction("Save named query","readwrite",u=>{const c=kr(e.readTime);if(r.snapshotVersion.compareTo(c)>=0)return s._s.saveNamedQuery(u,e);const p=r.withResumeToken(Ir.EMPTY_BYTE_STRING,c);return s.ui=s.ui.insert(p.targetId,p),s.fs.updateTargetData(u,p).next(()=>s.fs.removeMatchingKeysForTargetId(u,r.targetId)).next(()=>s.fs.addMatchingKeys(u,t,r.targetId)).next(()=>s._s.saveNamedQuery(u,e))})}),nv.apply(this,arguments)}class zT{constructor(e){this.M=e,this.yi=new Map,this.pi=new Map}getBundleMetadata(e,t){return pe.resolve(this.yi.get(t))}saveBundleMetadata(e,t){var r;return this.yi.set(t.id,{id:(r=t).id,version:r.version,createTime:kr(r.createTime)}),pe.resolve()}getNamedQuery(e,t){return pe.resolve(this.pi.get(t))}saveNamedQuery(e,t){return this.pi.set(t.name,{name:(r=t).name,query:F_(r.bundledQuery),readTime:kr(r.readTime)}),pe.resolve();var r}}class WT{constructor(){this.overlays=new rr(Je.comparator),this.Ii=new Map}getOverlay(e,t){return pe.resolve(this.overlays.get(t))}saveOverlays(e,t,r){return r.forEach((s,u)=>{this.Xt(e,t,u)}),pe.resolve()}removeOverlaysForBatchId(e,t,r){const s=this.Ii.get(r);return void 0!==s&&(s.forEach(u=>this.overlays=this.overlays.remove(u)),this.Ii.delete(r)),pe.resolve()}getOverlaysForCollection(e,t,r){const s=Gu(),u=t.length+1,c=new Je(t.child("")),p=this.overlays.getIteratorFrom(c);for(;p.hasNext();){const _=p.getNext().value,b=_.getKey();if(!t.isPrefixOf(b.path))break;b.path.length===u&&_.largestBatchId>r&&s.set(_.getKey(),_)}return pe.resolve(s)}getOverlaysForCollectionGroup(e,t,r,s){let u=new rr((b,A)=>b-A);const c=this.overlays.getIterator();for(;c.hasNext();){const b=c.getNext().value;if(b.getKey().getCollectionGroup()===t&&b.largestBatchId>r){let A=u.get(b.largestBatchId);null===A&&(A=Gu(),u=u.insert(b.largestBatchId,A)),A.set(b.getKey(),b)}}const p=Gu(),_=u.getIterator();for(;_.hasNext()&&(_.getNext().value.forEach((b,A)=>p.set(b,A)),!(p.size()>=s)););return pe.resolve(p)}Xt(e,t,r){if(null===r)return;const s=this.overlays.get(r.key);if(null!==s){const c=this.Ii.get(s.largestBatchId).delete(r.key);this.Ii.set(s.largestBatchId,c)}this.overlays=this.overlays.insert(r.key,new k_(t,r));let u=this.Ii.get(t);void 0===u&&(u=bn(),this.Ii.set(t,u)),this.Ii.set(t,u.add(r.key))}}class om{constructor(){this.Ti=new Nn(Dr.Ei),this.Ai=new Nn(Dr.Ri)}isEmpty(){return this.Ti.isEmpty()}addReference(e,t){const r=new Dr(e,t);this.Ti=this.Ti.add(r),this.Ai=this.Ai.add(r)}bi(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Pi(new Dr(e,t))}Vi(e,t){e.forEach(r=>this.removeReference(r,t))}vi(e){const t=new Je(new un([])),r=new Dr(t,e),s=new Dr(t,e+1),u=[];return this.Ai.forEachInRange([r,s],c=>{this.Pi(c),u.push(c.key)}),u}Si(){this.Ti.forEach(e=>this.Pi(e))}Pi(e){this.Ti=this.Ti.delete(e),this.Ai=this.Ai.delete(e)}Di(e){const t=new Je(new un([])),r=new Dr(t,e),s=new Dr(t,e+1);let u=bn();return this.Ai.forEachInRange([r,s],c=>{u=u.add(c.key)}),u}containsKey(e){const t=new Dr(e,0),r=this.Ti.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class Dr{constructor(e,t){this.key=e,this.Ci=t}static Ei(e,t){return Je.comparator(e.key,t.key)||Gt(e.Ci,t.Ci)}static Ri(e,t){return Gt(e.Ci,t.Ci)||Je.comparator(e.key,t.key)}}class nb{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.Bs=[],this.xi=1,this.Ni=new Nn(Dr.Ei)}checkEmpty(e){return pe.resolve(0===this.Bs.length)}addMutationBatch(e,t,r,s){const u=this.xi;this.xi++;const c=new Rf(u,t,r,s);this.Bs.push(c);for(const p of s)this.Ni=this.Ni.add(new Dr(p.key,u)),this.indexManager.addToCollectionParentIndex(e,p.key.path.popLast());return pe.resolve(c)}lookupMutationBatch(e,t){return pe.resolve(this.ki(t))}getNextMutationBatchAfterBatchId(e,t){const s=this.Mi(t+1),u=s<0?0:s;return pe.resolve(this.Bs.length>u?this.Bs[u]:null)}getHighestUnacknowledgedBatchId(){return pe.resolve(0===this.Bs.length?-1:this.xi-1)}getAllMutationBatches(e){return pe.resolve(this.Bs.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Dr(t,0),s=new Dr(t,Number.POSITIVE_INFINITY),u=[];return this.Ni.forEachInRange([r,s],c=>{const p=this.ki(c.Ci);u.push(p)}),pe.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Nn(Gt);return t.forEach(s=>{const u=new Dr(s,0),c=new Dr(s,Number.POSITIVE_INFINITY);this.Ni.forEachInRange([u,c],p=>{r=r.add(p.Ci)})}),pe.resolve(this.Oi(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,s=r.length+1;let u=r;Je.isDocumentKey(u)||(u=u.child(""));const c=new Dr(new Je(u),0);let p=new Nn(Gt);return this.Ni.forEachWhile(_=>{const b=_.key.path;return!!r.isPrefixOf(b)&&(b.length===s&&(p=p.add(_.Ci)),!0)},c),pe.resolve(this.Oi(p))}Oi(e){const t=[];return e.forEach(r=>{const s=this.ki(r);null!==s&&t.push(s)}),t}removeMutationBatch(e,t){xt(0===this.Fi(t.batchId,"removed")),this.Bs.shift();let r=this.Ni;return pe.forEach(t.mutations,s=>{const u=new Dr(s.key,t.batchId);return r=r.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Ni=r})}_n(e){}containsKey(e,t){const r=new Dr(t,0),s=this.Ni.firstAfterOrEqual(r);return pe.resolve(t.isEqual(s&&s.key))}performConsistencyCheck(e){return pe.resolve()}Fi(e,t){return this.Mi(e)}Mi(e){return 0===this.Bs.length?0:e-this.Bs[0].batchId}ki(e){const t=this.Mi(e);return t<0||t>=this.Bs.length?null:this.Bs[t]}}class qT{constructor(e){this.$i=e,this.docs=new rr(Je.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,s=this.docs.get(r),u=s?s.size:0,c=this.$i(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:c}),this.size+=c-u,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return pe.resolve(r?r.document.mutableCopy():Bn.newInvalidDocument(t))}getEntries(e,t){let r=Qs();return t.forEach(s=>{const u=this.docs.get(s);r=r.insert(s,u?u.document.mutableCopy():Bn.newInvalidDocument(s))}),pe.resolve(r)}getAllFromCollection(e,t,r){let s=Qs();const u=new Je(t.child("")),c=this.docs.getIteratorFrom(u);for(;c.hasNext();){const{key:p,value:{document:_}}=c.getNext();if(!t.isPrefixOf(p.path))break;p.path.length>t.length+1||G0(eT(_),r)<=0||(s=s.insert(_.key,_.mutableCopy()))}return pe.resolve(s)}getAllFromCollectionGroup(e,t,r,s){ot()}Bi(e,t){return pe.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new rb(this)}getSize(e){return pe.resolve(this.size)}}class rb extends z_{constructor(e){super(),this.Kn=e}applyChanges(e){const t=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?t.push(this.Kn.addEntry(e,s)):this.Kn.removeEntry(r)}),pe.waitFor(t)}getFromCache(e,t){return this.Kn.getEntry(e,t)}getAllFromCache(e,t){return this.Kn.getEntries(e,t)}}class ib{constructor(e){this.persistence=e,this.Li=new Hu(t=>Nd(t),jl),this.lastRemoteSnapshotVersion=Tt.min(),this.highestTargetId=0,this.Ui=0,this.qi=new om,this.targetCount=0,this.Ki=ec.gn()}forEachTarget(e,t){return this.Li.forEach((r,s)=>t(s)),pe.resolve()}getLastRemoteSnapshotVersion(e){return pe.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return pe.resolve(this.Ui)}allocateTargetId(e){return this.highestTargetId=this.Ki.next(),pe.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Ui&&(this.Ui=t),pe.resolve()}Tn(e){this.Li.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Ki=new ec(t),this.highestTargetId=t),e.sequenceNumber>this.Ui&&(this.Ui=e.sequenceNumber)}addTargetData(e,t){return this.Tn(t),this.targetCount+=1,pe.resolve()}updateTargetData(e,t){return this.Tn(t),pe.resolve()}removeTargetData(e,t){return this.Li.delete(t.target),this.qi.vi(t.targetId),this.targetCount-=1,pe.resolve()}removeTargets(e,t,r){let s=0;const u=[];return this.Li.forEach((c,p)=>{p.sequenceNumber<=t&&null===r.get(p.targetId)&&(this.Li.delete(c),u.push(this.removeMatchingKeysForTargetId(e,p.targetId)),s++)}),pe.waitFor(u).next(()=>s)}getTargetCount(e){return pe.resolve(this.targetCount)}getTargetData(e,t){const r=this.Li.get(t)||null;return pe.resolve(r)}addMatchingKeys(e,t,r){return this.qi.bi(t,r),pe.resolve()}removeMatchingKeys(e,t,r){this.qi.Vi(t,r);const s=this.persistence.referenceDelegate,u=[];return s&&t.forEach(c=>{u.push(s.markPotentiallyOrphaned(e,c))}),pe.waitFor(u)}removeMatchingKeysForTargetId(e,t){return this.qi.vi(t),pe.resolve()}getMatchingKeysForTargetId(e,t){const r=this.qi.Di(t);return pe.resolve(r)}containsKey(e,t){return pe.resolve(this.qi.containsKey(t))}}class KT{constructor(e,t){this.Gi={},this.overlays={},this.es=new fs(0),this.ns=!1,this.ns=!0,this.referenceDelegate=e(this),this.fs=new ib(this),this.indexManager=new VT,this.ds=new qT(r=>this.referenceDelegate.Qi(r)),this.M=new Lw(t),this._s=new zT(this.M)}start(){return Promise.resolve()}shutdown(){return this.ns=!1,Promise.resolve()}get started(){return this.ns}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new WT,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Gi[e.toKey()];return r||(r=new nb(t,this.referenceDelegate),this.Gi[e.toKey()]=r),r}getTargetCache(){return this.fs}getRemoteDocumentCache(){return this.ds}getBundleCache(){return this._s}runTransaction(e,t,r){Be("MemoryPersistence","Starting transaction:",e);const s=new sb(this.es.next());return this.referenceDelegate.ji(),r(s).next(u=>this.referenceDelegate.Wi(s).next(()=>u)).toPromise().then(u=>(s.raiseOnCommittedEvent(),u))}zi(e,t){return pe.or(Object.values(this.Gi).map(r=>()=>r.containsKey(e,t)))}}class sb extends kw{constructor(e){super(),this.currentSequenceNumber=e}}class am{constructor(e){this.persistence=e,this.Hi=new om,this.Ji=null}static Yi(e){return new am(e)}get Xi(){if(this.Ji)return this.Ji;throw ot()}addReference(e,t,r){return this.Hi.addReference(r,t),this.Xi.delete(r.toString()),pe.resolve()}removeReference(e,t,r){return this.Hi.removeReference(r,t),this.Xi.add(r.toString()),pe.resolve()}markPotentiallyOrphaned(e,t){return this.Xi.add(t.toString()),pe.resolve()}removeTarget(e,t){this.Hi.vi(t.targetId).forEach(s=>this.Xi.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(s=>{s.forEach(u=>this.Xi.add(u.toString()))}).next(()=>r.removeTargetData(e,t))}ji(){this.Ji=new Set}Wi(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return pe.forEach(this.Xi,r=>{const s=Je.fromPath(r);return this.Zi(e,s).next(u=>{u||t.removeEntry(s,Tt.min())})}).next(()=>(this.Ji=null,t.apply(e)))}updateLimboDocument(e,t){return this.Zi(e,t).next(r=>{r?this.Xi.delete(t.toString()):this.Xi.add(t.toString())})}Qi(e){return 0}Zi(e,t){return pe.or([()=>pe.resolve(this.Hi.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.zi(e,t)])}}function ob(n,e){return`firestore_clients_${n}_${e}`}function rv(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function iv(n,e){return`firestore_targets_${n}_${e}`}class Yr{constructor(e,t,r,s){this.user=e,this.batchId=t,this.state=r,this.error=s}static tr(e,t,r){const s=JSON.parse(r);let u,c="object"==typeof s&&-1!==["pending","acknowledged","rejected"].indexOf(s.state)&&(void 0===s.error||"object"==typeof s.error);return c&&s.error&&(c="string"==typeof s.error.message&&"string"==typeof s.error.code,c&&(u=new ke(s.error.code,s.error.message))),c?new Yr(e,t,s.state,u):(br("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}er(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class ua{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static tr(e,t){const r=JSON.parse(t);let s,u="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return u&&r.error&&(u="string"==typeof r.error.message&&"string"==typeof r.error.code,u&&(s=new ke(r.error.code,r.error.message))),u?new ua(e,r.state,s):(br("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}er(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class um{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static tr(e,t){const r=JSON.parse(t);let s="object"==typeof r&&r.activeTargetIds instanceof Array,u=Qg();for(let c=0;s&&c<r.activeTargetIds.length;++c)s=o_(r.activeTargetIds[c]),u=u.add(r.activeTargetIds[c]);return s?new um(e,u):(br("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class sv{constructor(e,t){this.clientId=e,this.onlineState=t}static tr(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new sv(t.clientId,t.onlineState):(br("SharedClientState",`Failed to parse online state: ${e}`),null)}}class ab{constructor(){this.activeTargetIds=Qg()}nr(e){this.activeTargetIds=this.activeTargetIds.add(e)}sr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}er(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class ac{constructor(e,t,r,s,u){this.window=e,this.Yn=t,this.persistenceKey=r,this.ir=s,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.rr=this.ur.bind(this),this.ar=new rr(Gt),this.started=!1,this.cr=[];const c=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=u,this.hr=ob(this.persistenceKey,this.ir),this.lr=`firestore_sequence_number_${this.persistenceKey}`,this.ar=this.ar.insert(this.ir,new ab),this.dr=new RegExp(`^firestore_clients_${c}_([^_]*)$`),this._r=new RegExp(`^firestore_mutations_${c}_(\\d+)(?:_(.*))?$`),this.wr=new RegExp(`^firestore_targets_${c}_(\\d+)$`),this.mr=`firestore_online_state_${this.persistenceKey}`,this.gr=function(p){return`firestore_bundle_loaded_v2_${p}`}(this.persistenceKey),this.window.addEventListener("storage",this.rr)}static vt(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,Ce.Z)(function*(){const t=yield e.syncEngine.Fs();for(const s of t){if(s===e.ir)continue;const u=e.getItem(ob(e.persistenceKey,s));if(u){const c=um.tr(s,u);c&&(e.ar=e.ar.insert(c.clientId,c))}}e.yr();const r=e.storage.getItem(e.mr);if(r){const s=e.pr(r);s&&e.Ir(s)}for(const s of e.cr)e.ur(s);e.cr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.lr,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Tr(this.ar)}isActiveQueryTarget(e){let t=!1;return this.ar.forEach((r,s)=>{s.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Er(e,"pending")}updateMutationState(e,t,r){this.Er(e,t,r),this.Ar(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(iv(this.persistenceKey,e));if(r){const s=ua.tr(e,r);s&&(t=s.state)}}return this.Rr.nr(e),this.yr(),t}removeLocalQueryTarget(e){this.Rr.sr(e),this.yr()}isLocalQueryTarget(e){return this.Rr.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(iv(this.persistenceKey,e))}updateQueryState(e,t,r){this.br(e,t,r)}handleUserChange(e,t,r){t.forEach(s=>{this.Ar(s)}),this.currentUser=e,r.forEach(s=>{this.addPendingMutation(s)})}setOnlineState(e){this.Pr(e)}notifyBundleLoaded(e){this.Vr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.rr),this.removeItem(this.hr),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Be("SharedClientState","READ",e,t),t}setItem(e,t){Be("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Be("SharedClientState","REMOVE",e),this.storage.removeItem(e)}ur(e){var t=this;const r=e;if(r.storageArea===this.storage){if(Be("SharedClientState","EVENT",r.key,r.newValue),r.key===this.hr)return void br("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Yn.enqueueRetryable((0,Ce.Z)(function*(){if(t.started){if(null!==r.key)if(t.dr.test(r.key)){if(null==r.newValue){const s=t.vr(r.key);return t.Sr(s,null)}{const s=t.Dr(r.key,r.newValue);if(s)return t.Sr(s.clientId,s)}}else if(t._r.test(r.key)){if(null!==r.newValue){const s=t.Cr(r.key,r.newValue);if(s)return t.Nr(s)}}else if(t.wr.test(r.key)){if(null!==r.newValue){const s=t.kr(r.key,r.newValue);if(s)return t.Mr(s)}}else if(r.key===t.mr){if(null!==r.newValue){const s=t.pr(r.newValue);if(s)return t.Ir(s)}}else if(r.key===t.lr){const s=function(u){let c=fs.A;if(null!=u)try{const p=JSON.parse(u);xt("number"==typeof p),c=p}catch(p){br("SharedClientState","Failed to read sequence number from WebStorage",p)}return c}(r.newValue);s!==fs.A&&t.sequenceNumberHandler(s)}else if(r.key===t.gr){const s=t.Or(r.newValue);yield Promise.all(s.map(u=>t.syncEngine.Fr(u)))}}else t.cr.push(r)}))}}get Rr(){return this.ar.get(this.ir)}yr(){this.setItem(this.hr,this.Rr.er())}Er(e,t,r){const s=new Yr(this.currentUser,e,t,r),u=rv(this.persistenceKey,this.currentUser,e);this.setItem(u,s.er())}Ar(e){const t=rv(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Pr(e){this.storage.setItem(this.mr,JSON.stringify({clientId:this.ir,onlineState:e}))}br(e,t,r){const s=iv(this.persistenceKey,e),u=new ua(e,t,r);this.setItem(s,u.er())}Vr(e){const t=JSON.stringify(Array.from(e));this.setItem(this.gr,t)}vr(e){const t=this.dr.exec(e);return t?t[1]:null}Dr(e,t){const r=this.vr(e);return um.tr(r,t)}Cr(e,t){const r=this._r.exec(e),s=Number(r[1]);return Yr.tr(new oi(void 0!==r[2]?r[2]:null),s,t)}kr(e,t){const r=this.wr.exec(e),s=Number(r[1]);return ua.tr(s,t)}pr(e){return sv.tr(e)}Or(e){return JSON.parse(e)}Nr(e){var t=this;return(0,Ce.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.$r(e.batchId,e.state,e.error);Be("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Mr(e){return this.syncEngine.Br(e.targetId,e.state,e.error)}Sr(e,t){const r=t?this.ar.insert(e,t):this.ar.remove(e),s=this.Tr(this.ar),u=this.Tr(r),c=[],p=[];return u.forEach(_=>{s.has(_)||c.push(_)}),s.forEach(_=>{u.has(_)||p.push(_)}),this.syncEngine.Lr(c,p).then(()=>{this.ar=r})}Ir(e){this.ar.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Tr(e){let t=Qg();return e.forEach((r,s)=>{t=t.unionWith(s.activeTargetIds)}),t}}class ub{constructor(){this.Ur=new ab,this.qr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Ur.nr(e),this.qr[e]||"not-current"}updateQueryState(e,t,r){this.qr[e]=t}removeLocalQueryTarget(e){this.Ur.sr(e)}isLocalQueryTarget(e){return this.Ur.activeTargetIds.has(e)}clearQueryState(e){delete this.qr[e]}getAllActiveQueryTargets(){return this.Ur.activeTargetIds}isActiveQueryTarget(e){return this.Ur.activeTargetIds.has(e)}start(){return this.Ur=new ab,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class ov{Kr(e){}shutdown(){}}class lb{constructor(){this.Gr=()=>this.Qr(),this.jr=()=>this.Wr(),this.zr=[],this.Hr()}Kr(e){this.zr.push(e)}shutdown(){window.removeEventListener("online",this.Gr),window.removeEventListener("offline",this.jr)}Hr(){window.addEventListener("online",this.Gr),window.addEventListener("offline",this.jr)}Qr(){Be("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.zr)e(0)}Wr(){Be("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.zr)e(1)}static vt(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const cb={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class ZT{constructor(e){this.Jr=e.Jr,this.Yr=e.Yr}Xr(e){this.Zr=e}eo(e){this.no=e}onMessage(e){this.so=e}close(){this.Yr()}send(e){this.Jr(e)}io(){this.Zr()}ro(e){this.no(e)}oo(e){this.so(e)}}class YT extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.uo=(e.ssl?"https":"http")+"://"+e.host,this.ao="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}co(e,t,r,s,u){const c=this.ho(e,t);Be("RestConnection","Sending: ",c,r);const p={};return this.lo(p,s,u),this.fo(e,c,p,r).then(_=>(Be("RestConnection","Received: ",_),_),_=>{throw kg("RestConnection",`${e} failed with error: `,_,"url: ",c,"request:",r),_})}_o(e,t,r,s,u){return this.co(e,t,r,s,u)}lo(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+Dd,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((s,u)=>e[u]=s),r&&r.headers.forEach((s,u)=>e[u]=s)}ho(e,t){return`${this.uo}/v1/${t}:${cb[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}fo(e,t,r,s){return new Promise((u,c)=>{const p=new KD;p.listenOnce(M0.COMPLETE,()=>{try{switch(p.getLastErrorCode()){case Og.NO_ERROR:const b=p.getResponseJson();Be("Connection","XHR received:",JSON.stringify(b)),u(b);break;case Og.TIMEOUT:Be("Connection",'RPC "'+e+'" timed out'),c(new ke(fe.DEADLINE_EXCEEDED,"Request time out"));break;case Og.HTTP_ERROR:const A=p.getStatus();if(Be("Connection",'RPC "'+e+'" failed with status:',A,"response text:",p.getResponseText()),A>0){const x=p.getResponseJson().error;if(x&&x.status&&x.message){const V=function(q){const Y=q.toLowerCase().replace(/_/g,"-");return Object.values(fe).indexOf(Y)>=0?Y:fe.UNKNOWN}(x.status);c(new ke(V,x.message))}else c(new ke(fe.UNKNOWN,"Server responded with status "+p.getStatus()))}else c(new ke(fe.UNAVAILABLE,"Connection failed."));break;default:ot()}}finally{Be("Connection",'RPC "'+e+'" completed.')}});const _=JSON.stringify(s);p.send(t,"POST",_,r,15)})}wo(e,t,r){const s=[this.uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=A0(),c=S0(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(p.xmlHttpFactory=new R0({})),this.lo(p.initMessageHeaders,t,r),(0,Jt.uI)()||(0,Jt.b$)()||(0,Jt.d)()||(0,Jt.w1)()||(0,Jt.Mn)()||(0,Jt.ru)()||(p.httpHeadersOverwriteParam="$httpHeaders");const _=s.join("");Be("Connection","Creating WebChannel: "+_,p);const b=u.createWebChannel(_,p);let A=!1,x=!1;const V=new ZT({Jr:Y=>{x?Be("Connection","Not sending because WebChannel is closed:",Y):(A||(Be("Connection","Opening WebChannel transport."),b.open(),A=!0),Be("Connection","WebChannel sending:",Y),b.send(Y))},Yr:()=>b.close()}),q=(Y,ve,Ue)=>{Y.listen(ve,_t=>{try{Ue(_t)}catch(wt){setTimeout(()=>{throw wt},0)}})};return q(b,Pg.EventType.OPEN,()=>{x||Be("Connection","WebChannel transport opened.")}),q(b,Pg.EventType.CLOSE,()=>{x||(x=!0,Be("Connection","WebChannel transport closed"),V.ro())}),q(b,Pg.EventType.ERROR,Y=>{x||(x=!0,kg("Connection","WebChannel transport errored:",Y),V.ro(new ke(fe.UNAVAILABLE,"The operation could not be completed")))}),q(b,Pg.EventType.MESSAGE,Y=>{var ve;if(!x){const Ue=Y.data[0];xt(!!Ue);const _t=Ue,wt=_t.error||(null===(ve=_t[0])||void 0===ve?void 0:ve.error);if(wt){Be("Connection","WebChannel received error:",wt);const Ct=wt.status;let ft=function(Qt){const vn=yr[Qt];if(void 0!==vn)return bt(vn)}(Ct),Bt=wt.message;void 0===ft&&(ft=fe.INTERNAL,Bt="Unknown error status: "+Ct+" with message "+wt.message),x=!0,V.ro(new ke(ft,Bt)),b.close()}else Be("Connection","WebChannel received:",Ue),V.oo(Ue)}}),q(c,x0.STAT_EVENT,Y=>{Y.stat===N0.PROXY?Be("Connection","Detected buffering proxy"):Y.stat===N0.NOPROXY&&Be("Connection","Detected no buffering proxy")}),setTimeout(()=>{V.io()},0),V}}function lm(){return"undefined"!=typeof window?window:null}function zf(){return"undefined"!=typeof document?document:null}function Kd(n){return new fT(n,!0)}class Zd{constructor(e,t,r=1e3,s=1.5,u=6e4){this.Yn=e,this.timerId=t,this.mo=r,this.yo=s,this.po=u,this.Io=0,this.To=null,this.Eo=Date.now(),this.reset()}reset(){this.Io=0}Ao(){this.Io=this.po}Ro(e){this.cancel();const t=Math.floor(this.Io+this.bo()),r=Math.max(0,Date.now()-this.Eo),s=Math.max(0,t-r);s>0&&Be("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Io} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.To=this.Yn.enqueueAfterDelay(this.timerId,s,()=>(this.Eo=Date.now(),e())),this.Io*=this.yo,this.Io<this.mo&&(this.Io=this.mo),this.Io>this.po&&(this.Io=this.po)}Po(){null!==this.To&&(this.To.skipDelay(),this.To=null)}cancel(){null!==this.To&&(this.To.cancel(),this.To=null)}bo(){return(Math.random()-.5)*this.Io}}class cm{constructor(e,t,r,s,u,c,p,_){this.Yn=e,this.Vo=r,this.vo=s,this.So=u,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=p,this.listener=_,this.state=0,this.Do=0,this.Co=null,this.xo=null,this.stream=null,this.No=new Zd(e,t)}ko(){return 1===this.state||5===this.state||this.Mo()}Mo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Oo()}stop(){var e=this;return(0,Ce.Z)(function*(){e.ko()&&(yield e.close(0))})()}Fo(){this.state=0,this.No.reset()}$o(){this.Mo()&&null===this.Co&&(this.Co=this.Yn.enqueueAfterDelay(this.Vo,6e4,()=>this.Bo()))}Lo(e){this.Uo(),this.stream.send(e)}Bo(){var e=this;return(0,Ce.Z)(function*(){if(e.Mo())return e.close(0)})()}Uo(){this.Co&&(this.Co.cancel(),this.Co=null)}qo(){this.xo&&(this.xo.cancel(),this.xo=null)}close(e,t){var r=this;return(0,Ce.Z)(function*(){r.Uo(),r.qo(),r.No.cancel(),r.Do++,4!==e?r.No.reset():t&&t.code===fe.RESOURCE_EXHAUSTED?(br(t.toString()),br("Using maximum backoff delay to prevent overloading the backend."),r.No.Ao()):t&&t.code===fe.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Ko(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.eo(t)})()}Ko(){}auth(){this.state=1;const e=this.Go(this.Do),t=this.Do;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.Do===t&&this.Qo(r,s)},r=>{e(()=>{const s=new ke(fe.UNKNOWN,"Fetching auth token failed: "+r.message);return this.jo(s)})})}Qo(e,t){const r=this.Go(this.Do);this.stream=this.Wo(e,t),this.stream.Xr(()=>{r(()=>(this.state=2,this.xo=this.Yn.enqueueAfterDelay(this.vo,1e4,()=>(this.Mo()&&(this.state=3),Promise.resolve())),this.listener.Xr()))}),this.stream.eo(s=>{r(()=>this.jo(s))}),this.stream.onMessage(s=>{r(()=>this.onMessage(s))})}Oo(){var e=this;this.state=5,this.No.Ro((0,Ce.Z)(function*(){e.state=0,e.start()}))}jo(e){return Be("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Go(e){return t=>{this.Yn.enqueueAndForget(()=>this.Do===e?t():(Be("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class vS extends cm{constructor(e,t,r,s,u,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,s,c),this.M=u}Wo(e,t){return this.So.wo("Listen",e,t)}onMessage(e){this.No.reset();const t=function pT(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(_=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===_?1:"REMOVE"===_?2:"CURRENT"===_?3:"RESET"===_?4:ot(),s=e.targetChange.targetIds||[],u=function(_,b){return _.N?(xt(void 0===b||"string"==typeof b),Ir.fromBase64String(b||"")):(xt(void 0===b||b instanceof Uint8Array),Ir.fromUint8Array(b||new Uint8Array))}(n,e.targetChange.resumeToken),c=e.targetChange.cause,p=c&&function(_){const b=void 0===_.code?fe.UNKNOWN:bt(_.code);return new ke(b,_.message||"")}(c);t=new T_(r,s,u,p||null)}else if("documentChange"in e){const r=e.documentChange,s=sa(n,r.document.name),u=kr(r.document.updateTime),c=new ai({mapValue:{fields:r.document.fields}}),p=Bn.newFoundDocument(s,u,c);t=new Cf(r.targetIds||[],r.removedTargetIds||[],p.key,p)}else if("documentDelete"in e){const r=e.documentDelete,s=sa(n,r.document),u=r.readTime?kr(r.readTime):Tt.min(),c=Bn.newNoDocument(s,u);t=new Cf([],r.removedTargetIds||[],c.key,c)}else if("documentRemove"in e){const r=e.documentRemove,s=sa(n,r.document);t=new Cf([],r.removedTargetIds||[],s,null)}else{if(!("filter"in e))return ot();{const r=e.filter,u=new mS(r.count||0);t=new D_(r.targetId,u)}}var _;return t}(this.M,e),r=function(s){if(!("targetChange"in s))return Tt.min();const u=s.targetChange;return u.targetIds&&u.targetIds.length?Tt.min():u.readTime?kr(u.readTime):Tt.min()}(e);return this.listener.zo(t,r)}Ho(e){const t={};t.database=jd(this.M),t.addTarget=function(s,u){let c;const p=u.target;return c=ps(p)?{documents:gT(s,p)}:{query:mT(s,p)},c.targetId=u.targetId,u.resumeToken.approximateByteSize()>0?c.resumeToken=C_(s,u.resumeToken):u.snapshotVersion.compareTo(Tt.min())>0&&(c.readTime=zu(s,u.snapshotVersion.toTimestamp())),c}(this.M,e);const r=function Jg(n,e){const t=function(r,s){switch(s){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return ot()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Lo(t)}Jo(e){const t={};t.database=jd(this.M),t.removeTarget=e,this.Lo(t)}}class db extends cm{constructor(e,t,r,s,u,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,s,c),this.M=u,this.Yo=!1}get Xo(){return this.Yo}start(){this.Yo=!1,this.lastStreamToken=void 0,super.start()}Ko(){this.Yo&&this.Zo([])}Wo(e,t){return this.So.wo("Write",e,t)}onMessage(e){if(xt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Yo){this.No.reset();const t=function yS(n,e){return n&&n.length>0?(xt(void 0!==e),n.map(t=>function(r,s){let u=kr(r.updateTime?r.updateTime:s);return u.isEqual(Tt.min())&&(u=kr(s)),new uw(u,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=kr(e.commitTime);return this.listener.tu(r,t)}return xt(!e.writeResults||0===e.writeResults.length),this.Yo=!0,this.listener.eu()}nu(){const e={};e.database=jd(this.M),this.Lo(e)}Zo(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>Af(this.M,r))};this.Lo(t)}}class QT extends class{}{constructor(e,t,r,s){super(),this.authCredentials=e,this.appCheckCredentials=t,this.So=r,this.M=s,this.su=!1}iu(){if(this.su)throw new ke(fe.FAILED_PRECONDITION,"The client has already been terminated.")}co(e,t,r){return this.iu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,u])=>this.So.co(e,t,r,s,u)).catch(s=>{throw"FirebaseError"===s.name?(s.code===fe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new ke(fe.UNKNOWN,s.toString())})}_o(e,t,r){return this.iu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,u])=>this.So._o(e,t,r,s,u)).catch(s=>{throw"FirebaseError"===s.name?(s.code===fe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new ke(fe.UNKNOWN,s.toString())})}terminate(){this.su=!0}}class hb{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.ru=0,this.ou=null,this.uu=!0}au(){0===this.ru&&(this.cu("Unknown"),this.ou=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.ou=null,this.hu("Backend didn't respond within 10 seconds."),this.cu("Offline"),Promise.resolve())))}lu(e){"Online"===this.state?this.cu("Unknown"):(this.ru++,this.ru>=1&&(this.fu(),this.hu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.cu("Offline")))}set(e){this.fu(),this.ru=0,"Online"===e&&(this.uu=!1),this.cu(e)}cu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}hu(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.uu?(br(t),this.uu=!1):Be("OnlineStateTracker",t)}fu(){null!==this.ou&&(this.ou.cancel(),this.ou=null)}}class dm{constructor(e,t,r,s,u){var c=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.du=[],this._u=new Map,this.wu=new Set,this.mu=[],this.gu=u,this.gu.Kr(p=>{r.enqueueAndForget((0,Ce.Z)(function*(){var _;Ya(c)&&(Be("RemoteStore","Restarting streams for network reachability change."),yield(_=(0,Ce.Z)(function*(b){const A=nt(b);A.wu.add(4),yield Qu(A),A.yu.set("Unknown"),A.wu.delete(4),yield Yd(A)}),function(b){return _.apply(this,arguments)})(c))}))}),this.yu=new hb(r,s)}}function Yd(n){return av.apply(this,arguments)}function av(){return av=(0,Ce.Z)(function*(n){if(Ya(n))for(const e of n.mu)yield e(!0)}),av.apply(this,arguments)}function Qu(n){return Wf.apply(this,arguments)}function Wf(){return Wf=(0,Ce.Z)(function*(n){for(const e of n.mu)yield e(!1)}),Wf.apply(this,arguments)}function uv(n,e){const t=nt(n);t._u.has(e.targetId)||(t._u.set(e.targetId,e),dv(t)?hm(t):Ju(t).Mo()&&lv(t,e))}function qf(n,e){const t=nt(n),r=Ju(t);t._u.delete(e),r.Mo()&&cv(t,e),0===t._u.size&&(r.Mo()?r.$o():Ya(t)&&t.yu.set("Unknown"))}function lv(n,e){n.pu.Z(e.targetId),Ju(n).Ho(e)}function cv(n,e){n.pu.Z(e),Ju(n).Jo(e)}function hm(n){n.pu=new cT({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>n._u.get(e)||null}),Ju(n).start(),n.yu.au()}function dv(n){return Ya(n)&&!Ju(n).ko()&&n._u.size>0}function Ya(n){return 0===nt(n).wu.size}function hv(n){n.pu=void 0}function JT(n){return fv.apply(this,arguments)}function fv(){return fv=(0,Ce.Z)(function*(n){n._u.forEach((e,t)=>{lv(n,e)})}),fv.apply(this,arguments)}function fb(n,e){return pv.apply(this,arguments)}function pv(){return pv=(0,Ce.Z)(function*(n,e){hv(n),dv(n)?(n.yu.lu(e),hm(n)):n.yu.set("Unknown")}),pv.apply(this,arguments)}function pb(n,e,t){return fm.apply(this,arguments)}function fm(){return fm=(0,Ce.Z)(function*(n,e,t){if(n.yu.set("Online"),e instanceof T_&&2===e.state&&e.cause)try{yield(r=(0,Ce.Z)(function*(s,u){const c=u.cause;for(const p of u.targetIds)s._u.has(p)&&(yield s.remoteSyncer.rejectListen(p,c),s._u.delete(p),s.pu.removeTarget(p))}),function(s,u){return r.apply(this,arguments)})(n,e)}catch(r){Be("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield Kf(n,r)}else if(e instanceof Cf?n.pu.ut(e):e instanceof D_?n.pu._t(e):n.pu.ht(e),!t.isEqual(Tt.min()))try{const r=yield eb(n.localStore);t.compareTo(r)>=0&&(yield function(s,u){const c=s.pu.yt(u);return c.targetChanges.forEach((p,_)=>{if(p.resumeToken.approximateByteSize()>0){const b=s._u.get(_);b&&s._u.set(_,b.withResumeToken(p.resumeToken,u))}}),c.targetMismatches.forEach(p=>{const _=s._u.get(p);if(!_)return;s._u.set(p,_.withResumeToken(Ir.EMPTY_BYTE_STRING,_.snapshotVersion)),cv(s,p);const b=new aa(_.target,p,1,_.sequenceNumber);lv(s,b)}),s.remoteSyncer.applyRemoteEvent(c)}(n,t))}catch(r){Be("RemoteStore","Failed to raise snapshot:",r),yield Kf(n,r)}var r}),fm.apply(this,arguments)}function Kf(n,e,t){return pm.apply(this,arguments)}function pm(){return pm=(0,Ce.Z)(function*(n,e,t){if(!Wu(e))throw e;n.wu.add(1),yield Qu(n),n.yu.set("Offline"),t||(t=()=>eb(n.localStore)),n.asyncQueue.enqueueRetryable((0,Ce.Z)(function*(){Be("RemoteStore","Retrying IndexedDB access"),yield t(),n.wu.delete(1),yield Yd(n)}))}),pm.apply(this,arguments)}function gb(n,e){return e().catch(t=>Kf(n,t,e))}function Qd(n){return mb.apply(this,arguments)}function mb(){return mb=(0,Ce.Z)(function*(n){const e=nt(n),t=Qa(e);let r=e.du.length>0?e.du[e.du.length-1].batchId:-1;for(;yb(e);)try{const s=yield Q_(e.localStore,r);if(null===s){0===e.du.length&&t.$o();break}r=s.batchId,ES(e,s)}catch(s){yield Kf(e,s)}XT(e)&&eC(e)}),mb.apply(this,arguments)}function yb(n){return Ya(n)&&n.du.length<10}function ES(n,e){n.du.push(e);const t=Qa(n);t.Mo()&&t.Xo&&t.Zo(e.mutations)}function XT(n){return Ya(n)&&!Qa(n).ko()&&n.du.length>0}function eC(n){Qa(n).start()}function wS(n){return _b.apply(this,arguments)}function _b(){return _b=(0,Ce.Z)(function*(n){Qa(n).nu()}),_b.apply(this,arguments)}function bS(n){return vb.apply(this,arguments)}function vb(){return vb=(0,Ce.Z)(function*(n){const e=Qa(n);for(const t of n.du)e.Zo(t.mutations)}),vb.apply(this,arguments)}function IS(n,e,t){return Jd.apply(this,arguments)}function Jd(){return Jd=(0,Ce.Z)(function*(n,e,t){const r=n.du.shift(),s=P_.from(r,e,t);yield gb(n,()=>n.remoteSyncer.applySuccessfulWrite(s)),yield Qd(n)}),Jd.apply(this,arguments)}function DS(n,e){return gm.apply(this,arguments)}function gm(){return gm=(0,Ce.Z)(function*(n,e){var t;e&&Qa(n).Xo&&(yield(t=(0,Ce.Z)(function*(r,s){if(uT(u=s.code)&&u!==fe.ABORTED){const c=r.du.shift();Qa(r).Fo(),yield gb(r,()=>r.remoteSyncer.rejectFailedWrite(c.batchId,s)),yield Qd(r)}var u}),function(r,s){return t.apply(this,arguments)})(n,e)),XT(n)&&eC(n)}),gm.apply(this,arguments)}function mm(n,e){return ym.apply(this,arguments)}function ym(){return ym=(0,Ce.Z)(function*(n,e){const t=nt(n);t.asyncQueue.verifyOperationInProgress(),Be("RemoteStore","RemoteStore received new credentials");const r=Ya(t);t.wu.add(3),yield Qu(t),r&&t.yu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.wu.delete(3),yield Yd(t)}),ym.apply(this,arguments)}function _m(n,e){return Eb.apply(this,arguments)}function Eb(){return Eb=(0,Ce.Z)(function*(n,e){const t=nt(n);e?(t.wu.delete(2),yield Yd(t)):e||(t.wu.add(2),yield Qu(t),t.yu.set("Unknown"))}),Eb.apply(this,arguments)}function Ju(n){return n.Iu||(n.Iu=function(e,t,r){const s=nt(e);return s.iu(),new vS(t,s.So,s.authCredentials,s.appCheckCredentials,s.M,r)}(n.datastore,n.asyncQueue,{Xr:JT.bind(null,n),eo:fb.bind(null,n),zo:pb.bind(null,n)}),n.mu.push(function(){var e=(0,Ce.Z)(function*(t){t?(n.Iu.Fo(),dv(n)?hm(n):n.yu.set("Unknown")):(yield n.Iu.stop(),hv(n))});return function(t){return e.apply(this,arguments)}}())),n.Iu}function Qa(n){return n.Tu||(n.Tu=function(e,t,r){const s=nt(e);return s.iu(),new db(t,s.So,s.authCredentials,s.appCheckCredentials,s.M,r)}(n.datastore,n.asyncQueue,{Xr:wS.bind(null,n),eo:DS.bind(null,n),eu:bS.bind(null,n),tu:IS.bind(null,n)}),n.mu.push(function(){var e=(0,Ce.Z)(function*(t){t?(n.Tu.Fo(),yield Qd(n)):(yield n.Tu.stop(),n.du.length>0&&(Be("RemoteStore",`Stopping write stream with ${n.du.length} pending writes`),n.du=[]))});return function(t){return e.apply(this,arguments)}}())),n.Tu}class gv{constructor(e,t,r,s,u){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=s,this.removalCallback=u,this.deferred=new Zr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(c=>{})}static createAndSchedule(e,t,r,s,u){const c=Date.now()+r,p=new gv(e,t,c,s,u);return p.start(r),p}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new ke(fe.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function uc(n,e){if(br("AsyncQueue",`${e}: ${n}`),Wu(n))return new ke(fe.UNAVAILABLE,`${e}: ${n}`);throw n}class Zf{constructor(e){this.comparator=e?(t,r)=>e(t,r)||Je.comparator(t.key,r.key):(t,r)=>Je.comparator(t.key,r.key),this.keyedMap=I_(),this.sortedSet=new rr(this.comparator)}static emptySet(e){return new Zf(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Zf)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const s=t.getNext().key,u=r.getNext().key;if(!s.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new Zf;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class wb{constructor(){this.Eu=new rr(Je.comparator)}track(e){const t=e.doc.key,r=this.Eu.get(t);r?0!==e.type&&3===r.type?this.Eu=this.Eu.insert(t,e):3===e.type&&1!==r.type?this.Eu=this.Eu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.Eu=this.Eu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.Eu=this.Eu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.Eu=this.Eu.remove(t):1===e.type&&2===r.type?this.Eu=this.Eu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.Eu=this.Eu.insert(t,{type:2,doc:e.doc}):ot():this.Eu=this.Eu.insert(t,e)}Au(){const e=[];return this.Eu.inorderTraversal((t,r)=>{e.push(r)}),e}}class Xd{constructor(e,t,r,s,u,c,p,_){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=u,this.fromCache=c,this.syncStateChanged=p,this.excludesMetadataChanges=_}static fromInitialDocuments(e,t,r,s){const u=[];return t.forEach(c=>{u.push({type:0,doc:c})}),new Xd(e,t,Zf.emptySet(t),u,r,s,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&kd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let s=0;s<t.length;s++)if(t[s].type!==r[s].type||!t[s].doc.isEqual(r[s].doc))return!1;return!0}}class mv{constructor(){this.Ru=void 0,this.listeners=[]}}class tC{constructor(){this.queries=new Hu(e=>v_(e),kd),this.onlineState="Unknown",this.bu=new Set}}function bb(n,e){return Ib.apply(this,arguments)}function Ib(){return Ib=(0,Ce.Z)(function*(n,e){const t=nt(n),r=e.query;let s=!1,u=t.queries.get(r);if(u||(s=!0,u=new mv),s)try{u.Ru=yield t.onListen(r)}catch(c){const p=uc(c,`Initialization of query '${Gg(e.query)}' failed`);return void e.onError(p)}t.queries.set(r,u),u.listeners.push(e),e.Pu(t.onlineState),u.Ru&&e.Vu(u.Ru)&&Tb(t)}),Ib.apply(this,arguments)}function Db(n,e){return yv.apply(this,arguments)}function yv(){return yv=(0,Ce.Z)(function*(n,e){const t=nt(n),r=e.query;let s=!1;const u=t.queries.get(r);if(u){const c=u.listeners.indexOf(e);c>=0&&(u.listeners.splice(c,1),s=0===u.listeners.length)}if(s)return t.queries.delete(r),t.onUnlisten(r)}),yv.apply(this,arguments)}function nC(n,e){const t=nt(n);let r=!1;for(const s of e){const c=t.queries.get(s.query);if(c){for(const p of c.listeners)p.Vu(s)&&(r=!0);c.Ru=s}}r&&Tb(t)}function rC(n,e,t){const r=nt(n),s=r.queries.get(e);if(s)for(const u of s.listeners)u.onError(t);r.queries.delete(e)}function Tb(n){n.bu.forEach(e=>{e.next()})}class _v{constructor(e,t,r){this.query=e,this.vu=t,this.Su=!1,this.Du=null,this.onlineState="Unknown",this.options=r||{}}Vu(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)3!==s.type&&r.push(s);e=new Xd(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let t=!1;return this.Su?this.Cu(e)&&(this.vu.next(e),t=!0):this.xu(e,this.onlineState)&&(this.Nu(e),t=!0),this.Du=e,t}onError(e){this.vu.error(e)}Pu(e){this.onlineState=e;let t=!1;return this.Du&&!this.Su&&this.xu(this.Du,e)&&(this.Nu(this.Du),t=!0),t}xu(e,t){return!e.fromCache||!(this.options.ku&&"Offline"!==t||e.docs.isEmpty()&&"Offline"!==t)}Cu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Du&&this.Du.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Nu(e){e=Xd.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.Su=!0,this.vu.next(e)}}class vv{constructor(e,t){this.payload=e,this.byteLength=t}Mu(){return"metadata"in this.payload}}class Cb{constructor(e){this.M=e}wi(e){return sa(this.M,e)}mi(e){return e.metadata.exists?_w(this.M,e.document,!1):Bn.newNoDocument(this.wi(e.metadata.name),this.gi(e.metadata.readTime))}gi(e){return kr(e)}}class Do{constructor(e,t,r){this.Ou=e,this.localStore=t,this.M=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=Ab(e)}Fu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t;const r=un.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}$u(e){const t=new Map,r=new Cb(this.M);for(const s of e)if(s.metadata.queries){const u=r.wi(s.metadata.name);for(const c of s.metadata.queries){const p=(t.get(c)||bn()).add(u);t.set(c,p)}}return t}complete(){var e=this;return(0,Ce.Z)(function*(){const t=yield function tv(n,e,t,r){return Gf.apply(this,arguments)}(e.localStore,new Cb(e.M),e.documents,e.Ou.id),r=e.$u(e.documents);for(const s of e.queries)yield GT(e.localStore,s,r.get(s.name));return e.progress.taskState="Success",{progress:e.progress,Bu:e.collectionGroups,Lu:t}})()}}function Ab(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class vm{constructor(e){this.key=e}}class Sb{constructor(e){this.key=e}}class Mb{constructor(e,t){this.query=e,this.Uu=t,this.qu=null,this.current=!1,this.Ku=bn(),this.mutatedKeys=bn(),this.Gu=J0(e),this.Qu=new Zf(this.Gu)}get ju(){return this.Uu}Wu(e,t){const r=t?t.zu:new wb,s=t?t.Qu:this.Qu;let u=t?t.mutatedKeys:this.mutatedKeys,c=s,p=!1;const _="F"===this.query.limitType&&s.size===this.query.limit?s.last():null,b="L"===this.query.limitType&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((A,x)=>{const V=s.get(A),q=zg(this.query,x)?x:null,Y=!!V&&this.mutatedKeys.has(V.key),ve=!!q&&(q.hasLocalMutations||this.mutatedKeys.has(q.key)&&q.hasCommittedMutations);let Ue=!1;V&&q?V.data.isEqual(q.data)?Y!==ve&&(r.track({type:3,doc:q}),Ue=!0):this.Hu(V,q)||(r.track({type:2,doc:q}),Ue=!0,(_&&this.Gu(q,_)>0||b&&this.Gu(q,b)<0)&&(p=!0)):!V&&q?(r.track({type:0,doc:q}),Ue=!0):V&&!q&&(r.track({type:1,doc:V}),Ue=!0,(_||b)&&(p=!0)),Ue&&(q?(c=c.add(q),u=ve?u.add(A):u.delete(A)):(c=c.delete(A),u=u.delete(A)))}),null!==this.query.limit)for(;c.size>this.query.limit;){const A="F"===this.query.limitType?c.last():c.first();c=c.delete(A.key),u=u.delete(A.key),r.track({type:1,doc:A})}return{Qu:c,zu:r,ii:p,mutatedKeys:u}}Hu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const s=this.Qu;this.Qu=e.Qu,this.mutatedKeys=e.mutatedKeys;const u=e.zu.Au();u.sort((b,A)=>function(x,V){const q=Y=>{switch(Y){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ot()}};return q(x)-q(V)}(b.type,A.type)||this.Gu(b.doc,A.doc)),this.Ju(r);const c=t?this.Yu():[],p=0===this.Ku.size&&this.current?1:0,_=p!==this.qu;return this.qu=p,0!==u.length||_?{snapshot:new Xd(this.query,e.Qu,s,u,e.mutatedKeys,0===p,_,!1),Xu:c}:{Xu:c}}Pu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Qu:this.Qu,zu:new wb,mutatedKeys:this.mutatedKeys,ii:!1},!1)):{Xu:[]}}Zu(e){return!this.Uu.has(e)&&!!this.Qu.has(e)&&!this.Qu.get(e).hasLocalMutations}Ju(e){e&&(e.addedDocuments.forEach(t=>this.Uu=this.Uu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Uu=this.Uu.delete(t)),this.current=e.current)}Yu(){if(!this.current)return[];const e=this.Ku;this.Ku=bn(),this.Qu.forEach(r=>{this.Zu(r.key)&&(this.Ku=this.Ku.add(r.key))});const t=[];return e.forEach(r=>{this.Ku.has(r)||t.push(new Sb(r))}),this.Ku.forEach(r=>{e.has(r)||t.push(new vm(r))}),t}ta(e){this.Uu=e._i,this.Ku=bn();const t=this.Wu(e.documents);return this.applyChanges(t,!0)}ea(){return Xd.fromInitialDocuments(this.query,this.Qu,this.mutatedKeys,0===this.qu)}}class Ev{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class xb{constructor(e){this.key=e,this.na=!1}}class Nb{constructor(e,t,r,s,u,c){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=s,this.currentUser=u,this.maxConcurrentLimboResolutions=c,this.sa={},this.ia=new Hu(p=>v_(p),kd),this.ra=new Map,this.oa=new Set,this.ua=new rr(Je.comparator),this.aa=new Map,this.ca=new om,this.ha={},this.la=new Map,this.fa=ec.yn(),this.onlineState="Unknown",this.da=void 0}get isPrimaryClient(){return!0===this.da}}function iC(n,e){return Em.apply(this,arguments)}function Em(){return Em=(0,Ce.Z)(function*(n,e){const t=Xa(n);let r,s;const u=t.ia.get(e);if(u)r=u.targetId,t.sharedClientState.addLocalQueryTarget(r),s=u.view.ea();else{const c=yield oc(t.localStore,gs(e));t.isPrimaryClient&&uv(t.remoteStore,c);const p=t.sharedClientState.addLocalQueryTarget(c.targetId);r=c.targetId,s=yield wv(t,e,r,"current"===p)}return s}),Em.apply(this,arguments)}function wv(n,e,t,r){return bv.apply(this,arguments)}function bv(){return bv=(0,Ce.Z)(function*(n,e,t,r){n._a=(A,x,V)=>{return(q=(0,Ce.Z)(function*(Y,ve,Ue,_t){let wt=ve.view.Wu(Ue);wt.ii&&(wt=yield X_(Y.localStore,ve.query,!1).then(({documents:Bt})=>ve.view.Wu(Bt,wt)));const Ct=_t&&_t.targetChanges.get(ve.targetId),ft=ve.view.applyChanges(wt,Y.isPrimaryClient,Ct);return Jf(Y,ve.targetId,ft.Xu),ft.snapshot}),function(Y,ve,Ue,_t){return q.apply(this,arguments)})(n,A,x,V);var q};const s=yield X_(n.localStore,e,!0),u=new Mb(e,s._i),c=u.Wu(s.documents),p=Vd.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState),_=u.applyChanges(c,n.isPrimaryClient,p);Jf(n,t,_.Xu);const b=new Ev(e,t,u);return n.ia.set(e,b),n.ra.has(t)?n.ra.get(t).push(e):n.ra.set(t,[e]),_.snapshot}),bv.apply(this,arguments)}function sC(n,e){return Yf.apply(this,arguments)}function Yf(){return Yf=(0,Ce.Z)(function*(n,e){const t=nt(n),r=t.ia.get(e),s=t.ra.get(r.targetId);if(s.length>1)return t.ra.set(r.targetId,s.filter(u=>!kd(u,e))),void t.ia.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield qd(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),qf(t.remoteStore,r.targetId),eh(t,r.targetId)}).catch(tc))):(eh(t,r.targetId),yield qd(t.localStore,r.targetId,!0))}),Yf.apply(this,arguments)}function wm(){return wm=(0,Ce.Z)(function*(n,e,t){const r=Sm(n);try{const s=yield function(u,c){const p=nt(u),_=gr.now(),b=c.reduce((x,V)=>x.add(V.key),bn());let A;return p.persistence.runTransaction("Locally write mutations","readwrite",x=>p.fi.Ks(x,b).next(V=>{A=V;const q=[];for(const Y of c){const ve=cw(Y,A.get(Y.key));null!=ve&&q.push(new ms(Y.key,ve,XD(ve.value.mapValue),mr.exists(!0)))}return p.Bs.addMutationBatch(x,_,q,c)})).then(x=>(x.applyToLocalDocumentSet(A),{batchId:x.batchId,changes:A}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(u,c,p){let _=u.ha[u.currentUser.toKey()];_||(_=new rr(Gt)),_=_.insert(c,p),u.ha[u.currentUser.toKey()]=_}(r,s.batchId,t),yield Ja(r,s.changes),yield Qd(r.remoteStore)}catch(s){const u=uc(s,"Failed to persist write");t.reject(u)}}),wm.apply(this,arguments)}function Iv(n,e){return Dv.apply(this,arguments)}function Dv(){return Dv=(0,Ce.Z)(function*(n,e){const t=nt(n);try{const r=yield tb(t.localStore,e);e.targetChanges.forEach((s,u)=>{const c=t.aa.get(u);c&&(xt(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?c.na=!0:s.modifiedDocuments.size>0?xt(c.na):s.removedDocuments.size>0&&(xt(c.na),c.na=!1))}),yield Ja(t,r,e)}catch(r){yield tc(r)}}),Dv.apply(this,arguments)}function oC(n,e,t){const r=nt(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const s=[];r.ia.forEach((u,c)=>{const p=c.view.Pu(e);p.snapshot&&s.push(p.snapshot)}),function(u,c){const p=nt(u);p.onlineState=c;let _=!1;p.queries.forEach((b,A)=>{for(const x of A.listeners)x.Pu(c)&&(_=!0)}),_&&Tb(p)}(r.eventManager,e),s.length&&r.sa.zo(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function aC(n,e,t){return Tv.apply(this,arguments)}function Tv(){return Tv=(0,Ce.Z)(function*(n,e,t){const r=nt(n);r.sharedClientState.updateQueryState(e,"rejected",t);const s=r.aa.get(e),u=s&&s.key;if(u){let c=new rr(Je.comparator);c=c.insert(u,Bn.newNoDocument(u,Tt.min()));const p=bn().add(u),_=new Tf(Tt.min(),new Map,new Nn(Gt),c,p);yield Iv(r,_),r.ua=r.ua.remove(u),r.aa.delete(e),Dm(r)}else yield qd(r.localStore,e,!1).then(()=>eh(r,e,t)).catch(tc)}),Tv.apply(this,arguments)}function uC(n,e){return bm.apply(this,arguments)}function bm(){return bm=(0,Ce.Z)(function*(n,e){const t=nt(n),r=e.batch.batchId;try{const s=yield HT(t.localStore,e);Av(t,r,null),Im(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Ja(t,s)}catch(s){yield tc(s)}}),bm.apply(this,arguments)}function lC(n,e,t){return Cv.apply(this,arguments)}function Cv(){return Cv=(0,Ce.Z)(function*(n,e,t){const r=nt(n);try{const s=yield function(u,c){const p=nt(u);return p.persistence.runTransaction("Reject batch","readwrite-primary",_=>{let b;return p.Bs.lookupMutationBatch(_,c).next(A=>(xt(null!==A),b=A.keys(),p.Bs.removeMutationBatch(_,A))).next(()=>p.Bs.performConsistencyCheck(_)).next(()=>p.fi.Ks(_,b))})}(r.localStore,e);Av(r,e,t),Im(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Ja(r,s)}catch(s){yield tc(s)}}),Cv.apply(this,arguments)}function Qf(){return Qf=(0,Ce.Z)(function*(n,e){const t=nt(n);Ya(t.remoteStore)||Be("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(u){const c=nt(u);return c.persistence.runTransaction("Get highest unacknowledged batch id","readonly",p=>c.Bs.getHighestUnacknowledgedBatchId(p))}(t.localStore);if(-1===r)return void e.resolve();const s=t.la.get(r)||[];s.push(e),t.la.set(r,s)}catch(r){const s=uc(r,"Initialization of waitForPendingWrites() operation failed");e.reject(s)}}),Qf.apply(this,arguments)}function Im(n,e){(n.la.get(e)||[]).forEach(t=>{t.resolve()}),n.la.delete(e)}function Av(n,e,t){const r=nt(n);let s=r.ha[r.currentUser.toKey()];if(s){const u=s.get(e);u&&(t?u.reject(t):u.resolve(),s=s.remove(e)),r.ha[r.currentUser.toKey()]=s}}function eh(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.ra.get(e))n.ia.delete(r),t&&n.sa.wa(r,t);n.ra.delete(e),n.isPrimaryClient&&n.ca.vi(e).forEach(r=>{n.ca.containsKey(r)||Sv(n,r)})}function Sv(n,e){n.oa.delete(e.path.canonicalString());const t=n.ua.get(e);null!==t&&(qf(n.remoteStore,t),n.ua=n.ua.remove(e),n.aa.delete(t),Dm(n))}function Jf(n,e,t){for(const r of t)r instanceof vm?(n.ca.addReference(r.key,e),Mv(n,r)):r instanceof Sb?(Be("SyncEngine","Document no longer in limbo: "+r.key),n.ca.removeReference(r.key,e),n.ca.containsKey(r.key)||Sv(n,r.key)):ot()}function Mv(n,e){const t=e.key,r=t.path.canonicalString();n.ua.get(t)||n.oa.has(r)||(Be("SyncEngine","New document in limbo: "+t),n.oa.add(r),Dm(n))}function Dm(n){for(;n.oa.size>0&&n.ua.size<n.maxConcurrentLimboResolutions;){const e=n.oa.values().next().value;n.oa.delete(e);const t=new Je(un.fromString(e)),r=n.fa.next();n.aa.set(r,new xb(t)),n.ua=n.ua.insert(t,r),uv(n.remoteStore,new aa(gs(Od(t.path)),r,2,fs.A))}}function Ja(n,e,t){return Tm.apply(this,arguments)}function Tm(){return Tm=(0,Ce.Z)(function*(n,e,t){const r=nt(n),s=[],u=[],c=[];var p;r.ia.isEmpty()||(r.ia.forEach((p,_)=>{c.push(r._a(_,e,t).then(b=>{if(b){r.isPrimaryClient&&r.sharedClientState.updateQueryState(_.targetId,b.fromCache?"not-current":"current"),s.push(b);const A=sc.Ys(_.targetId,b);u.push(A)}}))}),yield Promise.all(c),r.sa.zo(s),yield(p=(0,Ce.Z)(function*(_,b){const A=nt(_);try{yield A.persistence.runTransaction("notifyLocalViewChanges","readwrite",x=>pe.forEach(b,V=>pe.forEach(V.Hs,q=>A.persistence.referenceDelegate.addReference(x,V.targetId,q)).next(()=>pe.forEach(V.Js,q=>A.persistence.referenceDelegate.removeReference(x,V.targetId,q)))))}catch(x){if(!Wu(x))throw x;Be("LocalStore","Failed to update sequence numbers: "+x)}for(const x of b){const V=x.targetId;if(!x.fromCache){const q=A.ui.get(V),ve=q.withLastLimboFreeSnapshotVersion(q.snapshotVersion);A.ui=A.ui.insert(V,ve)}}}),function(_,b){return p.apply(this,arguments)})(r.localStore,u))}),Tm.apply(this,arguments)}function Rb(n,e){return xv.apply(this,arguments)}function xv(){return xv=(0,Ce.Z)(function*(n,e){const t=nt(n);if(!t.currentUser.isEqual(e)){Be("SyncEngine","User change. New user:",e.toKey());const r=yield Hf(t.localStore,e);t.currentUser=e,(s=t).la.forEach(c=>{c.forEach(p=>{p.reject(new ke(fe.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),s.la.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Ja(t,r.di)}var s}),xv.apply(this,arguments)}function cC(n,e){const t=nt(n),r=t.aa.get(e);if(r&&r.na)return bn().add(r.key);{let s=bn();const u=t.ra.get(e);if(!u)return s;for(const c of u){const p=t.ia.get(c);s=s.unionWith(p.view.ju)}return s}}function CS(n,e){return Ob.apply(this,arguments)}function Ob(){return Ob=(0,Ce.Z)(function*(n,e){const t=nt(n),r=yield X_(t.localStore,e.query,!0),s=e.view.ta(r);return t.isPrimaryClient&&Jf(t,e.targetId,s.Xu),s}),Ob.apply(this,arguments)}function Pb(n,e){return Nv.apply(this,arguments)}function Nv(){return Nv=(0,Ce.Z)(function*(n,e){const t=nt(n);return sm(t.localStore,e).then(r=>Ja(t,r))}),Nv.apply(this,arguments)}function dC(n,e,t,r){return Rv.apply(this,arguments)}function Rv(){return Rv=(0,Ce.Z)(function*(n,e,t,r){const s=nt(n),u=yield function(c,p){const _=nt(c),b=nt(_.Bs);return _.persistence.runTransaction("Lookup mutation documents","readonly",A=>b.fn(A,p).next(x=>x?_.fi.Ks(A,x):pe.resolve(null)))}(s.localStore,e);var p;null!==u?("pending"===t?yield Qd(s.remoteStore):"acknowledged"===t||"rejected"===t?(Av(s,e,r||null),Im(s,e),p=e,nt(nt(s.localStore).Bs)._n(p)):ot(),yield Ja(s,u)):Be("SyncEngine","Cannot apply mutation batch with id: "+e)}),Rv.apply(this,arguments)}function kb(){return kb=(0,Ce.Z)(function*(n,e){const t=nt(n);if(Xa(t),Sm(t),!0===e&&!0!==t.da){const r=t.sharedClientState.getAllActiveQueryTargets(),s=yield hC(t,r.toArray());t.da=!0,yield _m(t.remoteStore,!0);for(const u of s)uv(t.remoteStore,u)}else if(!1===e&&!1!==t.da){const r=[];let s=Promise.resolve();t.ra.forEach((u,c)=>{t.sharedClientState.isLocalQueryTarget(c)?r.push(c):s=s.then(()=>(eh(t,c),qd(t.localStore,c,!0))),qf(t.remoteStore,c)}),yield s,yield hC(t,r),function(u){const c=nt(u);c.aa.forEach((p,_)=>{qf(c.remoteStore,_)}),c.ca.Si(),c.aa=new Map,c.ua=new rr(Je.comparator)}(t),t.da=!1,yield _m(t.remoteStore,!1)}}),kb.apply(this,arguments)}function hC(n,e,t){return Fb.apply(this,arguments)}function Fb(){return Fb=(0,Ce.Z)(function*(n,e,t){const r=nt(n),s=[],u=[];for(const c of e){let p;const _=r.ra.get(c);if(_&&0!==_.length){p=yield oc(r.localStore,gs(_[0]));for(const b of _){const A=r.ia.get(b),x=yield CS(r,A);x.snapshot&&u.push(x.snapshot)}}else{const b=yield im(r.localStore,c);p=yield oc(r.localStore,b),yield wv(r,fC(b),c,!1)}s.push(p)}return r.sa.zo(u),s}),Fb.apply(this,arguments)}function fC(n){return vf(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function pC(n){const e=nt(n);return nt(nt(e.localStore).persistence).Fs()}function Cm(n,e,t,r){return Ov.apply(this,arguments)}function Ov(){return Ov=(0,Ce.Z)(function*(n,e,t,r){const s=nt(n);if(s.da)return void Be("SyncEngine","Ignoring unexpected query state notification.");const u=s.ra.get(e);if(u&&u.length>0)switch(t){case"current":case"not-current":{const c=yield sm(s.localStore,E_(u[0])),p=Tf.createSynthesizedRemoteEventForCurrentChange(e,"current"===t);yield Ja(s,c,p);break}case"rejected":yield qd(s.localStore,e,!0),eh(s,e,r);break;default:ot()}}),Ov.apply(this,arguments)}function gC(n,e,t){return Am.apply(this,arguments)}function Am(){return Am=(0,Ce.Z)(function*(n,e,t){const r=Xa(n);if(r.da){for(const s of e){if(r.ra.has(s)){Be("SyncEngine","Adding an already active target "+s);continue}const u=yield im(r.localStore,s),c=yield oc(r.localStore,u);yield wv(r,fC(u),c.targetId,!1),uv(r.remoteStore,c)}for(const s of t)r.ra.has(s)&&(yield qd(r.localStore,s,!1).then(()=>{qf(r.remoteStore,s),eh(r,s)}).catch(tc))}}),Am.apply(this,arguments)}function Xa(n){const e=nt(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=Iv.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=cC.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=aC.bind(null,e),e.sa.zo=nC.bind(null,e.eventManager),e.sa.wa=rC.bind(null,e.eventManager),e}function Sm(n){const e=nt(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=uC.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=lC.bind(null,e),e}class Mm{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,Ce.Z)(function*(){t.M=Kd(e.databaseInfo.databaseId),t.sharedClientState=t.ga(e),t.persistence=t.ya(e),yield t.persistence.start(),t.gcScheduler=t.pa(e),t.localStore=t.Ia(e)})()}pa(e){return null}Ia(e){return Xw(this.persistence,new Jw,e.initialUser,this.M)}ya(e){return new KT(am.Yi,this.M)}ga(e){return new ub}terminate(){var e=this;return(0,Ce.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class Lb extends Mm{constructor(e,t,r){super(),this.Ta=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,Ce.Z)(function*(){yield t().call(r,e),yield r.Ta.initialize(r,e),yield Sm(r.Ta.syncEngine),yield Qd(r.Ta.remoteStore),yield r.persistence.Ts(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(r.localStore),Promise.resolve()))})()}Ia(e){return Xw(this.persistence,new Jw,e.initialUser,this.M)}pa(e){return new BT(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue)}ya(e){const t=K_(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?ys.withCacheSize(this.cacheSizeBytes):ys.DEFAULT;return new q_(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,lm(),zf(),this.M,this.sharedClientState,!!this.forceOwnership)}ga(e){return new ub}}class kv extends Lb{constructor(e,t){super(e,t,!1),this.Ta=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,Ce.Z)(function*(){yield t().call(r,e);const s=r.Ta.syncEngine;r.sharedClientState instanceof ac&&(r.sharedClientState.syncEngine={$r:dC.bind(null,s),Br:Cm.bind(null,s),Lr:gC.bind(null,s),Fs:pC.bind(null,s),Fr:Pb.bind(null,s)},yield r.sharedClientState.start()),yield r.persistence.Ts(function(){var u=(0,Ce.Z)(function*(c){yield function AS(n,e){return kb.apply(this,arguments)}(r.Ta.syncEngine,c),r.gcScheduler&&(c&&!r.gcScheduler.started?r.gcScheduler.start(r.localStore):c||r.gcScheduler.stop())});return function(c){return u.apply(this,arguments)}}())})()}ga(e){const t=lm();if(!ac.vt(t))throw new ke(fe.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=K_(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new ac(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class Xf{initialize(e,t){var r=this;return(0,Ce.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=s=>oC(r.syncEngine,s,1),r.remoteStore.remoteSyncer.handleCredentialChange=Rb.bind(null,r.syncEngine),yield _m(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new tC}createDatastore(e){const t=Kd(e.databaseInfo.databaseId),r=new YT(e.databaseInfo);return new QT(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,s=e.asyncQueue,u=p=>oC(this.syncEngine,p,0),c=lb.vt()?new lb:new ov,new dm(t,r,s,u,c);var t,r,s,u,c}createSyncEngine(e,t){return function(r,s,u,c,p,_,b){const A=new Nb(r,s,u,c,p,_);return b&&(A.da=!0),A}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,Ce.Z)(function*(t){const r=nt(t);Be("RemoteStore","RemoteStore shutting down."),r.wu.add(5),yield Qu(r),r.gu.shutdown(),r.yu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function ep(n,e=10240){let t=0;return{read:()=>(0,Ce.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,Ce.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class Fv{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ea(this.observer.next,e)}error(e){this.observer.error?this.Ea(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}Aa(){this.muted=!0}Ea(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class SS{constructor(e,t){this.Ra=e,this.M=t,this.metadata=new Zr,this.buffer=new Uint8Array,this.ba=new TextDecoder("utf-8"),this.Pa().then(r=>{r&&r.Mu()?this.metadata.resolve(r.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==r?void 0:r.payload)}`))},r=>this.metadata.reject(r))}close(){return this.Ra.cancel()}getMetadata(){var e=this;return(0,Ce.Z)(function*(){return e.metadata.promise})()}ma(){var e=this;return(0,Ce.Z)(function*(){return yield e.getMetadata(),e.Pa()})()}Pa(){var e=this;return(0,Ce.Z)(function*(){const t=yield e.Va();if(null===t)return null;const r=e.ba.decode(t),s=Number(r);isNaN(s)&&e.va(`length string (${r}) is not valid number`);const u=yield e.Sa(s);return new vv(JSON.parse(u),t.length+s)})()}Da(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Va(){var e=this;return(0,Ce.Z)(function*(){for(;e.Da()<0&&!(yield e.Ca()););if(0===e.buffer.length)return null;const t=e.Da();t<0&&e.va("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}Sa(e){var t=this;return(0,Ce.Z)(function*(){for(;t.buffer.length<e;)(yield t.Ca())&&t.va("Reached the end of bundle when more is expected.");const r=t.ba.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}va(e){throw this.Ra.cancel(),new Error(`Invalid bundle format: ${e}`)}Ca(){var e=this;return(0,Ce.Z)(function*(){const t=yield e.Ra.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class MS{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,Ce.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new ke(fe.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(s=(0,Ce.Z)(function*(u,c){const p=nt(u),_=jd(p.M)+"/documents",b={documents:c.map(q=>qa(p.M,q))},A=yield p._o("BatchGetDocuments",_,b),x=new Map;A.forEach(q=>{const Y=function vw(n,e){return"found"in e?function(t,r){xt(!!r.found);const s=sa(t,r.found.name),u=kr(r.found.updateTime),c=new ai({mapValue:{fields:r.found.fields}});return Bn.newFoundDocument(s,u,c)}(n,e):"missing"in e?function(t,r){xt(!!r.missing),xt(!!r.readTime);const s=sa(t,r.missing),u=kr(r.readTime);return Bn.newNoDocument(s,u)}(n,e):ot()}(p.M,q);x.set(Y.key.toString(),Y)});const V=[];return c.forEach(q=>{const Y=x.get(q.toString());xt(!!Y),V.push(Y)}),V}),function(u,c){return s.apply(this,arguments)})(t.datastore,e);var s;return r.forEach(s=>t.recordVersion(s)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Kg(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,Ce.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,s)=>{const u=Je.fromPath(s);e.mutations.push(new Df(u,e.precondition(u)))}),yield(r=(0,Ce.Z)(function*(s,u){const c=nt(s),p=jd(c.M)+"/documents",_={writes:u.map(b=>Af(c.M,b))};yield c.co("Commit",p,_)}),function(s,u){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw ot();t=Tt.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new ke(fe.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?mr.updateTime(t):mr.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Tt.min()))throw new ke(fe.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return mr.updateTime(t)}return mr.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class xS{constructor(e,t,r,s,u){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=s,this.deferred=u,this.xa=r.maxAttempts,this.No=new Zd(this.asyncQueue,"transaction_retry")}run(){this.xa-=1,this.Na()}Na(){var e=this;this.No.Ro((0,Ce.Z)(function*(){const t=new MS(e.datastore),r=e.ka(t);r&&r.then(s=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(s)}).catch(u=>{e.Ma(u)}))}).catch(s=>{e.Ma(s)})}))}ka(e){try{const t=this.updateFunction(e);return!ju(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Ma(e){this.xa>0&&this.Oa(e)?(this.xa-=1,this.asyncQueue.enqueueAndForget(()=>(this.Na(),Promise.resolve()))):this.deferred.reject(e)}Oa(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||!uT(t)}return!1}}class Vb{constructor(e,t,r,s){var u=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=s,this.user=oi.UNAUTHENTICATED,this.clientId=V0.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var c=(0,Ce.Z)(function*(p){Be("FirestoreClient","Received user=",p.uid),yield u.authCredentialListener(p),u.user=p});return function(p){return c.apply(this,arguments)}}()),this.appCheckCredentials.start(r,c=>(Be("FirestoreClient","Received new app check token=",c),this.appCheckCredentialListener(c,this.user)))}getConfiguration(){var e=this;return(0,Ce.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new ke(fe.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Zr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,Ce.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const s=uc(r,"Failed to shutdown persistence");t.reject(s)}})),t.promise}}function Ub(n,e){return Lv.apply(this,arguments)}function Lv(){return Lv=(0,Ce.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),Be("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var s=(0,Ce.Z)(function*(u){r.isEqual(u)||(yield Hf(e.localStore,u),r=u)});return function(u){return s.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e}),Lv.apply(this,arguments)}function Bb(n,e){return Vv.apply(this,arguments)}function Vv(){return Vv=(0,Ce.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield xm(n);Be("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(s=>mm(e.remoteStore,s)),n.setAppCheckTokenChangeListener((s,u)=>mm(e.remoteStore,u)),n.onlineComponents=e}),Vv.apply(this,arguments)}function xm(n){return Nm.apply(this,arguments)}function Nm(){return Nm=(0,Ce.Z)(function*(n){return n.offlineComponents||(Be("FirestoreClient","Using default OfflineComponentProvider"),yield Ub(n,new Mm)),n.offlineComponents}),Nm.apply(this,arguments)}function tp(n){return Uv.apply(this,arguments)}function Uv(){return Uv=(0,Ce.Z)(function*(n){return n.onlineComponents||(Be("FirestoreClient","Using default OnlineComponentProvider"),yield Bb(n,new Xf)),n.onlineComponents}),Uv.apply(this,arguments)}function jb(n){return xm(n).then(e=>e.persistence)}function Rm(n){return xm(n).then(e=>e.localStore)}function Om(n){return tp(n).then(e=>e.remoteStore)}function $b(n){return tp(n).then(e=>e.syncEngine)}function cc(n){return np.apply(this,arguments)}function np(){return np=(0,Ce.Z)(function*(n){const e=yield tp(n),t=e.eventManager;return t.onListen=iC.bind(null,e.syncEngine),t.onUnlisten=sC.bind(null,e.syncEngine),t}),np.apply(this,arguments)}function _C(n,e,t={}){const r=new Zr;return n.asyncQueue.enqueueAndForget((0,Ce.Z)(function*(){return function(s,u,c,p,_){const b=new Fv({next:x=>{u.enqueueAndForget(()=>Db(s,A));const V=x.docs.has(c);!V&&x.fromCache?_.reject(new ke(fe.UNAVAILABLE,"Failed to get document because the client is offline.")):V&&x.fromCache&&p&&"server"===p.source?_.reject(new ke(fe.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):_.resolve(x)},error:x=>_.reject(x)}),A=new _v(Od(c.path),b,{includeMetadataChanges:!0,ku:!0});return bb(s,A)}(yield cc(n),n.asyncQueue,e,t,r)})),r.promise}function Hb(n,e,t={}){const r=new Zr;return n.asyncQueue.enqueueAndForget((0,Ce.Z)(function*(){return function(s,u,c,p,_){const b=new Fv({next:x=>{u.enqueueAndForget(()=>Db(s,A)),x.fromCache&&"server"===p.source?_.reject(new ke(fe.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):_.resolve(x)},error:x=>_.reject(x)}),A=new _v(c,b,{includeMetadataChanges:!0,ku:!0});return bb(s,A)}(yield cc(n),n.asyncQueue,e,t,r)})),r.promise}const EC=new Map;function Bv(n,e,t){if(!t)throw new ke(fe.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function wC(n,e,t,r){if(!0===e&&!0===r)throw new ke(fe.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function bC(n){if(!Je.isDocumentKey(n))throw new ke(fe.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function IC(n){if(Je.isDocumentKey(n))throw new ke(fe.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function jv(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":ot()}function i(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new ke(fe.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=jv(n);throw new ke(fe.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function o(n,e){if(e<=0)throw new ke(fe.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class a{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new ke(fe.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new ke(fe.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,wC("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class l{constructor(e,t,r){this._authCredentials=t,this._appCheckCredentials=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new a({}),this._settingsFrozen=!1,e instanceof Ks?this._databaseId=e:(this._app=e,this._databaseId=function(s){if(!Object.prototype.hasOwnProperty.apply(s.options,["projectId"]))throw new ke(fe.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ks(s.options.projectId)}(e))}get app(){if(!this._app)throw new ke(fe.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new ke(fe.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new a(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new gS;switch(t.type){case"gapi":const r=t.client;return xt(!("object"!=typeof r||null===r||!r.auth||!r.auth.getAuthHeaderValueForFirstParty)),new P0(r,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new ke(fe.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=EC.get(e);t&&(Be("ComponentProvider","Removing Datastore"),EC.delete(e),t.terminate())}(this),Promise.resolve()}}class f{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new E(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new f(this.firestore,e,this._key)}}class y{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new y(this.firestore,e,this._query)}}class E extends y{constructor(e,t,r){super(e,t,Od(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new f(this.firestore,null,new Je(e))}withConverter(e){return new E(this.firestore,e,this._path)}}function I(n,e,...t){if(n=(0,Jt.m9)(n),Bv("collection","path",e),n instanceof l){const r=un.fromString(e,...t);return IC(r),new E(n,null,r)}{if(!(n instanceof f||n instanceof E))throw new ke(fe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(un.fromString(e,...t));return IC(r),new E(n.firestore,null,r)}}function M(n,e,...t){if(n=(0,Jt.m9)(n),1===arguments.length&&(e=V0.R()),Bv("doc","path",e),n instanceof l){const r=un.fromString(e,...t);return bC(r),new f(n,null,new Je(r))}{if(!(n instanceof f||n instanceof E))throw new ke(fe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(un.fromString(e,...t));return bC(r),new f(n.firestore,n instanceof E?n.converter:null,new Je(r))}}function k(n,e){return n=(0,Jt.m9)(n),e=(0,Jt.m9)(e),(n instanceof f||n instanceof E)&&(e instanceof f||e instanceof E)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function $(n,e){return n=(0,Jt.m9)(n),e=(0,Jt.m9)(e),n instanceof y&&e instanceof y&&n.firestore===e.firestore&&kd(n._query,e._query)&&n.converter===e.converter}class ee{constructor(){this.Fa=Promise.resolve(),this.$a=[],this.Ba=!1,this.La=[],this.Ua=null,this.qa=!1,this.Ka=!1,this.Ga=[],this.No=new Zd(this,"async_queue_retry"),this.Qa=()=>{const t=zf();t&&Be("AsyncQueue","Visibility state changed to "+t.visibilityState),this.No.Po()};const e=zf();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Qa)}get isShuttingDown(){return this.Ba}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ja(),this.Wa(e)}enterRestrictedMode(e){if(!this.Ba){this.Ba=!0,this.Ka=e||!1;const t=zf();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Qa)}}enqueue(e){if(this.ja(),this.Ba)return new Promise(()=>{});const t=new Zr;return this.Wa(()=>this.Ba&&this.Ka?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.$a.push(e),this.za()))}za(){var e=this;return(0,Ce.Z)(function*(){if(0!==e.$a.length){try{yield e.$a[0](),e.$a.shift(),e.No.reset()}catch(t){if(!Wu(t))throw t;Be("AsyncQueue","Operation failed with retryable error: "+t)}e.$a.length>0&&e.No.Ro(()=>e.za())}})()}Wa(e){const t=this.Fa.then(()=>(this.qa=!0,e().catch(r=>{throw this.Ua=r,this.qa=!1,br("INTERNAL UNHANDLED ERROR: ",function(u){let c=u.message||"";return u.stack&&(c=u.stack.includes(u.message)?u.stack:u.message+"\n"+u.stack),c}(r)),r}).then(r=>(this.qa=!1,r))));return this.Fa=t,t}enqueueAfterDelay(e,t,r){this.ja(),this.Ga.indexOf(e)>-1&&(t=0);const s=gv.createAndSchedule(this,e,t,r,u=>this.Ha(u));return this.La.push(s),s}ja(){this.Ua&&ot()}verifyOperationInProgress(){}Ja(){var e=this;return(0,Ce.Z)(function*(){let t;do{t=e.Fa,yield t}while(t!==e.Fa)})()}Ya(e){for(const t of this.La)if(t.timerId===e)return!0;return!1}Xa(e){return this.Ja().then(()=>{this.La.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.La)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Ja()})}Za(e){this.Ga.push(e)}Ha(e){const t=this.La.indexOf(e);this.La.splice(t,1)}}function we(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const s of["next","error","complete"])if(s in r&&"function"==typeof r[s])return!0;return!1}(n)}class $e{constructor(){this._progressObserver={},this._taskCompletionResolver=new Zr,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class Ge extends l{constructor(e,t,r){super(e,t,r),this.type="firestore",this._queue=new ee,this._persistenceKey="name"in e?e.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||pn(this),this._firestoreClient.terminate()}}function Et(n=(0,ea.getApp)()){return(0,ea._getProvider)(n,"firestore").getImmediate()}function yt(n){return n._firestoreClient||pn(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function pn(n){var e;const t=n._freezeSettings(),r=(u=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new JD(n._databaseId,u,n._persistenceKey,(p=t).host,p.ssl,p.experimentalForceLongPolling,p.experimentalAutoDetectLongPolling,p.useFetchStreams));var u,p;n._firestoreClient=new Vb(n._authCredentials,n._appCheckCredentials,n._queue,r)}function Pm(n,e,t){const r=new Zr;return n.asyncQueue.enqueue((0,Ce.Z)(function*(){try{yield Ub(n,t),yield Bb(n,e),r.resolve()}catch(s){if(!("FirebaseError"===(u=s).name?u.code===fe.FAILED_PRECONDITION||u.code===fe.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&u instanceof DOMException)||22===u.code||20===u.code||11===u.code))throw s;console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+s),r.reject(s)}var u})).then(()=>r.promise)}function km(n){if(n._initialized||n._terminated)throw new ke(fe.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class hc{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new ke(fe.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Pr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Xu{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Xu(Ir.fromBase64String(e))}catch(t){throw new ke(fe.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Xu(Ir.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class rp{constructor(e){this._methodName=e}}class zb{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ke(fe.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ke(fe.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Gt(this._lat,e._lat)||Gt(this._long,e._long)}}const cR=/^__.*__$/;class dR{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new ms(e,this.data,this.fieldMask,t,this.fieldTransforms):new zl(e,this.data,t,this.fieldTransforms)}}class FS{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new ms(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function LS(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ot()}}class Wb{constructor(e,t,r,s,u,c){this.settings=e,this.databaseId=t,this.M=r,this.ignoreUndefinedProperties=s,void 0===u&&this.tc(),this.fieldTransforms=u||[],this.fieldMask=c||[]}get path(){return this.settings.path}get ec(){return this.settings.ec}nc(e){return new Wb(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.M,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}sc(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),s=this.nc({path:r,ic:!1});return s.rc(e),s}oc(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),s=this.nc({path:r,ic:!1});return s.tc(),s}uc(e){return this.nc({path:void 0,ic:!0})}ac(e){return Zb(e,this.settings.methodName,this.settings.cc||!1,this.path,this.settings.hc)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}tc(){if(this.path)for(let e=0;e<this.path.length;e++)this.rc(this.path.get(e))}rc(e){if(0===e.length)throw this.ac("Document fields must not be empty");if(LS(this.ec)&&cR.test(e))throw this.ac('Document fields cannot begin and end with "__"')}}class hR{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.M=r||Kd(e)}lc(e,t,r,s=!1){return new Wb({ec:e,methodName:t,hc:r,path:Pr.emptyPath(),ic:!1,cc:s},this.databaseId,this.M,this.ignoreUndefinedProperties)}}function ip(n){const e=n._freezeSettings(),t=Kd(n._databaseId);return new hR(n._databaseId,!!e.ignoreUndefinedProperties,t)}function qb(n,e,t,r,s,u={}){const c=n.lc(u.merge||u.mergeFields?2:0,e,t,s);AC("Data must be an object, but it was:",c,r);const p=BS(r,c);let _,b;if(u.merge)_=new hf(c.fieldMask),b=c.fieldTransforms;else if(u.mergeFields){const A=[];for(const x of u.mergeFields){const V=SC(e,x,t);if(!c.contains(V))throw new ke(fe.INVALID_ARGUMENT,`Field '${V}' is specified in your field mask but missing from your input data.`);$S(A,V)||A.push(V)}_=new hf(A),b=c.fieldTransforms.filter(x=>_.covers(x.field))}else _=null,b=c.fieldTransforms;return new dR(new ai(p),_,b)}class Kv extends rp{_toFieldTransform(e){if(2!==e.ec)throw e.ac(1===e.ec?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Kv}}function VS(n,e,t){return new Wb({ec:3,hc:e.settings.hc,methodName:n._methodName,ic:t},e.databaseId,e.M,e.ignoreUndefinedProperties)}class DC extends rp{_toFieldTransform(e){return new wf(e.path,new Fd)}isEqual(e){return e instanceof DC}}class fR extends rp{constructor(e,t){super(e),this.fc=t}_toFieldTransform(e){const t=VS(this,e,!0),r=this.fc.map(u=>sp(u,t)),s=new Hl(r);return new wf(e.path,s)}isEqual(e){return this===e}}class pR extends rp{constructor(e,t){super(e),this.fc=t}_toFieldTransform(e){const t=VS(this,e,!0),r=this.fc.map(u=>sp(u,t)),s=new Gl(r);return new wf(e.path,s)}isEqual(e){return this===e}}class gR extends rp{constructor(e,t){super(e),this.dc=t}_toFieldTransform(e){const t=new Ld(e.M,tw(e.M,this.dc));return new wf(e.path,t)}isEqual(e){return this===e}}function TC(n,e,t,r){const s=n.lc(1,e,t);AC("Data must be an object, but it was:",s,r);const u=[],c=ai.empty();Bu(r,(_,b)=>{const A=Kb(e,_,t);b=(0,Jt.m9)(b);const x=s.oc(A);if(b instanceof Kv)u.push(A);else{const V=sp(b,x);null!=V&&(u.push(A),c.set(A,V))}});const p=new hf(u);return new FS(c,p,s.fieldTransforms)}function CC(n,e,t,r,s,u){const c=n.lc(1,e,t),p=[SC(e,r,t)],_=[s];if(u.length%2!=0)throw new ke(fe.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let V=0;V<u.length;V+=2)p.push(SC(e,u[V])),_.push(u[V+1]);const b=[],A=ai.empty();for(let V=p.length-1;V>=0;--V)if(!$S(b,p[V])){const q=p[V];let Y=_[V];Y=(0,Jt.m9)(Y);const ve=c.oc(q);if(Y instanceof Kv)b.push(q);else{const Ue=sp(Y,ve);null!=Ue&&(b.push(q),A.set(q,Ue))}}const x=new hf(b);return new FS(A,x,c.fieldTransforms)}function US(n,e,t,r=!1){return sp(t,n.lc(r?4:3,e))}function sp(n,e){if(jS(n=(0,Jt.m9)(n)))return AC("Unsupported field value:",e,n),BS(n,e);if(n instanceof rp)return function(t,r){if(!LS(r.ec))throw r.ac(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r.ac(`${t._methodName}() is not currently supported inside arrays`);const s=t._toFieldTransform(r);s&&r.fieldTransforms.push(s)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.ic&&4!==e.ec)throw e.ac("Nested arrays are not supported");return function(t,r){const s=[];let u=0;for(const c of t){let p=sp(c,r.uc(u));null==p&&(p={nullValue:"NULL_VALUE"}),s.push(p),u++}return{arrayValue:{values:s}}}(n,e)}return function(t,r){if(null===(t=(0,Jt.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return tw(r.M,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const s=gr.fromDate(t);return{timestampValue:zu(r.M,s)}}if(t instanceof gr){const s=new gr(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:zu(r.M,s)}}if(t instanceof zb)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Xu)return{bytesValue:C_(r.M,t._byteString)};if(t instanceof f){const s=r.databaseId,u=t.firestore._databaseId;if(!u.isEqual(s))throw r.ac(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:A_(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r.ac(`Unsupported field value: ${jv(t)}`)}(n,e)}function BS(n,e){const t={};return r_(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Bu(n,(r,s)=>{const u=sp(s,e.sc(r));null!=u&&(t[r]=u)}),{mapValue:{fields:t}}}function jS(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof gr||n instanceof zb||n instanceof Xu||n instanceof f||n instanceof rp)}function AC(n,e,t){if(!jS(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=jv(t);throw e.ac("an object"===r?n+" a custom object":n+" "+r)}var r}function SC(n,e,t){if((e=(0,Jt.m9)(e))instanceof hc)return e._internalPath;if("string"==typeof e)return Kb(n,e);throw Zb("Field path arguments must be of type string or ",n,!1,void 0,t)}const mR=new RegExp("[~\\*/\\[\\]]");function Kb(n,e,t){if(e.search(mR)>=0)throw Zb(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new hc(...e.split("."))._internalPath}catch(r){throw Zb(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Zb(n,e,t,r,s){const u=r&&!r.isEmpty(),c=void 0!==s;let p=`Function ${e}() called with invalid data`;t&&(p+=" (via `toFirestore()`)"),p+=". ";let _="";return(u||c)&&(_+=" (found",u&&(_+=` in field ${r}`),c&&(_+=` in document ${s}`),_+=")"),new ke(fe.INVALID_ARGUMENT,p+n+_)}function $S(n,e){return n.some(t=>t.isEqual(e))}class Zv{constructor(e,t,r,s,u){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=s,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new f(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new yR(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Yb("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class yR extends Zv{data(){return super.data()}}function Yb(n,e){return"string"==typeof e?Kb(n,e):e instanceof hc?e._internalPath:e._delegate._internalPath}class op{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class fc extends Zv{constructor(e,t,r,s,u,c){super(e,t,r,s,c),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Yv(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(Yb("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class Yv extends fc{data(e={}){return super.data(e)}}class th{constructor(e,t,r,s){this._firestore=e,this._userDataWriter=t,this._snapshot=s,this.metadata=new op(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new Yv(this._firestore,this._userDataWriter,r.key,r,new op(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ke(fe.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,s){if(r._snapshot.oldDocs.isEmpty()){let u=0;return r._snapshot.docChanges.map(c=>({type:"added",doc:new Yv(r._firestore,r._userDataWriter,c.doc.key,c.doc,new op(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:u++}))}{let u=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(c=>s||3!==c.type).map(c=>{const p=new Yv(r._firestore,r._userDataWriter,c.doc.key,c.doc,new op(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter);let _=-1,b=-1;return 0!==c.type&&(_=u.indexOf(c.doc.key),u=u.delete(c.doc.key)),1!==c.type&&(u=u.add(c.doc),b=u.indexOf(c.doc.key)),{type:_R(c.type),doc:p,oldIndex:_,newIndex:b}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function _R(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ot()}}function HS(n,e){return n instanceof fc&&e instanceof fc?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof th&&e instanceof th&&n._firestore===e._firestore&&$(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}function GS(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new ke(fe.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Qv{}function nh(n,...e){for(const t of e)n=t._apply(n);return n}class vR extends Qv{constructor(e,t,r){super(),this._c=e,this.wc=t,this.mc=r,this.type="where"}_apply(e){const t=ip(e.firestore),r=function(s,u,c,p,_,b,A){let x;if(_.isKeyField()){if("array-contains"===b||"array-contains-any"===b)throw new ke(fe.INVALID_ARGUMENT,`Invalid Query. You can't perform '${b}' queries on documentId().`);if("in"===b||"not-in"===b){YS(A,b);const q=[];for(const Y of A)q.push(ZS(p,s,Y));x={arrayValue:{values:q}}}else x=ZS(p,s,A)}else"in"!==b&&"not-in"!==b&&"array-contains-any"!==b||YS(A,b),x=US(c,"where",A,"in"===b||"not-in"===b);const V=An.create(_,b,x);return function(q,Y){if(Y.S()){const Ue=Ef(q);if(null!==Ue&&!Ue.isEqual(Y.field))throw new ke(fe.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${Ue.toString()}' and '${Y.field.toString()}'`);const _t=Hg(q);null!==_t&&QS(0,Y.field,_t)}const ve=function(Ue,_t){for(const wt of Ue.filters)if(_t.indexOf(wt.op)>=0)return wt.op;return null}(q,function(Ue){switch(Ue){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(Y.op));if(null!==ve)throw new ke(fe.INVALID_ARGUMENT,ve===Y.op?`Invalid query. You cannot use more than one '${Y.op.toString()}' filter.`:`Invalid query. You cannot use '${Y.op.toString()}' filters with '${ve.toString()}' filters.`)}(s,V),V}(e._query,0,t,e.firestore._databaseId,this._c,this.wc,this.mc);return new y(e.firestore,e.converter,function(s,u){const c=s.filters.concat([u]);return new ia(s.path,s.collectionGroup,s.explicitOrderBy.slice(),c,s.limit,s.limitType,s.startAt,s.endAt)}(e._query,r))}}class wR extends Qv{constructor(e,t){super(),this._c=e,this.gc=t,this.type="orderBy"}_apply(e){const t=function(r,s,u){if(null!==r.startAt)throw new ke(fe.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new ke(fe.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const c=new Rd(s,u);return function(p,_){if(null===Hg(p)){const b=Ef(p);null!==b&&QS(0,b,_.field)}}(r,c),c}(e._query,this._c,this.gc);return new y(e.firestore,e.converter,function(r,s){const u=r.explicitOrderBy.concat([s]);return new ia(r.path,r.collectionGroup,u,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class zS extends Qv{constructor(e,t,r){super(),this.type=e,this.yc=t,this.Ic=r}_apply(e){return new y(e.firestore,e.converter,__(e._query,this.yc,this.Ic))}}class WS extends Qv{constructor(e,t,r){super(),this.type=e,this.Tc=t,this.Ec=r}_apply(e){const t=KS(e,this.type,this.Tc,this.Ec);return new y(e.firestore,e.converter,(s=t,new ia((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,s,r.endAt)));var r,s}}class qS extends Qv{constructor(e,t,r){super(),this.type=e,this.Tc=t,this.Ec=r}_apply(e){const t=KS(e,this.type,this.Tc,this.Ec);return new y(e.firestore,e.converter,(s=t,new ia((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,s)));var r,s}}function KS(n,e,t,r){if(t[0]=(0,Jt.m9)(t[0]),t[0]instanceof Zv)return function(s,u,c,p,_){if(!p)throw new ke(fe.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${c}().`);const b=[];for(const A of $l(s))if(A.field.isKeyField())b.push(Vl(u,p.key));else{const x=p.data.field(A.field);if(Ad(x))throw new ke(fe.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+A.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===x){const V=A.field.canonicalString();throw new ke(fe.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${V}' (used as the orderBy) does not exist.`)}b.push(x)}return new Ys(b,_)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const s=ip(n.firestore);return function(u,c,p,_,b,A){const x=u.explicitOrderBy;if(b.length>x.length)throw new ke(fe.INVALID_ARGUMENT,`Too many arguments provided to ${_}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const V=[];for(let q=0;q<b.length;q++){const Y=b[q];if(x[q].field.isKeyField()){if("string"!=typeof Y)throw new ke(fe.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${_}(), but got a ${typeof Y}`);if(!Pd(u)&&-1!==Y.indexOf("/"))throw new ke(fe.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${_}() must be a plain document ID, but '${Y}' contains a slash.`);const ve=u.path.child(un.fromString(Y));if(!Je.isDocumentKey(ve))throw new ke(fe.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${_}() must result in a valid document path, but '${ve}' is not because it contains an odd number of segments.`);const Ue=new Je(ve);V.push(Vl(c,Ue))}else{const ve=US(p,_,Y);V.push(ve)}}return new Ys(V,A)}(n._query,n.firestore._databaseId,s,e,t,r)}}function ZS(n,e,t){if("string"==typeof(t=(0,Jt.m9)(t))){if(""===t)throw new ke(fe.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Pd(e)&&-1!==t.indexOf("/"))throw new ke(fe.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(un.fromString(t));if(!Je.isDocumentKey(r))throw new ke(fe.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Vl(n,new Je(r))}if(t instanceof f)return Vl(n,t._key);throw new ke(fe.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${jv(t)}.`)}function YS(n,e){if(!Array.isArray(n)||0===n.length)throw new ke(fe.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(n.length>10)throw new ke(fe.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function QS(n,e,t){if(!t.isEqual(e))throw new ke(fe.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}const MR={maxAttempts:5};class MC{convertValue(e,t="none"){switch(za(e)){case 0:return null;case 1:return e.booleanValue;case 2:return tr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(ra(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw ot()}}convertObject(e,t){const r={};return Bu(e.fields,(s,u)=>{r[s]=this.convertValue(u,t)}),r}convertGeoPoint(e){return new zb(tr(e.latitude),tr(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=Fg(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Lg(e));default:return null}}convertTimestamp(e){const t=na(e);return new gr(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=un.fromString(e);xt(Iw(r));const s=new Ks(r.get(1),r.get(3)),u=new Je(r.popFirst(5));return s.isEqual(t)||br(`Document ${u} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),u}}function Qb(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class xR extends MC{constructor(e){super(),this.firestore=e}convertBytes(e){return new Xu(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new f(this.firestore,null,t)}}class JS{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=ip(e)}set(e,t,r){this._verifyNotCommitted();const s=rh(e,this._firestore),u=Qb(s.converter,t,r),c=qb(this._dataReader,"WriteBatch.set",s._key,u,null!==s.converter,r);return this._mutations.push(c.toMutation(s._key,mr.none())),this}update(e,t,r,...s){this._verifyNotCommitted();const u=rh(e,this._firestore);let c;return c="string"==typeof(t=(0,Jt.m9)(t))||t instanceof hc?CC(this._dataReader,"WriteBatch.update",u._key,t,r,s):TC(this._dataReader,"WriteBatch.update",u._key,t),this._mutations.push(c.toMutation(u._key,mr.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=rh(e,this._firestore);return this._mutations=this._mutations.concat(new Kg(t._key,mr.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new ke(fe.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function rh(n,e){if((n=(0,Jt.m9)(n)).firestore!==e)throw new ke(fe.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class ap extends MC{constructor(e){super(),this.firestore=e}convertBytes(e){return new Xu(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new f(this.firestore,null,t)}}function XS(n,e,t){n=i(n,f);const r=i(n.firestore,Ge),s=Qb(n.converter,e,t);return Fm(r,[qb(ip(r),"setDoc",n._key,s,null!==n.converter,t).toMutation(n._key,mr.none())])}function eM(n,e,t,...r){n=i(n,f);const s=i(n.firestore,Ge),u=ip(s);let c;return c="string"==typeof(e=(0,Jt.m9)(e))||e instanceof hc?CC(u,"updateDoc",n._key,e,t,r):TC(u,"updateDoc",n._key,e),Fm(s,[c.toMutation(n._key,mr.exists(!0))])}function tM(n,...e){var t,r,s;n=(0,Jt.m9)(n);let u={includeMetadataChanges:!1},c=0;"object"!=typeof e[c]||we(e[c])||(u=e[c],c++);const p={includeMetadataChanges:u.includeMetadataChanges};if(we(e[c])){const x=e[c];e[c]=null===(t=x.next)||void 0===t?void 0:t.bind(x),e[c+1]=null===(r=x.error)||void 0===r?void 0:r.bind(x),e[c+2]=null===(s=x.complete)||void 0===s?void 0:s.bind(x)}let _,b,A;if(n instanceof f)b=i(n.firestore,Ge),A=Od(n._key.path),_={next:x=>{e[c]&&e[c](xC(b,n,x))},error:e[c+1],complete:e[c+2]};else{const x=i(n,y);b=i(x.firestore,Ge),A=x._query;const V=new ap(b);_={next:q=>{e[c]&&e[c](new th(b,V,x,q))},error:e[c+1],complete:e[c+2]},GS(n._query)}return function(x,V,q,Y){const ve=new Fv(Y),Ue=new _v(V,ve,q);return x.asyncQueue.enqueueAndForget((0,Ce.Z)(function*(){return bb(yield cc(x),Ue)})),()=>{ve.Aa(),x.asyncQueue.enqueueAndForget((0,Ce.Z)(function*(){return Db(yield cc(x),Ue)}))}}(yt(b),A,p,_)}function Fm(n,e){return function(t,r){const s=new Zr;return t.asyncQueue.enqueueAndForget((0,Ce.Z)(function*(){return function lc(n,e,t){return wm.apply(this,arguments)}(yield $b(t),r,s)})),s.promise}(yt(n),e)}function xC(n,e,t){const r=t.docs.get(e._key),s=new ap(n);return new fc(n,s,e._key,r,new op(t.hasPendingWrites,t.fromCache),e.converter)}class BR extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=ip(e)}get(e){const t=rh(e,this._firestore),r=new xR(this._firestore);return this._transaction.lookup([t._key]).then(s=>{if(!s||1!==s.length)return ot();const u=s[0];if(u.isFoundDocument())return new Zv(this._firestore,r,u.key,u,t.converter);if(u.isNoDocument())return new Zv(this._firestore,r,t._key,null,t.converter);throw ot()})}set(e,t,r){const s=rh(e,this._firestore),u=Qb(s.converter,t,r),c=qb(this._dataReader,"Transaction.set",s._key,u,null!==s.converter,r);return this._transaction.set(s._key,c),this}update(e,t,r,...s){const u=rh(e,this._firestore);let c;return c="string"==typeof(t=(0,Jt.m9)(t))||t instanceof hc?CC(this._dataReader,"Transaction.update",u._key,t,r,s):TC(this._dataReader,"Transaction.update",u._key,t),this._transaction.update(u._key,c),this}delete(e){const t=rh(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=rh(e,this._firestore),r=new ap(this._firestore);return super.get(e).then(s=>new fc(this._firestore,r,t._key,s._document,new op(!1,!1),t.converter))}}function NC(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new ke("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function rM(){if("undefined"==typeof Uint8Array)throw new ke("unimplemented","Uint8Arrays are not available in this environment.")}function iM(){if(!function ff(){return"undefined"!=typeof atob}())throw new ke("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){Dd=ea.SDK_VERSION,(0,ea._registerComponent)(new ng.wA("firestore",(t,{options:r})=>{const s=t.getProvider("app").getImmediate(),u=new Ge(s,new Td(t.getProvider("auth-internal")),new F0(t.getProvider("app-check-internal")));return r=Object.assign({useFetchStreams:e},r),u._setSettings(r),u},"PUBLIC")),(0,ea.registerVersion)(Jy,"3.4.9",n),(0,ea.registerVersion)(Jy,"3.4.9","esm2017")}();class Jv{constructor(e){this._delegate=e}static fromBase64String(e){return iM(),new Jv(Xu.fromBase64String(e))}static fromUint8Array(e){return rM(),new Jv(Xu.fromUint8Array(e))}toBase64(){return iM(),this._delegate.toBase64()}toUint8Array(){return rM(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function RC(n){return function ZR(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class YR{enableIndexedDbPersistence(e,t){return function vs(n,e){km(n=i(n,Ge));const t=yt(n),r=n._freezeSettings(),s=new Xf;return Pm(t,s,new Lb(s,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function dc(n){km(n=i(n,Ge));const e=yt(n),t=n._freezeSettings(),r=new Xf;return Pm(e,r,new kv(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function $v(n){if(n._initialized&&!n._terminated)throw new ke(fe.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Zr;return n._queue.enqueueAndForgetEvenWhileRestricted((0,Ce.Z)(function*(){try{yield(t=(0,Ce.Z)(function*(r){if(!Js.vt())return Promise.resolve();const s=r+"main";yield Js.delete(s)}),function(r){return t.apply(this,arguments)})(K_(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class sM{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Ks||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&kg("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function d(n,e,t,r={}){var s;const u=(n=i(n,l))._getSettings();if("firestore.googleapis.com"!==u.host&&u.host!==e&&kg("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},u),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let c,p;if("string"==typeof r.mockUserToken)c=r.mockUserToken,p=oi.MOCK_USER;else{c=(0,Jt.Sg)(r.mockUserToken,null===(s=n._app)||void 0===s?void 0:s.options.projectId);const _=r.mockUserToken.sub||r.mockUserToken.user_id;if(!_)throw new ke(fe.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new oi(_)}n._authCredentials=new YD(new t_(c,p))}}(this._delegate,e,t,r)}enableNetwork(){return function Gv(n){return function mC(n){return n.asyncQueue.enqueue((0,Ce.Z)(function*(){const e=yield jb(n),t=yield Om(n);return e.setNetworkEnabled(!0),function(r){const s=nt(r);return s.wu.delete(0),Yd(s)}(t)}))}(yt(n=i(n,Ge)))}(this._delegate)}disableNetwork(){return function zv(n){return function yC(n){return n.asyncQueue.enqueue((0,Ce.Z)(function*(){const e=yield jb(n),t=yield Om(n);return e.setNetworkEnabled(!1),(r=(0,Ce.Z)(function*(s){const u=nt(s);u.wu.add(0),yield Qu(u),u.yu.set("Offline")}),function(s){return r.apply(this,arguments)})(t);var r}))}(yt(n=i(n,Ge)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,wC("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function Hv(n){return function(e){const t=new Zr;return e.asyncQueue.enqueueAndForget((0,Ce.Z)(function*(){return function TS(n,e){return Qf.apply(this,arguments)}(yield $b(e),t)})),t.promise}(yt(n=i(n,Ge)))}(this._delegate)}onSnapshotsInSync(e){return function UR(n,e){return function RS(n,e){const t=new Fv(e);return n.asyncQueue.enqueueAndForget((0,Ce.Z)(function*(){return r=yield cc(n),s=t,nt(r).bu.add(s),void s.next();var r,s})),()=>{t.Aa(),n.asyncQueue.enqueueAndForget((0,Ce.Z)(function*(){return r=yield cc(n),s=t,void nt(r).bu.delete(s);var r,s}))}}(yt(n=i(n,Ge)),we(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new ke("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Lm(this,I(this._delegate,e))}catch(t){throw Es(t,"collection()","Firestore.collection()")}}doc(e){try{return new la(this,M(this._delegate,e))}catch(t){throw Es(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new ws(this,function C(n,e){if(n=i(n,l),Bv("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new ke(fe.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new y(n,null,(t=e,new ia(un.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw Es(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function jR(n,e,t){n=i(n,Ge);const r=Object.assign(Object.assign({},MR),t);return function(s){if(s.maxAttempts<1)throw new ke(fe.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function OS(n,e,t){const r=new Zr;return n.asyncQueue.enqueueAndForget((0,Ce.Z)(function*(){const s=yield(u=n,tp(u).then(c=>c.datastore));var u;new xS(n.asyncQueue,s,t,e,r).run()})),r.promise}(yt(n),s=>e(new BR(n,s)),r)}(this._delegate,t=>e(new oM(this,t)))}batch(){return yt(this._delegate),new aM(new JS(this._delegate,e=>Fm(this._delegate,e)))}loadBundle(e){return function Wv(n,e){const t=yt(n=i(n,Ge)),r=new $e;return function PS(n,e,t,r){const s=function(u,c){let p;return p="string"==typeof u?(new TextEncoder).encode(u):u,_=function(_,b){if(_ instanceof Uint8Array)return ep(_,b);if(_ instanceof ArrayBuffer)return ep(new Uint8Array(_),b);if(_ instanceof ReadableStream)return _.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(p),new SS(_,c);var _}(t,Kd(e));n.asyncQueue.enqueueAndForget((0,Ce.Z)(function*(){!function Pv(n,e,t){const r=nt(n);var s;(s=(0,Ce.Z)(function*(u,c,p){try{const _=yield c.getMetadata();if(yield function(V,q){const Y=nt(V),ve=kr(q.createTime);return Y.persistence.runTransaction("hasNewerBundle","readonly",Ue=>Y._s.getBundleMetadata(Ue,q.id)).then(Ue=>!!Ue&&Ue.createTime.compareTo(ve)>=0)}(u.localStore,_))return yield c.close(),p._completeWith({taskState:"Success",documentsLoaded:(V=_).totalDocuments,bytesLoaded:V.totalBytes,totalDocuments:V.totalDocuments,totalBytes:V.totalBytes}),Promise.resolve(new Set);p._updateProgress(Ab(_));const b=new Do(_,u.localStore,c.M);let A=yield c.ma();for(;A;){const V=yield b.Fu(A);V&&p._updateProgress(V),A=yield c.ma()}const x=yield b.complete();return yield Ja(u,x.Lu,void 0),yield function(V,q){const Y=nt(V);return Y.persistence.runTransaction("Save bundle","readwrite",ve=>Y._s.saveBundleMetadata(ve,q))}(u.localStore,_),p._completeWith(x.progress),Promise.resolve(x.Bu)}catch(_){return kg("SyncEngine",`Loading bundle failed with ${_}`),p._failWith(_),Promise.resolve(new Set)}var V}),function(u,c,p){return s.apply(this,arguments)})(r,e,t).then(s=>{r.sharedClientState.notifyBundleLoaded(s)})}(yield $b(n),s,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function qv(n,e){return function kS(n,e){return n.asyncQueue.enqueue((0,Ce.Z)(function*(){return function(t,r){const s=nt(t);return s.persistence.runTransaction("Get named query","readonly",u=>s._s.getNamedQuery(u,r))}(yield Rm(n),e)}))}(yt(n=i(n,Ge)),e).then(t=>t?new y(n,null,t.query):null)}(this._delegate,e).then(t=>t?new ws(this,t):null)}}class Jb extends MC{constructor(e){super(),this.firestore=e}convertBytes(e){return new Jv(new Xu(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return la.forKey(t,this.firestore,null)}}class oM{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new Jb(e)}get(e){const t=lp(e);return this._delegate.get(t).then(r=>new Xv(this._firestore,new fc(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const s=lp(e);return r?(NC("Transaction.set",r),this._delegate.set(s,t,r)):this._delegate.set(s,t),this}update(e,t,r,...s){const u=lp(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...s),this}delete(e){const t=lp(e);return this._delegate.delete(t),this}}class aM{constructor(e){this._delegate=e}set(e,t,r){const s=lp(e);return r?(NC("WriteBatch.set",r),this._delegate.set(s,t,r)):this._delegate.set(s,t),this}update(e,t,r,...s){const u=lp(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...s),this}delete(e){const t=lp(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class up{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new Yv(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new eE(this._firestore,r),null!=t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=up.INSTANCES;let s=r.get(e);s||(s=new WeakMap,r.set(e,s));let u=s.get(t);return u||(u=new up(e,new Jb(e),t),s.set(t,u)),u}}up.INSTANCES=new WeakMap;class la{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Jb(e)}static forPath(e,t,r){if(e.length%2!=0)throw new ke("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new la(t,new f(t._delegate,r,new Je(e)))}static forKey(e,t,r){return new la(t,new f(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new Lm(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Lm(this.firestore,I(this._delegate,e))}catch(t){throw Es(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,Jt.m9)(e))instanceof f&&k(this._delegate,e)}set(e,t){t=NC("DocumentReference.set",t);try{return t?XS(this._delegate,e,t):XS(this._delegate,e)}catch(r){throw Es(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?eM(this._delegate,e):eM(this._delegate,e,t,...r)}catch(s){throw Es(s,"updateDoc()","DocumentReference.update()")}}delete(){return function LR(n){return Fm(i(n.firestore,Ge),[new Kg(n._key,mr.none())])}(this._delegate)}onSnapshot(...e){const t=uM(e),r=lM(e,s=>new Xv(this.firestore,new fc(this.firestore._delegate,this._userDataWriter,s._key,s._document,s.metadata,this._delegate.converter)));return tM(this._delegate,t,r)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function RR(n){n=i(n,f);const e=i(n.firestore,Ge),t=yt(e),r=new ap(e);return function NS(n,e){const t=new Zr;return n.asyncQueue.enqueueAndForget((0,Ce.Z)(function*(){return(r=(0,Ce.Z)(function*(s,u,c){try{const p=yield function(_,b){const A=nt(_);return A.persistence.runTransaction("read document","readonly",x=>A.fi.Ls(x,b))}(s,u);p.isFoundDocument()?c.resolve(p):p.isNoDocument()?c.resolve(null):c.reject(new ke(fe.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(p){const _=uc(p,`Failed to get document '${u} from cache`);c.reject(_)}}),function(s,u,c){return r.apply(this,arguments)})(yield Rm(n),e,t);var r})),t.promise}(t,n._key).then(s=>new fc(e,r,n._key,s,new op(null!==s&&s.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===(null==e?void 0:e.source)?function OR(n){n=i(n,f);const e=i(n.firestore,Ge);return _C(yt(e),n._key,{source:"server"}).then(t=>xC(e,n,t))}(this._delegate):function NR(n){n=i(n,f);const e=i(n.firestore,Ge);return _C(yt(e),n._key).then(t=>xC(e,n,t))}(this._delegate),t.then(r=>new Xv(this.firestore,new fc(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new la(this.firestore,this._delegate.withConverter(e?up.getInstance(this.firestore,e):null))}}function Es(n,e,t){return n.message=n.message.replace(e,t),n}function uM(n){for(const e of n)if("object"==typeof e&&!RC(e))return e;return{}}function lM(n,e){var t,r;let s;return s=RC(n[0])?n[0]:RC(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:u=>{s.next&&s.next(e(u))},error:null===(t=s.error)||void 0===t?void 0:t.bind(s),complete:null===(r=s.complete)||void 0===r?void 0:r.bind(s)}}class Xv{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new la(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return HS(this._delegate,e._delegate)}}class eE extends Xv{data(e){const t=this._delegate.data(e);return function ZD(n,e){n||ot()}(void 0!==t),t}}class ws{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Jb(e)}where(e,t,r){try{return new ws(this.firestore,nh(this._delegate,function ER(n,e,t){const r=e,s=Yb("where",n);return new vR(s,r,t)}(e,t,r)))}catch(s){throw Es(s,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new ws(this.firestore,nh(this._delegate,function bR(n,e="asc"){const t=e,r=Yb("orderBy",n);return new wR(r,t)}(e,t)))}catch(r){throw Es(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new ws(this.firestore,nh(this._delegate,function IR(n){return o("limit",n),new zS("limit",n,"F")}(e)))}catch(t){throw Es(t,"limit()","Query.limit()")}}limitToLast(e){try{return new ws(this.firestore,nh(this._delegate,function DR(n){return o("limitToLast",n),new zS("limitToLast",n,"L")}(e)))}catch(t){throw Es(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new ws(this.firestore,nh(this._delegate,function TR(...n){return new WS("startAt",n,!0)}(...e)))}catch(t){throw Es(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new ws(this.firestore,nh(this._delegate,function CR(...n){return new WS("startAfter",n,!1)}(...e)))}catch(t){throw Es(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new ws(this.firestore,nh(this._delegate,function AR(...n){return new qS("endBefore",n,!1)}(...e)))}catch(t){throw Es(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new ws(this.firestore,nh(this._delegate,function SR(...n){return new qS("endAt",n,!0)}(...e)))}catch(t){throw Es(t,"endAt()","Query.endAt()")}}isEqual(e){return $(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function kR(n){n=i(n,y);const e=i(n.firestore,Ge),t=yt(e),r=new ap(e);return function vC(n,e){const t=new Zr;return n.asyncQueue.enqueueAndForget((0,Ce.Z)(function*(){return(r=(0,Ce.Z)(function*(s,u,c){try{const p=yield X_(s,u,!0),_=new Mb(u,p._i),b=_.Wu(p.documents),A=_.applyChanges(b,!1);c.resolve(A.snapshot)}catch(p){const _=uc(p,`Failed to execute query '${u} against cache`);c.reject(_)}}),function(s,u,c){return r.apply(this,arguments)})(yield Rm(n),e,t);var r})),t.promise}(t,n._query).then(s=>new th(e,r,n,s))}(this._delegate):"server"===(null==e?void 0:e.source)?function FR(n){n=i(n,y);const e=i(n.firestore,Ge),t=yt(e),r=new ap(e);return Hb(t,n._query,{source:"server"}).then(s=>new th(e,r,n,s))}(this._delegate):function PR(n){n=i(n,y);const e=i(n.firestore,Ge),t=yt(e),r=new ap(e);return GS(n._query),Hb(t,n._query).then(s=>new th(e,r,n,s))}(this._delegate),t.then(r=>new OC(this.firestore,new th(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=uM(e),r=lM(e,s=>new OC(this.firestore,new th(this.firestore._delegate,this._userDataWriter,this._delegate,s._snapshot)));return tM(this._delegate,t,r)}withConverter(e){return new ws(this.firestore,this._delegate.withConverter(e?up.getInstance(this.firestore,e):null))}}class JR{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new eE(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class OC{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new ws(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new eE(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new JR(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new eE(this._firestore,r))})}isEqual(e){return HS(this._delegate,e._delegate)}}class Lm extends ws{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new la(this.firestore,e):null}doc(e){try{return new la(this.firestore,void 0===e?M(this._delegate):M(this._delegate,e))}catch(t){throw Es(t,"doc()","CollectionReference.doc()")}}add(e){return function VR(n,e){const t=i(n.firestore,Ge),r=M(n),s=Qb(n.converter,e);return Fm(t,[qb(ip(n.firestore),"addDoc",r._key,s,null!==n.converter,{}).toMutation(r._key,mr.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new la(this.firestore,t))}isEqual(e){return k(this._delegate,e._delegate)}withConverter(e){return new Lm(this.firestore,this._delegate.withConverter(e?up.getInstance(this.firestore,e):null))}}function lp(n){return i(n,f)}class PC{constructor(...e){this._delegate=new hc(...e)}static documentId(){return new PC(Pr.keyField().canonicalString())}isEqual(e){return(e=(0,Jt.m9)(e))instanceof hc&&this._delegate._internalPath.isEqual(e._internalPath)}}class cp{constructor(e){this._delegate=e}static serverTimestamp(){const e=function HR(){return new DC("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new cp(e)}static delete(){const e=function $R(){return new Kv("deleteField")}();return e._methodName="FieldValue.delete",new cp(e)}static arrayUnion(...e){const t=function GR(...n){return new fR("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new cp(t)}static arrayRemove(...e){const t=function zR(...n){return new pR("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new cp(t)}static increment(e){const t=function WR(n){return new gR("increment",n)}(e);return t._methodName="FieldValue.increment",new cp(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const XR={Firestore:sM,GeoPoint:zb,Timestamp:gr,Blob:Jv,Transaction:oM,WriteBatch:aM,DocumentReference:la,DocumentSnapshot:Xv,Query:ws,QueryDocumentSnapshot:eE,QuerySnapshot:OC,CollectionReference:Lm,FieldPath:PC,FieldValue:cp,setLogLevel:function QR(n){!function O0(n){Ha.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};!function tO(n){(function eO(n,e){n.INTERNAL.registerComponent(new ng.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),s=t.getProvider("firestore").getImmediate();return e(r,s)},"PUBLIC").setServiceProps(Object.assign({},XR)))})(n,(e,t)=>new sM(e,t,new YR)),n.registerVersion("@firebase/firestore-compat","0.1.18")}(jE.Z);var nO=O(6451),Xb=O(5363),rO=O(6063);class iO extends fr.x{constructor(e=1/0,t=1/0,r=rO.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:s,_timestampProvider:u,_windowTime:c}=this;t||(r.push(e),!s&&r.push(u.now()+c)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:s}=this,u=s.slice();for(let c=0;c<u.length&&!e.closed;c+=r?1:2)e.next(u[c]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:s}=this,u=(s?1:2)*e;if(e<1/0&&u<r.length&&r.splice(0,r.length-u),!s){const c=t.now();let p=0;for(let _=1;_<r.length&&r[_]<=c;_+=2)p=_;p&&r.splice(0,p+1)}}}var sO=O(3099);function cM(n,e,t){let r,s=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:s=!1,scheduler:t}=n):r=null!=n?n:1/0,(0,sO.B)({connector:()=>new iO(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:s})}function dM(n,e){return(0,ds.m)(e)?wr(()=>n,e):wr(()=>n)}var kC=O(9468),dp=O(5867);class Vm{constructor(e){return e}}class hM{constructor(){return(0,dp.C6)()}}const FC=new h.OlP("angularfire2._apps"),aO={provide:Vm,useFactory:function oO(n){return n&&1===n.length?n[0]:new Vm((0,dp.Mq)())},deps:[[new h.FiY,FC]]},uO={provide:hM,deps:[[new h.FiY,FC]]};function lO(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new Vm(r)}}let cO=(()=>{class n{constructor(t){(0,dp.KN)("angularfire",Tn.q4.full,"core"),(0,dp.KN)("angularfire",Tn.q4.full,"app"),(0,dp.KN)("angular",h.q4F.full,t.toString())}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(h.Lbi))},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:[aO,uO]}),n})();function dO(n,...e){return{ngModule:cO,providers:[{provide:FC,useFactory:lO(n),multi:!0,deps:[h.R0b,h.zs3,Tn.HU,...e]}]}}const hO=(0,Tn.u3)(dp.ZF,!0),fM=new Map,fO={activated:!1,tokenObservers:[]},pO={initialized:!1,enabled:!1};function vi(n){return fM.get(n)||fO}function eu(n,e){fM.set(n,e)}function eI(){return pO}class vO{constructor(e,t,r,s,u){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=s,this.upperBound=u,this.pending=null,this.nextErrorWaitInterval=s,s>u)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,Ce.Z)(function*(){t.stop();try{t.pending=new Jt.BH,yield function EO(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new Jt.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const bs=new Jt.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function gM(n){if(!vi(n).activated)throw bs.create("use-before-activation",{appName:n.name})}function UC(n,e){return BC.apply(this,arguments)}function BC(){return BC=(0,Ce.Z)(function*({url:n,body:e},t){const r={"Content-Type":"application/json"},s=t.getImmediate({optional:!0});if(s){const x=yield s.getHeartbeatsHeader();x&&(r["X-Firebase-Client"]=x)}const u={method:"POST",body:JSON.stringify(e),headers:r};let c,p;try{c=yield fetch(n,u)}catch(x){throw bs.create("fetch-network-error",{originalErrorMessage:x.message})}if(200!==c.status)throw bs.create("fetch-status-error",{httpStatus:c.status});try{p=yield c.json()}catch(x){throw bs.create("fetch-parse-error",{originalErrorMessage:x.message})}const _=p.ttl.match(/^([\d.]+)(s)$/);if(!_||!_[2]||isNaN(Number(_[1])))throw bs.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${p.ttl}`});const b=1e3*Number(_[1]),A=Date.now();return{token:p.token,expireTimeMillis:A+b,issuedAtTimeMillis:A}}),BC.apply(this,arguments)}function TO(n,e){const{projectId:t,appId:r,apiKey:s}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${t}/apps/${r}:exchangeDebugToken?key=${s}`,body:{debug_token:e}}}const tE="firebase-app-check-store";let rI=null;function yM(){return rI||(rI=new Promise((n,e)=>{try{const t=indexedDB.open("firebase-app-check-database",1);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var s;e(bs.create("storage-open",{originalErrorMessage:null===(s=r.target.error)||void 0===s?void 0:s.message}))},t.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(tE,{keyPath:"compositeKey"})}}catch(t){e(bs.create("storage-open",{originalErrorMessage:t.message}))}}),rI)}function jC(){return jC=(0,Ce.Z)(function*(n,e){const r=(yield yM()).transaction(tE,"readwrite"),u=r.objectStore(tE).put({compositeKey:n,value:e});return new Promise((c,p)=>{u.onsuccess=_=>{c()},r.onerror=_=>{var b;p(bs.create("storage-set",{originalErrorMessage:null===(b=_.target.error)||void 0===b?void 0:b.message}))}})}),jC.apply(this,arguments)}const nE=new Fa.Yd("@firebase/app-check");function wM(n,e){return(0,Jt.hl)()?function MO(n,e){return function _M(n,e){return jC.apply(this,arguments)}(function EM(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{nE.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function bM(){return eI().enabled}function IM(){return zC.apply(this,arguments)}function zC(){return zC=(0,Ce.Z)(function*(){const n=eI();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")}),zC.apply(this,arguments)}const kO={error:"UNKNOWN_ERROR"};function FO(n){return Jt.US.encodeString(JSON.stringify(n),!1)}function iI(n){return WC.apply(this,arguments)}function WC(){return WC=(0,Ce.Z)(function*(n,e=!1){const t=n.app;gM(t);const r=vi(t);let u,s=r.token;if(!s){const _=yield r.cachedTokenPromise;_&&sI(_)&&(s=_)}if(!e&&s&&sI(s))return{token:s.token};let p,c=!1;if(bM()){r.exchangeTokenPromise||(r.exchangeTokenPromise=UC(TO(t,yield IM()),n.heartbeatServiceProvider).then(b=>(r.exchangeTokenPromise=void 0,b)),c=!0);const _=yield r.exchangeTokenPromise;return yield wM(t,_),eu(t,Object.assign(Object.assign({},r),{token:_})),{token:_.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().then(_=>(r.exchangeTokenPromise=void 0,_)),c=!0),s=yield r.exchangeTokenPromise}catch(_){"appCheck/throttled"===_.code?nE.warn(_.message):nE.error(_),u=_}return s?(p={token:s.token},eu(t,Object.assign(Object.assign({},r),{token:s})),yield wM(t,s)):p=VO(u),c&&TM(t,p),p}),WC.apply(this,arguments)}function KC(n,e){const t=vi(n),r=t.tokenObservers.filter(s=>s.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),eu(n,Object.assign(Object.assign({},t),{tokenObservers:r}))}function DM(n){const{app:e}=n,t=vi(e);let r=t.tokenRefresher;r||(r=function LO(n){const{app:e}=n;return new vO((0,Ce.Z)(function*(){let r;if(r=vi(e).token?yield iI(n,!0):yield iI(n),r.error)throw r.error}),()=>!0,()=>{const t=vi(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(n),eu(e,Object.assign(Object.assign({},t),{tokenRefresher:r}))),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function TM(n,e){const t=vi(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch(s){}}function sI(n){return n.expireTimeMillis-Date.now()>0}function VO(n){return{token:FO(kO),error:n}}class UO{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=vi(this.app);for(const t of e)KC(this.app,t.next);return Promise.resolve()}}const OM="app-check-internal";!function XO(){(0,ea._registerComponent)(new ng.wA("app-check",n=>function BO(n,e){return new UO(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(OM).initialize()})),(0,ea._registerComponent)(new ng.wA(OM,n=>function jO(n){return{getToken:e=>iI(n,e),addTokenListener:e=>function qC(n,e,t,r){const{app:s}=n,u=vi(s),c={next:t,error:r,type:e};if(eu(s,Object.assign(Object.assign({},u),{tokenObservers:[...u.tokenObservers,c]})),u.token&&sI(u.token)){const p=u.token;Promise.resolve().then(()=>{t({token:p.token}),DM(n)}).catch(()=>{})}u.cachedTokenPromise.then(()=>DM(n))}(n,"INTERNAL",e),removeTokenListener:e=>KC(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,ea.registerVersion)("@firebase/app-check","0.5.8")}();class aI{constructor(){return(0,Tn.vb)("app-check")}}"undefined"!=typeof window&&window;var iP=O(127);const kM=new h.OlP("angularfire2.auth.use-emulator"),FM=new h.OlP("angularfire2.auth.settings"),LM=new h.OlP("angularfire2.auth.tenant-id"),VM=new h.OlP("angularfire2.auth.langugage-code"),UM=new h.OlP("angularfire2.auth.use-device-language"),BM=new h.OlP("angularfire.auth.persistence"),jM=(n,e,t,r,s,u,c,p)=>(0,Ws.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const _=e.runOutsideAngular(()=>n.auth());if(t&&_.useEmulator(...t),r&&(_.tenantId=r),_.languageCode=s,u&&_.useDeviceLanguage(),c)for(const[b,A]of Object.entries(c))_.settings[b]=A;return p&&_.setPersistence(p),_},[t,r,s,u,c,p]);let $M=(()=>{class n{constructor(t,r,s,u,c,p,_,b,A,x,V,q){const Y=new fr.x,ve=ut(void 0).pipe((0,Xb.Q)(c.outsideAngular),wr(()=>u.runOutsideAngular(()=>Promise.resolve().then(O.bind(O,5881)))),(0,St.U)(()=>(0,Ws.on)(t,u,r)),(0,St.U)(Ue=>jM(Ue,u,p,b,A,x,_,V)),cM({bufferSize:1,refCount:!1}));if(Mr(s))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=ut(null);else{ve.pipe(qo()).subscribe();const _t=ve.pipe(wr(ft=>ft.getRedirectResult().then(Bt=>Bt,()=>null)),Tn.iC,cM({bufferSize:1,refCount:!1})),wt=ve.pipe(wr(ft=>new Di.y(Bt=>({unsubscribe:u.runOutsideAngular(()=>ft.onAuthStateChanged(Qt=>Bt.next(Qt),Qt=>Bt.error(Qt),()=>Bt.complete()))})))),Ct=ve.pipe(wr(ft=>new Di.y(Bt=>({unsubscribe:u.runOutsideAngular(()=>ft.onIdTokenChanged(Qt=>Bt.next(Qt),Qt=>Bt.error(Qt),()=>Bt.complete()))}))));this.authState=_t.pipe(dM(wt),(0,kC.R)(c.outsideAngular),(0,Xb.Q)(c.insideAngular)),this.user=_t.pipe(dM(Ct),(0,kC.R)(c.outsideAngular),(0,Xb.Q)(c.insideAngular)),this.idToken=this.user.pipe(wr(ft=>ft?(0,Sn.D)(ft.getIdToken()):ut(null))),this.idTokenResult=this.user.pipe(wr(ft=>ft?(0,Sn.D)(ft.getIdTokenResult()):ut(null))),this.credential=(0,nO.T)(_t,Y,this.authState.pipe(Zn(ft=>!ft))).pipe((0,St.U)(ft=>(null==ft?void 0:ft.user)?ft:null),(0,kC.R)(c.outsideAngular),(0,Xb.Q)(c.insideAngular))}return(0,Ws.pX)(this,ve,u,{spy:{apply:(Ue,_t,wt)=>{(Ue.startsWith("signIn")||Ue.startsWith("createUser"))&&wt.then(Ct=>Y.next(Ct))}}})}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Ws.Dh),h.LFG(Ws.xv,8),h.LFG(h.Lbi),h.LFG(h.R0b),h.LFG(Tn.HU),h.LFG(kM,8),h.LFG(FM,8),h.LFG(LM,8),h.LFG(VM,8),h.LFG(UM,8),h.LFG(BM,8),h.LFG(aI,8))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})();function HM(n,e){return function oP(n,e=jh.z){return new Di.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{null!=r&&r()}})}(n,e)}function XC(n,e){return HM(n,e).pipe((0,St.U)(t=>({payload:t,type:"query"})))}function uI(n,e){return XC(n,e).pipe(co(void 0),tg(),(0,St.U)(([t,r])=>{const s=r.payload.docChanges(),u=s.map(c=>({type:c.type,payload:c}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((c,p)=>{const _=s.find(A=>A.doc.ref.isEqual(c.ref)),b=null==t?void 0:t.payload.docs.find(A=>A.ref.isEqual(c.ref));_&&JSON.stringify(_.doc.metadata)===JSON.stringify(c.metadata)||!_&&b&&JSON.stringify(b.metadata)===JSON.stringify(c.metadata)||u.push({type:"modified",payload:{oldIndex:p,newIndex:p,type:"modified",doc:c}})}),u}))}function GM(n,e,t){return uI(n,t).pipe($i((r,s)=>function uP(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function lP(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return eA(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return eA(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return eA(n,e.oldIndex,1)}return n}(n,r))}),n}(r,s.map(u=>u.payload),e),[]),function mD(n,e=Fs.y){return n=null!=n?n:yD,(0,Er.e)((t,r)=>{let s,u=!0;t.subscribe((0,Kn.x)(r,c=>{const p=e(c);(u||!n(s,p))&&(u=!1,s=p,r.next(c))}))})}(),(0,St.U)(r=>r.map(s=>({type:s.type,payload:s}))))}function eA(n,e,t,...r){const s=n.slice();return s.splice(e,t,...r),s}function zM(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class WM{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=uI(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,St.U)(r=>r.filter(s=>e.indexOf(s.type)>-1)))),t.pipe(co(void 0),tg(),Zn(([r,s])=>s.length>0||!r),(0,St.U)(([r,s])=>s),Tn.iC)}auditTrail(e){return this.stateChanges(e).pipe($i((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=zM(e);return GM(this.query,t,this.afs.schedulers.outsideAngular).pipe(Tn.iC)}valueChanges(e={}){return XC(this.query,this.afs.schedulers.outsideAngular).pipe((0,St.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),Tn.iC)}get(e){return(0,Sn.D)(this.query.get(e)).pipe(Tn.iC)}add(e){return this.ref.add(e)}doc(e){return new qM(this.ref.doc(e),this.afs)}}class qM{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:s,query:u}=YM(r,t);return new WM(s,u,this.afs)}snapshotChanges(){return function aP(n,e){return HM(n,e).pipe(co(void 0),tg(),(0,St.U)(([t,r])=>r.exists?(null==t?void 0:t.exists)?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(Tn.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,St.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,Sn.D)(this.ref.get(e)).pipe(Tn.iC)}}class cP{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?uI(this.query,this.afs.schedulers.outsideAngular).pipe((0,St.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),Zn(t=>t.length>0),Tn.iC):uI(this.query,this.afs.schedulers.outsideAngular).pipe(Tn.iC)}auditTrail(e){return this.stateChanges(e).pipe($i((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=zM(e);return GM(this.query,t,this.afs.schedulers.outsideAngular).pipe(Tn.iC)}valueChanges(e={}){return XC(this.query,this.afs.schedulers.outsideAngular).pipe((0,St.U)(r=>r.payload.docs.map(s=>e.idField?Object.assign({[e.idField]:s.id},s.data()):s.data())),Tn.iC)}get(e){return(0,Sn.D)(this.query.get(e)).pipe(Tn.iC)}}const KM=new h.OlP("angularfire2.enableFirestorePersistence"),ZM=new h.OlP("angularfire2.firestore.persistenceSettings"),dP=new h.OlP("angularfire2.firestore.settings"),hP=new h.OlP("angularfire2.firestore.use-emulator");function YM(n,e=(t=>t)){return{query:e(n),ref:n}}let QM=(()=>{class n{constructor(t,r,s,u,c,p,_,b,A,x,V,q,Y,ve,Ue,_t,wt){this.schedulers=_;const Ct=(0,Ws.on)(t,p,r),ft=A;x&&jM(Ct,p,V,Y,ve,Ue,q,_t),[this.firestore,this.persistenceEnabled$]=(0,Ws.cc)(`${Ct.name}.firestore`,"AngularFirestore",Ct.name,()=>{const Bt=p.runOutsideAngular(()=>Ct.firestore());if(u&&Bt.settings(u),ft&&Bt.useEmulator(...ft),s&&!Mr(c)){const Qt=()=>{try{return(0,Sn.D)(Bt.enablePersistence(b||void 0).then(()=>!0,()=>!1))}catch(vn){return"undefined"!=typeof console&&console.warn(vn),ut(!1)}};return[Bt,p.runOutsideAngular(Qt)]}return[Bt,ut(!1)]},[u,ft,s])}collection(t,r){let s;s="string"==typeof t?this.firestore.collection(t):t;const{ref:u,query:c}=YM(s,r),p=this.schedulers.ngZone.run(()=>u);return new WM(p,c,this)}collectionGroup(t,r){const s=r||(c=>c),u=this.firestore.collectionGroup(t);return new cP(s(u),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const s=this.schedulers.ngZone.run(()=>r);return new qM(s,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Ws.Dh),h.LFG(Ws.xv,8),h.LFG(KM,8),h.LFG(dP,8),h.LFG(h.Lbi),h.LFG(h.R0b),h.LFG(Tn.HU),h.LFG(ZM,8),h.LFG(hP,8),h.LFG($M,8),h.LFG(kM,8),h.LFG(FM,8),h.LFG(LM,8),h.LFG(VM,8),h.LFG(UM,8),h.LFG(BM,8),h.LFG(aI,8))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),fP=(()=>{class n{constructor(){iP.Z.registerVersion("angularfire",Tn.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:KM,useValue:!0},{provide:ZM,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:[QM]}),n})(),JM=(()=>{class n{constructor(t){this.firestore=t}agregarEmpleado(t){return this.firestore.collection("empleados").add(t)}getEmpleados(){return this.firestore.collection("empleados",t=>t.orderBy("fechaCreacion","asc")).snapshotChanges()}eliminarEmpleado(t){return this.firestore.collection("empleados").doc(t).delete()}getEmpleado(t){return this.firestore.collection("empleados").doc(t).snapshotChanges()}actualizarEmpleado(t,r){return this.firestore.collection("empleados").doc(t).update(r)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(QM))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class XM{}const pc="*";function gP(n,e){return{type:7,name:n,definitions:e,options:{}}}function ex(n,e=null){return{type:4,styles:e,timings:n}}function tx(n,e=null){return{type:2,steps:n,options:e}}function rE(n){return{type:6,styles:n,offset:null}}function tA(n,e,t){return{type:0,name:n,styles:e,options:t}}function nx(n,e,t=null){return{type:1,expr:n,animation:e,options:t}}function rx(n){Promise.resolve(null).then(n)}class iE{constructor(e=0,t=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=e+t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._onStartFns.push(e)}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){rx(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class ix{constructor(e){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=e;let t=0,r=0,s=0;const u=this.players.length;0==u?rx(()=>this._onFinish()):this.players.forEach(c=>{c.onDone(()=>{++t==u&&this._onFinish()}),c.onDestroy(()=>{++r==u&&this._onDestroy()}),c.onStart(()=>{++s==u&&this._onStart()})}),this.totalTime=this.players.reduce((c,p)=>Math.max(c,p.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){const t=e*this.totalTime;this.players.forEach(r=>{const s=r.totalTime?Math.min(1,t/r.totalTime):1;r.setPosition(s)})}getPosition(){const e=this.players.reduce((t,r)=>null===t||r.totalTime>t.totalTime?r:t,null);return null!=e?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}const sx=["toast-component",""];function mP(n,e){if(1&n){const t=h.EpF();h.TgZ(0,"button",5),h.NdJ("click",function(){return h.CHM(t),h.oxw().remove()}),h.TgZ(1,"span",6),h._uU(2,"\xd7"),h.qZA()()}}function yP(n,e){if(1&n&&(h.ynx(0),h._uU(1),h.BQk()),2&n){const t=h.oxw(2);h.xp6(1),h.hij("[",t.duplicatesCount+1,"]")}}function _P(n,e){if(1&n&&(h.TgZ(0,"div"),h._uU(1),h.YNc(2,yP,2,1,"ng-container",4),h.qZA()),2&n){const t=h.oxw();h.Tol(t.options.titleClass),h.uIk("aria-label",t.title),h.xp6(1),h.hij(" ",t.title," "),h.xp6(1),h.Q6J("ngIf",t.duplicatesCount)}}function vP(n,e){if(1&n&&h._UZ(0,"div",7),2&n){const t=h.oxw();h.Tol(t.options.messageClass),h.Q6J("innerHTML",t.message,h.oJD)}}function EP(n,e){if(1&n&&(h.TgZ(0,"div",8),h._uU(1),h.qZA()),2&n){const t=h.oxw();h.Tol(t.options.messageClass),h.uIk("aria-label",t.message),h.xp6(1),h.hij(" ",t.message," ")}}function wP(n,e){if(1&n&&(h.TgZ(0,"div"),h._UZ(1,"div",9),h.qZA()),2&n){const t=h.oxw();h.xp6(1),h.Udp("width",t.width+"%")}}function bP(n,e){if(1&n){const t=h.EpF();h.TgZ(0,"button",5),h.NdJ("click",function(){return h.CHM(t),h.oxw().remove()}),h.TgZ(1,"span",6),h._uU(2,"\xd7"),h.qZA()()}}function IP(n,e){if(1&n&&(h.ynx(0),h._uU(1),h.BQk()),2&n){const t=h.oxw(2);h.xp6(1),h.hij("[",t.duplicatesCount+1,"]")}}function DP(n,e){if(1&n&&(h.TgZ(0,"div"),h._uU(1),h.YNc(2,IP,2,1,"ng-container",4),h.qZA()),2&n){const t=h.oxw();h.Tol(t.options.titleClass),h.uIk("aria-label",t.title),h.xp6(1),h.hij(" ",t.title," "),h.xp6(1),h.Q6J("ngIf",t.duplicatesCount)}}function TP(n,e){if(1&n&&h._UZ(0,"div",7),2&n){const t=h.oxw();h.Tol(t.options.messageClass),h.Q6J("innerHTML",t.message,h.oJD)}}function CP(n,e){if(1&n&&(h.TgZ(0,"div",8),h._uU(1),h.qZA()),2&n){const t=h.oxw();h.Tol(t.options.messageClass),h.uIk("aria-label",t.message),h.xp6(1),h.hij(" ",t.message," ")}}function AP(n,e){if(1&n&&(h.TgZ(0,"div"),h._UZ(1,"div",9),h.qZA()),2&n){const t=h.oxw();h.xp6(1),h.Udp("width",t.width+"%")}}class SP{constructor(e,t){this.component=e,this.injector=t}attach(e,t){return this._attachedHost=e,e.attach(this,t)}detach(){const e=this._attachedHost;if(e)return this._attachedHost=void 0,e.detach()}get isAttached(){return null!=this._attachedHost}setAttachedHost(e){this._attachedHost=e}}class lI{constructor(e,t,r,s,u,c){this.toastId=e,this.config=t,this.message=r,this.title=s,this.toastType=u,this.toastRef=c,this._onTap=new fr.x,this._onAction=new fr.x,this.toastRef.afterClosed().subscribe(()=>{this._onAction.complete(),this._onTap.complete()})}triggerTap(){this._onTap.next(),this.config.tapToDismiss&&this._onTap.complete()}onTap(){return this._onTap.asObservable()}triggerAction(e){this._onAction.next(e)}onAction(){return this._onAction.asObservable()}}const ox={maxOpened:0,autoDismiss:!1,newestOnTop:!0,preventDuplicates:!1,countDuplicates:!1,resetTimeoutOnDuplicate:!1,includeTitleDuplicates:!1,iconClasses:{error:"toast-error",info:"toast-info",success:"toast-success",warning:"toast-warning"},closeButton:!1,disableTimeOut:!1,timeOut:5e3,extendedTimeOut:1e3,enableHtml:!1,progressBar:!1,toastClass:"ngx-toastr",positionClass:"toast-top-right",titleClass:"toast-title",messageClass:"toast-message",easing:"ease-in",easeTime:300,tapToDismiss:!0,onActivateTick:!1,progressAnimation:"decreasing",payload:null},ax=new h.OlP("ToastConfig");class xP{constructor(e){this._overlayRef=e,this.duplicatesCount=0,this._afterClosed=new fr.x,this._activate=new fr.x,this._manualClose=new fr.x,this._resetTimeout=new fr.x,this._countDuplicate=new fr.x}manualClose(){this._manualClose.next(),this._manualClose.complete()}manualClosed(){return this._manualClose.asObservable()}timeoutReset(){return this._resetTimeout.asObservable()}countDuplicate(){return this._countDuplicate.asObservable()}close(){this._overlayRef.detach(),this._afterClosed.next(),this._manualClose.next(),this._afterClosed.complete(),this._manualClose.complete(),this._activate.complete(),this._resetTimeout.complete(),this._countDuplicate.complete()}afterClosed(){return this._afterClosed.asObservable()}isInactive(){return this._activate.isStopped}activate(){this._activate.next(),this._activate.complete()}afterActivate(){return this._activate.asObservable()}onDuplicate(e,t){e&&this._resetTimeout.next(),t&&this._countDuplicate.next(++this.duplicatesCount)}}class NP{constructor(e,t){this._toastPackage=e,this._parentInjector=t}get(e,t,r){return e===lI?this._toastPackage:this._parentInjector.get(e,t,r)}}class RP extends class MP{attach(e,t){return this._attachedPortal=e,this.attachComponentPortal(e,t)}detach(){this._attachedPortal&&this._attachedPortal.setAttachedHost(),this._attachedPortal=void 0,this._disposeFn&&(this._disposeFn(),this._disposeFn=void 0)}setDisposeFn(e){this._disposeFn=e}}{constructor(e,t,r){super(),this._hostDomElement=e,this._componentFactoryResolver=t,this._appRef=r}attachComponentPortal(e,t){const r=this._componentFactoryResolver.resolveComponentFactory(e.component);let s;return s=r.create(e.injector),this._appRef.attachView(s.hostView),this.setDisposeFn(()=>{this._appRef.detachView(s.hostView),s.destroy()}),t?this._hostDomElement.insertBefore(this._getComponentRootNode(s),this._hostDomElement.firstChild):this._hostDomElement.appendChild(this._getComponentRootNode(s)),s}_getComponentRootNode(e){return e.hostView.rootNodes[0]}}class OP{constructor(e){this._portalHost=e}attach(e,t=!0){return this._portalHost.attach(e,t)}detach(){return this._portalHost.detach()}}let PP=(()=>{class n{constructor(t){this._document=t}ngOnDestroy(){this._containerElement&&this._containerElement.parentNode&&this._containerElement.parentNode.removeChild(this._containerElement)}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const t=this._document.createElement("div");t.classList.add("overlay-container"),t.setAttribute("aria-live","polite"),this._document.body.appendChild(t),this._containerElement=t}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(de))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),kP=(()=>{class n{constructor(t,r,s,u){this._overlayContainer=t,this._componentFactoryResolver=r,this._appRef=s,this._document=u,this._paneElements=new Map}create(t,r){return this._createOverlayRef(this.getPaneElement(t,r))}getPaneElement(t="",r){return this._paneElements.get(r)||this._paneElements.set(r,{}),this._paneElements.get(r)[t]||(this._paneElements.get(r)[t]=this._createPaneElement(t,r)),this._paneElements.get(r)[t]}_createPaneElement(t,r){const s=this._document.createElement("div");return s.id="toast-container",s.classList.add(t),s.classList.add("toast-container"),r?r.getContainerElement().appendChild(s):this._overlayContainer.getContainerElement().appendChild(s),s}_createPortalHost(t){return new RP(t,this._componentFactoryResolver,this._appRef)}_createOverlayRef(t){return new OP(this._createPortalHost(t))}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(PP),h.LFG(h._Vd),h.LFG(h.z2F),h.LFG(de))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),cI=(()=>{class n{constructor(t,r,s,u,c){this.overlay=r,this._injector=s,this.sanitizer=u,this.ngZone=c,this.currentlyActive=0,this.toasts=[],this.index=0,this.toastrConfig=Object.assign(Object.assign({},t.default),t.config),t.config.iconClasses&&(this.toastrConfig.iconClasses=Object.assign(Object.assign({},t.default.iconClasses),t.config.iconClasses))}show(t,r,s={},u=""){return this._preBuildNotification(u,t,r,this.applyConfig(s))}success(t,r,s={}){return this._preBuildNotification(this.toastrConfig.iconClasses.success||"",t,r,this.applyConfig(s))}error(t,r,s={}){return this._preBuildNotification(this.toastrConfig.iconClasses.error||"",t,r,this.applyConfig(s))}info(t,r,s={}){return this._preBuildNotification(this.toastrConfig.iconClasses.info||"",t,r,this.applyConfig(s))}warning(t,r,s={}){return this._preBuildNotification(this.toastrConfig.iconClasses.warning||"",t,r,this.applyConfig(s))}clear(t){for(const r of this.toasts)if(void 0!==t){if(r.toastId===t)return void r.toastRef.manualClose()}else r.toastRef.manualClose()}remove(t){const r=this._findToast(t);if(!r||(r.activeToast.toastRef.close(),this.toasts.splice(r.index,1),this.currentlyActive=this.currentlyActive-1,!this.toastrConfig.maxOpened||!this.toasts.length))return!1;if(this.currentlyActive<this.toastrConfig.maxOpened&&this.toasts[this.currentlyActive]){const s=this.toasts[this.currentlyActive].toastRef;s.isInactive()||(this.currentlyActive=this.currentlyActive+1,s.activate())}return!0}findDuplicate(t="",r="",s,u){const{includeTitleDuplicates:c}=this.toastrConfig;for(const p of this.toasts){const _=c&&p.title===t;if((!c||_)&&p.message===r)return p.toastRef.onDuplicate(s,u),p}return null}applyConfig(t={}){return Object.assign(Object.assign({},this.toastrConfig),t)}_findToast(t){for(let r=0;r<this.toasts.length;r++)if(this.toasts[r].toastId===t)return{index:r,activeToast:this.toasts[r]};return null}_preBuildNotification(t,r,s,u){return u.onActivateTick?this.ngZone.run(()=>this._buildNotification(t,r,s,u)):this._buildNotification(t,r,s,u)}_buildNotification(t,r,s,u){if(!u.toastComponent)throw new Error("toastComponent required");const c=this.findDuplicate(s,r,this.toastrConfig.resetTimeoutOnDuplicate&&u.timeOut>0,this.toastrConfig.countDuplicates);if((this.toastrConfig.includeTitleDuplicates&&s||r)&&this.toastrConfig.preventDuplicates&&null!==c)return c;this.previousToastMessage=r;let p=!1;this.toastrConfig.maxOpened&&this.currentlyActive>=this.toastrConfig.maxOpened&&(p=!0,this.toastrConfig.autoDismiss&&this.clear(this.toasts[0].toastId));const _=this.overlay.create(u.positionClass,this.overlayContainer);this.index=this.index+1;let b=r;r&&u.enableHtml&&(b=this.sanitizer.sanitize(h.q3G.HTML,r));const A=new xP(_),x=new lI(this.index,u,b,s,t,A),V=new NP(x,this._injector),q=new SP(u.toastComponent,V),Y=_.attach(q,this.toastrConfig.newestOnTop);A.componentInstance=Y.instance;const ve={toastId:this.index,title:s||"",message:r||"",toastRef:A,onShown:A.afterActivate(),onHidden:A.afterClosed(),onTap:x.onTap(),onAction:x.onAction(),portal:Y};return p||(this.currentlyActive=this.currentlyActive+1,setTimeout(()=>{ve.toastRef.activate()})),this.toasts.push(ve),ve}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(ax),h.LFG(kP),h.LFG(h.zs3),h.LFG(Aa),h.LFG(h.R0b))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),FP=(()=>{class n{constructor(t,r,s){this.toastrService=t,this.toastPackage=r,this.ngZone=s,this.width=-1,this.toastClasses="",this.state={value:"inactive",params:{easeTime:this.toastPackage.config.easeTime,easing:"ease-in"}},this.message=r.message,this.title=r.title,this.options=r.config,this.originalTimeout=r.config.timeOut,this.toastClasses=`${r.toastType} ${r.config.toastClass}`,this.sub=r.toastRef.afterActivate().subscribe(()=>{this.activateToast()}),this.sub1=r.toastRef.manualClosed().subscribe(()=>{this.remove()}),this.sub2=r.toastRef.timeoutReset().subscribe(()=>{this.resetTimeout()}),this.sub3=r.toastRef.countDuplicate().subscribe(u=>{this.duplicatesCount=u})}get displayStyle(){if("inactive"===this.state.value)return"none"}ngOnDestroy(){this.sub.unsubscribe(),this.sub1.unsubscribe(),this.sub2.unsubscribe(),this.sub3.unsubscribe(),clearInterval(this.intervalId),clearTimeout(this.timeout)}activateToast(){this.state=Object.assign(Object.assign({},this.state),{value:"active"}),!0!==this.options.disableTimeOut&&"timeOut"!==this.options.disableTimeOut&&this.options.timeOut&&(this.outsideTimeout(()=>this.remove(),this.options.timeOut),this.hideTime=(new Date).getTime()+this.options.timeOut,this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10))}updateProgress(){if(0===this.width||100===this.width||!this.options.timeOut)return;const t=(new Date).getTime();this.width=(this.hideTime-t)/this.options.timeOut*100,"increasing"===this.options.progressAnimation&&(this.width=100-this.width),this.width<=0&&(this.width=0),this.width>=100&&(this.width=100)}resetTimeout(){clearTimeout(this.timeout),clearInterval(this.intervalId),this.state=Object.assign(Object.assign({},this.state),{value:"active"}),this.outsideTimeout(()=>this.remove(),this.originalTimeout),this.options.timeOut=this.originalTimeout,this.hideTime=(new Date).getTime()+(this.options.timeOut||0),this.width=-1,this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10)}remove(){"removed"!==this.state.value&&(clearTimeout(this.timeout),this.state=Object.assign(Object.assign({},this.state),{value:"removed"}),this.outsideTimeout(()=>this.toastrService.remove(this.toastPackage.toastId),+this.toastPackage.config.easeTime))}tapToast(){"removed"!==this.state.value&&(this.toastPackage.triggerTap(),this.options.tapToDismiss&&this.remove())}stickAround(){"removed"!==this.state.value&&(clearTimeout(this.timeout),this.options.timeOut=0,this.hideTime=0,clearInterval(this.intervalId),this.width=0)}delayedHideToast(){!0===this.options.disableTimeOut||"extendedTimeOut"===this.options.disableTimeOut||0===this.options.extendedTimeOut||"removed"===this.state.value||(this.outsideTimeout(()=>this.remove(),this.options.extendedTimeOut),this.options.timeOut=this.options.extendedTimeOut,this.hideTime=(new Date).getTime()+(this.options.timeOut||0),this.width=-1,this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10))}outsideTimeout(t,r){this.ngZone?this.ngZone.runOutsideAngular(()=>this.timeout=setTimeout(()=>this.runInsideAngular(t),r)):this.timeout=setTimeout(()=>t(),r)}outsideInterval(t,r){this.ngZone?this.ngZone.runOutsideAngular(()=>this.intervalId=setInterval(()=>this.runInsideAngular(t),r)):this.intervalId=setInterval(()=>t(),r)}runInsideAngular(t){this.ngZone?this.ngZone.run(()=>t()):t()}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(cI),h.Y36(lI),h.Y36(h.R0b))},n.\u0275cmp=h.Xpm({type:n,selectors:[["","toast-component",""]],hostVars:5,hostBindings:function(t,r){1&t&&h.NdJ("click",function(){return r.tapToast()})("mouseenter",function(){return r.stickAround()})("mouseleave",function(){return r.delayedHideToast()}),2&t&&(h.d8E("@flyInOut",r.state),h.Tol(r.toastClasses),h.Udp("display",r.displayStyle))},attrs:sx,decls:5,vars:5,consts:[["type","button","class","toast-close-button","aria-label","Close",3,"click",4,"ngIf"],[3,"class",4,"ngIf"],["role","alert",3,"class","innerHTML",4,"ngIf"],["role","alert",3,"class",4,"ngIf"],[4,"ngIf"],["type","button","aria-label","Close",1,"toast-close-button",3,"click"],["aria-hidden","true"],["role","alert",3,"innerHTML"],["role","alert"],[1,"toast-progress"]],template:function(t,r){1&t&&(h.YNc(0,mP,3,0,"button",0),h.YNc(1,_P,3,5,"div",1),h.YNc(2,vP,1,3,"div",2),h.YNc(3,EP,2,4,"div",3),h.YNc(4,wP,2,2,"div",4)),2&t&&(h.Q6J("ngIf",r.options.closeButton),h.xp6(1),h.Q6J("ngIf",r.title),h.xp6(1),h.Q6J("ngIf",r.message&&r.options.enableHtml),h.xp6(1),h.Q6J("ngIf",r.message&&!r.options.enableHtml),h.xp6(1),h.Q6J("ngIf",r.options.progressBar))},directives:[lr],encapsulation:2,data:{animation:[gP("flyInOut",[tA("inactive",rE({opacity:0})),tA("active",rE({opacity:1})),tA("removed",rE({opacity:0})),nx("inactive => active",ex("{{ easeTime }}ms {{ easing }}")),nx("active => removed",ex("{{ easeTime }}ms {{ easing }}"))])]}}),n})();const LP=Object.assign(Object.assign({},ox),{toastComponent:FP});let VP=(()=>{class n{static forRoot(t={}){return{ngModule:n,providers:[{provide:ax,useValue:{default:LP,config:t}}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[[xs]]}),n})(),UP=(()=>{class n{constructor(t,r,s){this.toastrService=t,this.toastPackage=r,this.appRef=s,this.width=-1,this.toastClasses="",this.state="inactive",this.message=r.message,this.title=r.title,this.options=r.config,this.originalTimeout=r.config.timeOut,this.toastClasses=`${r.toastType} ${r.config.toastClass}`,this.sub=r.toastRef.afterActivate().subscribe(()=>{this.activateToast()}),this.sub1=r.toastRef.manualClosed().subscribe(()=>{this.remove()}),this.sub2=r.toastRef.timeoutReset().subscribe(()=>{this.resetTimeout()}),this.sub3=r.toastRef.countDuplicate().subscribe(u=>{this.duplicatesCount=u})}get displayStyle(){if("inactive"===this.state)return"none"}ngOnDestroy(){this.sub.unsubscribe(),this.sub1.unsubscribe(),this.sub2.unsubscribe(),this.sub3.unsubscribe(),clearInterval(this.intervalId),clearTimeout(this.timeout)}activateToast(){this.state="active",!(!0===this.options.disableTimeOut||"timeOut"===this.options.disableTimeOut)&&this.options.timeOut&&(this.timeout=setTimeout(()=>{this.remove()},this.options.timeOut),this.hideTime=(new Date).getTime()+this.options.timeOut,this.options.progressBar&&(this.intervalId=setInterval(()=>this.updateProgress(),10))),this.options.onActivateTick&&this.appRef.tick()}updateProgress(){if(0===this.width||100===this.width||!this.options.timeOut)return;const t=(new Date).getTime();this.width=(this.hideTime-t)/this.options.timeOut*100,"increasing"===this.options.progressAnimation&&(this.width=100-this.width),this.width<=0&&(this.width=0),this.width>=100&&(this.width=100)}resetTimeout(){clearTimeout(this.timeout),clearInterval(this.intervalId),this.state="active",this.options.timeOut=this.originalTimeout,this.timeout=setTimeout(()=>this.remove(),this.originalTimeout),this.hideTime=(new Date).getTime()+(this.originalTimeout||0),this.width=-1,this.options.progressBar&&(this.intervalId=setInterval(()=>this.updateProgress(),10))}remove(){"removed"!==this.state&&(clearTimeout(this.timeout),this.state="removed",this.timeout=setTimeout(()=>this.toastrService.remove(this.toastPackage.toastId)))}tapToast(){"removed"!==this.state&&(this.toastPackage.triggerTap(),this.options.tapToDismiss&&this.remove())}stickAround(){"removed"!==this.state&&(clearTimeout(this.timeout),this.options.timeOut=0,this.hideTime=0,clearInterval(this.intervalId),this.width=0)}delayedHideToast(){!0===this.options.disableTimeOut||"extendedTimeOut"===this.options.disableTimeOut||0===this.options.extendedTimeOut||"removed"===this.state||(this.timeout=setTimeout(()=>this.remove(),this.options.extendedTimeOut),this.options.timeOut=this.options.extendedTimeOut,this.hideTime=(new Date).getTime()+(this.options.timeOut||0),this.width=-1,this.options.progressBar&&(this.intervalId=setInterval(()=>this.updateProgress(),10)))}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(cI),h.Y36(lI),h.Y36(h.z2F))},n.\u0275cmp=h.Xpm({type:n,selectors:[["","toast-component",""]],hostVars:4,hostBindings:function(t,r){1&t&&h.NdJ("click",function(){return r.tapToast()})("mouseenter",function(){return r.stickAround()})("mouseleave",function(){return r.delayedHideToast()}),2&t&&(h.Tol(r.toastClasses),h.Udp("display",r.displayStyle))},attrs:sx,decls:5,vars:5,consts:[["type","button","class","toast-close-button","aria-label","Close",3,"click",4,"ngIf"],[3,"class",4,"ngIf"],["role","alert",3,"class","innerHTML",4,"ngIf"],["role","alert",3,"class",4,"ngIf"],[4,"ngIf"],["type","button","aria-label","Close",1,"toast-close-button",3,"click"],["aria-hidden","true"],["role","alert",3,"innerHTML"],["role","alert"],[1,"toast-progress"]],template:function(t,r){1&t&&(h.YNc(0,bP,3,0,"button",0),h.YNc(1,DP,3,5,"div",1),h.YNc(2,TP,1,3,"div",2),h.YNc(3,CP,2,4,"div",3),h.YNc(4,AP,2,2,"div",4)),2&t&&(h.Q6J("ngIf",r.options.closeButton),h.xp6(1),h.Q6J("ngIf",r.title),h.xp6(1),h.Q6J("ngIf",r.message&&r.options.enableHtml),h.xp6(1),h.Q6J("ngIf",r.message&&!r.options.enableHtml),h.xp6(1),h.Q6J("ngIf",r.options.progressBar))},directives:[lr],encapsulation:2}),n})();function BP(n,e){1&n&&(h.TgZ(0,"h4",7),h._uU(1,"No hay registros"),h.qZA())}Object.assign(Object.assign({},ox),{toastComponent:UP});const jP=function(n){return["/edit-employee/",n]};function $P(n,e){if(1&n){const t=h.EpF();h.TgZ(0,"tr")(1,"td"),h._uU(2),h.qZA(),h.TgZ(3,"td"),h._uU(4),h.qZA(),h.TgZ(5,"td"),h._uU(6),h.qZA(),h.TgZ(7,"td"),h._uU(8),h.ALo(9,"currency"),h.qZA(),h.TgZ(10,"td"),h._UZ(11,"i",10),h.TgZ(12,"i",11),h.NdJ("click",function(){const u=h.CHM(t).$implicit;return h.oxw(2).eliminarEmpleado(u.id)}),h.qZA()()()}if(2&n){const t=e.$implicit;h.xp6(2),h.Oqu(t.nombre),h.xp6(2),h.Oqu(t.apellido),h.xp6(2),h.Oqu(t.documento),h.xp6(2),h.Oqu(h.lcZ(9,5,t.salario)),h.xp6(3),h.Q6J("routerLink",h.VKq(7,jP,t.id))}}function HP(n,e){if(1&n&&(h.TgZ(0,"table",8)(1,"thead")(2,"tr")(3,"th"),h._uU(4,"Nombre"),h.qZA(),h.TgZ(5,"th"),h._uU(6,"Apellido"),h.qZA(),h.TgZ(7,"th"),h._uU(8,"RFC"),h.qZA(),h.TgZ(9,"th"),h._uU(10,"Salario"),h.qZA(),h.TgZ(11,"th"),h._uU(12,"Opciones"),h.qZA()()(),h.TgZ(13,"tbody"),h.YNc(14,$P,13,9,"tr",9),h.qZA()()),2&n){const t=h.oxw();h.xp6(14),h.Q6J("ngForOf",t.empleados)}}let GP=(()=>{class n{constructor(t,r){this._employeeService=t,this.toastr=r,this.empleados=[]}ngOnInit(){this.getEmpleados()}getEmpleados(){this._employeeService.getEmpleados().subscribe(t=>{this.empleados=[],t.forEach(r=>{this.empleados.push(Object.assign({id:r.payload.doc.id},r.payload.doc.data()))}),console.log(this.empleados)})}eliminarEmpleado(t){this._employeeService.eliminarEmpleado(t).then(()=>{console.log("Empleado eliminado"),this.toastr.error("El empleado fue eliminado","Registro eliminado",{positionClass:"toast-center-center"})}).catch(r=>{console.log("Error al eliminar el empleado")})}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(JM),h.Y36(cI))},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-list-employees"]],decls:9,vars:2,consts:[[1,"container","mt-5"],[1,"card"],[1,"card-body"],[1,"h3"],["routerLink","/create-employee",1,"btn","btn-primary","btn-lg","float-right"],["class","text-center mt-3",4,"ngIf"],["class","table mt-4 table-striped",4,"ngIf"],[1,"text-center","mt-3"],[1,"table","mt-4","table-striped"],[4,"ngFor","ngForOf"],[1,"fa-solid","fa-pen-to-square","mr-3","fa-lg","text-info",3,"routerLink"],[1,"fa-regular","fa-trash-can","fa-lg","text-danger",3,"click"]],template:function(t,r){1&t&&(h.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"span",3),h._uU(4,"Lista de empleados"),h.qZA(),h.TgZ(5,"button",4),h._uU(6,"Agregar"),h.qZA(),h.YNc(7,BP,2,0,"h4",5),h.YNc(8,HP,15,1,"table",6),h.qZA()()()),2&t&&(h.xp6(7),h.Q6J("ngIf",0==r.empleados.length),h.xp6(1),h.Q6J("ngIf",r.empleados.length>0))},directives:[Bh,lr,zn],pipes:[no],styles:["i[_ngcontent-%COMP%]{cursor:pointer}"]}),n})(),ux=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=s=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.Qsj),h.Y36(h.SBq))},n.\u0275dir=h.lG2({type:n}),n})(),hp=(()=>{class n extends ux{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=h.n5z(n)))(r||n)}}(),n.\u0275dir=h.lG2({type:n,features:[h.qOj]}),n})();const el=new h.OlP("NgValueAccessor"),qP={provide:el,useExisting:(0,h.Gpc)(()=>dI),multi:!0},ZP=new h.OlP("CompositionEventMode");let dI=(()=>{class n extends ux{constructor(t,r,s){super(t,r),this._compositionMode=s,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function KP(){const n=R()?R().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",null==t?"":t)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.Qsj),h.Y36(h.SBq),h.Y36(ZP,8))},n.\u0275dir=h.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,r){1&t&&h.NdJ("input",function(u){return r._handleInput(u.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(u){return r._compositionEnd(u.target.value)})},features:[h._Bn([qP]),h.qOj]}),n})();function ih(n){return null==n||0===n.length}function cx(n){return null!=n&&"number"==typeof n.length}const Xi=new h.OlP("NgValidators"),sh=new h.OlP("NgAsyncValidators"),YP=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class hI{static min(e){return dx(e)}static max(e){return function hx(n){return e=>{if(ih(e.value)||ih(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}(e)}static required(e){return function fx(n){return ih(n.value)?{required:!0}:null}(e)}static requiredTrue(e){return function px(n){return!0===n.value?null:{required:!0}}(e)}static email(e){return function gx(n){return ih(n.value)||YP.test(n.value)?null:{email:!0}}(e)}static minLength(e){return function mx(n){return e=>ih(e.value)||!cx(e.value)?null:e.value.length<n?{minlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static maxLength(e){return function yx(n){return e=>cx(e.value)&&e.value.length>n?{maxlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static pattern(e){return function _x(n){if(!n)return fI;let e,t;return"string"==typeof n?(t="","^"!==n.charAt(0)&&(t+="^"),t+=n,"$"!==n.charAt(n.length-1)&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),r=>{if(ih(r.value))return null;const s=r.value;return e.test(s)?null:{pattern:{requiredPattern:t,actualValue:s}}}}(e)}static nullValidator(e){return null}static compose(e){return Dx(e)}static composeAsync(e){return Tx(e)}}function dx(n){return e=>{if(ih(e.value)||ih(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}function fI(n){return null}function vx(n){return null!=n}function Ex(n){const e=(0,h.QGY)(n)?(0,Sn.D)(n):n;return(0,h.CqO)(e),e}function wx(n){let e={};return n.forEach(t=>{e=null!=t?Object.assign(Object.assign({},e),t):e}),0===Object.keys(e).length?null:e}function bx(n,e){return e.map(t=>t(n))}function Ix(n){return n.map(e=>function QP(n){return!n.validate}(e)?e:t=>e.validate(t))}function Dx(n){if(!n)return null;const e=n.filter(vx);return 0==e.length?null:function(t){return wx(bx(t,e))}}function rA(n){return null!=n?Dx(Ix(n)):null}function Tx(n){if(!n)return null;const e=n.filter(vx);return 0==e.length?null:function(t){return function zP(...n){const e=(0,hu.jO)(n),{args:t,keys:r}=$c(n),s=new Di.y(u=>{const{length:c}=t;if(!c)return void u.complete();const p=new Array(c);let _=c,b=c;for(let A=0;A<c;A++){let x=!1;(0,ll.Xf)(t[A]).subscribe((0,Kn.x)(u,V=>{x||(x=!0,b--),p[A]=V},()=>_--,void 0,()=>{(!_||!x)&&(b||u.next(r?Gc(r,p):p),u.complete())}))}});return e?s.pipe(fu(e)):s}(bx(t,e).map(Ex)).pipe((0,St.U)(wx))}}function iA(n){return null!=n?Tx(Ix(n)):null}function Cx(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function Ax(n){return n._rawValidators}function Sx(n){return n._rawAsyncValidators}function sA(n){return n?Array.isArray(n)?n:[n]:[]}function pI(n,e){return Array.isArray(n)?n.includes(e):n===e}function Mx(n,e){const t=sA(e);return sA(n).forEach(s=>{pI(t,s)||t.push(s)}),t}function xx(n,e){return sA(e).filter(t=>!pI(n,t))}class Nx{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=rA(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=iA(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class oh extends Nx{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class Is extends Nx{get formDirective(){return null}get path(){return null}}class Rx{constructor(e){this._cd=e}is(e){var t,r,s;return"submitted"===e?!!(null===(t=this._cd)||void 0===t?void 0:t.submitted):!!(null===(s=null===(r=this._cd)||void 0===r?void 0:r.control)||void 0===s?void 0:s[e])}}let Ox=(()=>{class n extends Rx{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(oh,2))},n.\u0275dir=h.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,r){2&t&&h.ekj("ng-untouched",r.is("untouched"))("ng-touched",r.is("touched"))("ng-pristine",r.is("pristine"))("ng-dirty",r.is("dirty"))("ng-valid",r.is("valid"))("ng-invalid",r.is("invalid"))("ng-pending",r.is("pending"))},features:[h.qOj]}),n})(),Px=(()=>{class n extends Rx{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(Is,10))},n.\u0275dir=h.lG2({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(t,r){2&t&&h.ekj("ng-untouched",r.is("untouched"))("ng-touched",r.is("touched"))("ng-pristine",r.is("pristine"))("ng-dirty",r.is("dirty"))("ng-valid",r.is("valid"))("ng-invalid",r.is("invalid"))("ng-pending",r.is("pending"))("ng-submitted",r.is("submitted"))},features:[h.qOj]}),n})();function sE(n,e){uA(n,e),e.valueAccessor.writeValue(n.value),function s1(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&Fx(n,e)})}(n,e),function a1(n,e){const t=(r,s)=>{e.valueAccessor.writeValue(r),s&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function o1(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&Fx(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function i1(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function yI(n,e,t=!0){const r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),vI(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function _I(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function uA(n,e){const t=Ax(n);null!==e.validator?n.setValidators(Cx(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=Sx(n);null!==e.asyncValidator?n.setAsyncValidators(Cx(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const s=()=>n.updateValueAndValidity();_I(e._rawValidators,s),_I(e._rawAsyncValidators,s)}function vI(n,e){let t=!1;if(null!==n){if(null!==e.validator){const s=Ax(n);if(Array.isArray(s)&&s.length>0){const u=s.filter(c=>c!==e.validator);u.length!==s.length&&(t=!0,n.setValidators(u))}}if(null!==e.asyncValidator){const s=Sx(n);if(Array.isArray(s)&&s.length>0){const u=s.filter(c=>c!==e.asyncValidator);u.length!==s.length&&(t=!0,n.setAsyncValidators(u))}}}const r=()=>{};return _I(e._rawValidators,r),_I(e._rawAsyncValidators,r),t}function Fx(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function dA(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}const oE="VALID",EI="INVALID",Um="PENDING",aE="DISABLED";function fA(n){return(wI(n)?n.validators:n)||null}function Bx(n){return Array.isArray(n)?rA(n):n||null}function pA(n,e){return(wI(e)?e.asyncValidators:n)||null}function jx(n){return Array.isArray(n)?iA(n):n||null}function wI(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}const gA=n=>n instanceof yA,bI=n=>n instanceof II,$x=n=>n instanceof Wx;function Hx(n){return gA(n)?n.value:n.getRawValue()}function Gx(n,e){const t=bI(n),r=n.controls;if(!(t?Object.keys(r):r).length)throw new h.vHH(1e3,"");if(!r[e])throw new h.vHH(1001,"")}function zx(n,e){bI(n),n._forEachChild((r,s)=>{if(void 0===e[s])throw new h.vHH(1002,"")})}class mA{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=e,this._rawAsyncValidators=t,this._composedValidatorFn=Bx(this._rawValidators),this._composedAsyncValidatorFn=jx(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===oE}get invalid(){return this.status===EI}get pending(){return this.status==Um}get disabled(){return this.status===aE}get enabled(){return this.status!==aE}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._rawValidators=e,this._composedValidatorFn=Bx(e)}setAsyncValidators(e){this._rawAsyncValidators=e,this._composedAsyncValidatorFn=jx(e)}addValidators(e){this.setValidators(Mx(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(Mx(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(xx(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(xx(e,this._rawAsyncValidators))}hasValidator(e){return pI(this._rawValidators,e)}hasAsyncValidator(e){return pI(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=Um,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=aE,this.errors=null,this._forEachChild(r=>{r.disable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=oE,this._forEachChild(r=>{r.enable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===oE||this.status===Um)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?aE:oE}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=Um,this._hasOwnPendingAsyncValidator=!0;const t=Ex(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){return function d1(n,e,t){if(null==e||(Array.isArray(e)||(e=e.split(t)),Array.isArray(e)&&0===e.length))return null;let r=n;return e.forEach(s=>{r=bI(r)?r.controls.hasOwnProperty(s)?r.controls[s]:null:$x(r)&&r.at(s)||null}),r}(this,e,".")}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new h.vpe,this.statusChanges=new h.vpe}_calculateStatus(){return this._allControlsDisabled()?aE:this.errors?EI:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Um)?Um:this._anyControlsHaveStatus(EI)?EI:oE}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_isBoxedValue(e){return"object"==typeof e&&null!==e&&2===Object.keys(e).length&&"value"in e&&"disabled"in e}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){wI(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class yA extends mA{constructor(e=null,t,r){super(fA(t),pA(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),wI(t)&&t.initialValueIsDefault&&(this.defaultValue=this._isBoxedValue(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){dA(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){dA(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){this._isBoxedValue(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}}class II extends mA{constructor(e,t,r){super(fA(t),pA(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){zx(this,e),Object.keys(e).forEach(r=>{Gx(this,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{this.controls[r]&&this.controls[r].patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,s)=>{r.reset(e[s],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=Hx(t),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const t of Object.keys(this.controls)){const r=this.controls[t];if(this.contains(t)&&e(r))return!0}return!1}_reduceValue(){return this._reduceChildren({},(e,t,r)=>((t.enabled||this.disabled)&&(e[r]=t.value),e))}_reduceChildren(e,t){let r=e;return this._forEachChild((s,u)=>{r=t(r,s,u)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}}class Wx extends mA{constructor(e,t,r){super(fA(t),pA(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[e]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,r={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),t&&(this.controls.splice(e,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){zx(this,e),e.forEach((r,s)=>{Gx(this,s),this.at(s).setValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(e.forEach((r,s)=>{this.at(s)&&this.at(s).patchValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((r,s)=>{r.reset(e[s],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>Hx(e))}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_syncPendingControls(){let e=this.controls.reduce((t,r)=>!!r._syncPendingControls()||t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,r)=>{e(t,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}}let Qx=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=h.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),n})();const g1={provide:el,useExisting:(0,h.Gpc)(()=>vA),multi:!0};let vA=(()=>{class n extends hp{writeValue(t){this.setProperty("value",null==t?"":t)}registerOnChange(t){this.onChange=r=>{t(""==r?null:parseFloat(r))}}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=h.n5z(n)))(r||n)}}(),n.\u0275dir=h.lG2({type:n,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(t,r){1&t&&h.NdJ("input",function(u){return r.onChange(u.target.value)})("blur",function(){return r.onTouched()})},features:[h._Bn([g1]),h.qOj]}),n})(),Jx=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({}),n})();const EA=new h.OlP("NgModelWithFormControlWarning"),E1={provide:Is,useExisting:(0,h.Gpc)(()=>DI)};let DI=(()=>{class n extends Is{constructor(t,r){super(),this.validators=t,this.asyncValidators=r,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new h.vpe,this._setValidators(t),this._setAsyncValidators(r)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(vI(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const r=this.form.get(t.path);return sE(r,t),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),r}getControl(t){return this.form.get(t.path)}removeControl(t){yI(t.control||null,t,!1),dA(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,r){this.form.get(t.path).setValue(r)}onSubmit(t){return this.submitted=!0,function Ux(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}(this.form,this.directives),this.ngSubmit.emit(t),!1}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const r=t.control,s=this.form.get(t.path);r!==s&&(yI(r||null,t),gA(s)&&(sE(s,t),t.control=s))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){const r=this.form.get(t.path);(function Lx(n,e){uA(n,e)})(r,t),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){const r=this.form.get(t.path);r&&function u1(n,e){return vI(n,e)}(r,t)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){uA(this.form,this),this._oldForm&&vI(this._oldForm,this)}_checkFormPresent(){}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(Xi,10),h.Y36(sh,10))},n.\u0275dir=h.lG2({type:n,selectors:[["","formGroup",""]],hostBindings:function(t,r){1&t&&h.NdJ("submit",function(u){return r.onSubmit(u)})("reset",function(){return r.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[h._Bn([E1]),h.qOj,h.TTD]}),n})();const I1={provide:oh,useExisting:(0,h.Gpc)(()=>IA)};let IA=(()=>{class n extends oh{constructor(t,r,s,u,c){super(),this._ngModelWarningConfig=c,this._added=!1,this.update=new h.vpe,this._ngModelWarningSent=!1,this._parent=t,this._setValidators(r),this._setAsyncValidators(s),this.valueAccessor=function cA(n,e){if(!e)return null;let t,r,s;return Array.isArray(e),e.forEach(u=>{u.constructor===dI?t=u:function c1(n){return Object.getPrototypeOf(n.constructor)===hp}(u)?r=u:s=u}),s||r||t||null}(0,u)}set isDisabled(t){}ngOnChanges(t){this._added||this._setUpControl(),function lA(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return function mI(n,e){return[...e.path,n]}(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this._added=!0}}return n._ngModelWarningSentOnce=!1,n.\u0275fac=function(t){return new(t||n)(h.Y36(Is,13),h.Y36(Xi,10),h.Y36(sh,10),h.Y36(el,10),h.Y36(EA,8))},n.\u0275dir=h.lG2({type:n,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[h._Bn([I1]),h.qOj,h.TTD]}),n})();let fp=(()=>{class n{constructor(){this._validator=fI}ngOnChanges(t){if(this.inputName in t){const r=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):fI,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return null!=t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=h.lG2({type:n,features:[h.TTD]}),n})();const R1={provide:Xi,useExisting:(0,h.Gpc)(()=>CA),multi:!0};let CA=(()=>{class n extends fp{constructor(){super(...arguments),this.inputName="min",this.normalizeInput=t=>function oN(n){return"number"==typeof n?n:parseFloat(n)}(t),this.createValidator=t=>dx(t)}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=h.n5z(n)))(r||n)}}(),n.\u0275dir=h.lG2({type:n,selectors:[["input","type","number","min","","formControlName",""],["input","type","number","min","","formControl",""],["input","type","number","min","","ngModel",""]],hostVars:1,hostBindings:function(t,r){2&t&&h.uIk("min",r._enabled?r.min:null)},inputs:{min:"min"},features:[h._Bn([R1]),h.qOj]}),n})(),U1=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[[Jx]]}),n})(),fN=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:EA,useValue:t.warnOnNgModelWithFormControl}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[U1]}),n})(),j1=(()=>{class n{group(t,r=null){const s=this._reduceControls(t);let p,u=null,c=null;return null!=r&&(function B1(n){return void 0!==n.asyncValidators||void 0!==n.validators||void 0!==n.updateOn}(r)?(u=null!=r.validators?r.validators:null,c=null!=r.asyncValidators?r.asyncValidators:null,p=null!=r.updateOn?r.updateOn:void 0):(u=null!=r.validator?r.validator:null,c=null!=r.asyncValidator?r.asyncValidator:null)),new II(s,{asyncValidators:c,updateOn:p,validators:u})}control(t,r,s){return new yA(t,r,s)}array(t,r,s){const u=t.map(c=>this._createControl(c));return new Wx(u,r,s)}_reduceControls(t){const r={};return Object.keys(t).forEach(s=>{r[s]=this._createControl(t[s])}),r}_createControl(t){return gA(t)||bI(t)||$x(t)?t:Array.isArray(t)?this.control(t[0],t.length>1?t[1]:null,t.length>2?t[2]:null):this.control(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:fN}),n})();function $1(n,e){1&n&&(h.TgZ(0,"div",16)(1,"span",17),h._uU(2,"Loading..."),h.qZA()())}function H1(n,e){1&n&&(h.TgZ(0,"span",18),h._uU(1,"Es necesario llenar todos los campos"),h.qZA())}let pN=(()=>{class n{constructor(t,r,s,u,c){this.fb=t,this._employeeService=r,this.router=s,this.toastr=u,this.aRoute=c,this.submitted=!1,this.titulo="Agregar Empleado",this.loading=!1,this.crearEmpleado=this.fb.group({nombre:["",hI.required],apellido:["",hI.required],documento:["",hI.required],salario:["",hI.required]}),this.id=this.aRoute.snapshot.paramMap.get("id"),console.log(this.id)}ngOnInit(){this.Editar()}agregarEditarEmpleado(){this.submitted=!0,!this.crearEmpleado.invalid&&(null===this.id?this.agregarEmpleado():this.editarEmpleado(this.id))}agregarEmpleado(){const t={nombre:this.crearEmpleado.value.nombre,apellido:this.crearEmpleado.value.apellido,documento:this.crearEmpleado.value.documento,salario:this.crearEmpleado.value.salario,fechaCreacion:new Date,fechaActualizacion:new Date};this.loading=!0,this._employeeService.agregarEmpleado(t).then(()=>{this.toastr.success("Empleado agregado correctamente","Registro exitoso",{positionClass:"toast-center-center"}),this.loading=!1,this.router.navigate(["/lista-empleados"])}).catch(r=>{console.log(r),this.loading=!1})}editarEmpleado(t){const r={nombre:this.crearEmpleado.value.nombre,apellido:this.crearEmpleado.value.apellido,documento:this.crearEmpleado.value.documento,salario:this.crearEmpleado.value.salario,fechaActualizacion:new Date};this.loading=!0,this._employeeService.actualizarEmpleado(t,r).then(()=>{this.loading=!1,this.toastr.info("Empleado actualizado correctamente","Actualizaci\xf3n exitosa",{positionClass:"toast-center-center"}),this.router.navigate(["/lista-empleados"])})}Editar(){null!=this.id&&(this.loading=!0,this._employeeService.getEmpleado(this.id).subscribe(t=>{this.titulo="Actualizar Datos",this.loading=!1,console.log(t.payload.data().nombre),this.crearEmpleado.setValue({nombre:t.payload.data().nombre,apellido:t.payload.data().apellido,documento:t.payload.data().documento,salario:t.payload.data().salario})}))}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(j1),h.Y36(JM),h.Y36(gi),h.Y36(cI),h.Y36(Oa))},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-create-employee"]],decls:22,vars:4,consts:[[1,"container","pt-4"],[1,"row"],[1,"col-lg-6","offset-lg-3","text-center"],[1,"card","text-center"],[1,"card-body"],["class","spinner-border text-info float-right","role","status",4,"ngIf"],["class","badge badge-danger",4,"ngIf"],[1,"mt-4",3,"formGroup","ngSubmit"],[1,"col"],["type","text","formControlName","nombre","placeholder","Nombre",1,"form-control","form-control-lg","text-center"],["type","text","formControlName","apellido","placeholder","Apellido",1,"form-control","form-control-lg","text-center"],["type","text","formControlName","documento","placeholder","RFC",1,"form-control","input","form-control-lg","text-center","mt-3"],["type","number","min","0","formControlName","salario","placeholder","Salario",1,"form-control","input","form-control-lg","text-center","mt-3"],[1,"mt-3"],["type","text","routerLink","/list-employees",1,"btn","btn-secondary","btn-lg","mr-3"],["type","submit",1,"btn","btn-success","btn-lg"],["role","status",1,"spinner-border","text-info","float-right"],[1,"sr-only"],[1,"badge","badge-danger"]],template:function(t,r){1&t&&(h.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"h3"),h._uU(6),h.YNc(7,$1,3,0,"div",5),h.qZA(),h.YNc(8,H1,2,0,"span",6),h.TgZ(9,"form",7),h.NdJ("ngSubmit",function(){return r.agregarEditarEmpleado()}),h.TgZ(10,"div",1)(11,"div",8),h._UZ(12,"input",9),h.qZA(),h.TgZ(13,"div",8),h._UZ(14,"input",10),h.qZA()(),h._UZ(15,"input",11)(16,"input",12),h.TgZ(17,"div",13)(18,"button",14),h._uU(19,"Regresar"),h.qZA(),h.TgZ(20,"button",15),h._uU(21,"Agregar"),h.qZA()()()()()()()()),2&t&&(h.xp6(6),h.hij("",r.titulo," "),h.xp6(1),h.Q6J("ngIf",r.loading),h.xp6(1),h.Q6J("ngIf",r.submitted&&r.crearEmpleado.invalid),h.xp6(1),h.Q6J("formGroup",r.crearEmpleado))},directives:[lr,Qx,Px,DI,dI,Ox,IA,CA,vA,Bh],styles:[""]}),n})();const G1=[{path:"",redirectTo:"list-employees",pathMatch:"full"},{path:"list-employees",component:GP},{path:"create-employee",component:pN},{path:"edit-employee/:id",component:pN},{path:"**",redirectTo:"list-employees",pathMatch:"full"}];let z1=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[[OE.forRoot(G1)],OE]}),n})();const sn=!1;function gN(n){return new h.vHH(3e3,sn)}function Tk(){return"undefined"!=typeof window&&void 0!==window.document}function SA(){return"undefined"!=typeof process&&"[object process]"==={}.toString.call(process)}function ah(n){switch(n.length){case 0:return new iE;case 1:return n[0];default:return new ix(n)}}function mN(n,e,t,r,s={},u={}){const c=[],p=[];let _=-1,b=null;if(r.forEach(A=>{const x=A.offset,V=x==_,q=V&&b||{};Object.keys(A).forEach(Y=>{let ve=Y,Ue=A[Y];if("offset"!==Y)switch(ve=e.normalizePropertyName(ve,c),Ue){case"!":Ue=s[Y];break;case pc:Ue=u[Y];break;default:Ue=e.normalizeStyleValue(Y,ve,Ue,c)}q[ve]=Ue}),V||p.push(q),b=q,_=x}),c.length)throw function pk(n){return new h.vHH(3502,sn)}();return p}function MA(n,e,t,r){switch(e){case"start":n.onStart(()=>r(t&&xA(t,"start",n)));break;case"done":n.onDone(()=>r(t&&xA(t,"done",n)));break;case"destroy":n.onDestroy(()=>r(t&&xA(t,"destroy",n)))}}function xA(n,e,t){const r=t.totalTime,u=NA(n.element,n.triggerName,n.fromState,n.toState,e||n.phaseName,null==r?n.totalTime:r,!!t.disabled),c=n._data;return null!=c&&(u._data=c),u}function NA(n,e,t,r,s="",u=0,c){return{element:n,triggerName:e,fromState:t,toState:r,phaseName:s,totalTime:u,disabled:!!c}}function To(n,e,t){let r;return n instanceof Map?(r=n.get(e),r||n.set(e,r=t)):(r=n[e],r||(r=n[e]=t)),r}function yN(n){const e=n.indexOf(":");return[n.substring(1,e),n.substr(e+1)]}let RA=(n,e)=>!1,_N=(n,e,t)=>[],vN=null;function OA(n){const e=n.parentNode||n.host;return e===vN?null:e}(SA()||"undefined"!=typeof Element)&&(Tk()?(vN=(()=>document.documentElement)(),RA=(n,e)=>{for(;e;){if(e===n)return!0;e=OA(e)}return!1}):RA=(n,e)=>n.contains(e),_N=(n,e,t)=>{if(t)return Array.from(n.querySelectorAll(e));const r=n.querySelector(e);return r?[r]:[]});let pp=null,EN=!1;function wN(n){pp||(pp=function Ak(){return"undefined"!=typeof document?document.body:null}()||{},EN=!!pp.style&&"WebkitAppearance"in pp.style);let e=!0;return pp.style&&!function Ck(n){return"ebkit"==n.substring(1,6)}(n)&&(e=n in pp.style,!e&&EN&&(e="Webkit"+n.charAt(0).toUpperCase()+n.substr(1)in pp.style)),e}const bN=RA,IN=_N;let DN=(()=>{class n{validateStyleProperty(t){return wN(t)}matchesElement(t,r){return!1}containsElement(t,r){return bN(t,r)}getParentElement(t){return OA(t)}query(t,r,s){return IN(t,r,s)}computeStyle(t,r,s){return s||""}animate(t,r,s,u,c,p=[],_){return new iE(s,u)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})(),PA=(()=>{class n{}return n.NOOP=new DN,n})();const kA="ng-enter",CI="ng-leave",AI="ng-trigger",SI=".ng-trigger",CN="ng-animating",FA=".ng-animating";function gp(n){if("number"==typeof n)return n;const e=n.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:LA(parseFloat(e[1]),e[2])}function LA(n,e){return"s"===e?1e3*n:n}function MI(n,e,t){return n.hasOwnProperty("duration")?n:function xk(n,e,t){let s,u=0,c="";if("string"==typeof n){const p=n.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===p)return e.push(gN()),{duration:0,delay:0,easing:""};s=LA(parseFloat(p[1]),p[2]);const _=p[3];null!=_&&(u=LA(parseFloat(_),p[4]));const b=p[5];b&&(c=b)}else s=n;if(!t){let p=!1,_=e.length;s<0&&(e.push(function W1(){return new h.vHH(3100,sn)}()),p=!0),u<0&&(e.push(function q1(){return new h.vHH(3101,sn)}()),p=!0),p&&e.splice(_,0,gN())}return{duration:s,delay:u,easing:c}}(n,e,t)}function Bm(n,e={}){return Object.keys(n).forEach(t=>{e[t]=n[t]}),e}function uh(n,e,t={}){if(e)for(let r in n)t[r]=n[r];else Bm(n,t);return t}function SN(n,e,t){return t?e+":"+t+";":""}function MN(n){let e="";for(let t=0;t<n.style.length;t++){const r=n.style.item(t);e+=SN(0,r,n.style.getPropertyValue(r))}for(const t in n.style)n.style.hasOwnProperty(t)&&!t.startsWith("_")&&(e+=SN(0,Ok(t),n.style[t]));n.setAttribute("style",e)}function tl(n,e,t){n.style&&(Object.keys(e).forEach(r=>{const s=UA(r);t&&!t.hasOwnProperty(r)&&(t[r]=n.style[s]),n.style[s]=e[r]}),SA()&&MN(n))}function mp(n,e){n.style&&(Object.keys(e).forEach(t=>{const r=UA(t);n.style[r]=""}),SA()&&MN(n))}function lE(n){return Array.isArray(n)?1==n.length?n[0]:tx(n):n}const VA=new RegExp("{{\\s*(.+?)\\s*}}","g");function xN(n){let e=[];if("string"==typeof n){let t;for(;t=VA.exec(n);)e.push(t[1]);VA.lastIndex=0}return e}function xI(n,e,t){const r=n.toString(),s=r.replace(VA,(u,c)=>{let p=e[c];return e.hasOwnProperty(c)||(t.push(function Z1(n){return new h.vHH(3003,sn)}()),p=""),p.toString()});return s==r?n:s}function NI(n){const e=[];let t=n.next();for(;!t.done;)e.push(t.value),t=n.next();return e}const Rk=/-+([a-z0-9])/g;function UA(n){return n.replace(Rk,(...e)=>e[1].toUpperCase())}function Ok(n){return n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function Co(n,e,t){switch(e.type){case 7:return n.visitTrigger(e,t);case 0:return n.visitState(e,t);case 1:return n.visitTransition(e,t);case 2:return n.visitSequence(e,t);case 3:return n.visitGroup(e,t);case 4:return n.visitAnimate(e,t);case 5:return n.visitKeyframes(e,t);case 6:return n.visitStyle(e,t);case 8:return n.visitReference(e,t);case 9:return n.visitAnimateChild(e,t);case 10:return n.visitAnimateRef(e,t);case 11:return n.visitQuery(e,t);case 12:return n.visitStagger(e,t);default:throw function Y1(n){return new h.vHH(3004,sn)}()}}function NN(n,e){return window.getComputedStyle(n)[e]}function Uk(n,e){const t=[];return"string"==typeof n?n.split(/\s*,\s*/).forEach(r=>function Bk(n,e,t){if(":"==n[0]){const _=function jk(n,e){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,r)=>parseFloat(r)>parseFloat(t);case":decrement":return(t,r)=>parseFloat(r)<parseFloat(t);default:return e.push(function ck(n){return new h.vHH(3016,sn)}()),"* => *"}}(n,t);if("function"==typeof _)return void e.push(_);n=_}const r=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==r||r.length<4)return t.push(function lk(n){return new h.vHH(3015,sn)}()),e;const s=r[1],u=r[2],c=r[3];e.push(RN(s,c));"<"==u[0]&&!("*"==s&&"*"==c)&&e.push(RN(c,s))}(r,t,e)):t.push(n),t}const kI=new Set(["true","1"]),FI=new Set(["false","0"]);function RN(n,e){const t=kI.has(n)||FI.has(n),r=kI.has(e)||FI.has(e);return(s,u)=>{let c="*"==n||n==s,p="*"==e||e==u;return!c&&t&&"boolean"==typeof s&&(c=s?kI.has(n):FI.has(n)),!p&&r&&"boolean"==typeof u&&(p=u?kI.has(e):FI.has(e)),c&&p}}const $k=new RegExp("s*:selfs*,?","g");function BA(n,e,t,r){return new Hk(n).build(e,t,r)}class Hk{constructor(e){this._driver=e}build(e,t,r){const s=new Wk(t);this._resetContextStyleTimingState(s);const u=Co(this,lE(e),s);return s.unsupportedCSSPropertiesFound.size&&s.unsupportedCSSPropertiesFound.keys(),u}_resetContextStyleTimingState(e){e.currentQuerySelector="",e.collectedStyles={},e.collectedStyles[""]={},e.currentTime=0}visitTrigger(e,t){let r=t.queryCount=0,s=t.depCount=0;const u=[],c=[];return"@"==e.name.charAt(0)&&t.errors.push(function J1(){return new h.vHH(3006,sn)}()),e.definitions.forEach(p=>{if(this._resetContextStyleTimingState(t),0==p.type){const _=p,b=_.name;b.toString().split(/\s*,\s*/).forEach(A=>{_.name=A,u.push(this.visitState(_,t))}),_.name=b}else if(1==p.type){const _=this.visitTransition(p,t);r+=_.queryCount,s+=_.depCount,c.push(_)}else t.errors.push(function X1(){return new h.vHH(3007,sn)}())}),{type:7,name:e.name,states:u,transitions:c,queryCount:r,depCount:s,options:null}}visitState(e,t){const r=this.visitStyle(e.styles,t),s=e.options&&e.options.params||null;if(r.containsDynamicStyles){const u=new Set,c=s||{};r.styles.forEach(p=>{if(LI(p)){const _=p;Object.keys(_).forEach(b=>{xN(_[b]).forEach(A=>{c.hasOwnProperty(A)||u.add(A)})})}}),u.size&&(NI(u.values()),t.errors.push(function ek(n,e){return new h.vHH(3008,sn)}()))}return{type:0,name:e.name,style:r,options:s?{params:s}:null}}visitTransition(e,t){t.queryCount=0,t.depCount=0;const r=Co(this,lE(e.animation),t);return{type:1,matchers:Uk(e.expr,t.errors),animation:r,queryCount:t.queryCount,depCount:t.depCount,options:yp(e.options)}}visitSequence(e,t){return{type:2,steps:e.steps.map(r=>Co(this,r,t)),options:yp(e.options)}}visitGroup(e,t){const r=t.currentTime;let s=0;const u=e.steps.map(c=>{t.currentTime=r;const p=Co(this,c,t);return s=Math.max(s,t.currentTime),p});return t.currentTime=s,{type:3,steps:u,options:yp(e.options)}}visitAnimate(e,t){const r=function Kk(n,e){if(n.hasOwnProperty("duration"))return n;if("number"==typeof n)return jA(MI(n,e).duration,0,"");const t=n;if(t.split(/\s+/).some(u=>"{"==u.charAt(0)&&"{"==u.charAt(1))){const u=jA(0,0,"");return u.dynamic=!0,u.strValue=t,u}const s=MI(t,e);return jA(s.duration,s.delay,s.easing)}(e.timings,t.errors);t.currentAnimateTimings=r;let s,u=e.styles?e.styles:rE({});if(5==u.type)s=this.visitKeyframes(u,t);else{let c=e.styles,p=!1;if(!c){p=!0;const b={};r.easing&&(b.easing=r.easing),c=rE(b)}t.currentTime+=r.duration+r.delay;const _=this.visitStyle(c,t);_.isEmptyStep=p,s=_}return t.currentAnimateTimings=null,{type:4,timings:r,style:s,options:null}}visitStyle(e,t){const r=this._makeStyleAst(e,t);return this._validateStyleAst(r,t),r}_makeStyleAst(e,t){const r=[];Array.isArray(e.styles)?e.styles.forEach(c=>{"string"==typeof c?c==pc?r.push(c):t.errors.push(function tk(n){return new h.vHH(3002,sn)}()):r.push(c)}):r.push(e.styles);let s=!1,u=null;return r.forEach(c=>{if(LI(c)){const p=c,_=p.easing;if(_&&(u=_,delete p.easing),!s)for(let b in p)if(p[b].toString().indexOf("{{")>=0){s=!0;break}}}),{type:6,styles:r,easing:u,offset:e.offset,containsDynamicStyles:s,options:null}}_validateStyleAst(e,t){const r=t.currentAnimateTimings;let s=t.currentTime,u=t.currentTime;r&&u>0&&(u-=r.duration+r.delay),e.styles.forEach(c=>{"string"!=typeof c&&Object.keys(c).forEach(p=>{if(!this._driver.validateStyleProperty(p))return delete c[p],void t.unsupportedCSSPropertiesFound.add(p);const _=t.collectedStyles[t.currentQuerySelector],b=_[p];let A=!0;b&&(u!=s&&u>=b.startTime&&s<=b.endTime&&(t.errors.push(function nk(n,e,t,r,s){return new h.vHH(3010,sn)}()),A=!1),u=b.startTime),A&&(_[p]={startTime:u,endTime:s}),t.options&&function Nk(n,e,t){const r=e.params||{},s=xN(n);s.length&&s.forEach(u=>{r.hasOwnProperty(u)||t.push(function K1(n){return new h.vHH(3001,sn)}())})}(c[p],t.options,t.errors)})})}visitKeyframes(e,t){const r={type:5,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push(function rk(){return new h.vHH(3011,sn)}()),r;let u=0;const c=[];let p=!1,_=!1,b=0;const A=e.steps.map(_t=>{const wt=this._makeStyleAst(_t,t);let Ct=null!=wt.offset?wt.offset:function qk(n){if("string"==typeof n)return null;let e=null;if(Array.isArray(n))n.forEach(t=>{if(LI(t)&&t.hasOwnProperty("offset")){const r=t;e=parseFloat(r.offset),delete r.offset}});else if(LI(n)&&n.hasOwnProperty("offset")){const t=n;e=parseFloat(t.offset),delete t.offset}return e}(wt.styles),ft=0;return null!=Ct&&(u++,ft=wt.offset=Ct),_=_||ft<0||ft>1,p=p||ft<b,b=ft,c.push(ft),wt});_&&t.errors.push(function ik(){return new h.vHH(3012,sn)}()),p&&t.errors.push(function sk(){return new h.vHH(3200,sn)}());const x=e.steps.length;let V=0;u>0&&u<x?t.errors.push(function ok(){return new h.vHH(3202,sn)}()):0==u&&(V=1/(x-1));const q=x-1,Y=t.currentTime,ve=t.currentAnimateTimings,Ue=ve.duration;return A.forEach((_t,wt)=>{const Ct=V>0?wt==q?1:V*wt:c[wt],ft=Ct*Ue;t.currentTime=Y+ve.delay+ft,ve.duration=ft,this._validateStyleAst(_t,t),_t.offset=Ct,r.styles.push(_t)}),r}visitReference(e,t){return{type:8,animation:Co(this,lE(e.animation),t),options:yp(e.options)}}visitAnimateChild(e,t){return t.depCount++,{type:9,options:yp(e.options)}}visitAnimateRef(e,t){return{type:10,animation:this.visitReference(e.animation,t),options:yp(e.options)}}visitQuery(e,t){const r=t.currentQuerySelector,s=e.options||{};t.queryCount++,t.currentQuery=e;const[u,c]=function Gk(n){const e=!!n.split(/\s*,\s*/).find(t=>":self"==t);return e&&(n=n.replace($k,"")),n=n.replace(/@\*/g,SI).replace(/@\w+/g,t=>SI+"-"+t.substr(1)).replace(/:animating/g,FA),[n,e]}(e.selector);t.currentQuerySelector=r.length?r+" "+u:u,To(t.collectedStyles,t.currentQuerySelector,{});const p=Co(this,lE(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=r,{type:11,selector:u,limit:s.limit||0,optional:!!s.optional,includeSelf:c,animation:p,originalSelector:e.selector,options:yp(e.options)}}visitStagger(e,t){t.currentQuery||t.errors.push(function ak(){return new h.vHH(3013,sn)}());const r="full"===e.timings?{duration:0,delay:0,easing:"full"}:MI(e.timings,t.errors,!0);return{type:12,animation:Co(this,lE(e.animation),t),timings:r,options:null}}}class Wk{constructor(e){this.errors=e,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles={},this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function LI(n){return!Array.isArray(n)&&"object"==typeof n}function yp(n){return n?(n=Bm(n)).params&&(n.params=function zk(n){return n?Bm(n):null}(n.params)):n={},n}function jA(n,e,t){return{duration:n,delay:e,easing:t}}function $A(n,e,t,r,s,u,c=null,p=!1){return{type:1,element:n,keyframes:e,preStyleProps:t,postStyleProps:r,duration:s,delay:u,totalTime:s+u,easing:c,subTimeline:p}}class VI{constructor(){this._map=new Map}get(e){return this._map.get(e)||[]}append(e,t){let r=this._map.get(e);r||this._map.set(e,r=[]),r.push(...t)}has(e){return this._map.has(e)}clear(){this._map.clear()}}const Qk=new RegExp(":enter","g"),Xk=new RegExp(":leave","g");function HA(n,e,t,r,s,u={},c={},p,_,b=[]){return(new eF).buildKeyframes(n,e,t,r,s,u,c,p,_,b)}class eF{buildKeyframes(e,t,r,s,u,c,p,_,b,A=[]){b=b||new VI;const x=new GA(e,t,b,s,u,A,[]);x.options=_,x.currentTimeline.setStyles([c],null,x.errors,_),Co(this,r,x);const V=x.timelines.filter(q=>q.containsAnimation());if(Object.keys(p).length){let q;for(let Y=V.length-1;Y>=0;Y--){const ve=V[Y];if(ve.element===t){q=ve;break}}q&&!q.allowOnlyTimelineStyles()&&q.setStyles([p],null,x.errors,_)}return V.length?V.map(q=>q.buildKeyframes()):[$A(t,[],[],[],0,0,"",!1)]}visitTrigger(e,t){}visitState(e,t){}visitTransition(e,t){}visitAnimateChild(e,t){const r=t.subInstructions.get(t.element);if(r){const s=t.createSubContext(e.options),u=t.currentTimeline.currentTime,c=this._visitSubInstructions(r,s,s.options);u!=c&&t.transformIntoNewTimeline(c)}t.previousNode=e}visitAnimateRef(e,t){const r=t.createSubContext(e.options);r.transformIntoNewTimeline(),this.visitReference(e.animation,r),t.transformIntoNewTimeline(r.currentTimeline.currentTime),t.previousNode=e}_visitSubInstructions(e,t,r){let u=t.currentTimeline.currentTime;const c=null!=r.duration?gp(r.duration):null,p=null!=r.delay?gp(r.delay):null;return 0!==c&&e.forEach(_=>{const b=t.appendInstructionToTimeline(_,c,p);u=Math.max(u,b.duration+b.delay)}),u}visitReference(e,t){t.updateOptions(e.options,!0),Co(this,e.animation,t),t.previousNode=e}visitSequence(e,t){const r=t.subContextCount;let s=t;const u=e.options;if(u&&(u.params||u.delay)&&(s=t.createSubContext(u),s.transformIntoNewTimeline(),null!=u.delay)){6==s.previousNode.type&&(s.currentTimeline.snapshotCurrentStyles(),s.previousNode=UI);const c=gp(u.delay);s.delayNextStep(c)}e.steps.length&&(e.steps.forEach(c=>Co(this,c,s)),s.currentTimeline.applyStylesToKeyframe(),s.subContextCount>r&&s.transformIntoNewTimeline()),t.previousNode=e}visitGroup(e,t){const r=[];let s=t.currentTimeline.currentTime;const u=e.options&&e.options.delay?gp(e.options.delay):0;e.steps.forEach(c=>{const p=t.createSubContext(e.options);u&&p.delayNextStep(u),Co(this,c,p),s=Math.max(s,p.currentTimeline.currentTime),r.push(p.currentTimeline)}),r.forEach(c=>t.currentTimeline.mergeTimelineCollectedStyles(c)),t.transformIntoNewTimeline(s),t.previousNode=e}_visitTiming(e,t){if(e.dynamic){const r=e.strValue;return MI(t.params?xI(r,t.params,t.errors):r,t.errors)}return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,t){const r=t.currentAnimateTimings=this._visitTiming(e.timings,t),s=t.currentTimeline;r.delay&&(t.incrementTime(r.delay),s.snapshotCurrentStyles());const u=e.style;5==u.type?this.visitKeyframes(u,t):(t.incrementTime(r.duration),this.visitStyle(u,t),s.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}visitStyle(e,t){const r=t.currentTimeline,s=t.currentAnimateTimings;!s&&r.getCurrentStyleProperties().length&&r.forwardFrame();const u=s&&s.easing||e.easing;e.isEmptyStep?r.applyEmptyStep(u):r.setStyles(e.styles,u,t.errors,t.options),t.previousNode=e}visitKeyframes(e,t){const r=t.currentAnimateTimings,s=t.currentTimeline.duration,u=r.duration,p=t.createSubContext().currentTimeline;p.easing=r.easing,e.styles.forEach(_=>{p.forwardTime((_.offset||0)*u),p.setStyles(_.styles,_.easing,t.errors,t.options),p.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(p),t.transformIntoNewTimeline(s+u),t.previousNode=e}visitQuery(e,t){const r=t.currentTimeline.currentTime,s=e.options||{},u=s.delay?gp(s.delay):0;u&&(6===t.previousNode.type||0==r&&t.currentTimeline.getCurrentStyleProperties().length)&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=UI);let c=r;const p=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!s.optional,t.errors);t.currentQueryTotal=p.length;let _=null;p.forEach((b,A)=>{t.currentQueryIndex=A;const x=t.createSubContext(e.options,b);u&&x.delayNextStep(u),b===t.element&&(_=x.currentTimeline),Co(this,e.animation,x),x.currentTimeline.applyStylesToKeyframe(),c=Math.max(c,x.currentTimeline.currentTime)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(c),_&&(t.currentTimeline.mergeTimelineCollectedStyles(_),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}visitStagger(e,t){const r=t.parentContext,s=t.currentTimeline,u=e.timings,c=Math.abs(u.duration),p=c*(t.currentQueryTotal-1);let _=c*t.currentQueryIndex;switch(u.duration<0?"reverse":u.easing){case"reverse":_=p-_;break;case"full":_=r.currentStaggerTime}const A=t.currentTimeline;_&&A.delayNextStep(_);const x=A.currentTime;Co(this,e.animation,t),t.previousNode=e,r.currentStaggerTime=s.currentTime-x+(s.startTime-r.currentTimeline.startTime)}}const UI={};class GA{constructor(e,t,r,s,u,c,p,_){this._driver=e,this.element=t,this.subInstructions=r,this._enterClassName=s,this._leaveClassName=u,this.errors=c,this.timelines=p,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=UI,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=_||new BI(this._driver,t,0),p.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,t){if(!e)return;const r=e;let s=this.options;null!=r.duration&&(s.duration=gp(r.duration)),null!=r.delay&&(s.delay=gp(r.delay));const u=r.params;if(u){let c=s.params;c||(c=this.options.params={}),Object.keys(u).forEach(p=>{(!t||!c.hasOwnProperty(p))&&(c[p]=xI(u[p],c,this.errors))})}}_copyOptions(){const e={};if(this.options){const t=this.options.params;if(t){const r=e.params={};Object.keys(t).forEach(s=>{r[s]=t[s]})}}return e}createSubContext(e=null,t,r){const s=t||this.element,u=new GA(this._driver,s,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(s,r||0));return u.previousNode=this.previousNode,u.currentAnimateTimings=this.currentAnimateTimings,u.options=this._copyOptions(),u.updateOptions(e),u.currentQueryIndex=this.currentQueryIndex,u.currentQueryTotal=this.currentQueryTotal,u.parentContext=this,this.subContextCount++,u}transformIntoNewTimeline(e){return this.previousNode=UI,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,t,r){const s={duration:null!=t?t:e.duration,delay:this.currentTimeline.currentTime+(null!=r?r:0)+e.delay,easing:""},u=new tF(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,s,e.stretchStartingKeyframe);return this.timelines.push(u),s}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,t,r,s,u,c){let p=[];if(s&&p.push(this.element),e.length>0){e=(e=e.replace(Qk,"."+this._enterClassName)).replace(Xk,"."+this._leaveClassName);let b=this._driver.query(this.element,e,1!=r);0!==r&&(b=r<0?b.slice(b.length+r,b.length):b.slice(0,r)),p.push(...b)}return!u&&0==p.length&&c.push(function uk(n){return new h.vHH(3014,sn)}()),p}}class BI{constructor(e,t,r,s){this._driver=e,this.element=t,this.startTime=r,this._elementTimelineStylesLookup=s,this.duration=0,this._previousKeyframe={},this._currentKeyframe={},this._keyframes=new Map,this._styleSummary={},this._pendingStyles={},this._backFill={},this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._localTimelineStyles=Object.create(this._backFill,{}),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.getCurrentStyleProperties().length>0;default:return!0}}getCurrentStyleProperties(){return Object.keys(this._currentKeyframe)}get currentTime(){return this.startTime+this.duration}delayNextStep(e){const t=1==this._keyframes.size&&Object.keys(this._pendingStyles).length;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,t){return this.applyStylesToKeyframe(),new BI(this._driver,e,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=Object.create(this._backFill,{}),this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,t){this._localTimelineStyles[e]=t,this._globalTimelineStyles[e]=t,this._styleSummary[e]={time:this.currentTime,value:t}}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&(this._previousKeyframe.easing=e),Object.keys(this._globalTimelineStyles).forEach(t=>{this._backFill[t]=this._globalTimelineStyles[t]||pc,this._currentKeyframe[t]=pc}),this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,t,r,s){t&&(this._previousKeyframe.easing=t);const u=s&&s.params||{},c=function nF(n,e){const t={};let r;return n.forEach(s=>{"*"===s?(r=r||Object.keys(e),r.forEach(u=>{t[u]=pc})):uh(s,!1,t)}),t}(e,this._globalTimelineStyles);Object.keys(c).forEach(p=>{const _=xI(c[p],u,r);this._pendingStyles[p]=_,this._localTimelineStyles.hasOwnProperty(p)||(this._backFill[p]=this._globalTimelineStyles.hasOwnProperty(p)?this._globalTimelineStyles[p]:pc),this._updateStyle(p,_)})}applyStylesToKeyframe(){const e=this._pendingStyles,t=Object.keys(e);0!=t.length&&(this._pendingStyles={},t.forEach(r=>{this._currentKeyframe[r]=e[r]}),Object.keys(this._localTimelineStyles).forEach(r=>{this._currentKeyframe.hasOwnProperty(r)||(this._currentKeyframe[r]=this._localTimelineStyles[r])}))}snapshotCurrentStyles(){Object.keys(this._localTimelineStyles).forEach(e=>{const t=this._localTimelineStyles[e];this._pendingStyles[e]=t,this._updateStyle(e,t)})}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const e=[];for(let t in this._currentKeyframe)e.push(t);return e}mergeTimelineCollectedStyles(e){Object.keys(e._styleSummary).forEach(t=>{const r=this._styleSummary[t],s=e._styleSummary[t];(!r||s.time>r.time)&&this._updateStyle(t,s.value)})}buildKeyframes(){this.applyStylesToKeyframe();const e=new Set,t=new Set,r=1===this._keyframes.size&&0===this.duration;let s=[];this._keyframes.forEach((p,_)=>{const b=uh(p,!0);Object.keys(b).forEach(A=>{const x=b[A];"!"==x?e.add(A):x==pc&&t.add(A)}),r||(b.offset=_/this.duration),s.push(b)});const u=e.size?NI(e.values()):[],c=t.size?NI(t.values()):[];if(r){const p=s[0],_=Bm(p);p.offset=0,_.offset=1,s=[p,_]}return $A(this.element,s,u,c,this.duration,this.startTime,this.easing,!1)}}class tF extends BI{constructor(e,t,r,s,u,c,p=!1){super(e,t,c.delay),this.keyframes=r,this.preStyleProps=s,this.postStyleProps=u,this._stretchStartingKeyframe=p,this.timings={duration:c.duration,delay:c.delay,easing:c.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:t,duration:r,easing:s}=this.timings;if(this._stretchStartingKeyframe&&t){const u=[],c=r+t,p=t/c,_=uh(e[0],!1);_.offset=0,u.push(_);const b=uh(e[0],!1);b.offset=kN(p),u.push(b);const A=e.length-1;for(let x=1;x<=A;x++){let V=uh(e[x],!1);V.offset=kN((t+V.offset*r)/c),u.push(V)}r=c,t=0,s="",e=u}return $A(this.element,e,this.preStyleProps,this.postStyleProps,r,t,s,!0)}}function kN(n,e=3){const t=Math.pow(10,e-1);return Math.round(n*t)/t}class zA{}class rF extends zA{normalizePropertyName(e,t){return UA(e)}normalizeStyleValue(e,t,r,s){let u="";const c=r.toString().trim();if(iF[t]&&0!==r&&"0"!==r)if("number"==typeof r)u="px";else{const p=r.match(/^[+-]?[\d\.]+([a-z]*)$/);p&&0==p[1].length&&s.push(function Q1(n,e){return new h.vHH(3005,sn)}())}return c+u}}const iF=(()=>function sF(n){const e={};return n.forEach(t=>e[t]=!0),e}("width,height,minWidth,minHeight,maxWidth,maxHeight,left,top,bottom,right,fontSize,outlineWidth,outlineOffset,paddingTop,paddingLeft,paddingBottom,paddingRight,marginTop,marginLeft,marginBottom,marginRight,borderRadius,borderWidth,borderTopWidth,borderLeftWidth,borderRightWidth,borderBottomWidth,textIndent,perspective".split(",")))();function FN(n,e,t,r,s,u,c,p,_,b,A,x,V){return{type:0,element:n,triggerName:e,isRemovalTransition:s,fromState:t,fromStyles:u,toState:r,toStyles:c,timelines:p,queriedElements:_,preStyleProps:b,postStyleProps:A,totalTime:x,errors:V}}const WA={};class LN{constructor(e,t,r){this._triggerName=e,this.ast=t,this._stateStyles=r}match(e,t,r,s){return function oF(n,e,t,r,s){return n.some(u=>u(e,t,r,s))}(this.ast.matchers,e,t,r,s)}buildStyles(e,t,r){const s=this._stateStyles["*"],u=this._stateStyles[e],c=s?s.buildStyles(t,r):{};return u?u.buildStyles(t,r):c}build(e,t,r,s,u,c,p,_,b,A){const x=[],V=this.ast.options&&this.ast.options.params||WA,Y=this.buildStyles(r,p&&p.params||WA,x),ve=_&&_.params||WA,Ue=this.buildStyles(s,ve,x),_t=new Set,wt=new Map,Ct=new Map,ft="void"===s,Bt={params:Object.assign(Object.assign({},V),ve)},Qt=A?[]:HA(e,t,this.ast.animation,u,c,Y,Ue,Bt,b,x);let vn=0;if(Qt.forEach(gc=>{vn=Math.max(gc.duration+gc.delay,vn)}),x.length)return FN(t,this._triggerName,r,s,ft,Y,Ue,[],[],wt,Ct,vn,x);Qt.forEach(gc=>{const mc=gc.element,nR=To(wt,mc,{});gc.preStyleProps.forEach(_p=>nR[_p]=!0);const dE=To(Ct,mc,{});gc.postStyleProps.forEach(_p=>dE[_p]=!0),mc!==t&&_t.add(mc)});const Ds=NI(_t.values());return FN(t,this._triggerName,r,s,ft,Y,Ue,Qt,Ds,wt,Ct,vn)}}class aF{constructor(e,t,r){this.styles=e,this.defaultParams=t,this.normalizer=r}buildStyles(e,t){const r={},s=Bm(this.defaultParams);return Object.keys(e).forEach(u=>{const c=e[u];null!=c&&(s[u]=c)}),this.styles.styles.forEach(u=>{if("string"!=typeof u){const c=u;Object.keys(c).forEach(p=>{let _=c[p];_.length>1&&(_=xI(_,s,t));const b=this.normalizer.normalizePropertyName(p,t);_=this.normalizer.normalizeStyleValue(p,b,_,t),r[b]=_})}}),r}}class lF{constructor(e,t,r){this.name=e,this.ast=t,this._normalizer=r,this.transitionFactories=[],this.states={},t.states.forEach(s=>{this.states[s.name]=new aF(s.style,s.options&&s.options.params||{},r)}),VN(this.states,"true","1"),VN(this.states,"false","0"),t.transitions.forEach(s=>{this.transitionFactories.push(new LN(e,s,this.states))}),this.fallbackTransition=function cF(n,e,t){return new LN(n,{type:1,animation:{type:2,steps:[],options:null},matchers:[(c,p)=>!0],options:null,queryCount:0,depCount:0},e)}(e,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,t,r,s){return this.transitionFactories.find(c=>c.match(e,t,r,s))||null}matchStyles(e,t,r){return this.fallbackTransition.buildStyles(e,t,r)}}function VN(n,e,t){n.hasOwnProperty(e)?n.hasOwnProperty(t)||(n[t]=n[e]):n.hasOwnProperty(t)&&(n[e]=n[t])}const dF=new VI;class hF{constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r,this._animations={},this._playersById={},this.players=[]}register(e,t){const r=[],u=BA(this._driver,t,r,[]);if(r.length)throw function gk(n){return new h.vHH(3503,sn)}();this._animations[e]=u}_buildPlayer(e,t,r){const s=e.element,u=mN(0,this._normalizer,0,e.keyframes,t,r);return this._driver.animate(s,u,e.duration,e.delay,e.easing,[],!0)}create(e,t,r={}){const s=[],u=this._animations[e];let c;const p=new Map;if(u?(c=HA(this._driver,t,u,kA,CI,{},{},r,dF,s),c.forEach(A=>{const x=To(p,A.element,{});A.postStyleProps.forEach(V=>x[V]=null)})):(s.push(function mk(){return new h.vHH(3300,sn)}()),c=[]),s.length)throw function yk(n){return new h.vHH(3504,sn)}();p.forEach((A,x)=>{Object.keys(A).forEach(V=>{A[V]=this._driver.computeStyle(x,V,pc)})});const b=ah(c.map(A=>{const x=p.get(A.element);return this._buildPlayer(A,{},x)}));return this._playersById[e]=b,b.onDestroy(()=>this.destroy(e)),this.players.push(b),b}destroy(e){const t=this._getPlayer(e);t.destroy(),delete this._playersById[e];const r=this.players.indexOf(t);r>=0&&this.players.splice(r,1)}_getPlayer(e){const t=this._playersById[e];if(!t)throw function _k(n){return new h.vHH(3301,sn)}();return t}listen(e,t,r,s){const u=NA(t,"","","");return MA(this._getPlayer(e),r,u,s),()=>{}}command(e,t,r,s){if("register"==r)return void this.register(e,s[0]);if("create"==r)return void this.create(e,t,s[0]||{});const u=this._getPlayer(e);switch(r){case"play":u.play();break;case"pause":u.pause();break;case"reset":u.reset();break;case"restart":u.restart();break;case"finish":u.finish();break;case"init":u.init();break;case"setPosition":u.setPosition(parseFloat(s[0]));break;case"destroy":this.destroy(e)}}}const UN="ng-animate-queued",qA="ng-animate-disabled",yF=[],BN={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},_F={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},ca="__ng_removed";class KA{constructor(e,t=""){this.namespaceId=t;const r=e&&e.hasOwnProperty("value");if(this.value=function bF(n){return null!=n?n:null}(r?e.value:e),r){const u=Bm(e);delete u.value,this.options=u}else this.options={};this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(e){const t=e.params;if(t){const r=this.options.params;Object.keys(t).forEach(s=>{null==r[s]&&(r[s]=t[s])})}}}const cE="void",ZA=new KA(cE);class vF{constructor(e,t,r){this.id=e,this.hostElement=t,this._engine=r,this.players=[],this._triggers={},this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+e,da(t,this._hostClassName)}listen(e,t,r,s){if(!this._triggers.hasOwnProperty(t))throw function vk(n,e){return new h.vHH(3302,sn)}();if(null==r||0==r.length)throw function Ek(n){return new h.vHH(3303,sn)}();if(!function IF(n){return"start"==n||"done"==n}(r))throw function wk(n,e){return new h.vHH(3400,sn)}();const u=To(this._elementListeners,e,[]),c={name:t,phase:r,callback:s};u.push(c);const p=To(this._engine.statesByElement,e,{});return p.hasOwnProperty(t)||(da(e,AI),da(e,AI+"-"+t),p[t]=ZA),()=>{this._engine.afterFlush(()=>{const _=u.indexOf(c);_>=0&&u.splice(_,1),this._triggers[t]||delete p[t]})}}register(e,t){return!this._triggers[e]&&(this._triggers[e]=t,!0)}_getTrigger(e){const t=this._triggers[e];if(!t)throw function bk(n){return new h.vHH(3401,sn)}();return t}trigger(e,t,r,s=!0){const u=this._getTrigger(t),c=new YA(this.id,t,e);let p=this._engine.statesByElement.get(e);p||(da(e,AI),da(e,AI+"-"+t),this._engine.statesByElement.set(e,p={}));let _=p[t];const b=new KA(r,this.id);if(!(r&&r.hasOwnProperty("value"))&&_&&b.absorbOptions(_.options),p[t]=b,_||(_=ZA),b.value!==cE&&_.value===b.value){if(!function CF(n,e){const t=Object.keys(n),r=Object.keys(e);if(t.length!=r.length)return!1;for(let s=0;s<t.length;s++){const u=t[s];if(!e.hasOwnProperty(u)||n[u]!==e[u])return!1}return!0}(_.params,b.params)){const ve=[],Ue=u.matchStyles(_.value,_.params,ve),_t=u.matchStyles(b.value,b.params,ve);ve.length?this._engine.reportError(ve):this._engine.afterFlush(()=>{mp(e,Ue),tl(e,_t)})}return}const V=To(this._engine.playersByElement,e,[]);V.forEach(ve=>{ve.namespaceId==this.id&&ve.triggerName==t&&ve.queued&&ve.destroy()});let q=u.matchTransition(_.value,b.value,e,b.params),Y=!1;if(!q){if(!s)return;q=u.fallbackTransition,Y=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:q,fromState:_,toState:b,player:c,isFallbackTransition:Y}),Y||(da(e,UN),c.onStart(()=>{jm(e,UN)})),c.onDone(()=>{let ve=this.players.indexOf(c);ve>=0&&this.players.splice(ve,1);const Ue=this._engine.playersByElement.get(e);if(Ue){let _t=Ue.indexOf(c);_t>=0&&Ue.splice(_t,1)}}),this.players.push(c),V.push(c),c}deregister(e){delete this._triggers[e],this._engine.statesByElement.forEach((t,r)=>{delete t[e]}),this._elementListeners.forEach((t,r)=>{this._elementListeners.set(r,t.filter(s=>s.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);const t=this._engine.playersByElement.get(e);t&&(t.forEach(r=>r.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,t){const r=this._engine.driver.query(e,SI,!0);r.forEach(s=>{if(s[ca])return;const u=this._engine.fetchNamespacesByElement(s);u.size?u.forEach(c=>c.triggerLeaveAnimation(s,t,!1,!0)):this.clearElementCache(s)}),this._engine.afterFlushAnimationsDone(()=>r.forEach(s=>this.clearElementCache(s)))}triggerLeaveAnimation(e,t,r,s){const u=this._engine.statesByElement.get(e),c=new Map;if(u){const p=[];if(Object.keys(u).forEach(_=>{if(c.set(_,u[_].value),this._triggers[_]){const b=this.trigger(e,_,cE,s);b&&p.push(b)}}),p.length)return this._engine.markElementAsRemoved(this.id,e,!0,t,c),r&&ah(p).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){const t=this._elementListeners.get(e),r=this._engine.statesByElement.get(e);if(t&&r){const s=new Set;t.forEach(u=>{const c=u.name;if(s.has(c))return;s.add(c);const _=this._triggers[c].fallbackTransition,b=r[c]||ZA,A=new KA(cE),x=new YA(this.id,c,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:c,transition:_,fromState:b,toState:A,player:x,isFallbackTransition:!0})})}}removeNode(e,t){const r=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t),this.triggerLeaveAnimation(e,t,!0))return;let s=!1;if(r.totalAnimations){const u=r.players.length?r.playersByQueriedElement.get(e):[];if(u&&u.length)s=!0;else{let c=e;for(;c=c.parentNode;)if(r.statesByElement.get(c)){s=!0;break}}}if(this.prepareLeaveAnimationListeners(e),s)r.markElementAsRemoved(this.id,e,!1,t);else{const u=e[ca];(!u||u===BN)&&(r.afterFlush(()=>this.clearElementCache(e)),r.destroyInnerAnimations(e),r._onRemovalComplete(e,t))}}insertNode(e,t){da(e,this._hostClassName)}drainQueuedTransitions(e){const t=[];return this._queue.forEach(r=>{const s=r.player;if(s.destroyed)return;const u=r.element,c=this._elementListeners.get(u);c&&c.forEach(p=>{if(p.name==r.triggerName){const _=NA(u,r.triggerName,r.fromState.value,r.toState.value);_._data=e,MA(r.player,p.phase,_,p.callback)}}),s.markedForDestroy?this._engine.afterFlush(()=>{s.destroy()}):t.push(r)}),this._queue=[],t.sort((r,s)=>{const u=r.transition.ast.depCount,c=s.transition.ast.depCount;return 0==u||0==c?u-c:this._engine.driver.containsElement(r.element,s.element)?1:-1})}destroy(e){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}elementContainsData(e){let t=!1;return this._elementListeners.has(e)&&(t=!0),t=!!this._queue.find(r=>r.element===e)||t,t}}class EF{constructor(e,t,r){this.bodyNode=e,this.driver=t,this._normalizer=r,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(s,u)=>{}}_onRemovalComplete(e,t){this.onRemovalComplete(e,t)}get queuedPlayers(){const e=[];return this._namespaceList.forEach(t=>{t.players.forEach(r=>{r.queued&&e.push(r)})}),e}createNamespace(e,t){const r=new vF(e,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(r,t):(this.newHostElements.set(t,r),this.collectEnterElement(t)),this._namespaceLookup[e]=r}_balanceNamespaceList(e,t){const r=this._namespaceList,s=this.namespacesByHostElement,u=r.length-1;if(u>=0){let c=!1;if(void 0!==this.driver.getParentElement){let p=this.driver.getParentElement(t);for(;p;){const _=s.get(p);if(_){const b=r.indexOf(_);r.splice(b+1,0,e),c=!0;break}p=this.driver.getParentElement(p)}}else for(let p=u;p>=0;p--)if(this.driver.containsElement(r[p].hostElement,t)){r.splice(p+1,0,e),c=!0;break}c||r.unshift(e)}else r.push(e);return s.set(t,e),e}register(e,t){let r=this._namespaceLookup[e];return r||(r=this.createNamespace(e,t)),r}registerTrigger(e,t,r){let s=this._namespaceLookup[e];s&&s.register(t,r)&&this.totalAnimations++}destroy(e,t){if(!e)return;const r=this._fetchNamespace(e);this.afterFlush(()=>{this.namespacesByHostElement.delete(r.hostElement),delete this._namespaceLookup[e];const s=this._namespaceList.indexOf(r);s>=0&&this._namespaceList.splice(s,1)}),this.afterFlushAnimationsDone(()=>r.destroy(t))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){const t=new Set,r=this.statesByElement.get(e);if(r){const s=Object.keys(r);for(let u=0;u<s.length;u++){const c=r[s[u]].namespaceId;if(c){const p=this._fetchNamespace(c);p&&t.add(p)}}}return t}trigger(e,t,r,s){if(jI(t)){const u=this._fetchNamespace(e);if(u)return u.trigger(t,r,s),!0}return!1}insertNode(e,t,r,s){if(!jI(t))return;const u=t[ca];if(u&&u.setForRemoval){u.setForRemoval=!1,u.setForMove=!0;const c=this.collectedLeaveElements.indexOf(t);c>=0&&this.collectedLeaveElements.splice(c,1)}if(e){const c=this._fetchNamespace(e);c&&c.insertNode(t,r)}s&&this.collectEnterElement(t)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),da(e,qA)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),jm(e,qA))}removeNode(e,t,r,s){if(jI(t)){const u=e?this._fetchNamespace(e):null;if(u?u.removeNode(t,s):this.markElementAsRemoved(e,t,!1,s),r){const c=this.namespacesByHostElement.get(t);c&&c.id!==e&&c.removeNode(t,s)}}else this._onRemovalComplete(t,s)}markElementAsRemoved(e,t,r,s,u){this.collectedLeaveElements.push(t),t[ca]={namespaceId:e,setForRemoval:s,hasAnimation:r,removedBeforeQueried:!1,previousTriggersValues:u}}listen(e,t,r,s,u){return jI(t)?this._fetchNamespace(e).listen(t,r,s,u):()=>{}}_buildInstruction(e,t,r,s,u){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,r,s,e.fromState.options,e.toState.options,t,u)}destroyInnerAnimations(e){let t=this.driver.query(e,SI,!0);t.forEach(r=>this.destroyActiveAnimationsForElement(r)),0!=this.playersByQueriedElement.size&&(t=this.driver.query(e,FA,!0),t.forEach(r=>this.finishActiveQueriedAnimationOnElement(r)))}destroyActiveAnimationsForElement(e){const t=this.playersByElement.get(e);t&&t.forEach(r=>{r.queued?r.markedForDestroy=!0:r.destroy()})}finishActiveQueriedAnimationOnElement(e){const t=this.playersByQueriedElement.get(e);t&&t.forEach(r=>r.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return ah(this.players).onDone(()=>e());e()})}processLeaveNode(e){var t;const r=e[ca];if(r&&r.setForRemoval){if(e[ca]=BN,r.namespaceId){this.destroyInnerAnimations(e);const s=this._fetchNamespace(r.namespaceId);s&&s.clearElementCache(e)}this._onRemovalComplete(e,r.setForRemoval)}(null===(t=e.classList)||void 0===t?void 0:t.contains(qA))&&this.markElementAsDisabled(e,!1),this.driver.query(e,".ng-animate-disabled",!0).forEach(s=>{this.markElementAsDisabled(s,!1)})}flush(e=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((r,s)=>this._balanceNamespaceList(r,s)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let r=0;r<this.collectedEnterElements.length;r++)da(this.collectedEnterElements[r],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const r=[];try{t=this._flushAnimations(r,e)}finally{for(let s=0;s<r.length;s++)r[s]()}}else for(let r=0;r<this.collectedLeaveElements.length;r++)this.processLeaveNode(this.collectedLeaveElements[r]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(r=>r()),this._flushFns=[],this._whenQuietFns.length){const r=this._whenQuietFns;this._whenQuietFns=[],t.length?ah(t).onDone(()=>{r.forEach(s=>s())}):r.forEach(s=>s())}}reportError(e){throw function Ik(n){return new h.vHH(3402,sn)}()}_flushAnimations(e,t){const r=new VI,s=[],u=new Map,c=[],p=new Map,_=new Map,b=new Map,A=new Set;this.disabledNodes.forEach(ct=>{A.add(ct);const At=this.driver.query(ct,".ng-animate-queued",!0);for(let Ot=0;Ot<At.length;Ot++)A.add(At[Ot])});const x=this.bodyNode,V=Array.from(this.statesByElement.keys()),q=HN(V,this.collectedEnterElements),Y=new Map;let ve=0;q.forEach((ct,At)=>{const Ot=kA+ve++;Y.set(At,Ot),ct.forEach(gn=>da(gn,Ot))});const Ue=[],_t=new Set,wt=new Set;for(let ct=0;ct<this.collectedLeaveElements.length;ct++){const At=this.collectedLeaveElements[ct],Ot=At[ca];Ot&&Ot.setForRemoval&&(Ue.push(At),_t.add(At),Ot.hasAnimation?this.driver.query(At,".ng-star-inserted",!0).forEach(gn=>_t.add(gn)):wt.add(At))}const Ct=new Map,ft=HN(V,Array.from(_t));ft.forEach((ct,At)=>{const Ot=CI+ve++;Ct.set(At,Ot),ct.forEach(gn=>da(gn,Ot))}),e.push(()=>{q.forEach((ct,At)=>{const Ot=Y.get(At);ct.forEach(gn=>jm(gn,Ot))}),ft.forEach((ct,At)=>{const Ot=Ct.get(At);ct.forEach(gn=>jm(gn,Ot))}),Ue.forEach(ct=>{this.processLeaveNode(ct)})});const Bt=[],Qt=[];for(let ct=this._namespaceList.length-1;ct>=0;ct--)this._namespaceList[ct].drainQueuedTransitions(t).forEach(Ot=>{const gn=Ot.player,Ei=Ot.element;if(Bt.push(gn),this.collectedEnterElements.length){const Ts=Ei[ca];if(Ts&&Ts.setForMove){if(Ts.previousTriggersValues&&Ts.previousTriggersValues.has(Ot.triggerName)){const vp=Ts.previousTriggersValues.get(Ot.triggerName),ch=this.statesByElement.get(Ot.element);ch&&ch[Ot.triggerName]&&(ch[Ot.triggerName].value=vp)}return void gn.destroy()}}const nl=!x||!this.driver.containsElement(x,Ei),Ao=Ct.get(Ei),lh=Y.get(Ei),_r=this._buildInstruction(Ot,r,lh,Ao,nl);if(_r.errors&&_r.errors.length)return void Qt.push(_r);if(nl)return gn.onStart(()=>mp(Ei,_r.fromStyles)),gn.onDestroy(()=>tl(Ei,_r.toStyles)),void s.push(gn);if(Ot.isFallbackTransition)return gn.onStart(()=>mp(Ei,_r.fromStyles)),gn.onDestroy(()=>tl(Ei,_r.toStyles)),void s.push(gn);const sR=[];_r.timelines.forEach(Ts=>{Ts.stretchStartingKeyframe=!0,this.disabledNodes.has(Ts.element)||sR.push(Ts)}),_r.timelines=sR,r.append(Ei,_r.timelines),c.push({instruction:_r,player:gn,element:Ei}),_r.queriedElements.forEach(Ts=>To(p,Ts,[]).push(gn)),_r.preStyleProps.forEach((Ts,vp)=>{const ch=Object.keys(Ts);if(ch.length){let Ep=_.get(vp);Ep||_.set(vp,Ep=new Set),ch.forEach(rS=>Ep.add(rS))}}),_r.postStyleProps.forEach((Ts,vp)=>{const ch=Object.keys(Ts);let Ep=b.get(vp);Ep||b.set(vp,Ep=new Set),ch.forEach(rS=>Ep.add(rS))})});if(Qt.length){const ct=[];Qt.forEach(At=>{ct.push(function Dk(n,e){return new h.vHH(3505,sn)}())}),Bt.forEach(At=>At.destroy()),this.reportError(ct)}const vn=new Map,Ds=new Map;c.forEach(ct=>{const At=ct.element;r.has(At)&&(Ds.set(At,At),this._beforeAnimationBuild(ct.player.namespaceId,ct.instruction,vn))}),s.forEach(ct=>{const At=ct.element;this._getPreviousPlayers(At,!1,ct.namespaceId,ct.triggerName,null).forEach(gn=>{To(vn,At,[]).push(gn),gn.destroy()})});const gc=Ue.filter(ct=>zN(ct,_,b)),mc=new Map;$N(mc,this.driver,wt,b,pc).forEach(ct=>{zN(ct,_,b)&&gc.push(ct)});const dE=new Map;q.forEach((ct,At)=>{$N(dE,this.driver,new Set(ct),_,"!")}),gc.forEach(ct=>{const At=mc.get(ct),Ot=dE.get(ct);mc.set(ct,Object.assign(Object.assign({},At),Ot))});const _p=[],rR=[],iR={};c.forEach(ct=>{const{element:At,player:Ot,instruction:gn}=ct;if(r.has(At)){if(A.has(At))return Ot.onDestroy(()=>tl(At,gn.toStyles)),Ot.disabled=!0,Ot.overrideTotalTime(gn.totalTime),void s.push(Ot);let Ei=iR;if(Ds.size>1){let Ao=At;const lh=[];for(;Ao=Ao.parentNode;){const _r=Ds.get(Ao);if(_r){Ei=_r;break}lh.push(Ao)}lh.forEach(_r=>Ds.set(_r,Ei))}const nl=this._buildAnimation(Ot.namespaceId,gn,vn,u,dE,mc);if(Ot.setRealPlayer(nl),Ei===iR)_p.push(Ot);else{const Ao=this.playersByElement.get(Ei);Ao&&Ao.length&&(Ot.parentPlayer=ah(Ao)),s.push(Ot)}}else mp(At,gn.fromStyles),Ot.onDestroy(()=>tl(At,gn.toStyles)),rR.push(Ot),A.has(At)&&s.push(Ot)}),rR.forEach(ct=>{const At=u.get(ct.element);if(At&&At.length){const Ot=ah(At);ct.setRealPlayer(Ot)}}),s.forEach(ct=>{ct.parentPlayer?ct.syncPlayerEvents(ct.parentPlayer):ct.destroy()});for(let ct=0;ct<Ue.length;ct++){const At=Ue[ct],Ot=At[ca];if(jm(At,CI),Ot&&Ot.hasAnimation)continue;let gn=[];if(p.size){let nl=p.get(At);nl&&nl.length&&gn.push(...nl);let Ao=this.driver.query(At,FA,!0);for(let lh=0;lh<Ao.length;lh++){let _r=p.get(Ao[lh]);_r&&_r.length&&gn.push(..._r)}}const Ei=gn.filter(nl=>!nl.destroyed);Ei.length?DF(this,At,Ei):this.processLeaveNode(At)}return Ue.length=0,_p.forEach(ct=>{this.players.push(ct),ct.onDone(()=>{ct.destroy();const At=this.players.indexOf(ct);this.players.splice(At,1)}),ct.play()}),_p}elementContainsData(e,t){let r=!1;const s=t[ca];return s&&s.setForRemoval&&(r=!0),this.playersByElement.has(t)&&(r=!0),this.playersByQueriedElement.has(t)&&(r=!0),this.statesByElement.has(t)&&(r=!0),this._fetchNamespace(e).elementContainsData(t)||r}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,t,r,s,u){let c=[];if(t){const p=this.playersByQueriedElement.get(e);p&&(c=p)}else{const p=this.playersByElement.get(e);if(p){const _=!u||u==cE;p.forEach(b=>{b.queued||!_&&b.triggerName!=s||c.push(b)})}}return(r||s)&&(c=c.filter(p=>!(r&&r!=p.namespaceId||s&&s!=p.triggerName))),c}_beforeAnimationBuild(e,t,r){const u=t.element,c=t.isRemovalTransition?void 0:e,p=t.isRemovalTransition?void 0:t.triggerName;for(const _ of t.timelines){const b=_.element,A=b!==u,x=To(r,b,[]);this._getPreviousPlayers(b,A,c,p,t.toState).forEach(q=>{const Y=q.getRealPlayer();Y.beforeDestroy&&Y.beforeDestroy(),q.destroy(),x.push(q)})}mp(u,t.fromStyles)}_buildAnimation(e,t,r,s,u,c){const p=t.triggerName,_=t.element,b=[],A=new Set,x=new Set,V=t.timelines.map(Y=>{const ve=Y.element;A.add(ve);const Ue=ve[ca];if(Ue&&Ue.removedBeforeQueried)return new iE(Y.duration,Y.delay);const _t=ve!==_,wt=function TF(n){const e=[];return GN(n,e),e}((r.get(ve)||yF).map(vn=>vn.getRealPlayer())).filter(vn=>!!vn.element&&vn.element===ve),Ct=u.get(ve),ft=c.get(ve),Bt=mN(0,this._normalizer,0,Y.keyframes,Ct,ft),Qt=this._buildPlayer(Y,Bt,wt);if(Y.subTimeline&&s&&x.add(ve),_t){const vn=new YA(e,p,ve);vn.setRealPlayer(Qt),b.push(vn)}return Qt});b.forEach(Y=>{To(this.playersByQueriedElement,Y.element,[]).push(Y),Y.onDone(()=>function wF(n,e,t){let r;if(n instanceof Map){if(r=n.get(e),r){if(r.length){const s=r.indexOf(t);r.splice(s,1)}0==r.length&&n.delete(e)}}else if(r=n[e],r){if(r.length){const s=r.indexOf(t);r.splice(s,1)}0==r.length&&delete n[e]}return r}(this.playersByQueriedElement,Y.element,Y))}),A.forEach(Y=>da(Y,CN));const q=ah(V);return q.onDestroy(()=>{A.forEach(Y=>jm(Y,CN)),tl(_,t.toStyles)}),x.forEach(Y=>{To(s,Y,[]).push(q)}),q}_buildPlayer(e,t,r){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,r):new iE(e.duration,e.delay)}}class YA{constructor(e,t,r){this.namespaceId=e,this.triggerName=t,this.element=r,this._player=new iE,this._containsRealPlayer=!1,this._queuedCallbacks={},this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(e){this._containsRealPlayer||(this._player=e,Object.keys(this._queuedCallbacks).forEach(t=>{this._queuedCallbacks[t].forEach(r=>MA(e,t,void 0,r))}),this._queuedCallbacks={},this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){const t=this._player;t.triggerCallback&&e.onStart(()=>t.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,t){To(this._queuedCallbacks,e,[]).push(t)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){const t=this._player;t.triggerCallback&&t.triggerCallback(e)}}function jI(n){return n&&1===n.nodeType}function jN(n,e){const t=n.style.display;return n.style.display=null!=e?e:"none",t}function $N(n,e,t,r,s){const u=[];t.forEach(_=>u.push(jN(_)));const c=[];r.forEach((_,b)=>{const A={};_.forEach(x=>{const V=A[x]=e.computeStyle(b,x,s);(!V||0==V.length)&&(b[ca]=_F,c.push(b))}),n.set(b,A)});let p=0;return t.forEach(_=>jN(_,u[p++])),c}function HN(n,e){const t=new Map;if(n.forEach(p=>t.set(p,[])),0==e.length)return t;const s=new Set(e),u=new Map;function c(p){if(!p)return 1;let _=u.get(p);if(_)return _;const b=p.parentNode;return _=t.has(b)?b:s.has(b)?1:c(b),u.set(p,_),_}return e.forEach(p=>{const _=c(p);1!==_&&t.get(_).push(p)}),t}function da(n,e){var t;null===(t=n.classList)||void 0===t||t.add(e)}function jm(n,e){var t;null===(t=n.classList)||void 0===t||t.remove(e)}function DF(n,e,t){ah(t).onDone(()=>n.processLeaveNode(e))}function GN(n,e){for(let t=0;t<n.length;t++){const r=n[t];r instanceof ix?GN(r.players,e):e.push(r)}}function zN(n,e,t){const r=t.get(n);if(!r)return!1;let s=e.get(n);return s?r.forEach(u=>s.add(u)):e.set(n,r),t.delete(n),!0}class $I{constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r,this._triggerCache={},this.onRemovalComplete=(s,u)=>{},this._transitionEngine=new EF(e,t,r),this._timelineEngine=new hF(e,t,r),this._transitionEngine.onRemovalComplete=(s,u)=>this.onRemovalComplete(s,u)}registerTrigger(e,t,r,s,u){const c=e+"-"+s;let p=this._triggerCache[c];if(!p){const _=[],A=BA(this._driver,u,_,[]);if(_.length)throw function fk(n,e){return new h.vHH(3404,sn)}();p=function uF(n,e,t){return new lF(n,e,t)}(s,A,this._normalizer),this._triggerCache[c]=p}this._transitionEngine.registerTrigger(t,s,p)}register(e,t){this._transitionEngine.register(e,t)}destroy(e,t){this._transitionEngine.destroy(e,t)}onInsert(e,t,r,s){this._transitionEngine.insertNode(e,t,r,s)}onRemove(e,t,r,s){this._transitionEngine.removeNode(e,t,s||!1,r)}disableAnimations(e,t){this._transitionEngine.markElementAsDisabled(e,t)}process(e,t,r,s){if("@"==r.charAt(0)){const[u,c]=yN(r);this._timelineEngine.command(u,t,c,s)}else this._transitionEngine.trigger(e,t,r,s)}listen(e,t,r,s,u){if("@"==r.charAt(0)){const[c,p]=yN(r);return this._timelineEngine.listen(c,t,p,u)}return this._transitionEngine.listen(e,t,r,s,u)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}let SF=(()=>{class n{constructor(t,r,s){this._element=t,this._startStyles=r,this._endStyles=s,this._state=0;let u=n.initialStylesByElement.get(t);u||n.initialStylesByElement.set(t,u={}),this._initialStyles=u}start(){this._state<1&&(this._startStyles&&tl(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(tl(this._element,this._initialStyles),this._endStyles&&(tl(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(n.initialStylesByElement.delete(this._element),this._startStyles&&(mp(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(mp(this._element,this._endStyles),this._endStyles=null),tl(this._element,this._initialStyles),this._state=3)}}return n.initialStylesByElement=new WeakMap,n})();function QA(n){let e=null;const t=Object.keys(n);for(let r=0;r<t.length;r++){const s=t[r];MF(s)&&(e=e||{},e[s]=n[s])}return e}function MF(n){return"display"===n||"position"===n}class WN{constructor(e,t,r,s){this.element=e,this.keyframes=t,this.options=r,this._specialStyles=s,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this.time=0,this.parentPlayer=null,this.currentSnapshot={},this._duration=r.duration,this._delay=r.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:{},this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_triggerWebAnimation(e,t,r){return e.animate(t,r)}onStart(e){this._onStartFns.push(e)}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=e*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const e={};if(this.hasStarted()){const t=this._finalKeyframe;Object.keys(t).forEach(r=>{"offset"!=r&&(e[r]=this._finished?t[r]:NN(this.element,r))})}this.currentSnapshot=e}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class xF{validateStyleProperty(e){return wN(e)}matchesElement(e,t){return!1}containsElement(e,t){return bN(e,t)}getParentElement(e){return OA(e)}query(e,t,r){return IN(e,t,r)}computeStyle(e,t,r){return window.getComputedStyle(e)[t]}animate(e,t,r,s,u,c=[]){const _={duration:r,delay:s,fill:0==s?"both":"forwards"};u&&(_.easing=u);const b={},A=c.filter(V=>V instanceof WN);(function Pk(n,e){return 0===n||0===e})(r,s)&&A.forEach(V=>{let q=V.currentSnapshot;Object.keys(q).forEach(Y=>b[Y]=q[Y])}),t=function kk(n,e,t){const r=Object.keys(t);if(r.length&&e.length){let u=e[0],c=[];if(r.forEach(p=>{u.hasOwnProperty(p)||c.push(p),u[p]=t[p]}),c.length)for(var s=1;s<e.length;s++){let p=e[s];c.forEach(function(_){p[_]=NN(n,_)})}}return e}(e,t=t.map(V=>uh(V,!1)),b);const x=function AF(n,e){let t=null,r=null;return Array.isArray(e)&&e.length?(t=QA(e[0]),e.length>1&&(r=QA(e[e.length-1]))):e&&(t=QA(e)),t||r?new SF(n,t,r):null}(e,t);return new WN(e,t,_,x)}}let NF=(()=>{class n extends XM{constructor(t,r){super(),this._nextAnimationId=0,this._renderer=t.createRenderer(r.body,{id:"0",encapsulation:h.ifc.None,styles:[],data:{animation:[]}})}build(t){const r=this._nextAnimationId.toString();this._nextAnimationId++;const s=Array.isArray(t)?tx(t):t;return qN(this._renderer,null,r,"register",[s]),new RF(r,this._renderer)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(h.FYo),h.LFG(de))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();class RF extends class pP{}{constructor(e,t){super(),this._id=e,this._renderer=t}create(e,t){return new OF(this._id,e,t||{},this._renderer)}}class OF{constructor(e,t,r,s){this.id=e,this.element=t,this._renderer=s,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",r)}_listen(e,t){return this._renderer.listen(this.element,`@@${this.id}:${e}`,t)}_command(e,...t){return qN(this._renderer,this.element,this.id,e,t)}onDone(e){this._listen("done",e)}onStart(e){this._listen("start",e)}onDestroy(e){this._listen("destroy",e)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(e){this._command("setPosition",e)}getPosition(){var e,t;return null!==(t=null===(e=this._renderer.engine.players[+this.id])||void 0===e?void 0:e.getPosition())&&void 0!==t?t:0}}function qN(n,e,t,r,s){return n.setProperty(e,`@@${t}:${r}`,s)}const KN="@.disabled";let PF=(()=>{class n{constructor(t,r,s){this.delegate=t,this.engine=r,this._zone=s,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),r.onRemovalComplete=(u,c)=>{const p=null==c?void 0:c.parentNode(u);p&&c.removeChild(p,u)}}createRenderer(t,r){const u=this.delegate.createRenderer(t,r);if(!(t&&r&&r.data&&r.data.animation)){let A=this._rendererCache.get(u);return A||(A=new ZN("",u,this.engine),this._rendererCache.set(u,A)),A}const c=r.id,p=r.id+"-"+this._currentId;this._currentId++,this.engine.register(p,t);const _=A=>{Array.isArray(A)?A.forEach(_):this.engine.registerTrigger(c,p,t,A.name,A)};return r.data.animation.forEach(_),new kF(this,p,u,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(t,r,s){t>=0&&t<this._microtaskId?this._zone.run(()=>r(s)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(u=>{const[c,p]=u;c(p)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([r,s]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(h.FYo),h.LFG($I),h.LFG(h.R0b))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();class ZN{constructor(e,t,r){this.namespaceId=e,this.delegate=t,this.engine=r,this.destroyNode=this.delegate.destroyNode?s=>t.destroyNode(s):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}insertBefore(e,t,r,s=!0){this.delegate.insertBefore(e,t,r),this.engine.onInsert(this.namespaceId,t,e,s)}removeChild(e,t,r){this.engine.onRemove(this.namespaceId,t,this.delegate,r)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,r,s){this.delegate.setAttribute(e,t,r,s)}removeAttribute(e,t,r){this.delegate.removeAttribute(e,t,r)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,r,s){this.delegate.setStyle(e,t,r,s)}removeStyle(e,t,r){this.delegate.removeStyle(e,t,r)}setProperty(e,t,r){"@"==t.charAt(0)&&t==KN?this.disableAnimations(e,!!r):this.delegate.setProperty(e,t,r)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,r){return this.delegate.listen(e,t,r)}disableAnimations(e,t){this.engine.disableAnimations(e,t)}}class kF extends ZN{constructor(e,t,r,s){super(t,r,s),this.factory=e,this.namespaceId=t}setProperty(e,t,r){"@"==t.charAt(0)?"."==t.charAt(1)&&t==KN?this.disableAnimations(e,r=void 0===r||!!r):this.engine.process(this.namespaceId,e,t.substr(1),r):this.delegate.setProperty(e,t,r)}listen(e,t,r){if("@"==t.charAt(0)){const s=function FF(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}(e);let u=t.substr(1),c="";return"@"!=u.charAt(0)&&([u,c]=function LF(n){const e=n.indexOf(".");return[n.substring(0,e),n.substr(e+1)]}(u)),this.engine.listen(this.namespaceId,s,u,c,p=>{this.factory.scheduleListenerCallback(p._data||-1,r,p)})}return this.delegate.listen(e,t,r)}}let VF=(()=>{class n extends $I{constructor(t,r,s){super(t.body,r,s)}ngOnDestroy(){this.flush()}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(de),h.LFG(PA),h.LFG(zA))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();const YN=new h.OlP("AnimationModuleType"),QN=[{provide:XM,useClass:NF},{provide:zA,useFactory:function UF(){return new rF}},{provide:$I,useClass:VF},{provide:h.FYo,useFactory:function BF(n,e,t){return new PF(n,e,t)},deps:[Ea,$I,h.R0b]}],JN=[{provide:PA,useFactory:()=>new xF},{provide:YN,useValue:"BrowserAnimations"},...QN],jF=[{provide:PA,useClass:DN},{provide:YN,useValue:"NoopAnimations"},...QN];let $F=(()=>{class n{static withConfig(t){return{ngModule:n,providers:t.disableAnimations?jF:JN}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:JN,imports:[lu]}),n})(),HF=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-navbar"]],decls:6,vars:0,consts:[[1,"class","container-fluid","bg-primary"],[1,"row"],[1,"col-md"],[1,"py-3"],[1,"text-center"]],template:function(t,r){1&t&&(h.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"header",3)(4,"h3",4),h._uU(5,"N\xf3mina de empleados"),h.qZA()()()()())},styles:[""]}),n})(),GF=(()=>{class n{constructor(){this.title="CRUD"}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-root"]],decls:2,vars:0,template:function(t,r){1&t&&h._UZ(0,"app-navbar")(1,"router-outlet")},directives:[HF,El],styles:[""]}),n})();const JA_firebase={apiKey:"AIzaSyBc8CH8pRjFQGWyxr4FP1lTo3F6xA0cDvs",authDomain:"empleados-4ea83.firebaseapp.com",projectId:"empleados-4ea83",storageBucket:"empleados-4ea83.appspot.com",messagingSenderId:"7869200884",appId:"1:7869200884:web:4f94df2650169ff1fc61a1"};O(2587);class eR{constructor(){return(0,Tn.vb)("auth")}}class tS{constructor(e){return e}}const tR="firestore",nS=new h.OlP("angularfire2.firestore-instances");function YF(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new tS(r)}}const QF={provide:class KF{constructor(){return(0,Tn.vb)(tR)}},deps:[[new h.FiY,nS]]},JF={provide:tS,useFactory:function ZF(n,e){const t=(0,Tn.JM)(tR,n,e);return t&&new tS(t)},deps:[[new h.FiY,nS],Vm]};let XF=(()=>{class n{constructor(){(0,dp.KN)("angularfire",Tn.q4.full,"fst")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:[JF,QF]}),n})();function eL(n,...e){return{ngModule:XF,providers:[{provide:nS,useFactory:YF(n),multi:!0,deps:[h.R0b,h.zs3,Tn.HU,hM,[new h.FiY,eR],[new h.FiY,aI],...e]}]}}const tL=(0,Tn.u3)(Et,!0);let nL=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n,bootstrap:[GF]}),n.\u0275inj=h.cJS({providers:[],imports:[[lu,z1,Ws.hO.initializeApp(JA_firebase),dO(()=>hO(JA_firebase)),eL(()=>tL()),fP,fN,VP.forRoot(),$F]]}),n})();(0,h.G48)(),Oc().bootstrapModule(nL).catch(n=>console.error(n))},5867:(rt,De,O)=>{O.d(De,{C6:()=>h.getApps,KN:()=>h.registerVersion,Mq:()=>h.getApp,ZF:()=>h.initializeApp});var h=O(9681);(0,h.registerVersion)("firebase","9.8.2","app")},127:(rt,De,O)=>{O.d(De,{Z:()=>h.Z});var h=O(3942);h.Z.registerVersion("firebase","9.8.2","app-compat")},5881:(rt,De,O)=>{O.r(De);var h=O(5861),L=O(3942),R=O(2587),oe=O(2090),de=(O(9681),O(1877),O(4859));function ue(){return window}function B(){return(B=(0,h.Z)(function*(le,K,z){var Ae;const{BuildInfo:Qe}=ue();(0,R.aq)(K.sessionId,"AuthEvent did not contain a session ID");const at=yield Te(K.sessionId),Rt={};return(0,R.ar)()?Rt.ibi=Qe.packageName:(0,R.as)()?Rt.apn=Qe.packageName:(0,R.at)(le,"operation-not-supported-in-this-environment"),Qe.displayName&&(Rt.appDisplayName=Qe.displayName),Rt.sessionId=at,(0,R.au)(le,z,K.type,void 0,null!==(Ae=K.eventId)&&void 0!==Ae?Ae:void 0,Rt)})).apply(this,arguments)}function Ke(){return(Ke=(0,h.Z)(function*(le){const{BuildInfo:K}=ue(),z={};(0,R.ar)()?z.iosBundleId=K.packageName:(0,R.as)()?z.androidPackageName=K.packageName:(0,R.at)(le,"operation-not-supported-in-this-environment"),yield(0,R.av)(le,z)})).apply(this,arguments)}function He(){return(He=(0,h.Z)(function*(le,K,z){const{cordova:Ae}=ue();let Qe=()=>{};try{yield new Promise((at,Rt)=>{let Yt=null;function $t(){var Ht;at();const Ar=null===(Ht=Ae.plugins.browsertab)||void 0===Ht?void 0:Ht.close;"function"==typeof Ar&&Ar(),"function"==typeof(null==z?void 0:z.close)&&z.close()}function $n(){Yt||(Yt=window.setTimeout(()=>{Rt((0,R.aw)(le,"redirect-cancelled-by-user"))},2e3))}function Qr(){"visible"===(null==document?void 0:document.visibilityState)&&$n()}K.addPassiveListener($t),document.addEventListener("resume",$n,!1),(0,R.as)()&&document.addEventListener("visibilitychange",Qr,!1),Qe=()=>{K.removePassiveListener($t),document.removeEventListener("resume",$n,!1),document.removeEventListener("visibilitychange",Qr,!1),Yt&&window.clearTimeout(Yt)}})}finally{Qe()}})).apply(this,arguments)}function Te(le){return qe.apply(this,arguments)}function qe(){return(qe=(0,h.Z)(function*(le){const K=ze(le),z=yield crypto.subtle.digest("SHA-256",K);return Array.from(new Uint8Array(z)).map(Qe=>Qe.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function ze(le){if((0,R.aq)(/[0-9a-zA-Z]+/.test(le),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(le);const K=new ArrayBuffer(le.length),z=new Uint8Array(K);for(let Ae=0;Ae<le.length;Ae++)z[Ae]=le.charCodeAt(Ae);return z}class xe extends R.aA{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(K=>{this.resolveInialized=K})}addPassiveListener(K){this.passiveListeners.add(K)}removePassiveListener(K){this.passiveListeners.delete(K)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(K){return this.resolveInialized(),this.passiveListeners.forEach(z=>z(K)),super.onEvent(K)}initialized(){var K=this;return(0,h.Z)(function*(){yield K.initPromise})()}}function ne(le){return he.apply(this,arguments)}function he(){return(he=(0,h.Z)(function*(le){const K=yield re()._get(se(le));return K&&(yield re()._remove(se(le))),K})).apply(this,arguments)}function Z(){const le=[],K="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let z=0;z<20;z++){const Ae=Math.floor(Math.random()*K.length);le.push(K.charAt(Ae))}return le.join("")}function re(){return(0,R.ay)(R.b)}function se(le){return(0,R.az)("authEvent",le.config.apiKey,le.name)}function Ve(le){if(!(null==le?void 0:le.includes("?")))return{};const[K,...z]=le.split("?");return(0,oe.zd)(z.join("?"))}function Ye(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:(0,R.aw)("no-auth-event")}}function jt(){var le;return(null===(le=null==self?void 0:self.location)||void 0===le?void 0:le.protocol)||null}function In(le=(0,oe.z$)()){return!("file:"!==jt()&&"ionic:"!==jt()&&"capacitor:"!==jt()||!le.toLowerCase().match(/iphone|ipad|ipod|android/))}function ui(){try{const le=self.localStorage,K=R.aI();if(le)return le.setItem(K,"1"),le.removeItem(K),!function Oi(le=(0,oe.z$)()){return function Tr(){return(0,oe.w1)()&&11===(null==document?void 0:document.documentMode)}()||function Cn(le=(0,oe.z$)()){return/Edge\/\d+/.test(le)}(le)}()||(0,oe.hl)()}catch(le){return wi()&&(0,oe.hl)()}return!1}function wi(){return"undefined"!=typeof global&&"WorkerGlobalScope"in global&&"importScripts"in global}function jn(){return(function en(){return"http:"===jt()||"https:"===jt()}()||(0,oe.ru)()||In())&&!function Ri(){return(0,oe.b$)()||(0,oe.UG)()}()&&ui()&&!wi()}function Pi(){return In()&&"undefined"!=typeof document}function Lr(){return(Lr=(0,h.Z)(function*(){return!!Pi()&&new Promise(le=>{const K=setTimeout(()=>{le(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(K),le(!0)})})})).apply(this,arguments)}const tn={LOCAL:"local",NONE:"none",SESSION:"session"},Cr=R.ax,or="persistence";function Dn(le){return ar.apply(this,arguments)}function ar(){return(ar=(0,h.Z)(function*(le){yield le._initializationPromise;const K=Zt(),z=R.az(or,le.config.apiKey,le.name);K&&K.setItem(z,le._getPersistence())})).apply(this,arguments)}function Zt(){var le;try{return(null===(le=function En(){return"undefined"!=typeof window?window:null}())||void 0===le?void 0:le.sessionStorage)||null}catch(K){return null}}const lt=R.ax;class it{constructor(){this.browserResolver=R.ay(R.k),this.cordovaResolver=R.ay(class Xt{constructor(){this._redirectPersistence=R.a,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=R.aB,this._overrideRedirectResult=R.aC}_initialize(K){var z=this;return(0,h.Z)(function*(){const Ae=K._key();let Qe=z.eventManagers.get(Ae);return Qe||(Qe=new xe(K),z.eventManagers.set(Ae,Qe),z.attachCallbackListeners(K,Qe)),Qe})()}_openPopup(K){(0,R.at)(K,"operation-not-supported-in-this-environment")}_openRedirect(K,z,Ae,Qe){var at=this;return(0,h.Z)(function*(){!function ge(le){var K,z,Ae,Qe,at,Rt,Yt,$t,$n,Qr;const Ht=ue();(0,R.ax)("function"==typeof(null===(K=null==Ht?void 0:Ht.universalLinks)||void 0===K?void 0:K.subscribe),le,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),(0,R.ax)(void 0!==(null===(z=null==Ht?void 0:Ht.BuildInfo)||void 0===z?void 0:z.packageName),le,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),(0,R.ax)("function"==typeof(null===(at=null===(Qe=null===(Ae=null==Ht?void 0:Ht.cordova)||void 0===Ae?void 0:Ae.plugins)||void 0===Qe?void 0:Qe.browsertab)||void 0===at?void 0:at.openUrl),le,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,R.ax)("function"==typeof(null===($t=null===(Yt=null===(Rt=null==Ht?void 0:Ht.cordova)||void 0===Rt?void 0:Rt.plugins)||void 0===Yt?void 0:Yt.browsertab)||void 0===$t?void 0:$t.isAvailable),le,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,R.ax)("function"==typeof(null===(Qr=null===($n=null==Ht?void 0:Ht.cordova)||void 0===$n?void 0:$n.InAppBrowser)||void 0===Qr?void 0:Qr.open),le,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(K);const Rt=yield at._initialize(K);yield Rt.initialized(),Rt.resetRedirect(),(0,R.aD)(),yield at._originValidation(K);const Yt=function be(le,K,z=null){return{type:K,eventId:z,urlResponse:null,sessionId:Z(),postBody:null,tenantId:le.tenantId,error:(0,R.aw)(le,"no-auth-event")}}(K,Ae,Qe);yield function Ze(le,K){return re()._set(se(le),K)}(K,Yt);const $t=yield function H(le,K,z){return B.apply(this,arguments)}(K,Yt,z),$n=yield function Se(le){const{cordova:K}=ue();return new Promise(z=>{K.plugins.browsertab.isAvailable(Ae=>{let Qe=null;Ae?K.plugins.browsertab.openUrl(le):Qe=K.InAppBrowser.open(le,(0,R.ap)()?"_blank":"_system","location=yes"),z(Qe)})})}($t);return function Fe(le,K,z){return He.apply(this,arguments)}(K,Rt,$n)})()}_isIframeWebStorageSupported(K,z){throw new Error("Method not implemented.")}_originValidation(K){const z=K._key();return this.originValidationPromises[z]||(this.originValidationPromises[z]=function ie(le){return Ke.apply(this,arguments)}(K)),this.originValidationPromises[z]}attachCallbackListeners(K,z){const{universalLinks:Ae,handleOpenURL:Qe,BuildInfo:at}=ue(),Rt=setTimeout((0,h.Z)(function*(){yield ne(K),z.onEvent(Ye())}),500),Yt=function(){var Qr=(0,h.Z)(function*(Ht){clearTimeout(Rt);const Ar=yield ne(K);let Fi=null;Ar&&(null==Ht?void 0:Ht.url)&&(Fi=function Ie(le,K){var z,Ae;const Qe=function ce(le){const K=Ve(le),z=K.link?decodeURIComponent(K.link):void 0,Ae=Ve(z).link,Qe=K.deep_link_id?decodeURIComponent(K.deep_link_id):void 0;return Ve(Qe).link||Qe||Ae||z||le}(K);if(Qe.includes("/__/auth/callback")){const at=Ve(Qe),Rt=at.firebaseError?function _e(le){try{return JSON.parse(le)}catch(K){return null}}(decodeURIComponent(at.firebaseError)):null,Yt=null===(Ae=null===(z=null==Rt?void 0:Rt.code)||void 0===z?void 0:z.split("auth/"))||void 0===Ae?void 0:Ae[1],$t=Yt?(0,R.aw)(Yt):null;return $t?{type:le.type,eventId:le.eventId,tenantId:le.tenantId,error:$t,urlResponse:null,sessionId:null,postBody:null}:{type:le.type,eventId:le.eventId,tenantId:le.tenantId,sessionId:le.sessionId,urlResponse:Qe,postBody:null}}return null}(Ar,Ht.url)),z.onEvent(Fi||Ye())});return function(Ar){return Qr.apply(this,arguments)}}();void 0!==Ae&&"function"==typeof Ae.subscribe&&Ae.subscribe(null,Yt);const $t=Qe,$n=`${at.packageName.toLowerCase()}://`;ue().handleOpenURL=function(){var Qr=(0,h.Z)(function*(Ht){if(Ht.toLowerCase().startsWith($n)&&Yt({url:Ht}),"function"==typeof $t)try{$t(Ht)}catch(Ar){console.error(Ar)}});return function(Ht){return Qr.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=R.a,this._completeRedirectFn=R.aB,this._overrideRedirectResult=R.aC}_initialize(K){var z=this;return(0,h.Z)(function*(){return yield z.selectUnderlyingResolver(),z.assertedUnderlyingResolver._initialize(K)})()}_openPopup(K,z,Ae,Qe){var at=this;return(0,h.Z)(function*(){return yield at.selectUnderlyingResolver(),at.assertedUnderlyingResolver._openPopup(K,z,Ae,Qe)})()}_openRedirect(K,z,Ae,Qe){var at=this;return(0,h.Z)(function*(){return yield at.selectUnderlyingResolver(),at.assertedUnderlyingResolver._openRedirect(K,z,Ae,Qe)})()}_isIframeWebStorageSupported(K,z){this.assertedUnderlyingResolver._isIframeWebStorageSupported(K,z)}_originValidation(K){return this.assertedUnderlyingResolver._originValidation(K)}get _shouldInitProactively(){return Pi()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return lt(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var K=this;return(0,h.Z)(function*(){if(K.underlyingResolver)return;const z=yield function pt(){return Lr.apply(this,arguments)}();K.underlyingResolver=z?K.cordovaResolver:K.browserResolver})()}}function li(le){return le.unwrap()}function Wt(le){return On(le)}function On(le){const{_tokenResponse:K}=le instanceof oe.ZR?le.customData:le;if(!K)return null;if(!(le instanceof oe.ZR)&&"temporaryProof"in K&&"phoneNumber"in K)return R.P.credentialFromResult(le);const z=K.providerId;if(!z||z===R.o.PASSWORD)return null;let Ae;switch(z){case R.o.GOOGLE:Ae=R.Q;break;case R.o.FACEBOOK:Ae=R.N;break;case R.o.GITHUB:Ae=R.T;break;case R.o.TWITTER:Ae=R.W;break;default:const{oauthIdToken:Qe,oauthAccessToken:at,oauthTokenSecret:Rt,pendingToken:Yt,nonce:$t}=K;return at||Rt||Qe||Yt?Yt?z.startsWith("saml.")?R.aL._create(z,Yt):R.J._fromParams({providerId:z,signInMethod:z,pendingToken:Yt,idToken:Qe,accessToken:at}):new R.U(z).credential({idToken:Qe,accessToken:at,rawNonce:$t}):null}return le instanceof oe.ZR?Ae.credentialFromError(le):Ae.credentialFromResult(le)}function cn(le,K){return K.catch(z=>{throw z instanceof oe.ZR&&function ki(le,K){var z;const Ae=null===(z=K.customData)||void 0===z?void 0:z._tokenResponse;if("auth/multi-factor-auth-required"===K.code)K.resolver=new W(le,R.an(le,K));else if(Ae){const Qe=On(K),at=K;Qe&&(at.credential=Qe,at.tenantId=Ae.tenantId||void 0,at.email=Ae.email||void 0,at.phoneNumber=Ae.phoneNumber||void 0)}}(le,z),z}).then(z=>{const Qe=z.user;return{operationType:z.operationType,credential:Wt(z),additionalUserInfo:R.al(z),user:Ee.getOrCreate(Qe)}})}function U(le,K){return G.apply(this,arguments)}function G(){return(G=(0,h.Z)(function*(le,K){const z=yield K;return{verificationId:z.verificationId,confirm:Ae=>cn(le,z.confirm(Ae))}})).apply(this,arguments)}class W{constructor(K,z){this.resolver=z,this.auth=function ci(le){return le.wrapped()}(K)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(K){return cn(li(this.auth),this.resolver.resolveSignIn(K))}}class Ee{constructor(K){this._delegate=K,this.multiFactor=R.ao(K)}static getOrCreate(K){return Ee.USER_MAP.has(K)||Ee.USER_MAP.set(K,new Ee(K)),Ee.USER_MAP.get(K)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(K){return this._delegate.getIdTokenResult(K)}getIdToken(K){return this._delegate.getIdToken(K)}linkAndRetrieveDataWithCredential(K){return this.linkWithCredential(K)}linkWithCredential(K){var z=this;return(0,h.Z)(function*(){return cn(z.auth,R.Z(z._delegate,K))})()}linkWithPhoneNumber(K,z){var Ae=this;return(0,h.Z)(function*(){return U(Ae.auth,R.l(Ae._delegate,K,z))})()}linkWithPopup(K){var z=this;return(0,h.Z)(function*(){return cn(z.auth,R.d(z._delegate,K,it))})()}linkWithRedirect(K){var z=this;return(0,h.Z)(function*(){return yield Dn(R.aE(z.auth)),R.g(z._delegate,K,it)})()}reauthenticateAndRetrieveDataWithCredential(K){return this.reauthenticateWithCredential(K)}reauthenticateWithCredential(K){var z=this;return(0,h.Z)(function*(){return cn(z.auth,R._(z._delegate,K))})()}reauthenticateWithPhoneNumber(K,z){return U(this.auth,R.r(this._delegate,K,z))}reauthenticateWithPopup(K){return cn(this.auth,R.e(this._delegate,K,it))}reauthenticateWithRedirect(K){var z=this;return(0,h.Z)(function*(){return yield Dn(R.aE(z.auth)),R.h(z._delegate,K,it)})()}sendEmailVerification(K){return R.ab(this._delegate,K)}unlink(K){var z=this;return(0,h.Z)(function*(){return yield R.ak(z._delegate,K),z})()}updateEmail(K){return R.ag(this._delegate,K)}updatePassword(K){return R.ah(this._delegate,K)}updatePhoneNumber(K){return R.u(this._delegate,K)}updateProfile(K){return R.af(this._delegate,K)}verifyBeforeUpdateEmail(K,z){return R.ac(this._delegate,K,z)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Ee.USER_MAP=new WeakMap;const j=R.ax;let X=(()=>{class le{constructor(z,Ae){if(this.app=z,Ae.isInitialized())return this._delegate=Ae.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:Qe}=z.options;j(Qe,"invalid-api-key",{appName:z.name}),j(Qe,"invalid-api-key",{appName:z.name});const at="undefined"!=typeof window?it:void 0;this._delegate=Ae.initialize({options:{persistence:tt(Qe,z.name),popupRedirectResolver:at}}),this._delegate._updateErrorMap(R.B),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Ee.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(z){this._delegate.languageCode=z}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(z){this._delegate.tenantId=z}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(z,Ae){R.G(this._delegate,z,Ae)}applyActionCode(z){return R.a2(this._delegate,z)}checkActionCode(z){return R.a3(this._delegate,z)}confirmPasswordReset(z,Ae){return R.a1(this._delegate,z,Ae)}createUserWithEmailAndPassword(z,Ae){var Qe=this;return(0,h.Z)(function*(){return cn(Qe._delegate,R.a5(Qe._delegate,z,Ae))})()}fetchProvidersForEmail(z){return this.fetchSignInMethodsForEmail(z)}fetchSignInMethodsForEmail(z){return R.aa(this._delegate,z)}isSignInWithEmailLink(z){return R.a8(this._delegate,z)}getRedirectResult(){var z=this;return(0,h.Z)(function*(){j(jn(),z._delegate,"operation-not-supported-in-this-environment");const Ae=yield R.j(z._delegate,it);return Ae?cn(z._delegate,Promise.resolve(Ae)):{credential:null,user:null}})()}addFrameworkForLogging(z){!function ln(le,K){(0,R.aE)(le)._logFramework(K)}(this._delegate,z)}onAuthStateChanged(z,Ae,Qe){const{next:at,error:Rt,complete:Yt}=Pe(z,Ae,Qe);return this._delegate.onAuthStateChanged(at,Rt,Yt)}onIdTokenChanged(z,Ae,Qe){const{next:at,error:Rt,complete:Yt}=Pe(z,Ae,Qe);return this._delegate.onIdTokenChanged(at,Rt,Yt)}sendSignInLinkToEmail(z,Ae){return R.a7(this._delegate,z,Ae)}sendPasswordResetEmail(z,Ae){return R.a0(this._delegate,z,Ae||void 0)}setPersistence(z){var Ae=this;return(0,h.Z)(function*(){let Qe;switch(function Vr(le,K){Cr(Object.values(tn).includes(K),le,"invalid-persistence-type"),(0,oe.b$)()?Cr(K!==tn.SESSION,le,"unsupported-persistence-type"):(0,oe.UG)()?Cr(K===tn.NONE,le,"unsupported-persistence-type"):wi()?Cr(K===tn.NONE||K===tn.LOCAL&&(0,oe.hl)(),le,"unsupported-persistence-type"):Cr(K===tn.NONE||ui(),le,"unsupported-persistence-type")}(Ae._delegate,z),z){case tn.SESSION:Qe=R.a;break;case tn.LOCAL:Qe=(yield R.ay(R.i)._isAvailable())?R.i:R.b;break;case tn.NONE:Qe=R.L;break;default:return R.at("argument-error",{appName:Ae._delegate.name})}return Ae._delegate.setPersistence(Qe)})()}signInAndRetrieveDataWithCredential(z){return this.signInWithCredential(z)}signInAnonymously(){return cn(this._delegate,R.X(this._delegate))}signInWithCredential(z){return cn(this._delegate,R.Y(this._delegate,z))}signInWithCustomToken(z){return cn(this._delegate,R.$(this._delegate,z))}signInWithEmailAndPassword(z,Ae){return cn(this._delegate,R.a6(this._delegate,z,Ae))}signInWithEmailLink(z,Ae){return cn(this._delegate,R.a9(this._delegate,z,Ae))}signInWithPhoneNumber(z,Ae){return U(this._delegate,R.s(this._delegate,z,Ae))}signInWithPopup(z){var Ae=this;return(0,h.Z)(function*(){return j(jn(),Ae._delegate,"operation-not-supported-in-this-environment"),cn(Ae._delegate,R.c(Ae._delegate,z,it))})()}signInWithRedirect(z){var Ae=this;return(0,h.Z)(function*(){return j(jn(),Ae._delegate,"operation-not-supported-in-this-environment"),yield Dn(Ae._delegate),R.f(Ae._delegate,z,it)})()}updateCurrentUser(z){return this._delegate.updateCurrentUser(z)}verifyPasswordResetCode(z){return R.a4(this._delegate,z)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return le.Persistence=tn,le})();function Pe(le,K,z){let Ae=le;"function"!=typeof le&&({next:Ae,error:K,complete:z}=le);const Qe=Ae;return{next:Rt=>Qe(Rt&&Ee.getOrCreate(Rt)),error:K,complete:z}}function tt(le,K){const z=function Cs(le,K){const z=Zt();if(!z)return[];const Ae=R.az(or,le,K);switch(z.getItem(Ae)){case tn.NONE:return[R.L];case tn.LOCAL:return[R.i,R.a];case tn.SESSION:return[R.a];default:return[]}}(le,K);if("undefined"!=typeof self&&!z.includes(R.i)&&z.push(R.i),"undefined"!=typeof window)for(const Ae of[R.b,R.a])z.includes(Ae)||z.push(Ae);return z.includes(R.L)||z.push(R.L),z}class ht{constructor(){this.providerId="phone",this._delegate=new R.P(li(L.Z.auth()))}static credential(K,z){return R.P.credential(K,z)}verifyPhoneNumber(K,z){return this._delegate.verifyPhoneNumber(K,z)}unwrap(){return this._delegate}}ht.PHONE_SIGN_IN_METHOD=R.P.PHONE_SIGN_IN_METHOD,ht.PROVIDER_ID=R.P.PROVIDER_ID;const Pt=R.ax;class on{constructor(K,z,Ae=L.Z.app()){var Qe;Pt(null===(Qe=Ae.options)||void 0===Qe?void 0:Qe.apiKey,"invalid-api-key",{appName:Ae.name}),this._delegate=new R.R(K,z,Ae.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function Gn(le){le.INTERNAL.registerComponent(new de.wA("auth-compat",K=>{const z=K.getProvider("app-compat").getImmediate(),Ae=K.getProvider("auth");return new X(z,Ae)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:R.A.EMAIL_SIGNIN,PASSWORD_RESET:R.A.PASSWORD_RESET,RECOVER_EMAIL:R.A.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:R.A.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:R.A.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:R.A.VERIFY_EMAIL}},EmailAuthProvider:R.M,FacebookAuthProvider:R.N,GithubAuthProvider:R.T,GoogleAuthProvider:R.Q,OAuthProvider:R.U,SAMLAuthProvider:R.V,PhoneAuthProvider:ht,PhoneMultiFactorGenerator:R.m,RecaptchaVerifier:on,TwitterAuthProvider:R.W,Auth:X,AuthCredential:R.H,Error:oe.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),le.registerVersion("@firebase/auth-compat","0.2.15")}(L.Z)},8306:(rt,De,O)=>{O.d(De,{y:()=>H});var h=O(2961),L=O(727),R=O(8822),oe=O(4671);var de=O(2416),ue=O(576),ye=O(2806);let H=(()=>{class Se{constructor(He){He&&(this._subscribe=He)}lift(He){const ge=new Se;return ge.source=this,ge.operator=He,ge}subscribe(He,ge,Te){const qe=function Ke(Se){return Se&&Se instanceof h.Lv||function ie(Se){return Se&&(0,ue.m)(Se.next)&&(0,ue.m)(Se.error)&&(0,ue.m)(Se.complete)}(Se)&&(0,L.Nn)(Se)}(He)?He:new h.Hp(He,ge,Te);return(0,ye.x)(()=>{const{operator:ze,source:Me}=this;qe.add(ze?ze.call(qe,Me):Me?this._subscribe(qe):this._trySubscribe(qe))}),qe}_trySubscribe(He){try{return this._subscribe(He)}catch(ge){He.error(ge)}}forEach(He,ge){return new(ge=B(ge))((Te,qe)=>{const ze=new h.Hp({next:Me=>{try{He(Me)}catch(xe){qe(xe),ze.unsubscribe()}},error:qe,complete:Te});this.subscribe(ze)})}_subscribe(He){var ge;return null===(ge=this.source)||void 0===ge?void 0:ge.subscribe(He)}[R.L](){return this}pipe(...He){return function me(Se){return 0===Se.length?oe.y:1===Se.length?Se[0]:function(He){return Se.reduce((ge,Te)=>Te(ge),He)}}(He)(this)}toPromise(He){return new(He=B(He))((ge,Te)=>{let qe;this.subscribe(ze=>qe=ze,ze=>Te(ze),()=>ge(qe))})}}return Se.create=Fe=>new Se(Fe),Se})();function B(Se){var Fe;return null!==(Fe=null!=Se?Se:de.v.Promise)&&void 0!==Fe?Fe:Promise}},7579:(rt,De,O)=>{O.d(De,{x:()=>de});var h=O(8306),L=O(727);const oe=(0,O(3888).d)(ye=>function(){ye(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var ae=O(8737),me=O(2806);let de=(()=>{class ye extends h.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(B){const ie=new ue(this,this);return ie.operator=B,ie}_throwIfClosed(){if(this.closed)throw new oe}next(B){(0,me.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const ie of this.currentObservers)ie.next(B)}})}error(B){(0,me.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=B;const{observers:ie}=this;for(;ie.length;)ie.shift().error(B)}})}complete(){(0,me.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:B}=this;for(;B.length;)B.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var B;return(null===(B=this.observers)||void 0===B?void 0:B.length)>0}_trySubscribe(B){return this._throwIfClosed(),super._trySubscribe(B)}_subscribe(B){return this._throwIfClosed(),this._checkFinalizedStatuses(B),this._innerSubscribe(B)}_innerSubscribe(B){const{hasError:ie,isStopped:Ke,observers:Se}=this;return ie||Ke?L.Lc:(this.currentObservers=null,Se.push(B),new L.w0(()=>{this.currentObservers=null,(0,ae.P)(Se,B)}))}_checkFinalizedStatuses(B){const{hasError:ie,thrownError:Ke,isStopped:Se}=this;ie?B.error(Ke):Se&&B.complete()}asObservable(){const B=new h.y;return B.source=this,B}}return ye.create=(H,B)=>new ue(H,B),ye})();class ue extends de{constructor(H,B){super(),this.destination=H,this.source=B}next(H){var B,ie;null===(ie=null===(B=this.destination)||void 0===B?void 0:B.next)||void 0===ie||ie.call(B,H)}error(H){var B,ie;null===(ie=null===(B=this.destination)||void 0===B?void 0:B.error)||void 0===ie||ie.call(B,H)}complete(){var H,B;null===(B=null===(H=this.destination)||void 0===H?void 0:H.complete)||void 0===B||B.call(H)}_subscribe(H){var B,ie;return null!==(ie=null===(B=this.source)||void 0===B?void 0:B.subscribe(H))&&void 0!==ie?ie:L.Lc}}},2961:(rt,De,O)=>{O.d(De,{Hp:()=>He,Lv:()=>ie});var h=O(576),L=O(727),R=O(2416),oe=O(7849);function ae(){}const me=ye("C",void 0,void 0);function ye(Me,xe,be){return{kind:Me,value:xe,error:be}}var H=O(3410),B=O(2806);class ie extends L.w0{constructor(xe){super(),this.isStopped=!1,xe?(this.destination=xe,(0,L.Nn)(xe)&&xe.add(this)):this.destination=ze}static create(xe,be,Ze){return new He(xe,be,Ze)}next(xe){this.isStopped?qe(function ue(Me){return ye("N",Me,void 0)}(xe),this):this._next(xe)}error(xe){this.isStopped?qe(function de(Me){return ye("E",void 0,Me)}(xe),this):(this.isStopped=!0,this._error(xe))}complete(){this.isStopped?qe(me,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(xe){this.destination.next(xe)}_error(xe){try{this.destination.error(xe)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Ke=Function.prototype.bind;function Se(Me,xe){return Ke.call(Me,xe)}class Fe{constructor(xe){this.partialObserver=xe}next(xe){const{partialObserver:be}=this;if(be.next)try{be.next(xe)}catch(Ze){ge(Ze)}}error(xe){const{partialObserver:be}=this;if(be.error)try{be.error(xe)}catch(Ze){ge(Ze)}else ge(xe)}complete(){const{partialObserver:xe}=this;if(xe.complete)try{xe.complete()}catch(be){ge(be)}}}class He extends ie{constructor(xe,be,Ze){let ne;if(super(),(0,h.m)(xe)||!xe)ne={next:null!=xe?xe:void 0,error:null!=be?be:void 0,complete:null!=Ze?Ze:void 0};else{let he;this&&R.v.useDeprecatedNextContext?(he=Object.create(xe),he.unsubscribe=()=>this.unsubscribe(),ne={next:xe.next&&Se(xe.next,he),error:xe.error&&Se(xe.error,he),complete:xe.complete&&Se(xe.complete,he)}):ne=xe}this.destination=new Fe(ne)}}function ge(Me){R.v.useDeprecatedSynchronousErrorHandling?(0,B.O)(Me):(0,oe.h)(Me)}function qe(Me,xe){const{onStoppedNotification:be}=R.v;be&&H.z.setTimeout(()=>be(Me,xe))}const ze={closed:!0,next:ae,error:function Te(Me){throw Me},complete:ae}},727:(rt,De,O)=>{O.d(De,{Lc:()=>me,w0:()=>ae,Nn:()=>de});var h=O(576);const R=(0,O(3888).d)(ye=>function(B){ye(this),this.message=B?`${B.length} errors occurred during unsubscription:\n${B.map((ie,Ke)=>`${Ke+1}) ${ie.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=B});var oe=O(8737);class ae{constructor(H){this.initialTeardown=H,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let H;if(!this.closed){this.closed=!0;const{_parentage:B}=this;if(B)if(this._parentage=null,Array.isArray(B))for(const Se of B)Se.remove(this);else B.remove(this);const{initialTeardown:ie}=this;if((0,h.m)(ie))try{ie()}catch(Se){H=Se instanceof R?Se.errors:[Se]}const{_finalizers:Ke}=this;if(Ke){this._finalizers=null;for(const Se of Ke)try{ue(Se)}catch(Fe){H=null!=H?H:[],Fe instanceof R?H=[...H,...Fe.errors]:H.push(Fe)}}if(H)throw new R(H)}}add(H){var B;if(H&&H!==this)if(this.closed)ue(H);else{if(H instanceof ae){if(H.closed||H._hasParent(this))return;H._addParent(this)}(this._finalizers=null!==(B=this._finalizers)&&void 0!==B?B:[]).push(H)}}_hasParent(H){const{_parentage:B}=this;return B===H||Array.isArray(B)&&B.includes(H)}_addParent(H){const{_parentage:B}=this;this._parentage=Array.isArray(B)?(B.push(H),B):B?[B,H]:H}_removeParent(H){const{_parentage:B}=this;B===H?this._parentage=null:Array.isArray(B)&&(0,oe.P)(B,H)}remove(H){const{_finalizers:B}=this;B&&(0,oe.P)(B,H),H instanceof ae&&H._removeParent(this)}}ae.EMPTY=(()=>{const ye=new ae;return ye.closed=!0,ye})();const me=ae.EMPTY;function de(ye){return ye instanceof ae||ye&&"closed"in ye&&(0,h.m)(ye.remove)&&(0,h.m)(ye.add)&&(0,h.m)(ye.unsubscribe)}function ue(ye){(0,h.m)(ye)?ye():ye.unsubscribe()}},2416:(rt,De,O)=>{O.d(De,{v:()=>h});const h={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(rt,De,O)=>{O.d(De,{E:()=>L});const L=new(O(8306).y)(ae=>ae.complete())},8996:(rt,De,O)=>{O.d(De,{D:()=>xe});var h=O(8421),L=O(5363),R=O(9468),me=O(8306),ue=O(2202),ye=O(576),H=O(9672);function ie(be,Ze){if(!be)throw new Error("Iterable cannot be null");return new me.y(ne=>{(0,H.f)(ne,Ze,()=>{const he=be[Symbol.asyncIterator]();(0,H.f)(ne,Ze,()=>{he.next().then(Ie=>{Ie.done?ne.complete():ne.next(Ie.value)})},0,!0)})})}var Ke=O(3670),Se=O(8239),Fe=O(1144),He=O(6495),ge=O(2206),Te=O(4532),qe=O(3260);function xe(be,Ze){return Ze?function Me(be,Ze){if(null!=be){if((0,Ke.c)(be))return function oe(be,Ze){return(0,h.Xf)(be).pipe((0,R.R)(Ze),(0,L.Q)(Ze))}(be,Ze);if((0,Fe.z)(be))return function de(be,Ze){return new me.y(ne=>{let he=0;return Ze.schedule(function(){he===be.length?ne.complete():(ne.next(be[he++]),ne.closed||this.schedule())})})}(be,Ze);if((0,Se.t)(be))return function ae(be,Ze){return(0,h.Xf)(be).pipe((0,R.R)(Ze),(0,L.Q)(Ze))}(be,Ze);if((0,ge.D)(be))return ie(be,Ze);if((0,He.T)(be))return function B(be,Ze){return new me.y(ne=>{let he;return(0,H.f)(ne,Ze,()=>{he=be[ue.h](),(0,H.f)(ne,Ze,()=>{let Ie,Z;try{({value:Ie,done:Z}=he.next())}catch(re){return void ne.error(re)}Z?ne.complete():ne.next(Ie)},0,!0)}),()=>(0,ye.m)(null==he?void 0:he.return)&&he.return()})}(be,Ze);if((0,qe.L)(be))return function ze(be,Ze){return ie((0,qe.Q)(be),Ze)}(be,Ze)}throw(0,Te.z)(be)}(be,Ze):(0,h.Xf)(be)}},8421:(rt,De,O)=>{O.d(De,{Xf:()=>Ke});var h=O(655),L=O(1144),R=O(8239),oe=O(8306),ae=O(3670),me=O(2206),de=O(4532),ue=O(6495),ye=O(3260),H=O(576),B=O(7849),ie=O(8822);function Ke(Me){if(Me instanceof oe.y)return Me;if(null!=Me){if((0,ae.c)(Me))return function Se(Me){return new oe.y(xe=>{const be=Me[ie.L]();if((0,H.m)(be.subscribe))return be.subscribe(xe);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Me);if((0,L.z)(Me))return function Fe(Me){return new oe.y(xe=>{for(let be=0;be<Me.length&&!xe.closed;be++)xe.next(Me[be]);xe.complete()})}(Me);if((0,R.t)(Me))return function He(Me){return new oe.y(xe=>{Me.then(be=>{xe.closed||(xe.next(be),xe.complete())},be=>xe.error(be)).then(null,B.h)})}(Me);if((0,me.D)(Me))return Te(Me);if((0,ue.T)(Me))return function ge(Me){return new oe.y(xe=>{for(const be of Me)if(xe.next(be),xe.closed)return;xe.complete()})}(Me);if((0,ye.L)(Me))return function qe(Me){return Te((0,ye.Q)(Me))}(Me)}throw(0,de.z)(Me)}function Te(Me){return new oe.y(xe=>{(function ze(Me,xe){var be,Ze,ne,he;return(0,h.mG)(this,void 0,void 0,function*(){try{for(be=(0,h.KL)(Me);!(Ze=yield be.next()).done;)if(xe.next(Ze.value),xe.closed)return}catch(Ie){ne={error:Ie}}finally{try{Ze&&!Ze.done&&(he=be.return)&&(yield he.call(be))}finally{if(ne)throw ne.error}}xe.complete()})})(Me,xe).catch(be=>xe.error(be))})}},6451:(rt,De,O)=>{O.d(De,{T:()=>me});var h=O(8189),L=O(8421),R=O(515),oe=O(7669),ae=O(8996);function me(...de){const ue=(0,oe.yG)(de),ye=(0,oe._6)(de,1/0),H=de;return H.length?1===H.length?(0,L.Xf)(H[0]):(0,h.J)(ye)((0,ae.D)(H,ue)):R.E}},5403:(rt,De,O)=>{O.d(De,{x:()=>L});var h=O(2961);function L(oe,ae,me,de,ue){return new R(oe,ae,me,de,ue)}class R extends h.Lv{constructor(ae,me,de,ue,ye,H){super(ae),this.onFinalize=ye,this.shouldUnsubscribe=H,this._next=me?function(B){try{me(B)}catch(ie){ae.error(ie)}}:super._next,this._error=ue?function(B){try{ue(B)}catch(ie){ae.error(ie)}finally{this.unsubscribe()}}:super._error,this._complete=de?function(){try{de()}catch(B){ae.error(B)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var ae;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:me}=this;super.unsubscribe(),!me&&(null===(ae=this.onFinalize)||void 0===ae||ae.call(this))}}}},4004:(rt,De,O)=>{O.d(De,{U:()=>R});var h=O(4482),L=O(5403);function R(oe,ae){return(0,h.e)((me,de)=>{let ue=0;me.subscribe((0,L.x)(de,ye=>{de.next(oe.call(ae,ye,ue++))}))})}},8189:(rt,De,O)=>{O.d(De,{J:()=>R});var h=O(5577),L=O(4671);function R(oe=1/0){return(0,h.z)(L.y,oe)}},5577:(rt,De,O)=>{O.d(De,{z:()=>ue});var h=O(4004),L=O(8421),R=O(4482),oe=O(9672),ae=O(5403),de=O(576);function ue(ye,H,B=1/0){return(0,de.m)(H)?ue((ie,Ke)=>(0,h.U)((Se,Fe)=>H(ie,Se,Ke,Fe))((0,L.Xf)(ye(ie,Ke))),B):("number"==typeof H&&(B=H),(0,R.e)((ie,Ke)=>function me(ye,H,B,ie,Ke,Se,Fe,He){const ge=[];let Te=0,qe=0,ze=!1;const Me=()=>{ze&&!ge.length&&!Te&&H.complete()},xe=Ze=>Te<ie?be(Ze):ge.push(Ze),be=Ze=>{Se&&H.next(Ze),Te++;let ne=!1;(0,L.Xf)(B(Ze,qe++)).subscribe((0,ae.x)(H,he=>{null==Ke||Ke(he),Se?xe(he):H.next(he)},()=>{ne=!0},void 0,()=>{if(ne)try{for(Te--;ge.length&&Te<ie;){const he=ge.shift();Fe?(0,oe.f)(H,Fe,()=>be(he)):be(he)}Me()}catch(he){H.error(he)}}))};return ye.subscribe((0,ae.x)(H,xe,()=>{ze=!0,Me()})),()=>{null==He||He()}}(ie,Ke,ye,B)))}},5363:(rt,De,O)=>{O.d(De,{Q:()=>oe});var h=O(9672),L=O(4482),R=O(5403);function oe(ae,me=0){return(0,L.e)((de,ue)=>{de.subscribe((0,R.x)(ue,ye=>(0,h.f)(ue,ae,()=>ue.next(ye),me),()=>(0,h.f)(ue,ae,()=>ue.complete(),me),ye=>(0,h.f)(ue,ae,()=>ue.error(ye),me)))})}},3099:(rt,De,O)=>{O.d(De,{B:()=>me});var h=O(8996),L=O(5698),R=O(7579),oe=O(2961),ae=O(4482);function me(ue={}){const{connector:ye=(()=>new R.x),resetOnError:H=!0,resetOnComplete:B=!0,resetOnRefCountZero:ie=!0}=ue;return Ke=>{let Se=null,Fe=null,He=null,ge=0,Te=!1,qe=!1;const ze=()=>{null==Fe||Fe.unsubscribe(),Fe=null},Me=()=>{ze(),Se=He=null,Te=qe=!1},xe=()=>{const be=Se;Me(),null==be||be.unsubscribe()};return(0,ae.e)((be,Ze)=>{ge++,!qe&&!Te&&ze();const ne=He=null!=He?He:ye();Ze.add(()=>{ge--,0===ge&&!qe&&!Te&&(Fe=de(xe,ie))}),ne.subscribe(Ze),Se||(Se=new oe.Hp({next:he=>ne.next(he),error:he=>{qe=!0,ze(),Fe=de(Me,H,he),ne.error(he)},complete:()=>{Te=!0,ze(),Fe=de(Me,B),ne.complete()}}),(0,h.D)(be).subscribe(Se))})(Ke)}}function de(ue,ye,...H){return!0===ye?(ue(),null):!1===ye?null:ye(...H).pipe((0,L.q)(1)).subscribe(()=>ue())}},9468:(rt,De,O)=>{O.d(De,{R:()=>L});var h=O(4482);function L(R,oe=0){return(0,h.e)((ae,me)=>{me.add(R.schedule(()=>ae.subscribe(me),oe))})}},5698:(rt,De,O)=>{O.d(De,{q:()=>oe});var h=O(515),L=O(4482),R=O(5403);function oe(ae){return ae<=0?()=>h.E:(0,L.e)((me,de)=>{let ue=0;me.subscribe((0,R.x)(de,ye=>{++ue<=ae&&(de.next(ye),ae<=ue&&de.complete())}))})}},8505:(rt,De,O)=>{O.d(De,{b:()=>ae});var h=O(576),L=O(4482),R=O(5403),oe=O(4671);function ae(me,de,ue){const ye=(0,h.m)(me)||de||ue?{next:me,error:de,complete:ue}:me;return ye?(0,L.e)((H,B)=>{var ie;null===(ie=ye.subscribe)||void 0===ie||ie.call(ye);let Ke=!0;H.subscribe((0,R.x)(B,Se=>{var Fe;null===(Fe=ye.next)||void 0===Fe||Fe.call(ye,Se),B.next(Se)},()=>{var Se;Ke=!1,null===(Se=ye.complete)||void 0===Se||Se.call(ye),B.complete()},Se=>{var Fe;Ke=!1,null===(Fe=ye.error)||void 0===Fe||Fe.call(ye,Se),B.error(Se)},()=>{var Se,Fe;Ke&&(null===(Se=ye.unsubscribe)||void 0===Se||Se.call(ye)),null===(Fe=ye.finalize)||void 0===Fe||Fe.call(ye)}))}):oe.y}},4408:(rt,De,O)=>{O.d(De,{o:()=>ae});var h=O(727);class L extends h.w0{constructor(de,ue){super()}schedule(de,ue=0){return this}}const R={setInterval(me,de,...ue){const{delegate:ye}=R;return(null==ye?void 0:ye.setInterval)?ye.setInterval(me,de,...ue):setInterval(me,de,...ue)},clearInterval(me){const{delegate:de}=R;return((null==de?void 0:de.clearInterval)||clearInterval)(me)},delegate:void 0};var oe=O(8737);class ae extends L{constructor(de,ue){super(de,ue),this.scheduler=de,this.work=ue,this.pending=!1}schedule(de,ue=0){if(this.closed)return this;this.state=de;const ye=this.id,H=this.scheduler;return null!=ye&&(this.id=this.recycleAsyncId(H,ye,ue)),this.pending=!0,this.delay=ue,this.id=this.id||this.requestAsyncId(H,this.id,ue),this}requestAsyncId(de,ue,ye=0){return R.setInterval(de.flush.bind(de,this),ye)}recycleAsyncId(de,ue,ye=0){if(null!=ye&&this.delay===ye&&!1===this.pending)return ue;R.clearInterval(ue)}execute(de,ue){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const ye=this._execute(de,ue);if(ye)return ye;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(de,ue){let H,ye=!1;try{this.work(de)}catch(B){ye=!0,H=B||new Error("Scheduled action threw falsy error")}if(ye)return this.unsubscribe(),H}unsubscribe(){if(!this.closed){const{id:de,scheduler:ue}=this,{actions:ye}=ue;this.work=this.state=this.scheduler=null,this.pending=!1,(0,oe.P)(ye,this),null!=de&&(this.id=this.recycleAsyncId(ue,de,null)),this.delay=null,super.unsubscribe()}}}},7565:(rt,De,O)=>{O.d(De,{v:()=>R});var h=O(6063);class L{constructor(ae,me=L.now){this.schedulerActionCtor=ae,this.now=me}schedule(ae,me=0,de){return new this.schedulerActionCtor(this,ae).schedule(de,me)}}L.now=h.l.now;class R extends L{constructor(ae,me=L.now){super(ae,me),this.actions=[],this._active=!1,this._scheduled=void 0}flush(ae){const{actions:me}=this;if(this._active)return void me.push(ae);let de;this._active=!0;do{if(de=ae.execute(ae.state,ae.delay))break}while(ae=me.shift());if(this._active=!1,de){for(;ae=me.shift();)ae.unsubscribe();throw de}}}},4986:(rt,De,O)=>{O.d(De,{z:()=>R});var h=O(4408);const R=new(O(7565).v)(h.o)},6063:(rt,De,O)=>{O.d(De,{l:()=>h});const h={now:()=>(h.delegate||Date).now(),delegate:void 0}},3410:(rt,De,O)=>{O.d(De,{z:()=>h});const h={setTimeout(L,R,...oe){const{delegate:ae}=h;return(null==ae?void 0:ae.setTimeout)?ae.setTimeout(L,R,...oe):setTimeout(L,R,...oe)},clearTimeout(L){const{delegate:R}=h;return((null==R?void 0:R.clearTimeout)||clearTimeout)(L)},delegate:void 0}},2202:(rt,De,O)=>{O.d(De,{h:()=>L});const L=function h(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(rt,De,O)=>{O.d(De,{L:()=>h});const h="function"==typeof Symbol&&Symbol.observable||"@@observable"},7669:(rt,De,O)=>{O.d(De,{_6:()=>me,jO:()=>oe,yG:()=>ae});var h=O(576);function R(de){return de[de.length-1]}function oe(de){return(0,h.m)(R(de))?de.pop():void 0}function ae(de){return function L(de){return de&&(0,h.m)(de.schedule)}(R(de))?de.pop():void 0}function me(de,ue){return"number"==typeof R(de)?de.pop():ue}},8737:(rt,De,O)=>{function h(L,R){if(L){const oe=L.indexOf(R);0<=oe&&L.splice(oe,1)}}O.d(De,{P:()=>h})},3888:(rt,De,O)=>{function h(L){const oe=L(ae=>{Error.call(ae),ae.stack=(new Error).stack});return oe.prototype=Object.create(Error.prototype),oe.prototype.constructor=oe,oe}O.d(De,{d:()=>h})},2806:(rt,De,O)=>{O.d(De,{O:()=>oe,x:()=>R});var h=O(2416);let L=null;function R(ae){if(h.v.useDeprecatedSynchronousErrorHandling){const me=!L;if(me&&(L={errorThrown:!1,error:null}),ae(),me){const{errorThrown:de,error:ue}=L;if(L=null,de)throw ue}}else ae()}function oe(ae){h.v.useDeprecatedSynchronousErrorHandling&&L&&(L.errorThrown=!0,L.error=ae)}},9672:(rt,De,O)=>{function h(L,R,oe,ae=0,me=!1){const de=R.schedule(function(){oe(),me?L.add(this.schedule(null,ae)):this.unsubscribe()},ae);if(L.add(de),!me)return de}O.d(De,{f:()=>h})},4671:(rt,De,O)=>{function h(L){return L}O.d(De,{y:()=>h})},1144:(rt,De,O)=>{O.d(De,{z:()=>h});const h=L=>L&&"number"==typeof L.length&&"function"!=typeof L},2206:(rt,De,O)=>{O.d(De,{D:()=>L});var h=O(576);function L(R){return Symbol.asyncIterator&&(0,h.m)(null==R?void 0:R[Symbol.asyncIterator])}},576:(rt,De,O)=>{function h(L){return"function"==typeof L}O.d(De,{m:()=>h})},3670:(rt,De,O)=>{O.d(De,{c:()=>R});var h=O(8822),L=O(576);function R(oe){return(0,L.m)(oe[h.L])}},6495:(rt,De,O)=>{O.d(De,{T:()=>R});var h=O(2202),L=O(576);function R(oe){return(0,L.m)(null==oe?void 0:oe[h.h])}},8239:(rt,De,O)=>{O.d(De,{t:()=>L});var h=O(576);function L(R){return(0,h.m)(null==R?void 0:R.then)}},3260:(rt,De,O)=>{O.d(De,{L:()=>oe,Q:()=>R});var h=O(655),L=O(576);function R(ae){return(0,h.FC)(this,arguments,function*(){const de=ae.getReader();try{for(;;){const{value:ue,done:ye}=yield(0,h.qq)(de.read());if(ye)return yield(0,h.qq)(void 0);yield yield(0,h.qq)(ue)}}finally{de.releaseLock()}})}function oe(ae){return(0,L.m)(null==ae?void 0:ae.getReader)}},4482:(rt,De,O)=>{O.d(De,{A:()=>L,e:()=>R});var h=O(576);function L(oe){return(0,h.m)(null==oe?void 0:oe.lift)}function R(oe){return ae=>{if(L(ae))return ae.lift(function(me){try{return oe(me,this)}catch(de){this.error(de)}});throw new TypeError("Unable to lift unknown Observable type")}}},7849:(rt,De,O)=>{O.d(De,{h:()=>R});var h=O(2416),L=O(3410);function R(oe){L.z.setTimeout(()=>{const{onUnhandledError:ae}=h.v;if(!ae)throw oe;ae(oe)})}},4532:(rt,De,O)=>{function h(L){return new TypeError(`You provided ${null!==L&&"object"==typeof L?"an invalid object":`'${L}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}O.d(De,{z:()=>h})},655:(rt,De,O)=>{function oe(Z,re){var se={};for(var _e in Z)Object.prototype.hasOwnProperty.call(Z,_e)&&re.indexOf(_e)<0&&(se[_e]=Z[_e]);if(null!=Z&&"function"==typeof Object.getOwnPropertySymbols){var ce=0;for(_e=Object.getOwnPropertySymbols(Z);ce<_e.length;ce++)re.indexOf(_e[ce])<0&&Object.prototype.propertyIsEnumerable.call(Z,_e[ce])&&(se[_e[ce]]=Z[_e[ce]])}return se}function ue(Z,re,se,_e){return new(se||(se=Promise))(function(Ve,dt){function Xt(ln){try{Ye(_e.next(ln))}catch(Rn){dt(Rn)}}function zt(ln){try{Ye(_e.throw(ln))}catch(Rn){dt(Rn)}}function Ye(ln){ln.done?Ve(ln.value):function ce(Ve){return Ve instanceof se?Ve:new se(function(dt){dt(Ve)})}(ln.value).then(Xt,zt)}Ye((_e=_e.apply(Z,re||[])).next())})}function ge(Z){return this instanceof ge?(this.v=Z,this):new ge(Z)}function Te(Z,re,se){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ce,_e=se.apply(Z,re||[]),Ve=[];return ce={},dt("next"),dt("throw"),dt("return"),ce[Symbol.asyncIterator]=function(){return this},ce;function dt(fn){_e[fn]&&(ce[fn]=function(nn){return new Promise(function(jt,en){Ve.push([fn,nn,jt,en])>1||Xt(fn,nn)})})}function Xt(fn,nn){try{!function zt(fn){fn.value instanceof ge?Promise.resolve(fn.value.v).then(Ye,ln):Rn(Ve[0][2],fn)}(_e[fn](nn))}catch(jt){Rn(Ve[0][3],jt)}}function Ye(fn){Xt("next",fn)}function ln(fn){Xt("throw",fn)}function Rn(fn,nn){fn(nn),Ve.shift(),Ve.length&&Xt(Ve[0][0],Ve[0][1])}}function ze(Z){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var se,re=Z[Symbol.asyncIterator];return re?re.call(Z):(Z=function ie(Z){var re="function"==typeof Symbol&&Symbol.iterator,se=re&&Z[re],_e=0;if(se)return se.call(Z);if(Z&&"number"==typeof Z.length)return{next:function(){return Z&&_e>=Z.length&&(Z=void 0),{value:Z&&Z[_e++],done:!Z}}};throw new TypeError(re?"Object is not iterable.":"Symbol.iterator is not defined.")}(Z),se={},_e("next"),_e("throw"),_e("return"),se[Symbol.asyncIterator]=function(){return this},se);function _e(Ve){se[Ve]=Z[Ve]&&function(dt){return new Promise(function(Xt,zt){!function ce(Ve,dt,Xt,zt){Promise.resolve(zt).then(function(Ye){Ve({value:Ye,done:Xt})},dt)}(Xt,zt,(dt=Z[Ve](dt)).done,dt.value)})}}}O.d(De,{FC:()=>Te,KL:()=>ze,_T:()=>oe,mG:()=>ue,qq:()=>ge})},5e3:(rt,De,O)=>{O.d(De,{$8M:()=>co,$Z:()=>Ir,AFp:()=>ym,ALo:()=>W_,AaK:()=>ue,BQk:()=>ju,CHM:()=>Ea,CRH:()=>ib,CZH:()=>mm,CqO:()=>pf,EJc:()=>tC,EiD:()=>Bp,EpF:()=>o_,F4k:()=>Ga,FYo:()=>L_,FiY:()=>zr,G48:()=>cC,GfV:()=>U_,Gpc:()=>B,JOm:()=>Xo,JVY:()=>Mh,L6k:()=>Fp,LAX:()=>Nh,LFG:()=>We,LSH:()=>od,Lbi:()=>gv,NdJ:()=>za,OlP:()=>Fn,Oqu:()=>Ef,PXZ:()=>Tv,Q6J:()=>s_,QGY:()=>Je,Qsj:()=>V_,R0b:()=>Do,RDi:()=>rl,Rgc:()=>sc,SBq:()=>Hd,Sil:()=>nC,Suo:()=>rb,TTD:()=>ga,TgZ:()=>ra,Tol:()=>g_,Udp:()=>p_,VKq:()=>Hw,VLi:()=>sC,X6Q:()=>xv,XFs:()=>pt,Xpm:()=>ht,Y36:()=>ff,YKP:()=>Bf,YNc:()=>R0,Yjl:()=>Qe,Yz7:()=>nn,ZZ4:()=>Om,_Bn:()=>Vw,_UZ:()=>Fg,_Vd:()=>Ff,_c5:()=>vC,_uU:()=>Hg,aQg:()=>np,c2e:()=>wb,cJS:()=>en,cg1:()=>Df,d8E:()=>zl,dDg:()=>Em,deG:()=>wh,dqk:()=>Wt,eBb:()=>xh,eFA:()=>bm,ekj:()=>jl,g9A:()=>Qa,h0i:()=>Za,hGG:()=>Hb,hij:()=>Pd,iGM:()=>nb,ifc:()=>Zt,ip1:()=>gm,kL8:()=>yr,lG2:()=>Ae,lcZ:()=>zd,mCW:()=>m,n5z:()=>wr,oAB:()=>le,oJD:()=>Qm,oxw:()=>Vg,pB0:()=>Lp,q3G:()=>er,q4F:()=>Bw,qLn:()=>zp,qOj:()=>Mg,qZA:()=>Ad,qzn:()=>qi,sBO:()=>Nv,sIi:()=>bd,s_b:()=>Wd,soG:()=>mv,tBr:()=>$s,tb:()=>uc,tp0:()=>ri,uIk:()=>Rg,vHH:()=>Fe,vpe:()=>_s,wAp:()=>bt,xp6:()=>Wr,yhl:()=>id,ynx:()=>Ks,z2F:()=>Jf,z3N:()=>Wi,zSh:()=>_o,zs3:()=>vo});var h=O(7579),L=O(727),R=O(8306),oe=O(6451),ae=O(3099);function me(i){for(let o in i)if(i[o]===me)return o;throw Error("Could not find renamed property on target object.")}function de(i,o){for(const a in o)o.hasOwnProperty(a)&&!i.hasOwnProperty(a)&&(i[a]=o[a])}function ue(i){if("string"==typeof i)return i;if(Array.isArray(i))return"["+i.map(ue).join(", ")+"]";if(null==i)return""+i;if(i.overriddenName)return`${i.overriddenName}`;if(i.name)return`${i.name}`;const o=i.toString();if(null==o)return""+o;const a=o.indexOf("\n");return-1===a?o:o.substring(0,a)}function ye(i,o){return null==i||""===i?null===o?"":o:null==o||""===o?i:i+" "+o}const H=me({__forward_ref__:me});function B(i){return i.__forward_ref__=B,i.toString=function(){return ue(this())},i}function ie(i){return Ke(i)?i():i}function Ke(i){return"function"==typeof i&&i.hasOwnProperty(H)&&i.__forward_ref__===B}class Fe extends Error{constructor(o,a){super(function He(i,o){return`NG0${Math.abs(i)}${o?": "+o:""}`}(o,a)),this.code=o}}function ge(i){return"string"==typeof i?i:null==i?"":String(i)}function Te(i){return"function"==typeof i?i.name||i.toString():"object"==typeof i&&null!=i&&"function"==typeof i.type?i.type.name||i.type.toString():ge(i)}function xe(i,o){const a=o?` in ${o}`:"";throw new Fe(-201,`No provider for ${Te(i)} found${a}`)}function zt(i,o){null==i&&function Ye(i,o,a,l){throw new Error(`ASSERTION ERROR: ${i}`+(null==l?"":` [Expected=> ${a} ${l} ${o} <=Actual]`))}(o,i,null,"!=")}function nn(i){return{token:i.token,providedIn:i.providedIn||null,factory:i.factory,value:void 0}}function en(i){return{providers:i.providers||[],imports:i.imports||[]}}function In(i){return Ri(i,ui)||Ri(i,jn)}function Ri(i,o){return i.hasOwnProperty(o)?i[o]:null}function Oi(i){return i&&(i.hasOwnProperty(wi)||i.hasOwnProperty(Pi))?i[wi]:null}const ui=me({\u0275prov:me}),wi=me({\u0275inj:me}),jn=me({ngInjectableDef:me}),Pi=me({ngInjectorDef:me});var pt=(()=>((pt=pt||{})[pt.Default=0]="Default",pt[pt.Host=1]="Host",pt[pt.Self=2]="Self",pt[pt.SkipSelf=4]="SkipSelf",pt[pt.Optional=8]="Optional",pt))();let Lr;function tn(i){const o=Lr;return Lr=i,o}function Cr(i,o,a){const l=In(i);return l&&"root"==l.providedIn?void 0===l.value?l.value=l.factory():l.value:a&pt.Optional?null:void 0!==o?o:void xe(ue(i),"Injector")}function Vr(i){return{toString:i}.toString()}var Dn=(()=>((Dn=Dn||{})[Dn.OnPush=0]="OnPush",Dn[Dn.Default=1]="Default",Dn))(),Zt=(()=>{return(i=Zt||(Zt={}))[i.Emulated=0]="Emulated",i[i.None=2]="None",i[i.ShadowDom=3]="ShadowDom",Zt;var i})();const lt="undefined"!=typeof globalThis&&globalThis,it="undefined"!=typeof window&&window,li="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,Wt=lt||"undefined"!=typeof global&&global||it||li,cn={},U=[],G=me({\u0275cmp:me}),W=me({\u0275dir:me}),Ee=me({\u0275pipe:me}),j=me({\u0275mod:me}),X=me({\u0275fac:me}),Pe=me({__NG_ELEMENT_ID__:me});let tt=0;function ht(i){return Vr(()=>{const a={},l={type:i.type,providersResolver:null,decls:i.decls,vars:i.vars,factory:null,template:i.template||null,consts:i.consts||null,ngContentSelectors:i.ngContentSelectors,hostBindings:i.hostBindings||null,hostVars:i.hostVars||0,hostAttrs:i.hostAttrs||null,contentQueries:i.contentQueries||null,declaredInputs:a,inputs:null,outputs:null,exportAs:i.exportAs||null,onPush:i.changeDetection===Dn.OnPush,directiveDefs:null,pipeDefs:null,selectors:i.selectors||U,viewQuery:i.viewQuery||null,features:i.features||null,data:i.data||{},encapsulation:i.encapsulation||Zt.Emulated,id:"c",styles:i.styles||U,_:null,setInput:null,schemas:i.schemas||null,tView:null},d=i.directives,f=i.features,y=i.pipes;return l.id+=tt++,l.inputs=z(i.inputs,a),l.outputs=z(i.outputs),f&&f.forEach(E=>E(l)),l.directiveDefs=d?()=>("function"==typeof d?d():d).map(on):null,l.pipeDefs=y?()=>("function"==typeof y?y():y).map(It):null,l})}function on(i){return at(i)||function Rt(i){return i[W]||null}(i)}function It(i){return function Yt(i){return i[Ee]||null}(i)}const Gn={};function le(i){return Vr(()=>{const o={type:i.type,bootstrap:i.bootstrap||U,declarations:i.declarations||U,imports:i.imports||U,exports:i.exports||U,transitiveCompileScopes:null,schemas:i.schemas||null,id:i.id||null};return null!=i.id&&(Gn[i.id]=i.type),o})}function z(i,o){if(null==i)return cn;const a={};for(const l in i)if(i.hasOwnProperty(l)){let d=i[l],f=d;Array.isArray(d)&&(f=d[1],d=d[0]),a[d]=l,o&&(o[d]=f)}return a}const Ae=ht;function Qe(i){return{type:i.type,name:i.name,factory:null,pure:!1!==i.pure,onDestroy:i.type.prototype.ngOnDestroy||null}}function at(i){return i[G]||null}function $t(i,o){const a=i[j]||null;if(!a&&!0===o)throw new Error(`Type ${ue(i)} does not have '\u0275mod' property.`);return a}function bi(i){return Array.isArray(i)&&"object"==typeof i[1]}function di(i){return Array.isArray(i)&&!0===i[1]}function _c(i){return 0!=(8&i.flags)}function tu(i){return 2==(2&i.flags)}function Ss(i){return 1==(1&i.flags)}function hi(i){return null!==i.template}function dh(i){return 0!=(512&i[2])}function fi(i,o){return i.hasOwnProperty(X)?i[X]:null}class no{constructor(o,a,l){this.previousValue=o,this.currentValue=a,this.firstChange=l}isFirstChange(){return this.firstChange}}function ga(){return ma}function ma(i){return i.type.prototype.ngOnChanges&&(i.setInput=Ap),fh}function fh(){const i=Dc(this),o=null==i?void 0:i.current;if(o){const a=i.previous;if(a===cn)i.previous=o;else for(let l in o)a[l]=o[l];i.current=null,this.ngOnChanges(o)}}function Ap(i,o,a,l){const d=Dc(i)||function is(i,o){return i[xs]=o}(i,{previous:cn,current:null}),f=d.current||(d.current={}),y=d.previous,E=this.declaredInputs[a],I=y[E];f[E]=new no(I&&I.currentValue,o,y===cn),i[l]=o}ga.ngInherit=!0;const xs="__ngSimpleChanges__";function Dc(i){return i[xs]||null}let su;function rl(i){su=i}function ss(){return void 0!==su?su:"undefined"!=typeof document?document:void 0}function yn(i){return!!i.listen}const ya={createRenderer:(i,o)=>ss()};function hn(i){for(;Array.isArray(i);)i=i[0];return i}function ro(i,o){return hn(o[i])}function cr(i,o){return hn(o[i.index])}function kn(i,o){return i.data[o]}function dr(i,o){const a=o[i];return bi(a)?a:a[0]}function Po(i){return 4==(4&i[2])}function Li(i){return 128==(128&i[2])}function Xr(i,o){return null==o?null:i[o]}function Rs(i){i[18]=0}function Os(i,o){i[5]+=o;let a=i,l=i[3];for(;null!==l&&(1===o&&1===a[5]||-1===o&&0===a[5]);)l[5]+=o,a=l,l=l[3]}const vt={lFrame:Fc(null),bindingsEnabled:!0};function ko(){return vt.bindingsEnabled}function Re(){return vt.lFrame.lView}function qt(){return vt.lFrame.tView}function Ea(i){return vt.lFrame.contextLView=i,i[8]}function wn(){let i=xc();for(;null!==i&&64===i.type;)i=i.parent;return i}function xc(){return vt.lFrame.currentTNode}function Vi(i,o){const a=vt.lFrame;a.currentTNode=i,a.isParent=o}function ol(){return vt.lFrame.isParent}function wa(){vt.lFrame.isParent=!1}function hr(){const i=vt.lFrame;let o=i.bindingRootIndex;return-1===o&&(o=i.bindingRootIndex=i.tView.bindingStartIndex),o}function Lo(){return vt.lFrame.bindingIndex++}function ei(i){const o=vt.lFrame,a=o.bindingIndex;return o.bindingIndex=o.bindingIndex+i,a}function Oc(i,o){const a=vt.lFrame;a.bindingIndex=a.bindingRootIndex=i,lu(o)}function lu(i){vt.lFrame.currentDirectiveIndex=i}function Uo(i){const o=vt.lFrame.currentDirectiveIndex;return-1===o?null:i[o]}function Pc(){return vt.lFrame.currentQueryIndex}function kc(i){vt.lFrame.currentQueryIndex=i}function al(i){const o=i[1];return 2===o.type?o.declTNode:1===o.type?i[6]:null}function Ia(i,o,a){if(a&pt.SkipSelf){let d=o,f=i;for(;!(d=d.parent,null!==d||a&pt.Host||(d=al(f),null===d||(f=f[15],10&d.type))););if(null===d)return!1;o=d,i=f}const l=vt.lFrame=oo();return l.currentTNode=o,l.lView=i,!0}function Da(i){const o=oo(),a=i[1];vt.lFrame=o,o.currentTNode=a.firstChild,o.lView=i,o.tView=a,o.contextLView=i,o.bindingIndex=a.bindingStartIndex,o.inI18n=!1}function oo(){const i=vt.lFrame,o=null===i?null:i.child;return null===o?Fc(i):o}function Fc(i){const o={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:i,child:null,inI18n:!1};return null!==i&&(i.child=o),o}function yh(){const i=vt.lFrame;return vt.lFrame=i.parent,i.currentTNode=null,i.lView=null,i}const cu=yh;function ti(){const i=yh();i.isParent=!0,i.tView=null,i.selectedIndex=-1,i.contextLView=null,i.elementDepthCount=0,i.currentDirectiveIndex=-1,i.currentNamespace=null,i.bindingRootIndex=-1,i.bindingIndex=-1,i.currentQueryIndex=0}function vr(){return vt.lFrame.selectedIndex}function ao(i){vt.lFrame.selectedIndex=i}function qn(){const i=vt.lFrame;return kn(i.tView,i.selectedIndex)}function us(i,o){for(let a=o.directiveStart,l=o.directiveEnd;a<l;a++){const f=i.data[a].type.prototype,{ngAfterContentInit:y,ngAfterContentChecked:E,ngAfterViewInit:I,ngAfterViewChecked:C,ngOnDestroy:M}=f;y&&(i.contentHooks||(i.contentHooks=[])).push(-a,y),E&&((i.contentHooks||(i.contentHooks=[])).push(a,E),(i.contentCheckHooks||(i.contentCheckHooks=[])).push(a,E)),I&&(i.viewHooks||(i.viewHooks=[])).push(-a,I),C&&((i.viewHooks||(i.viewHooks=[])).push(a,C),(i.viewCheckHooks||(i.viewCheckHooks=[])).push(a,C)),null!=M&&(i.destroyHooks||(i.destroyHooks=[])).push(a,M)}}function Ta(i,o,a){Uc(i,o,3,a)}function Ca(i,o,a,l){(3&i[2])===a&&Uc(i,o,a,l)}function Qn(i,o){let a=i[2];(3&a)===o&&(a&=2047,a+=1,i[2]=a)}function Uc(i,o,a,l){const f=null!=l?l:-1,y=o.length-1;let E=0;for(let I=void 0!==l?65535&i[18]:0;I<y;I++)if("number"==typeof o[I+1]){if(E=o[I],null!=l&&E>=l)break}else o[I]<0&&(i[18]+=65536),(E<f||-1==f)&&(Mp(i,a,o,I),i[18]=(4294901760&i[18])+I+2),I++}function Mp(i,o,a,l){const d=a[l]<0,f=a[l+1],E=i[d?-a[l]:a[l]];if(d){if(i[2]>>11<i[18]>>16&&(3&i[2])===o){i[2]+=2048;try{f.call(E)}finally{}}}else try{f.call(E)}finally{}}class Bo{constructor(o,a,l){this.factory=o,this.resolving=!1,this.canSeeViewProviders=a,this.injectImpl=l}}function fr(i,o,a){const l=yn(i);let d=0;for(;d<a.length;){const f=a[d];if("number"==typeof f){if(0!==f)break;d++;const y=a[d++],E=a[d++],I=a[d++];l?i.setAttribute(o,E,I,y):o.setAttributeNS(y,E,I)}else{const y=f,E=a[++d];Di(y)?l&&i.setProperty(o,y,E):l?i.setAttribute(o,y,E):o.setAttribute(y,E),d++}}return d}function Br(i){return 3===i||4===i||6===i}function Di(i){return 64===i.charCodeAt(0)}function Sa(i,o){if(null!==o&&0!==o.length)if(null===i||0===i.length)i=o.slice();else{let a=-1;for(let l=0;l<o.length;l++){const d=o[l];"number"==typeof d?a=d:0===a||jo(i,a,d,null,-1===a||2===a?o[++l]:null)}}return i}function jo(i,o,a,l,d){let f=0,y=i.length;if(-1===o)y=-1;else for(;f<i.length;){const E=i[f++];if("number"==typeof E){if(E===o){y=-1;break}if(E>o){y=f-1;break}}}for(;f<i.length;){const E=i[f];if("number"==typeof E)break;if(E===a){if(null===l)return void(null!==d&&(i[f+1]=d));if(l===i[f+1])return void(i[f+2]=d)}f++,null!==l&&f++,null!==d&&f++}-1!==y&&(i.splice(y,0,o),f=y+1),i.splice(f++,0,a),null!==l&&i.splice(f++,0,l),null!==d&&i.splice(f++,0,d)}function jc(i){return-1!==i}function _n(i){return 32767&i}function Bi(i,o){let a=function $c(i){return i>>16}(i),l=o;for(;a>0;)l=l[15],a--;return l}let Fs=!0;function St(i){const o=Fs;return Fs=i,o}let Gc=0;function $o(i,o){const a=Ho(i,o);if(-1!==a)return a;const l=o[1];l.firstCreatePass&&(i.injectorIndex=o.length,cs(l.data,i),cs(o,null),cs(l.blueprint,null));const d=ni(i,o),f=i.injectorIndex;if(jc(d)){const y=_n(d),E=Bi(d,o),I=E[1].data;for(let C=0;C<8;C++)o[f+C]=E[y+C]|I[y+C]}return o[f+8]=d,f}function cs(i,o){i.push(0,0,0,0,0,0,0,0,o)}function Ho(i,o){return-1===i.injectorIndex||i.parent&&i.parent.injectorIndex===i.injectorIndex||null===o[i.injectorIndex+8]?-1:i.injectorIndex}function ni(i,o){if(i.parent&&-1!==i.parent.injectorIndex)return i.parent.injectorIndex;let a=0,l=null,d=o;for(;null!==d;){const f=d[1],y=f.type;if(l=2===y?f.declTNode:1===y?d[6]:null,null===l)return-1;if(a++,d=d[15],-1!==l.injectorIndex)return l.injectorIndex|a<<16}return-1}function ds(i,o,a){!function Kn(i,o,a){let l;"string"==typeof a?l=a.charCodeAt(0)||0:a.hasOwnProperty(Pe)&&(l=a[Pe]),null==l&&(l=a[Pe]=Gc++);const d=255&l;o.data[i+(d>>5)]|=1<<d}(i,o,a)}function uo(i,o,a){if(a&pt.Optional)return i;xe(o,"NodeInjector")}function zo(i,o,a,l){if(a&pt.Optional&&void 0===l&&(l=null),0==(a&(pt.Self|pt.Host))){const d=i[9],f=tn(void 0);try{return d?d.get(o,l,a&pt.Optional):Cr(o,l,a&pt.Optional)}finally{tn(f)}}return uo(l,o,a)}function Ls(i,o,a,l=pt.Default,d){if(null!==i){const f=function zc(i){if("string"==typeof i)return i.charCodeAt(0)||0;const o=i.hasOwnProperty(Pe)?i[Pe]:void 0;return"number"==typeof o?o>=0?255&o:Ma:o}(a);if("function"==typeof f){if(!Ia(o,i,l))return l&pt.Host?uo(d,a,l):zo(o,a,l,d);try{const y=f(l);if(null!=y||l&pt.Optional)return y;xe(a)}finally{cu()}}else if("number"==typeof f){let y=null,E=Ho(i,o),I=-1,C=l&pt.Host?o[16][6]:null;for((-1===E||l&pt.SkipSelf)&&(I=-1===E?ni(i,o):o[E+8],-1!==I&&cl(l,!1)?(y=o[1],E=_n(I),o=Bi(I,o)):E=-1);-1!==E;){const M=o[1];if(Er(f,E,M.data)){const k=ll(E,o,a,y,l,C);if(k!==lo)return k}I=o[E+8],-1!==I&&cl(l,o[1].data[E+8]===C)&&Er(f,E,o)?(y=M,E=_n(I),o=Bi(I,o)):E=-1}}}return zo(o,a,l,d)}const lo={};function Ma(){return new ji(wn(),Re())}function ll(i,o,a,l,d,f){const y=o[1],E=y.data[i+8],M=pu(E,y,a,null==l?tu(E)&&Fs:l!=y&&0!=(3&E.type),d&pt.Host&&f===E);return null!==M?Ti(o,y,M,E):lo}function pu(i,o,a,l,d){const f=i.providerIndexes,y=o.data,E=1048575&f,I=i.directiveStart,M=f>>20,$=d?E+M:i.directiveEnd;for(let ee=l?E:E+M;ee<$;ee++){const we=y[ee];if(ee<I&&a===we||ee>=I&&we.type===a)return ee}if(d){const ee=y[I];if(ee&&hi(ee)&&ee.type===a)return I}return null}function Ti(i,o,a,l){let d=i[a];const f=o.data;if(function Bc(i){return i instanceof Bo}(d)){const y=d;y.resolving&&function qe(i,o){const a=o?`. Dependency path: ${o.join(" > ")} > ${i}`:"";throw new Fe(-200,`Circular dependency in DI detected for ${i}${a}`)}(Te(f[a]));const E=St(y.canSeeViewProviders);y.resolving=!0;const I=y.injectImpl?tn(y.injectImpl):null;Ia(i,l,pt.Default);try{d=i[a]=y.factory(void 0,f,i,l),o.firstCreatePass&&a>=l.directiveStart&&function Vc(i,o,a){const{ngOnChanges:l,ngOnInit:d,ngDoCheck:f}=o.type.prototype;if(l){const y=ma(o);(a.preOrderHooks||(a.preOrderHooks=[])).push(i,y),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(i,y)}d&&(a.preOrderHooks||(a.preOrderHooks=[])).push(0-i,d),f&&((a.preOrderHooks||(a.preOrderHooks=[])).push(i,f),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(i,f))}(a,f[a],o)}finally{null!==I&&tn(I),St(E),y.resolving=!1,cu()}}return d}function Er(i,o,a){return!!(a[o+(i>>5)]&1<<i)}function cl(i,o){return!(i&pt.Self||i&pt.Host&&o)}class ji{constructor(o,a){this._tNode=o,this._lView=a}get(o,a,l){return Ls(this._tNode,this._lView,o,l,a)}}function wr(i){return Vr(()=>{const o=i.prototype.constructor,a=o[X]||Vs(o),l=Object.prototype;let d=Object.getPrototypeOf(i.prototype).constructor;for(;d&&d!==l;){const f=d[X]||Vs(d);if(f&&f!==a)return f;d=Object.getPrototypeOf(d)}return f=>new f})}function Vs(i){return Ke(i)?()=>{const o=Vs(ie(i));return o&&o()}:fi(i)}function co(i){return function Go(i,o){if("class"===o)return i.classes;if("style"===o)return i.styles;const a=i.attrs;if(a){const l=a.length;let d=0;for(;d<l;){const f=a[d];if(Br(f))break;if(0===f)d+=2;else if("number"==typeof f)for(d++;d<l&&"string"==typeof a[d];)d++;else{if(f===o)return a[d+1];d+=2}}}return null}(wn(),i)}const $i="__parameters__";function Hi(i,o,a){return Vr(()=>{const l=function Jn(i){return function(...a){if(i){const l=i(...a);for(const d in l)this[d]=l[d]}}}(o);function d(...f){if(this instanceof d)return l.apply(this,f),this;const y=new d(...f);return E.annotation=y,E;function E(I,C,M){const k=I.hasOwnProperty($i)?I[$i]:Object.defineProperty(I,$i,{value:[]})[$i];for(;k.length<=M;)k.push(null);return(k[M]=k[M]||[]).push(y),I}}return a&&(d.prototype=Object.create(a.prototype)),d.prototype.ngMetadataName=i,d.annotationCls=d,d})}class Fn{constructor(o,a){this._desc=o,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof a?this.__NG_ELEMENT_ID__=a:void 0!==a&&(this.\u0275prov=nn({token:this,providedIn:a.providedIn||"root",factory:a.factory}))}toString(){return`InjectionToken ${this._desc}`}}const wh=new Fn("AnalyzeForEntryComponents");function xr(i,o){void 0===o&&(o=i);for(let a=0;a<i.length;a++){let l=i[a];Array.isArray(l)?(o===i&&(o=i.slice(0,a)),xr(l,o)):o!==i&&o.push(l)}return o}function $r(i,o){i.forEach(a=>Array.isArray(a)?$r(a,o):o(a))}function mu(i,o,a){o>=i.length?i.push(a):i.splice(o,0,a)}function Zo(i,o){return o>=i.length-1?i.pop():i.splice(o,1)[0]}function Hr(i,o,a){let l=Na(i,o);return l>=0?i[1|l]=a:(l=~l,function yu(i,o,a,l){let d=i.length;if(d==o)i.push(a,l);else if(1===d)i.push(l,i[0]),i[0]=a;else{for(d--,i.push(i[d-1],i[d]);d>o;)i[d]=i[d-2],d--;i[o]=a,i[o+1]=l}}(i,l,o,a)),l}function _u(i,o){const a=Na(i,o);if(a>=0)return i[1|a]}function Na(i,o){return function Zc(i,o,a){let l=0,d=i.length>>a;for(;d!==l;){const f=l+(d-l>>1),y=i[f<<a];if(o===y)return f<<a;y>o?d=f:l=f+1}return~(d<<a)}(i,o,1)}const hs={},Qo="__NG_DI_FLAG__",wu="ngTempTokenPath",D=/\n/gm,N="__source",F=me({provide:String,useValue:me});let Q;function J(i){const o=Q;return Q=i,o}function Le(i,o=pt.Default){if(void 0===Q)throw new Fe(203,"");return null===Q?Cr(i,void 0,o):Q.get(i,o&pt.Optional?null:void 0,o)}function We(i,o=pt.Default){return(function En(){return Lr}()||Le)(ie(i),o)}const Mt=We;function Kt(i){const o=[];for(let a=0;a<i.length;a++){const l=ie(i[a]);if(Array.isArray(l)){if(0===l.length)throw new Fe(900,"");let d,f=pt.Default;for(let y=0;y<l.length;y++){const E=l[y],I=Gr(E);"number"==typeof I?-1===I?d=E.token:f|=I:d=E}o.push(We(d,f))}else o.push(We(l))}return o}function Dt(i,o){return i[Qo]=o,i.prototype[Qo]=o,i}function Gr(i){return i[Qo]}const $s=Dt(Hi("Inject",i=>({token:i})),-1),zr=Dt(Hi("Optional"),8),ri=Dt(Hi("SkipSelf"),4);let yl,Pa;function Du(i){var o;return(null===(o=function ed(){if(void 0===yl&&(yl=null,Wt.trustedTypes))try{yl=Wt.trustedTypes.createPolicy("angular",{createHTML:i=>i,createScript:i=>i,createScriptURL:i=>i})}catch(i){}return yl}())||void 0===o?void 0:o.createHTML(i))||i}function nd(i){var o;return(null===(o=function td(){if(void 0===Pa&&(Pa=null,Wt.trustedTypes))try{Pa=Wt.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:i=>i,createScript:i=>i,createScriptURL:i=>i})}catch(i){}return Pa}())||void 0===o?void 0:o.createHTML(i))||i}class Gs{constructor(o){this.changingThisBreaksApplicationSecurity=o}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class qm extends Gs{getTypeName(){return"HTML"}}class _l extends Gs{getTypeName(){return"Style"}}class Km extends Gs{getTypeName(){return"Script"}}class Zm extends Gs{getTypeName(){return"URL"}}class Sh extends Gs{getTypeName(){return"ResourceURL"}}function Wi(i){return i instanceof Gs?i.changingThisBreaksApplicationSecurity:i}function qi(i,o){const a=id(i);if(null!=a&&a!==o){if("ResourceURL"===a&&"URL"===o)return!0;throw new Error(`Required a safe ${o}, got a ${a} (see https://g.co/ng/security#xss)`)}return a===o}function id(i){return i instanceof Gs&&i.getTypeName()||null}function Mh(i){return new qm(i)}function Fp(i){return new _l(i)}function xh(i){return new Km(i)}function Nh(i){return new Zm(i)}function Lp(i){return new Sh(i)}class Ym{constructor(o){this.inertDocumentHelper=o}getInertBodyElement(o){o="<body><remove></remove>"+o;try{const a=(new window.DOMParser).parseFromString(Du(o),"text/html").body;return null===a?this.inertDocumentHelper.getInertBodyElement(o):(a.removeChild(a.firstChild),a)}catch(a){return null}}}class Vp{constructor(o){if(this.defaultDoc=o,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const a=this.inertDocument.createElement("html");this.inertDocument.appendChild(a);const l=this.inertDocument.createElement("body");a.appendChild(l)}}getInertBodyElement(o){const a=this.inertDocument.createElement("template");if("content"in a)return a.innerHTML=Du(o),a;const l=this.inertDocument.createElement("body");return l.innerHTML=Du(o),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(l),l}stripCustomNsAttrs(o){const a=o.attributes;for(let d=a.length-1;0<d;d--){const y=a.item(d).name;("xmlns:ns1"===y||0===y.indexOf("ns1:"))&&o.removeAttribute(y)}let l=o.firstChild;for(;l;)l.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(l),l=l.nextSibling}}const pE=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,g=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function m(i){return(i=String(i)).match(pE)||i.match(g)?i:"unsafe:"+i}function S(i){const o={};for(const a of i.split(","))o[a]=!0;return o}function P(...i){const o={};for(const a of i)for(const l in a)a.hasOwnProperty(l)&&(o[l]=!0);return o}const te=S("area,br,col,hr,img,wbr"),Ne=S("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),et=S("rp,rt"),Ki=P(te,P(Ne,S("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),P(et,S("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),P(et,Ne)),zs=S("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),Tu=S("srcset"),Oh=P(zs,Tu,S("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),S("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),Au=S("script,style,template");class El{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(o){let a=o.firstChild,l=!0;for(;a;)if(a.nodeType===Node.ELEMENT_NODE?l=this.startElement(a):a.nodeType===Node.TEXT_NODE?this.chars(a.nodeValue):this.sanitizedSomething=!0,l&&a.firstChild)a=a.firstChild;else for(;a;){a.nodeType===Node.ELEMENT_NODE&&this.endElement(a);let d=this.checkClobberedElement(a,a.nextSibling);if(d){a=d;break}a=this.checkClobberedElement(a,a.parentNode)}return this.buf.join("")}startElement(o){const a=o.nodeName.toLowerCase();if(!Ki.hasOwnProperty(a))return this.sanitizedSomething=!0,!Au.hasOwnProperty(a);this.buf.push("<"),this.buf.push(a);const l=o.attributes;for(let d=0;d<l.length;d++){const f=l.item(d),y=f.name,E=y.toLowerCase();if(!Oh.hasOwnProperty(E)){this.sanitizedSomething=!0;continue}let I=f.value;zs[E]&&(I=m(I)),Tu[E]&&(i=I,I=(i=String(i)).split(",").map(o=>m(o.trim())).join(", ")),this.buf.push(" ",y,'="',wl(I),'"')}var i;return this.buf.push(">"),!0}endElement(o){const a=o.nodeName.toLowerCase();Ki.hasOwnProperty(a)&&!te.hasOwnProperty(a)&&(this.buf.push("</"),this.buf.push(a),this.buf.push(">"))}chars(o){this.buf.push(wl(o))}checkClobberedElement(o,a){if(a&&(o.compareDocumentPosition(a)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${o.outerHTML}`);return a}}const Up=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Ph=/([^\#-~ |!])/g;function wl(i){return i.replace(/&/g,"&amp;").replace(Up,function(o){return"&#"+(1024*(o.charCodeAt(0)-55296)+(o.charCodeAt(1)-56320)+65536)+";"}).replace(Ph,function(o){return"&#"+o.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let bl;function Bp(i,o){let a=null;try{bl=bl||function Rh(i){const o=new Vp(i);return function sd(){try{return!!(new window.DOMParser).parseFromString(Du(""),"text/html")}catch(i){return!1}}()?new Ym(o):o}(i);let l=o?String(o):"";a=bl.getInertBodyElement(l);let d=5,f=l;do{if(0===d)throw new Error("Failed to sanitize html because the input is unstable");d--,l=f,f=a.innerHTML,a=bl.getInertBodyElement(l)}while(l!==f);return Du((new El).sanitizeChildren(ka(a)||a))}finally{if(a){const l=ka(a)||a;for(;l.firstChild;)l.removeChild(l.firstChild)}}}function ka(i){return"content"in i&&function Zi(i){return i.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===i.nodeName}(i)?i.content:null}var er=(()=>((er=er||{})[er.NONE=0]="NONE",er[er.HTML=1]="HTML",er[er.STYLE=2]="STYLE",er[er.SCRIPT=3]="SCRIPT",er[er.URL=4]="URL",er[er.RESOURCE_URL=5]="RESOURCE_URL",er))();function Qm(i){const o=ad();return o?nd(o.sanitize(er.HTML,i)||""):qi(i,"HTML")?nd(Wi(i)):Bp(ss(),ge(i))}function od(i){const o=ad();return o?o.sanitize(er.URL,i)||"":qi(i,"URL")?Wi(i):m(ge(i))}function ad(){const i=Re();return i&&i[12]}const _E="__ngContext__";function pi(i,o){i[_E]=o}function Xm(i){const o=function kh(i){return i[_E]||null}(i);return o?Array.isArray(o)?o:o.lView:null}function ry(i){return i.ngOriginalError}function XI(i,...o){i.error(...o)}class zp{constructor(){this._console=console}handleError(o){const a=this._findOriginalError(o),l=function JI(i){return i&&i.ngErrorLogger||XI}(o);l(this._console,"ERROR",o),a&&l(this._console,"ORIGINAL ERROR",a)}_findOriginalError(o){let a=o&&ry(o);for(;a&&ry(a);)a=ry(a);return a||null}}const lD=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(Wt))();function po(i){return i instanceof Function?i():i}var Xo=(()=>((Xo=Xo||{})[Xo.Important=1]="Important",Xo[Xo.DashCase=2]="DashCase",Xo))();function sy(i,o){return undefined(i,o)}function Uh(i){const o=i[3];return di(o)?o[3]:o}function Kp(i){return TE(i[13])}function ay(i){return TE(i[4])}function TE(i){for(;null!==i&&!di(i);)i=i[4];return i}function ud(i,o,a,l,d){if(null!=l){let f,y=!1;di(l)?f=l:bi(l)&&(y=!0,l=l[0]);const E=hn(l);0===i&&null!==a?null==d?NE(o,a,E):Mu(o,a,E,d||null,!0):1===i&&null!==a?Mu(o,a,E,d||null,!0):2===i?function VE(i,o,a){const l=Jp(i,o);l&&function OE(i,o,a,l){yn(i)?i.removeChild(o,a,l):o.removeChild(a)}(i,l,o,a)}(o,E,y):3===i&&o.destroyNode(E),null!=f&&function mD(i,o,a,l,d){const f=a[7];f!==hn(a)&&ud(o,i,l,f,d);for(let E=10;E<a.length;E++){const I=a[E];jh(I[1],I,i,o,l,f)}}(o,i,f,a,d)}}function gi(i,o,a){if(yn(i))return i.createElement(o,a);{const l=null!==a?function iu(i){const o=i.toLowerCase();return"svg"===o?"http://www.w3.org/2000/svg":"math"===o?"http://www.w3.org/1998/MathML/":null}(a):null;return null===l?i.createElement(o):i.createElementNS(l,o)}}function SE(i,o){const a=i[9],l=a.indexOf(o),d=o[3];1024&o[2]&&(o[2]&=-1025,Os(d,-1)),a.splice(l,1)}function Yp(i,o){if(i.length<=10)return;const a=10+o,l=i[a];if(l){const d=l[17];null!==d&&d!==i&&SE(d,l),o>0&&(i[a-1][4]=l[4]);const f=Zo(i,10+o);!function hD(i,o){jh(i,o,o[11],2,null,null),o[0]=null,o[6]=null}(l[1],l);const y=f[19];null!==y&&y.detachView(f[1]),l[3]=null,l[4]=null,l[2]&=-129}return l}function ME(i,o){if(!(256&o[2])){const a=o[11];yn(a)&&a.destroyNode&&jh(i,o,a,3,null,null),function uy(i){let o=i[13];if(!o)return Qp(i[1],i);for(;o;){let a=null;if(bi(o))a=o[13];else{const l=o[10];l&&(a=l)}if(!a){for(;o&&!o[4]&&o!==i;)bi(o)&&Qp(o[1],o),o=o[3];null===o&&(o=i),bi(o)&&Qp(o[1],o),a=o&&o[4]}o=a}}(o)}}function Qp(i,o){if(!(256&o[2])){o[2]&=-129,o[2]|=256,function ly(i,o){let a;if(null!=i&&null!=(a=i.destroyHooks))for(let l=0;l<a.length;l+=2){const d=o[a[l]];if(!(d instanceof Bo)){const f=a[l+1];if(Array.isArray(f))for(let y=0;y<f.length;y+=2){const E=d[f[y]],I=f[y+1];try{I.call(E)}finally{}}else try{f.call(d)}finally{}}}}(i,o),function xE(i,o){const a=i.cleanup,l=o[7];let d=-1;if(null!==a)for(let f=0;f<a.length-1;f+=2)if("string"==typeof a[f]){const y=a[f+1],E="function"==typeof y?y(o):hn(o[y]),I=l[d=a[f+2]],C=a[f+3];"boolean"==typeof C?E.removeEventListener(a[f],I,C):C>=0?l[d=C]():l[d=-C].unsubscribe(),f+=2}else{const y=l[d=a[f+1]];a[f].call(y)}if(null!==l){for(let f=d+1;f<l.length;f++)l[f]();o[7]=null}}(i,o),1===o[1].type&&yn(o[11])&&o[11].destroy();const a=o[17];if(null!==a&&di(o[3])){a!==o[3]&&SE(a,o);const l=o[19];null!==l&&l.detachView(i)}}}function pD(i,o,a){return function Su(i,o,a){let l=o;for(;null!==l&&40&l.type;)l=(o=l).parent;if(null===l)return a[0];if(2&l.flags){const d=i.data[l.directiveStart].encapsulation;if(d===Zt.None||d===Zt.Emulated)return null}return cr(l,a)}(i,o.parent,a)}function Mu(i,o,a,l,d){yn(i)?i.insertBefore(o,a,l,d):o.insertBefore(a,l,d)}function NE(i,o,a){yn(i)?i.appendChild(o,a):o.appendChild(a)}function RE(i,o,a,l,d){null!==l?Mu(i,o,a,l,d):NE(i,o,a)}function Jp(i,o){return yn(i)?i.parentNode(o):o.parentNode}let kE=function cy(i,o,a){return 40&i.type?cr(i,a):null};function cd(i,o,a,l){const d=pD(i,l,o),f=o[11],E=function PE(i,o,a){return kE(i,o,a)}(l.parent||o[6],l,o);if(null!=d)if(Array.isArray(a))for(let I=0;I<a.length;I++)RE(f,d,a[I],E,!1);else RE(f,d,a,E,!1)}function Xp(i,o){if(null!==o){const a=o.type;if(3&a)return cr(o,i);if(4&a)return eg(-1,i[o.index]);if(8&a){const l=o.child;if(null!==l)return Xp(i,l);{const d=i[o.index];return di(d)?eg(-1,d):hn(d)}}if(32&a)return sy(o,i)()||hn(i[o.index]);{const l=LE(i,o);return null!==l?Array.isArray(l)?l[0]:Xp(Uh(i[16]),l):Xp(i,o.next)}}return null}function LE(i,o){return null!==o?i[16][6].projection[o.projection]:null}function eg(i,o){const a=10+i+1;if(a<o.length){const l=o[a],d=l[1].firstChild;if(null!==d)return Xp(l,d)}return o[7]}function UE(i,o,a,l,d,f,y){for(;null!=a;){const E=l[a.index],I=a.type;if(y&&0===o&&(E&&pi(hn(E),l),a.flags|=4),64!=(64&a.flags))if(8&I)UE(i,o,a.child,l,d,f,!1),ud(o,i,d,E,f);else if(32&I){const C=sy(a,l);let M;for(;M=C();)ud(o,i,d,M,f);ud(o,i,d,E,f)}else 16&I?tg(i,o,l,a,d,f):ud(o,i,d,E,f);a=y?a.projectionNext:a.next}}function jh(i,o,a,l,d,f){UE(a,l,i.firstChild,o,d,f,!1)}function tg(i,o,a,l,d,f){const y=a[16],I=y[6].projection[l.projection];if(Array.isArray(I))for(let C=0;C<I.length;C++)ud(o,i,d,I[C],f);else UE(i,o,I,y[3],d,f,!0)}function Ws(i,o,a){yn(i)?i.setAttribute(o,"style",a):o.style.cssText=a}function BE(i,o,a){yn(i)?""===a?i.removeAttribute(o,"class"):i.setAttribute(o,"class",a):o.className=a}function jE(i,o,a){let l=i.length;for(;;){const d=i.indexOf(o,a);if(-1===d)return d;if(0===d||i.charCodeAt(d-1)<=32){const f=o.length;if(d+f===l||i.charCodeAt(d+f)<=32)return d}a=d+1}}const ea="ng-template";function ng(i,o,a){let l=0;for(;l<i.length;){let d=i[l++];if(a&&"class"===d){if(d=i[l],-1!==jE(d.toLowerCase(),o,0))return!0}else if(1===d){for(;l<i.length&&"string"==typeof(d=i[l++]);)if(d.toLowerCase()===o)return!0;return!1}}return!1}function Fa(i){return 4===i.type&&i.value!==ea}function Jt(i,o,a){return o===(4!==i.type||a?i.value:ea)}function _D(i,o,a){let l=4;const d=i.attrs||[],f=function ig(i){for(let o=0;o<i.length;o++)if(Br(i[o]))return o;return i.length}(d);let y=!1;for(let E=0;E<o.length;E++){const I=o[E];if("number"!=typeof I){if(!y)if(4&l){if(l=2|1&l,""!==I&&!Jt(i,I,a)||""===I&&1===o.length){if(Rr(l))return!1;y=!0}}else{const C=8&l?I:o[++E];if(8&l&&null!==i.attrs){if(!ng(i.attrs,C,a)){if(Rr(l))return!1;y=!0}continue}const k=st(8&l?"class":I,d,Fa(i),a);if(-1===k){if(Rr(l))return!1;y=!0;continue}if(""!==C){let $;$=k>f?"":d[k+1].toLowerCase();const ee=8&l?$:null;if(ee&&-1!==jE(ee,C,0)||2&l&&C!==$){if(Rr(l))return!1;y=!0}}}}else{if(!y&&!Rr(l)&&!Rr(I))return!1;if(y&&Rr(I))continue;y=!1,l=I|1&l}}return Rr(l)||y}function Rr(i){return 0==(1&i)}function st(i,o,a,l){if(null===o)return-1;let d=0;if(l||!a){let f=!1;for(;d<o.length;){const y=o[d];if(y===i)return d;if(3===y||6===y)f=!0;else{if(1===y||2===y){let E=o[++d];for(;"string"==typeof E;)E=o[++d];continue}if(4===y)break;if(0===y){d+=4;continue}}d+=f?1:2}return-1}return function hy(i,o){let a=i.indexOf(4);if(a>-1)for(a++;a<i.length;){const l=i[a];if("number"==typeof l)return-1;if(l===o)return a;a++}return-1}(o,i)}function rg(i,o,a=!1){for(let l=0;l<o.length;l++)if(_D(i,o[l],a))return!0;return!1}function $E(i,o){return i?":not("+o.trim()+")":o}function fy(i){let o=i[0],a=1,l=2,d="",f=!1;for(;a<i.length;){let y=i[a];if("string"==typeof y)if(2&l){const E=i[++a];d+="["+y+(E.length>0?'="'+E+'"':"")+"]"}else 8&l?d+="."+y:4&l&&(d+=" "+y);else""!==d&&!Rr(y)&&(o+=$E(f,d),d=""),l=y,f=f||!Rr(l);a++}return""!==d&&(o+=$E(f,d)),o}const Lt={};function Wr(i){Hh(qt(),Re(),vr()+i,!1)}function Hh(i,o,a,l){if(!l)if(3==(3&o[2])){const f=i.preOrderCheckHooks;null!==f&&Ta(o,f,a)}else{const f=i.preOrderHooks;null!==f&&Ca(o,f,0,a)}ao(a)}function go(i,o){return i<<17|o<<2}function mo(i){return i>>17&32767}function sg(i){return 2|i}function La(i){return(131068&i)>>2}function og(i,o){return-131069&i|o<<2}function dd(i){return 1|i}function _y(i,o){const a=i.contentQueries;if(null!==a)for(let l=0;l<a.length;l+=2){const d=a[l],f=a[l+1];if(-1!==f){const y=i.data[f];kc(d),y.contentQueries(2,o[f],f)}}}function fd(i,o,a,l,d,f,y,E,I,C){const M=o.blueprint.slice();return M[0]=d,M[2]=140|l,Rs(M),M[3]=M[15]=i,M[8]=a,M[10]=y||i&&i[10],M[11]=E||i&&i[11],M[12]=I||i&&i[12]||null,M[9]=C||i&&i[9]||null,M[6]=f,M[16]=2==o.type?i[16]:M,M}function pd(i,o,a,l,d){let f=i.data[o];if(null===f)f=function Zh(i,o,a,l,d){const f=xc(),y=ol(),I=i.data[o]=function n0(i,o,a,l,d,f){return{type:a,index:l,insertBeforeIndex:null,injectorIndex:o?o.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:d,attrs:f,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:o,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,y?f:f&&f.parent,a,o,l,d);return null===i.firstChild&&(i.firstChild=I),null!==f&&(y?null==f.child&&null!==I.parent&&(f.child=I):null===f.next&&(f.next=I)),I}(i,o,a,l,d),function mh(){return vt.lFrame.inI18n}()&&(f.flags|=64);else if(64&f.type){f.type=a,f.value=l,f.attrs=d;const y=function as(){const i=vt.lFrame,o=i.currentTNode;return i.isParent?o:o.parent}();f.injectorIndex=null===y?-1:y.injectorIndex}return Vi(f,!0),f}function Nu(i,o,a,l){if(0===a)return-1;const d=o.length;for(let f=0;f<a;f++)o.push(l),i.blueprint.push(l),i.data.push(null);return d}function Cl(i,o,a){Da(o);try{const l=i.viewQuery;null!==l&&Py(1,l,a);const d=i.template;null!==d&&Yh(i,o,d,1,a),i.firstCreatePass&&(i.firstCreatePass=!1),i.staticContentQueries&&_y(i,o),i.staticViewQueries&&Py(2,i.viewQuery,a);const f=i.components;null!==f&&function vy(i,o){for(let a=0;a<o.length;a++)wg(i,o[a])}(o,f)}catch(l){throw i.firstCreatePass&&(i.incompleteFirstPass=!0,i.firstCreatePass=!1),l}finally{o[2]&=-5,ti()}}function Yn(i,o,a,l){const d=o[2];if(256!=(256&d)){Da(o);try{Rs(o),function Fo(i){return vt.lFrame.bindingIndex=i}(i.bindingStartIndex),null!==a&&Yh(i,o,a,2,l);const y=3==(3&d);if(y){const C=i.preOrderCheckHooks;null!==C&&Ta(o,C,null)}else{const C=i.preOrderHooks;null!==C&&Ca(o,C,0,null),Qn(o,0)}if(function My(i){for(let o=Kp(i);null!==o;o=ay(o)){if(!o[2])continue;const a=o[9];for(let l=0;l<a.length;l++){const d=a[l],f=d[3];0==(1024&d[2])&&Os(f,1),d[2]|=1024}}}(o),function Xh(i){for(let o=Kp(i);null!==o;o=ay(o))for(let a=10;a<o.length;a++){const l=o[a],d=l[1];Li(l)&&Yn(d,l,d.template,l[8])}}(o),null!==i.contentQueries&&_y(i,o),y){const C=i.contentCheckHooks;null!==C&&Ta(o,C)}else{const C=i.contentHooks;null!==C&&Ca(o,C,1),Qn(o,1)}!function MD(i,o){const a=i.hostBindingOpCodes;if(null!==a)try{for(let l=0;l<a.length;l++){const d=a[l];if(d<0)ao(~d);else{const f=d,y=a[++l],E=a[++l];Oc(y,f),E(2,o[f])}}}finally{ao(-1)}}(i,o);const E=i.components;null!==E&&function XE(i,o){for(let a=0;a<o.length;a++)xy(i,o[a])}(o,E);const I=i.viewQuery;if(null!==I&&Py(2,I,l),y){const C=i.viewCheckHooks;null!==C&&Ta(o,C)}else{const C=i.viewHooks;null!==C&&Ca(o,C,2),Qn(o,2)}!0===i.firstUpdatePass&&(i.firstUpdatePass=!1),o[2]&=-73,1024&o[2]&&(o[2]&=-1025,Os(o[3],-1))}finally{ti()}}}function ii(i,o,a,l){const d=o[10],y=Po(o);try{!y&&d.begin&&d.begin(),y&&Cl(i,o,l),Yn(i,o,a,l)}finally{!y&&d.end&&d.end()}}function Yh(i,o,a,l,d){const f=vr(),y=2&l;try{ao(-1),y&&o.length>20&&Hh(i,o,20,!1),a(l,d)}finally{ao(f)}}function pg(i,o,a){if(_c(o)){const d=o.directiveEnd;for(let f=o.directiveStart;f<d;f++){const y=i.data[f];y.contentQueries&&y.contentQueries(1,a[f],f)}}}function Ey(i,o,a){!ko()||(function PD(i,o,a,l){const d=a.directiveStart,f=a.directiveEnd;i.firstCreatePass||$o(a,o),pi(l,o);const y=a.initialInputs;for(let E=d;E<f;E++){const I=i.data[E],C=hi(I);C&&l0(o,a,I);const M=Ti(o,i,E,a);pi(M,o),null!==y&&c0(0,E-d,M,I,0,y),C&&(dr(a.index,o)[8]=M)}}(i,o,a,cr(a,o)),128==(128&a.flags)&&function kD(i,o,a){const l=a.directiveStart,d=a.directiveEnd,y=a.index,E=function ba(){return vt.lFrame.currentDirectiveIndex}();try{ao(y);for(let I=l;I<d;I++){const C=i.data[I],M=o[I];lu(I),(null!==C.hostBindings||0!==C.hostVars||null!==C.hostAttrs)&&Ru(C,M)}}finally{ao(-1),lu(E)}}(i,o,a))}function wy(i,o,a=cr){const l=o.localNames;if(null!==l){let d=o.index+1;for(let f=0;f<l.length;f+=2){const y=l[f+1],E=-1===y?a(o,i):i[y];i[d++]=E}}}function by(i){const o=i.tView;return null===o||o.incompleteFirstPass?i.tView=gg(1,null,i.template,i.decls,i.vars,i.directiveDefs,i.pipeDefs,i.viewQuery,i.schemas,i.consts):o}function gg(i,o,a,l,d,f,y,E,I,C){const M=20+l,k=M+d,$=function xD(i,o){const a=[];for(let l=0;l<o;l++)a.push(l<i?null:Lt);return a}(M,k),ee="function"==typeof C?C():C;return $[1]={type:i,blueprint:$,template:a,queries:null,viewQuery:E,declTNode:o,data:$.slice().fill(null,M),bindingStartIndex:M,expandoStartIndex:k,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof f?f():f,pipeRegistry:"function"==typeof y?y():y,firstChild:null,schemas:I,consts:ee,incompleteFirstPass:!1}}function yg(i,o,a,l){const d=sf(o);null===a?d.push(l):(d.push(a),i.firstCreatePass&&_d(i).push(l,d.length-1))}function r0(i,o,a){for(let l in i)if(i.hasOwnProperty(l)){const d=i[l];(a=null===a?{}:a).hasOwnProperty(l)?a[l].push(o,d):a[l]=[o,d]}return a}function Mi(i,o,a,l,d,f,y,E){const I=cr(o,a);let M,C=o.inputs;!E&&null!=C&&(M=C[l])?(h0(i,a,M,l,d),tu(o)&&function s0(i,o){const a=dr(o,i);16&a[2]||(a[2]|=64)}(a,o.index)):3&o.type&&(l=function Iy(i){return"class"===i?"className":"for"===i?"htmlFor":"formaction"===i?"formAction":"innerHtml"===i?"innerHTML":"readonly"===i?"readOnly":"tabindex"===i?"tabIndex":i}(l),d=null!=y?y(d,o.value||"",l):d,yn(f)?f.setProperty(I,l,d):Di(l)||(I.setProperty?I.setProperty(l,d):I[l]=d))}function Ty(i,o,a,l){let d=!1;if(ko()){const f=function a0(i,o,a){const l=i.directiveRegistry;let d=null;if(l)for(let f=0;f<l.length;f++){const y=l[f];rg(a,y.selectors,!1)&&(d||(d=[]),ds($o(a,o),i,y.type),hi(y)?(Qh(i,a),d.unshift(y)):d.push(y))}return d}(i,o,a),y=null===l?null:{"":-1};if(null!==f){d=!0,Cy(a,i.data.length,f.length);for(let M=0;M<f.length;M++){const k=f[M];k.providersResolver&&k.providersResolver(k)}let E=!1,I=!1,C=Nu(i,o,f.length,null);for(let M=0;M<f.length;M++){const k=f[M];a.mergedAttrs=Sa(a.mergedAttrs,k.hostAttrs),yi(i,a,o,C,k),Jh(C,k,y),null!==k.contentQueries&&(a.flags|=8),(null!==k.hostBindings||null!==k.hostAttrs||0!==k.hostVars)&&(a.flags|=128);const $=k.type.prototype;!E&&($.ngOnChanges||$.ngOnInit||$.ngDoCheck)&&((i.preOrderHooks||(i.preOrderHooks=[])).push(a.index),E=!0),!I&&($.ngOnChanges||$.ngDoCheck)&&((i.preOrderCheckHooks||(i.preOrderCheckHooks=[])).push(a.index),I=!0),C++}!function _g(i,o){const l=o.directiveEnd,d=i.data,f=o.attrs,y=[];let E=null,I=null;for(let C=o.directiveStart;C<l;C++){const M=d[C],k=M.inputs,$=null===f||Fa(o)?null:Ay(k,f);y.push($),E=r0(k,C,E),I=r0(M.outputs,C,I)}null!==E&&(E.hasOwnProperty("class")&&(o.flags|=16),E.hasOwnProperty("style")&&(o.flags|=32)),o.initialInputs=y,o.inputs=E,o.outputs=I}(i,a)}y&&function u0(i,o,a){if(o){const l=i.localNames=[];for(let d=0;d<o.length;d+=2){const f=a[o[d+1]];if(null==f)throw new Fe(-301,!1);l.push(o[d],f)}}}(a,l,y)}return a.mergedAttrs=Sa(a.mergedAttrs,a.attrs),d}function o0(i,o,a,l,d,f){const y=f.hostBindings;if(y){let E=i.hostBindingOpCodes;null===E&&(E=i.hostBindingOpCodes=[]);const I=~o.index;(function gd(i){let o=i.length;for(;o>0;){const a=i[--o];if("number"==typeof a&&a<0)return a}return 0})(E)!=I&&E.push(I),E.push(l,d,y)}}function Ru(i,o){null!==i.hostBindings&&i.hostBindings(1,o)}function Qh(i,o){o.flags|=2,(i.components||(i.components=[])).push(o.index)}function Jh(i,o,a){if(a){if(o.exportAs)for(let l=0;l<o.exportAs.length;l++)a[o.exportAs[l]]=i;hi(o)&&(a[""]=i)}}function Cy(i,o,a){i.flags|=1,i.directiveStart=o,i.directiveEnd=o+a,i.providerIndexes=o}function yi(i,o,a,l,d){i.data[l]=d;const f=d.factory||(d.factory=fi(d.type)),y=new Bo(f,hi(d),null);i.blueprint[l]=y,a[l]=y,o0(i,o,0,l,Nu(i,a,d.hostVars,Lt),d)}function l0(i,o,a){const l=cr(o,i),d=by(a),f=i[10],y=nf(i,fd(i,d,null,a.onPush?64:16,l,o,f,f.createRenderer(l,a),null,null));i[o.index]=y}function Yi(i,o,a,l,d,f){const y=cr(i,o);!function md(i,o,a,l,d,f,y){if(null==f)yn(i)?i.removeAttribute(o,d,a):o.removeAttribute(d);else{const E=null==y?ge(f):y(f,l||"",d);yn(i)?i.setAttribute(o,d,E,a):a?o.setAttributeNS(a,d,E):o.setAttribute(d,E)}}(o[11],y,f,i.value,a,l,d)}function c0(i,o,a,l,d,f){const y=f[o];if(null!==y){const E=l.setInput;for(let I=0;I<y.length;){const C=y[I++],M=y[I++],k=y[I++];null!==E?l.setInput(a,k,C,M):a[M]=k}}}function Ay(i,o){let a=null,l=0;for(;l<o.length;){const d=o[l];if(0!==d)if(5!==d){if("number"==typeof d)break;i.hasOwnProperty(d)&&(null===a&&(a=[]),a.push(d,i[d],o[l+1])),l+=2}else l+=2;else l+=4}return a}function Sy(i,o,a,l){return new Array(i,!0,!1,o,null,0,l,a,null,null)}function xy(i,o){const a=dr(o,i);if(Li(a)){const l=a[1];80&a[2]?Yn(l,a,l.template,a[8]):a[5]>0&&ef(a)}}function ef(i){for(let l=Kp(i);null!==l;l=ay(l))for(let d=10;d<l.length;d++){const f=l[d];if(1024&f[2]){const y=f[1];Yn(y,f,y.template,f[8])}else f[5]>0&&ef(f)}const a=i[1].components;if(null!==a)for(let l=0;l<a.length;l++){const d=dr(a[l],i);Li(d)&&d[5]>0&&ef(d)}}function wg(i,o){const a=dr(o,i),l=a[1];(function tf(i,o){for(let a=o.length;a<i.blueprint.length;a++)o.push(i.blueprint[a])})(l,a),Cl(l,a,a[8])}function nf(i,o){return i[13]?i[14][4]=o:i[13]=o,i[14]=o,o}function Ny(i){for(;i;){i[2]|=64;const o=Uh(i);if(dh(i)&&!o)return i;i=o}return null}function Oy(i){!function yd(i){for(let o=0;o<i.components.length;o++){const a=i.components[o],l=Xm(a),d=l[1];ii(d,l,d.template,a)}}(i[8])}function Py(i,o,a){kc(0),o(i,a)}const d0=(()=>Promise.resolve(null))();function sf(i){return i[7]||(i[7]=[])}function _d(i){return i.cleanup||(i.cleanup=[])}function Ig(i,o){const a=i[9],l=a?a.get(zp,null):null;l&&l.handleError(o)}function h0(i,o,a,l,d){for(let f=0;f<a.length;){const y=a[f++],E=a[f++],I=o[y],C=i.data[y];null!==C.setInput?C.setInput(I,d,l,E):I[E]=d}}function yo(i,o,a){const l=ro(o,i);!function CE(i,o,a){yn(i)?i.setValue(o,a):o.textContent=a}(i[11],l,a)}function Va(i,o,a){let l=a?i.styles:null,d=a?i.classes:null,f=0;if(null!==o)for(let y=0;y<o.length;y++){const E=o[y];"number"==typeof E?f=E:1==f?d=ye(d,E):2==f&&(l=ye(l,E+": "+o[++y]+";"))}a?i.styles=l:i.stylesWithoutHost=l,a?i.classes=d:i.classesWithoutHost=d}const Fy=new Fn("INJECTOR",-1);class Pu{get(o,a=hs){if(a===hs){const l=new Error(`NullInjectorError: No provider for ${ue(o)}!`);throw l.name="NullInjectorError",l}return a}}const _o=new Fn("Set Injector scope."),ku={},Dg={};let vd;function Ly(){return void 0===vd&&(vd=new Pu),vd}function Un(i,o=null,a=null,l){const d=of(i,o,a,l);return d._resolveInjectorDefTypes(),d}function of(i,o=null,a=null,l){return new BD(i,a,o||Ly(),l)}class BD{constructor(o,a,l,d=null){this.parent=l,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const f=[];a&&$r(a,E=>this.processProvider(E,o,a)),$r([o],E=>this.processInjectorType(E,[],f)),this.records.set(Fy,Sl(void 0,this));const y=this.records.get(_o);this.scope=null!=y?y.value:null,this.source=d||("object"==typeof o?null:ue(o))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(o=>o.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(o,a=hs,l=pt.Default){this.assertNotDestroyed();const d=J(this),f=tn(void 0);try{if(!(l&pt.SkipSelf)){let E=this.records.get(o);if(void 0===E){const I=function m0(i){return"function"==typeof i||"object"==typeof i&&i instanceof Fn}(o)&&In(o);E=I&&this.injectableDefInScope(I)?Sl(Vy(o),ku):null,this.records.set(o,E)}if(null!=E)return this.hydrate(o,E)}return(l&pt.Self?Ly():this.parent).get(o,a=l&pt.Optional&&a===hs?null:a)}catch(y){if("NullInjectorError"===y.name){if((y[wu]=y[wu]||[]).unshift(ue(o)),d)throw y;return function xn(i,o,a,l){const d=i[wu];throw o[N]&&d.unshift(o[N]),i.message=function zi(i,o,a,l=null){i=i&&"\n"===i.charAt(0)&&"\u0275"==i.charAt(1)?i.substr(2):i;let d=ue(o);if(Array.isArray(o))d=o.map(ue).join(" -> ");else if("object"==typeof o){let f=[];for(let y in o)if(o.hasOwnProperty(y)){let E=o[y];f.push(y+":"+("string"==typeof E?JSON.stringify(E):ue(E)))}d=`{${f.join(", ")}}`}return`${a}${l?"("+l+")":""}[${d}]: ${i.replace(D,"\n  ")}`}("\n"+i.message,d,a,l),i.ngTokenPath=d,i[wu]=null,i}(y,o,"R3InjectorError",this.source)}throw y}finally{tn(f),J(d)}}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(o=>this.get(o))}toString(){const o=[];return this.records.forEach((l,d)=>o.push(ue(d))),`R3Injector[${o.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Fe(205,!1)}processInjectorType(o,a,l){if(!(o=ie(o)))return!1;let d=Oi(o);const f=null==d&&o.ngModule||void 0,y=void 0===f?o:f,E=-1!==l.indexOf(y);if(void 0!==f&&(d=Oi(f)),null==d)return!1;if(null!=d.imports&&!E){let M;l.push(y);try{$r(d.imports,k=>{this.processInjectorType(k,a,l)&&(void 0===M&&(M=[]),M.push(k))})}finally{}if(void 0!==M)for(let k=0;k<M.length;k++){const{ngModule:$,providers:ee}=M[k];$r(ee,we=>this.processProvider(we,$,ee||U))}}this.injectorDefTypes.add(y);const I=fi(y)||(()=>new y);this.records.set(y,Sl(I,ku));const C=d.providers;if(null!=C&&!E){const M=o;$r(C,k=>this.processProvider(k,M,C))}return void 0!==f&&void 0!==o.providers}processProvider(o,a,l){let d=Ed(o=ie(o))?o:ie(o&&o.provide);const f=function uf(i,o,a){return p0(i)?Sl(void 0,i.useValue):Sl(f0(i),ku)}(o);if(Ed(o)||!0!==o.multi)this.records.get(d);else{let y=this.records.get(d);y||(y=Sl(void 0,ku,!0),y.factory=()=>Kt(y.multi),this.records.set(d,y)),d=o,y.multi.push(o)}this.records.set(d,f)}hydrate(o,a){return a.value===ku&&(a.value=Dg,a.value=a.factory()),"object"==typeof a.value&&a.value&&function g0(i){return null!==i&&"object"==typeof i&&"function"==typeof i.ngOnDestroy}(a.value)&&this.onDestroy.add(a.value),a.value}injectableDefInScope(o){if(!o.providedIn)return!1;const a=ie(o.providedIn);return"string"==typeof a?"any"===a||a===this.scope:this.injectorDefTypes.has(a)}}function Vy(i){const o=In(i),a=null!==o?o.factory:fi(i);if(null!==a)return a;if(i instanceof Fn)throw new Fe(204,!1);if(i instanceof Function)return function af(i){const o=i.length;if(o>0)throw function ho(i,o){const a=[];for(let l=0;l<i;l++)a.push(o);return a}(o,"?"),new Fe(204,!1);const a=function Tr(i){const o=i&&(i[ui]||i[jn]);if(o){const a=function Cn(i){if(i.hasOwnProperty("name"))return i.name;const o=(""+i).match(/^function\s*([^\s(]+)/);return null===o?"":o[1]}(i);return console.warn(`DEPRECATED: DI is instantiating a token "${a}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${a}" class.`),o}return null}(i);return null!==a?()=>a.factory(i):()=>new i}(i);throw new Fe(204,!1)}function f0(i,o,a){let l;if(Ed(i)){const d=ie(i);return fi(d)||Vy(d)}if(p0(i))l=()=>ie(i.useValue);else if(function $D(i){return!(!i||!i.useFactory)}(i))l=()=>i.useFactory(...Kt(i.deps||[]));else if(function jD(i){return!(!i||!i.useExisting)}(i))l=()=>We(ie(i.useExisting));else{const d=ie(i&&(i.useClass||i.provide));if(!function Fu(i){return!!i.deps}(i))return fi(d)||Vy(d);l=()=>new d(...Kt(i.deps))}return l}function Sl(i,o,a=!1){return{factory:i,value:o,multi:a?[]:void 0}}function p0(i){return null!==i&&"object"==typeof i&&F in i}function Ed(i){return"function"==typeof i}let vo=(()=>{class i{static create(a,l){var d;if(Array.isArray(a))return Un({name:""},l,a,"");{const f=null!==(d=a.name)&&void 0!==d?d:"";return Un({name:f},a.parent,a.providers,f)}}}return i.THROW_IF_NOT_FOUND=hs,i.NULL=new Pu,i.\u0275prov=nn({token:i,providedIn:"any",factory:()=>We(Fy)}),i.__NG_ELEMENT_ID__=-1,i})();function WD(i,o){us(Xm(i)[1],wn())}function Mg(i){let o=function Wy(i){return Object.getPrototypeOf(i.prototype).constructor}(i.type),a=!0;const l=[i];for(;o;){let d;if(hi(i))d=o.\u0275cmp||o.\u0275dir;else{if(o.\u0275cmp)throw new Fe(903,"");d=o.\u0275dir}if(d){if(a){l.push(d);const y=i;y.inputs=wd(i.inputs),y.declaredInputs=wd(i.declaredInputs),y.outputs=wd(i.outputs);const E=d.hostBindings;E&&C0(i,E);const I=d.viewQuery,C=d.contentQueries;if(I&&T0(i,I),C&&Ua(i,C),de(i.inputs,d.inputs),de(i.declaredInputs,d.declaredInputs),de(i.outputs,d.outputs),hi(d)&&d.data.animation){const M=i.data;M.animation=(M.animation||[]).concat(d.data.animation)}}const f=d.features;if(f)for(let y=0;y<f.length;y++){const E=f[y];E&&E.ngInherit&&E(i),E===Mg&&(a=!1)}}o=Object.getPrototypeOf(o)}!function D0(i){let o=0,a=null;for(let l=i.length-1;l>=0;l--){const d=i[l];d.hostVars=o+=d.hostVars,d.hostAttrs=Sa(d.hostAttrs,a=Sa(a,d.hostAttrs))}}(l)}function wd(i){return i===cn?{}:i===U?[]:i}function T0(i,o){const a=i.viewQuery;i.viewQuery=a?(l,d)=>{o(l,d),a(l,d)}:o}function Ua(i,o){const a=i.contentQueries;i.contentQueries=a?(l,d,f)=>{o(l,d,f),a(l,d,f)}:o}function C0(i,o){const a=i.hostBindings;i.hostBindings=a?(l,d)=>{o(l,d),a(l,d)}:o}let df=null;function Vu(){if(!df){const i=Wt.Symbol;if(i&&i.iterator)df=i.iterator;else{const o=Object.getOwnPropertyNames(Map.prototype);for(let a=0;a<o.length;++a){const l=o[a];"entries"!==l&&"size"!==l&&Map.prototype[l]===Map.prototype.entries&&(df=l)}}}return df}function bd(i){return!!Zy(i)&&(Array.isArray(i)||!(i instanceof Map)&&Vu()in i)}function Zy(i){return null!==i&&("function"==typeof i||"object"==typeof i)}function si(i,o,a){return!Object.is(i[o],a)&&(i[o]=a,!0)}function Rg(i,o,a,l){const d=Re();return si(d,Lo(),o)&&(qt(),Yi(qn(),d,i,o,a,l)),Rg}function R0(i,o,a,l,d,f,y,E){const I=Re(),C=qt(),M=i+20,k=C.firstCreatePass?function N0(i,o,a,l,d,f,y,E,I){const C=o.consts,M=pd(o,i,4,y||null,Xr(C,E));Ty(o,a,M,Xr(C,I)),us(o,M);const k=M.tViews=gg(2,M,l,d,f,o.directiveRegistry,o.pipeRegistry,null,o.schemas,C);return null!==o.queries&&(o.queries.template(o,M),k.queries=o.queries.embeddedTView(M)),M}(M,C,I,o,a,l,d,f,y):C.data[M];Vi(k,!1);const $=I[11].createComment("");cd(C,I,$,k),pi($,I),nf(I,I[M]=Sy($,I,$,k)),Ss(k)&&Ey(C,I,k),null!=y&&wy(I,k,E)}function ff(i,o=pt.Default){const a=Re();return null===a?We(i,o):Ls(wn(),a,ie(i),o)}function Ir(){throw new Error("invalid")}function s_(i,o,a){const l=Re();return si(l,Lo(),o)&&Mi(qt(),qn(),l,i,o,l[11],a,!1),s_}function na(i,o,a,l,d){const y=d?"class":"style";h0(i,a,o.inputs[y],y,l)}function ra(i,o,a,l){const d=Re(),f=qt(),y=20+i,E=d[11],I=d[y]=gi(E,o,function Sp(){return vt.lFrame.currentNamespace}()),C=f.firstCreatePass?function tr(i,o,a,l,d,f,y){const E=o.consts,C=pd(o,i,2,d,Xr(E,f));return Ty(o,a,C,Xr(E,y)),null!==C.attrs&&Va(C,C.attrs,!1),null!==C.mergedAttrs&&Va(C,C.mergedAttrs,!0),null!==o.queries&&o.queries.elementStart(o,C),C}(y,f,d,0,o,a,l):f.data[y];Vi(C,!0);const M=C.mergedAttrs;null!==M&&fr(E,I,M);const k=C.classes;null!==k&&BE(E,I,k);const $=C.styles;return null!==$&&Ws(E,I,$),64!=(64&C.flags)&&cd(f,d,I,C),0===function Sc(){return vt.lFrame.elementDepthCount}()&&pi(I,d),function va(){vt.lFrame.elementDepthCount++}(),Ss(C)&&(Ey(f,d,C),pg(f,C,d)),null!==l&&wy(d,C),ra}function Ad(){let i=wn();ol()?wa():(i=i.parent,Vi(i,!1));const o=i;!function Mc(){vt.lFrame.elementDepthCount--}();const a=qt();return a.firstCreatePass&&(us(a,i),_c(i)&&a.queries.elementEnd(i)),null!=o.classesWithoutHost&&function xp(i){return 0!=(16&i.flags)}(o)&&na(a,o,Re(),o.classesWithoutHost,!0),null!=o.stylesWithoutHost&&function Sn(i){return 0!=(32&i.flags)}(o)&&na(a,o,Re(),o.stylesWithoutHost,!1),Ad}function Fg(i,o,a,l){return ra(i,o,a,l),Ad(),Fg}function Ks(i,o,a){const l=Re(),d=qt(),f=i+20,y=d.firstCreatePass?function JD(i,o,a,l,d){const f=o.consts,y=Xr(f,l),E=pd(o,i,8,"ng-container",y);return null!==y&&Va(E,y,!0),Ty(o,a,E,Xr(f,d)),null!==o.queries&&o.queries.elementStart(o,E),E}(f,d,l,o,a):d.data[f];Vi(y,!0);const E=l[f]=l[11].createComment("");return cd(d,l,E,y),pi(E,l),Ss(y)&&(Ey(d,l,y),pg(d,y,l)),null!=a&&wy(l,y),Ks}function ju(){let i=wn();const o=qt();return ol()?wa():(i=i.parent,Vi(i,!1)),o.firstCreatePass&&(us(o,i),_c(i)&&o.queries.elementEnd(i)),ju}function o_(){return Re()}function Je(i){return!!i&&"function"==typeof i.then}function Ga(i){return!!i&&"function"==typeof i.subscribe}const pf=Ga;function za(i,o,a,l){const d=Re(),f=qt(),y=wn();return function Wa(i,o,a,l,d,f,y,E){const I=Ss(l),M=i.firstCreatePass&&_d(i),k=o[8],$=sf(o);let ee=!0;if(3&l.type||E){const Xe=cr(l,o),Ge=E?E(Xe):Xe,Oe=$.length,Et=E?yt=>E(hn(yt[l.index])):l.index;if(yn(a)){let yt=null;if(!E&&I&&(yt=function gf(i,o,a,l){const d=i.cleanup;if(null!=d)for(let f=0;f<d.length-1;f+=2){const y=d[f];if(y===a&&d[f+1]===l){const E=o[7],I=d[f+2];return E.length>I?E[I]:null}"string"==typeof y&&(f+=2)}return null}(i,o,d,l.index)),null!==yt)(yt.__ngLastListenerFn__||yt).__ngNextListenerFn__=f,yt.__ngLastListenerFn__=f,ee=!1;else{f=$u(l,o,k,f,!1);const pn=a.listen(Ge,d,f);$.push(f,pn),M&&M.push(d,Et,Oe,Oe+1)}}else f=$u(l,o,k,f,!0),Ge.addEventListener(d,f,y),$.push(f),M&&M.push(d,Et,Oe,y)}else f=$u(l,o,k,f,!1);const we=l.outputs;let $e;if(ee&&null!==we&&($e=we[d])){const Xe=$e.length;if(Xe)for(let Ge=0;Ge<Xe;Ge+=2){const vs=o[$e[Ge]][$e[Ge+1]].subscribe(f),dc=$.length;$.push(f,vs),M&&M.push(d,l.index,dc,-(dc+1))}}}(f,d,d[11],y,i,o,!!a,l),za}function a_(i,o,a,l){try{return!1!==a(l)}catch(d){return Ig(i,d),!1}}function $u(i,o,a,l,d){return function f(y){if(y===Function)return l;const E=2&i.flags?dr(i.index,o):o;0==(32&o[2])&&Ny(E);let I=a_(o,0,l,y),C=f.__ngNextListenerFn__;for(;C;)I=a_(o,0,C,y)&&I,C=C.__ngNextListenerFn__;return d&&!1===I&&(y.preventDefault(),y.returnValue=!1),I}}function Vg(i=1){return function _h(i){return(vt.lFrame.contextLView=function ul(i,o){for(;i>0;)o=o[15],i--;return o}(i,vt.lFrame.contextLView))[8]}(i)}function jg(i,o,a,l,d){const f=i[a+1],y=null===o;let E=l?mo(f):La(f),I=!1;for(;0!==E&&(!1===I||y);){const M=i[E+1];Ul(i[E],o)&&(I=!0,i[E+1]=l?dd(M):sg(M)),E=l?mo(M):La(M)}I&&(i[a+1]=l?sg(f):dd(f))}function Ul(i,o){return null===i||null==o||(Array.isArray(i)?i[1]:i)===o||!(!Array.isArray(i)||"string"!=typeof o)&&Na(i,o)>=0}const nr={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function xd(i){return i.substring(nr.key,nr.keyEnd)}function Zs(i,o){const a=nr.textEnd;return a===o?-1:(o=nr.keyEnd=function Nn(i,o,a){for(;o<a&&i.charCodeAt(o)>32;)o++;return o}(i,nr.key=o,a),ir(i,o,a))}function ir(i,o,a){for(;o<a&&i.charCodeAt(o)<=32;)o++;return o}function p_(i,o,a){return An(i,o,a,!1),p_}function jl(i,o){return An(i,o,null,!0),jl}function g_(i){!function Io(i,o,a,l){const d=qt(),f=ei(2);d.firstUpdatePass&&q0(d,null,f,l);const y=Re();if(a!==Lt&&si(y,f,a)){const E=d.data[vr()];if(Q0(E,l)&&!W0(d,f)){let I=l?E.classesWithoutHost:E.stylesWithoutHost;null!==I&&(a=ye(I,a||"")),na(d,E,y,a,l)}else!function Y0(i,o,a,l,d,f,y,E){d===Lt&&(d=U);let I=0,C=0,M=0<d.length?d[0]:null,k=0<f.length?f[0]:null;for(;null!==M||null!==k;){const $=I<d.length?d[I+1]:void 0,ee=C<f.length?f[C+1]:void 0;let $e,we=null;M===k?(I+=2,C+=2,$!==ee&&(we=k,$e=ee)):null===k||null!==M&&M<k?(I+=2,we=M):(C+=2,we=k,$e=ee),null!==we&&y_(i,o,a,l,we,$e,y,E),M=I<d.length?d[I]:null,k=C<f.length?f[C]:null}}(d,E,y,y[11],y[f+1],y[f+1]=function Rd(i,o,a){if(null==a||""===a)return U;const l=[],d=Wi(a);if(Array.isArray(d))for(let f=0;f<d.length;f++)i(l,d[f],!0);else if("object"==typeof d)for(const f in d)d.hasOwnProperty(f)&&i(l,f,d[f]);else"string"==typeof d&&o(l,d);return l}(i,o,a),l,f)}}(Hr,bo,i,!0)}function bo(i,o){for(let a=function eT(i){return function _f(i){nr.key=0,nr.keyEnd=0,nr.value=0,nr.valueEnd=0,nr.textEnd=i.length}(i),Zs(i,ir(i,0,nr.textEnd))}(o);a>=0;a=Zs(o,a))Hr(i,xd(o),!0)}function An(i,o,a,l){const d=Re(),f=qt(),y=ei(2);f.firstUpdatePass&&q0(f,i,y,l),o!==Lt&&si(d,y,o)&&y_(f,f.data[vr()],d,d[11],i,d[y+1]=function Od(i,o){return null==i||("string"==typeof o?i+=o:"object"==typeof i&&(i=ue(Wi(i)))),i}(o,a),l,y)}function W0(i,o){return o>=i.expandoStartIndex}function q0(i,o,a,l){const d=i.data;if(null===d[a+1]){const f=d[vr()],y=W0(i,a);Q0(f,l)&&null===o&&!y&&(o=!1),o=function K0(i,o,a,l){const d=Uo(i);let f=l?o.residualClasses:o.residualStyles;if(null===d)0===(l?o.classBindings:o.styleBindings)&&(a=Ys(a=m_(null,i,o,a,l),o.attrs,l),f=null);else{const y=o.directiveStylingLast;if(-1===y||i[y]!==d)if(a=m_(d,i,o,a,l),null===f){let I=function nT(i,o,a){const l=a?o.classBindings:o.styleBindings;if(0!==La(l))return i[mo(l)]}(i,o,l);void 0!==I&&Array.isArray(I)&&(I=m_(null,i,o,I[1],l),I=Ys(I,o.attrs,l),function rT(i,o,a,l){i[mo(a?o.classBindings:o.styleBindings)]=l}(i,o,l,I))}else f=function iT(i,o,a){let l;const d=o.directiveEnd;for(let f=1+o.directiveStylingLast;f<d;f++)l=Ys(l,i[f].hostAttrs,a);return Ys(l,o.attrs,a)}(i,o,l)}return void 0!==f&&(l?o.residualClasses=f:o.residualStyles=f),a}(d,f,o,l),function Bn(i,o,a,l,d,f){let y=f?o.classBindings:o.styleBindings,E=mo(y),I=La(y);i[l]=a;let M,C=!1;if(Array.isArray(a)){const k=a;M=k[1],(null===M||Na(k,M)>0)&&(C=!0)}else M=a;if(d)if(0!==I){const $=mo(i[E+1]);i[l+1]=go($,E),0!==$&&(i[$+1]=og(i[$+1],l)),i[E+1]=function GE(i,o){return 131071&i|o<<17}(i[E+1],l)}else i[l+1]=go(E,0),0!==E&&(i[E+1]=og(i[E+1],l)),E=l;else i[l+1]=go(I,0),0===E?E=l:i[I+1]=og(i[I+1],l),I=l;C&&(i[l+1]=sg(i[l+1])),jg(i,M,l,!0),jg(i,M,l,!1),function Bg(i,o,a,l,d){const f=d?i.residualClasses:i.residualStyles;null!=f&&"string"==typeof o&&Na(f,o)>=0&&(a[l+1]=dd(a[l+1]))}(o,M,i,l,f),y=go(E,I),f?o.classBindings=y:o.styleBindings=y}(d,f,o,a,y,l)}}function m_(i,o,a,l,d){let f=null;const y=a.directiveEnd;let E=a.directiveStylingLast;for(-1===E?E=a.directiveStart:E++;E<y&&(f=o[E],l=Ys(l,f.hostAttrs,d),f!==i);)E++;return null!==i&&(a.directiveStylingLast=E),l}function Ys(i,o,a){const l=a?1:2;let d=-1;if(null!==o)for(let f=0;f<o.length;f++){const y=o[f];"number"==typeof y?d=y:d===l&&(Array.isArray(i)||(i=void 0===i?[]:["",i]),Hr(i,y,!!a||o[++f]))}return void 0===i?null:i}function y_(i,o,a,l,d,f,y,E){if(!(3&o.type))return;const I=i.data,C=I[E+1];vf(function ag(i){return 1==(1&i)}(C)?ia(I,o,a,d,La(C),y):void 0)||(vf(f)||function HE(i){return 2==(2&i)}(C)&&(f=ia(I,null,a,d,E,y)),function yD(i,o,a,l,d){const f=yn(i);if(o)d?f?i.addClass(a,l):a.classList.add(l):f?i.removeClass(a,l):a.classList.remove(l);else{let y=-1===l.indexOf("-")?void 0:Xo.DashCase;if(null==d)f?i.removeStyle(a,l,y):a.style.removeProperty(l);else{const E="string"==typeof d&&d.endsWith("!important");E&&(d=d.slice(0,-10),y|=Xo.Important),f?i.setStyle(a,l,d,y):a.style.setProperty(l,d,E?"important":"")}}}(l,y,ro(vr(),a),d,f))}function ia(i,o,a,l,d,f){const y=null===o;let E;for(;d>0;){const I=i[d],C=Array.isArray(I),M=C?I[1]:I,k=null===M;let $=a[d+1];$===Lt&&($=k?U:void 0);let ee=k?_u($,l):M===l?$:void 0;if(C&&!vf(ee)&&(ee=_u(I,l)),vf(ee)&&(E=ee,y))return E;const we=i[d+1];d=y?mo(we):La(we)}if(null!==o){let I=f?o.residualClasses:o.residualStyles;null!=I&&(E=_u(I,l))}return E}function vf(i){return void 0!==i}function Q0(i,o){return 0!=(i.flags&(o?16:32))}function Hg(i,o=""){const a=Re(),l=qt(),d=i+20,f=l.firstCreatePass?pd(l,d,1,o,null):l.data[d],y=a[d]=function Zp(i,o){return yn(i)?i.createText(o):i.createTextNode(o)}(a[11],o);cd(l,a,y,f),Vi(f,!1)}function Ef(i){return Pd("",i,""),Ef}function Pd(i,o,a){const l=Re(),d=function xl(i,o,a,l){return si(i,Lo(),a)?o+ge(a)+l:Lt}(l,i,o,a);return d!==Lt&&yo(l,vr(),d),Pd}function zl(i,o,a){const l=Re();if(si(l,Lo(),o)){const f=qt(),y=qn();Mi(f,y,l,i,o,function Ou(i,o,a){return(null===i||hi(i))&&(a=function ou(i){for(;Array.isArray(i);){if("object"==typeof i[1])return i;i=i[0]}return null}(a[o.index])),a[11]}(Uo(f.data),y,l),a,!0)}return zl}const ms=void 0;var hw=["en",[["a","p"],["AM","PM"],ms],[["AM","PM"],ms,ms],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],ms,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],ms,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",ms,"{1} 'at' {0}",ms],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function dw(i){const a=Math.floor(Math.abs(i)),l=i.toString().replace(/^[^.]*\.?/,"").length;return 1===a&&0===l?1:5}];let Wl={};function Df(i){const o=function Hu(i){return i.toLowerCase().replace(/_/g,"-")}(i);let a=rn(o);if(a)return a;const l=o.split("-")[0];if(a=rn(l),a)return a;if("en"===l)return hw;throw new Error(`Missing locale data for the locale "${i}".`)}function yr(i){return Df(i)[bt.PluralCase]}function rn(i){return i in Wl||(Wl[i]=Wt.ng&&Wt.ng.common&&Wt.ng.common.locales&&Wt.ng.common.locales[i]),Wl[i]}var bt=(()=>((bt=bt||{})[bt.LocaleId=0]="LocaleId",bt[bt.DayPeriodsFormat=1]="DayPeriodsFormat",bt[bt.DayPeriodsStandalone=2]="DayPeriodsStandalone",bt[bt.DaysFormat=3]="DaysFormat",bt[bt.DaysStandalone=4]="DaysStandalone",bt[bt.MonthsFormat=5]="MonthsFormat",bt[bt.MonthsStandalone=6]="MonthsStandalone",bt[bt.Eras=7]="Eras",bt[bt.FirstDayOfWeek=8]="FirstDayOfWeek",bt[bt.WeekendRange=9]="WeekendRange",bt[bt.DateFormat=10]="DateFormat",bt[bt.TimeFormat=11]="TimeFormat",bt[bt.DateTimeFormat=12]="DateTimeFormat",bt[bt.NumberSymbols=13]="NumberSymbols",bt[bt.NumberFormats=14]="NumberFormats",bt[bt.CurrencyCode=15]="CurrencyCode",bt[bt.CurrencySymbol=16]="CurrencySymbol",bt[bt.CurrencyName=17]="CurrencyName",bt[bt.Currencies=18]="Currencies",bt[bt.Directionality=19]="Directionality",bt[bt.PluralCase=20]="PluralCase",bt[bt.ExtraData=21]="ExtraData",bt))();const Zg="en-US";let fw=Zg;function Nf(i,o,a,l,d){if(i=ie(i),Array.isArray(i))for(let f=0;f<i.length;f++)Nf(i[f],o,a,l,d);else{const f=qt(),y=Re();let E=Ed(i)?i:ie(i.provide),I=f0(i);const C=wn(),M=1048575&C.providerIndexes,k=C.directiveStart,$=C.providerIndexes>>20;if(Ed(i)||!i.multi){const ee=new Bo(I,d,ff),we=Rf(E,o,d?M:M+$,k);-1===we?(ds($o(C,y),f,E),Xg(f,i,o.length),o.push(E),C.directiveStart++,C.directiveEnd++,d&&(C.providerIndexes+=1048576),a.push(ee),y.push(ee)):(a[we]=ee,y[we]=ee)}else{const ee=Rf(E,o,M+$,k),we=Rf(E,o,M,M+$),$e=ee>=0&&a[ee],Xe=we>=0&&a[we];if(d&&!Xe||!d&&!$e){ds($o(C,y),f,E);const Ge=function Lw(i,o,a,l,d){const f=new Bo(i,a,ff);return f.multi=[],f.index=o,f.componentProviders=0,Fr(f,d,l&&!a),f}(d?k_:P_,a.length,d,l,I);!d&&Xe&&(a[we].providerFactory=Ge),Xg(f,i,o.length,0),o.push(E),C.directiveStart++,C.directiveEnd++,d&&(C.providerIndexes+=1048576),a.push(Ge),y.push(Ge)}else Xg(f,i,ee>-1?ee:we,Fr(a[d?we:ee],I,!d&&l));!d&&l&&Xe&&a[we].componentProviders++}}}function Xg(i,o,a,l){const d=Ed(o),f=function lf(i){return!!i.useClass}(o);if(d||f){const I=(f?ie(o.useClass):o).prototype.ngOnDestroy;if(I){const C=i.destroyHooks||(i.destroyHooks=[]);if(!d&&o.multi){const M=C.indexOf(a);-1===M?C.push(a,[l,I]):C[M+1].push(l,I)}else C.push(a,I)}}}function Fr(i,o,a){return a&&i.componentProviders++,i.multi.push(o)-1}function Rf(i,o,a,l){for(let d=a;d<l;d++)if(o[d]===i)return d;return-1}function P_(i,o,a,l){return aa(this.multi,[])}function k_(i,o,a,l){const d=this.multi;let f;if(this.providerFactory){const y=this.providerFactory.componentProviders,E=Ti(a,a[1],this.providerFactory.index,l);f=E.slice(0,y),aa(d,f);for(let I=y;I<E.length;I++)f.push(E[I])}else f=[],aa(d,f);return f}function aa(i,o){for(let a=0;a<i.length;a++)o.push((0,i[a])());return o}function Vw(i,o=[]){return a=>{a.providersResolver=(l,d)=>function Fw(i,o,a){const l=qt();if(l.firstCreatePass){const d=hi(i);Nf(a,l.data,l.blueprint,d,!0),Nf(o,l.data,l.blueprint,d,!1)}}(l,d?d(i):i,o)}}class Of{}class kf{resolveComponentFactory(o){throw function Kl(i){const o=Error(`No component factory found for ${ue(i)}. Did you add it to @NgModule.entryComponents?`);return o.ngComponent=i,o}(o)}}let Ff=(()=>{class i{}return i.NULL=new kf,i})();function F_(){return Ku(wn(),Re())}function Ku(i,o){return new Hd(cr(i,o))}let Hd=(()=>{class i{constructor(a){this.nativeElement=a}}return i.__NG_ELEMENT_ID__=F_,i})();function PT(i){return i instanceof Hd?i.nativeElement:i}class L_{}let V_=(()=>{class i{}return i.__NG_ELEMENT_ID__=()=>function Zl(){const i=Re(),a=dr(wn().index,i);return function Lf(i){return i[11]}(bi(a)?a:i)}(),i})(),FT=(()=>{class i{}return i.\u0275prov=nn({token:i,providedIn:"root",factory:()=>null}),i})();class U_{constructor(o){this.full=o,this.major=o.split(".")[0],this.minor=o.split(".")[1],this.patch=o.split(".").slice(2).join(".")}}const Bw=new U_("13.3.11"),B_={};function em(i,o,a,l,d=!1){for(;null!==a;){const f=o[a.index];if(null!==f&&l.push(hn(f)),di(f))for(let E=10;E<f.length;E++){const I=f[E],C=I[1].firstChild;null!==C&&em(I[1],I,C,l)}const y=a.type;if(8&y)em(i,o,a.child,l);else if(32&y){const E=sy(a,o);let I;for(;I=E();)l.push(I)}else if(16&y){const E=LE(o,a);if(Array.isArray(E))l.push(...E);else{const I=Uh(o[16]);em(I[1],I,E,l,!0)}}a=d?a.projectionNext:a.next}return l}class Ka{constructor(o,a){this._lView=o,this._cdRefInjectingView=a,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const o=this._lView,a=o[1];return em(a,o,a.firstChild,[])}get context(){return this._lView[8]}set context(o){this._lView[8]=o}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const o=this._lView[3];if(di(o)){const a=o[8],l=a?a.indexOf(this):-1;l>-1&&(Yp(o,l),Zo(a,l))}this._attachedToViewContainer=!1}ME(this._lView[1],this._lView)}onDestroy(o){yg(this._lView[1],this._lView,null,o)}markForCheck(){Ny(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){!function rf(i,o,a){const l=o[10];l.begin&&l.begin();try{Yn(i,o,i.template,a)}catch(d){throw Ig(o,d),d}finally{l.end&&l.end()}}(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Fe(902,"");this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function Bh(i,o){jh(i,o,o[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(o){if(this._attachedToViewContainer)throw new Fe(902,"");this._appRef=o}}class Yl extends Ka{constructor(o){super(o),this._view=o}detectChanges(){Oy(this._view)}checkNoChanges(){}get context(){return null}}class Zu extends Ff{constructor(o){super(),this.ngModule=o}resolveComponentFactory(o){const a=at(o);return new Vf(a,this.ngModule)}}function j_(i){const o=[];for(let a in i)i.hasOwnProperty(a)&&o.push({propName:i[a],templateName:a});return o}class Vf extends Of{constructor(o,a){super(),this.componentDef=o,this.ngModule=a,this.componentType=o.type,this.selector=function vD(i){return i.map(fy).join(",")}(o.selectors),this.ngContentSelectors=o.ngContentSelectors?o.ngContentSelectors:[],this.isBoundToModule=!!a}get inputs(){return j_(this.componentDef.inputs)}get outputs(){return j_(this.componentDef.outputs)}create(o,a,l,d){const f=(d=d||this.ngModule)?function VT(i,o){return{get:(a,l,d)=>{const f=i.get(a,B_,d);return f!==B_||l===B_?f:o.get(a,l,d)}}}(o,d.injector):o,y=f.get(L_,ya),E=f.get(FT,null),I=y.createRenderer(null,this.componentDef),C=this.componentDef.selectors[0][0]||"div",M=l?function t0(i,o,a){if(yn(i))return i.selectRootElement(o,a===Zt.ShadowDom);let l="string"==typeof o?i.querySelector(o):o;return l.textContent="",l}(I,l,this.componentDef.encapsulation):gi(y.createRenderer(null,this.componentDef),C,function LT(i){const o=i.toLowerCase();return"svg"===o?"svg":"math"===o?"math":null}(C)),k=this.componentDef.onPush?576:528,$=function I0(i,o){return{components:[],scheduler:i||lD,clean:d0,playerHandler:o||null,flags:0}}(),ee=gg(0,null,null,1,0,null,null,null,null,null),we=fd(null,ee,$,k,null,null,y,I,E,f);let $e,Xe;Da(we);try{const Ge=function zy(i,o,a,l,d,f){const y=a[1];a[20]=i;const I=pd(y,20,2,"#host",null),C=I.mergedAttrs=o.hostAttrs;null!==C&&(Va(I,C,!0),null!==i&&(fr(d,i,C),null!==I.classes&&BE(d,i,I.classes),null!==I.styles&&Ws(d,i,I.styles)));const M=l.createRenderer(i,o),k=fd(a,by(o),null,o.onPush?64:16,a[20],I,l,M,f||null,null);return y.firstCreatePass&&(ds($o(I,a),y,o.type),Qh(y,I),Cy(I,a.length,1)),nf(a,k),a[20]=k}(M,this.componentDef,we,y,I);if(M)if(l)fr(I,M,["ng-version",Bw.full]);else{const{attrs:Oe,classes:Et}=function ED(i){const o=[],a=[];let l=1,d=2;for(;l<i.length;){let f=i[l];if("string"==typeof f)2===d?""!==f&&o.push(f,i[++l]):8===d&&a.push(f);else{if(!Rr(d))break;d=f}l++}return{attrs:o,classes:a}}(this.componentDef.selectors[0]);Oe&&fr(I,M,Oe),Et&&Et.length>0&&BE(I,M,Et.join(" "))}if(Xe=kn(ee,20),void 0!==a){const Oe=Xe.projection=[];for(let Et=0;Et<this.ngContentSelectors.length;Et++){const yt=a[Et];Oe.push(null!=yt?Array.from(yt):null)}}$e=function b0(i,o,a,l,d){const f=a[1],y=function Eg(i,o,a){const l=wn();i.firstCreatePass&&(a.providersResolver&&a.providersResolver(a),yi(i,l,o,Nu(i,o,1,null),a));const d=Ti(o,i,l.directiveStart,l);pi(d,o);const f=cr(l,o);return f&&pi(f,o),d}(f,a,o);if(l.components.push(y),i[8]=y,d&&d.forEach(I=>I(y,o)),o.contentQueries){const I=wn();o.contentQueries(1,y,I.directiveStart)}const E=wn();return!f.firstCreatePass||null===o.hostBindings&&null===o.hostAttrs||(ao(E.index),o0(a[1],E,0,E.directiveStart,E.directiveEnd,o),Ru(o,y)),y}(Ge,this.componentDef,we,$,[WD]),Cl(ee,we,null)}finally{ti()}return new jw(this.componentType,$e,Ku(Xe,we),we,Xe)}}class jw extends class Uw{}{constructor(o,a,l,d,f){super(),this.location=l,this._rootLView=d,this._tNode=f,this.instance=a,this.hostView=this.changeDetectorRef=new Yl(d),this.componentType=o}get injector(){return new ji(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(o){this.hostView.onDestroy(o)}}class Za{}class Bf{}const Ql=new Map;class Xl extends Za{constructor(o,a){super(),this._parent=a,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new Zu(this);const l=$t(o);this._bootstrapComponents=po(l.bootstrap),this._r3Injector=of(o,a,[{provide:Za,useValue:this},{provide:Ff,useValue:this.componentFactoryResolver}],ue(o)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(o)}get(o,a=vo.THROW_IF_NOT_FOUND,l=pt.Default){return o===vo||o===Za||o===Fy?this:this._r3Injector.get(o,a,l)}destroy(){const o=this._r3Injector;!o.destroyed&&o.destroy(),this.destroyCbs.forEach(a=>a()),this.destroyCbs=null}onDestroy(o){this.destroyCbs.push(o)}}class rm extends Bf{constructor(o){super(),this.moduleType=o,null!==$t(o)&&function nm(i){const o=new Set;!function a(l){const d=$t(l,!0),f=d.id;null!==f&&(function $_(i,o,a){if(o&&o!==a)throw new Error(`Duplicate module registered for ${i} - ${ue(o)} vs ${ue(o.name)}`)}(f,Ql.get(f),l),Ql.set(f,l));const y=po(d.imports);for(const E of y)o.has(E)||(o.add(E),a(E))}(i)}(o)}create(o){return new Xl(this.moduleType,o)}}function Hw(i,o,a,l){return Ww(Re(),hr(),i,o,a,l)}function Ww(i,o,a,l,d,f){const y=o+a;return si(i,y,d)?function Eo(i,o,a){return i[o]=a}(i,y+1,f?l.call(f,d):l(d)):function jf(i,o){const a=i[o];return a===Lt?void 0:a}(i,y+1)}function W_(i,o){const a=qt();let l;const d=i+20;a.firstCreatePass?(l=function nc(i,o){if(o)for(let a=o.length-1;a>=0;a--){const l=o[a];if(i===l.name)return l}}(o,a.pipeRegistry),a.data[d]=l,l.onDestroy&&(a.destroyHooks||(a.destroyHooks=[])).push(d,l.onDestroy)):l=a.data[d];const f=l.factory||(l.factory=fi(l.type)),y=tn(ff);try{const E=St(!1),I=f();return St(E),function Pg(i,o,a,l){a>=i.data.length&&(i.data[a]=null,i.blueprint[a]=null),o[a]=l}(a,Re(),d,I),I}finally{tn(y)}}function zd(i,o,a){const l=i+20,d=Re(),f=function os(i,o){return i[o]}(d,l);return function rc(i,o){return i[1].data[o].pure}(d,l)?Ww(d,hr(),o,f.transform,a,f):f.transform(a)}function ic(i){return o=>{setTimeout(i,void 0,o)}}const _s=class q_ extends h.x{constructor(o=!1){super(),this.__isAsync=o}emit(o){super.next(o)}subscribe(o,a,l){var d,f,y;let E=o,I=a||(()=>null),C=l;if(o&&"object"==typeof o){const k=o;E=null===(d=k.next)||void 0===d?void 0:d.bind(k),I=null===(f=k.error)||void 0===f?void 0:f.bind(k),C=null===(y=k.complete)||void 0===y?void 0:y.bind(k)}this.__isAsync&&(I=ic(I),E&&(E=ic(E)),C&&(C=ic(C)));const M=super.subscribe({next:E,error:I,complete:C});return o instanceof L.w0&&o.add(M),M}};function K_(){return this._results[Vu()]()}class Z_{constructor(o=!1){this._emitDistinctChangesOnly=o,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const a=Vu(),l=Z_.prototype;l[a]||(l[a]=K_)}get changes(){return this._changes||(this._changes=new _s)}get(o){return this._results[o]}map(o){return this._results.map(o)}filter(o){return this._results.filter(o)}find(o){return this._results.find(o)}reduce(o,a){return this._results.reduce(o,a)}forEach(o){this._results.forEach(o)}some(o){return this._results.some(o)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(o,a){const l=this;l.dirty=!1;const d=xr(o);(this._changesDetected=!function gu(i,o,a){if(i.length!==o.length)return!1;for(let l=0;l<i.length;l++){let d=i[l],f=o[l];if(a&&(d=a(d),f=a(f)),f!==d)return!1}return!0}(l._results,d,a))&&(l._results=d,l.length=d.length,l.last=d[this.length-1],l.first=d[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;let sc=(()=>{class i{}return i.__NG_ELEMENT_ID__=Xw,i})();const Jw=sc,$T=class extends Jw{constructor(o,a,l){super(),this._declarationLView=o,this._declarationTContainer=a,this.elementRef=l}createEmbeddedView(o){const a=this._declarationTContainer.tViews,l=fd(this._declarationLView,a,o,16,null,a.declTNode,null,null,null,null);l[17]=this._declarationLView[this._declarationTContainer.index];const f=this._declarationLView[19];return null!==f&&(l[19]=f.createEmbeddedView(a)),Cl(a,l,o),new Ka(l)}};function Xw(){return Hf(wn(),Re())}function Hf(i,o){return 4&i.type?new $T(o,i,Ku(i,o)):null}let Wd=(()=>{class i{}return i.__NG_ELEMENT_ID__=HT,i})();function HT(){return oc(wn(),Re())}const eb=Wd,tb=class extends eb{constructor(o,a,l){super(),this._lContainer=o,this._hostTNode=a,this._hostLView=l}get element(){return Ku(this._hostTNode,this._hostLView)}get injector(){return new ji(this._hostTNode,this._hostLView)}get parentInjector(){const o=ni(this._hostTNode,this._hostLView);if(jc(o)){const a=Bi(o,this._hostLView),l=_n(o);return new ji(a[1].data[l+8],a)}return new ji(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(o){const a=Y_(this._lContainer);return null!==a&&a[o]||null}get length(){return this._lContainer.length-10}createEmbeddedView(o,a,l){const d=o.createEmbeddedView(a||{});return this.insert(d,l),d}createComponent(o,a,l,d,f){const y=o&&!function Ko(i){return"function"==typeof i}(o);let E;if(y)E=a;else{const k=a||{};E=k.index,l=k.injector,d=k.projectableNodes,f=k.ngModuleRef}const I=y?o:new Vf(at(o)),C=l||this.parentInjector;if(!f&&null==I.ngModule){const $=(y?C:this.parentInjector).get(Za,null);$&&(f=$)}const M=I.create(C,d,void 0,f);return this.insert(M.hostView,E),M}insert(o,a){const l=o._lView,d=l[1];if(function sl(i){return di(i[3])}(l)){const M=this.indexOf(o);if(-1!==M)this.detach(M);else{const k=l[3],$=new tb(k,k[6],k[3]);$.detach($.indexOf(o))}}const f=this._adjustIndex(a),y=this._lContainer;!function ld(i,o,a,l){const d=10+l,f=a.length;l>0&&(a[d-1][4]=o),l<f-10?(o[4]=a[d],mu(a,10+l,o)):(a.push(o),o[4]=null),o[3]=a;const y=o[17];null!==y&&a!==y&&function fD(i,o){const a=i[9];o[16]!==o[3][3][16]&&(i[2]=!0),null===a?i[9]=[o]:a.push(o)}(y,o);const E=o[19];null!==E&&E.insertView(i),o[2]|=128}(d,l,y,f);const E=eg(f,y),I=l[11],C=Jp(I,y[7]);return null!==C&&function AE(i,o,a,l,d,f){l[0]=d,l[6]=o,jh(i,l,a,1,d,f)}(d,y[6],I,l,C,E),o.attachToViewContainerRef(),mu(Q_(y),f,o),o}move(o,a){return this.insert(o,a)}indexOf(o){const a=Y_(this._lContainer);return null!==a?a.indexOf(o):-1}remove(o){const a=this._adjustIndex(o,-1),l=Yp(this._lContainer,a);l&&(Zo(Q_(this._lContainer),a),ME(l[1],l))}detach(o){const a=this._adjustIndex(o,-1),l=Yp(this._lContainer,a);return l&&null!=Zo(Q_(this._lContainer),a)?new Ka(l):null}_adjustIndex(o,a=0){return null==o?this.length+a:o}};function Y_(i){return i[8]}function Q_(i){return i[8]||(i[8]=[])}function oc(i,o){let a;const l=o[i.index];if(di(l))a=l;else{let d;if(8&i.type)d=hn(l);else{const f=o[11];d=f.createComment("");const y=cr(i,o);Mu(f,Jp(f,y),d,function gD(i,o){return yn(i)?i.nextSibling(o):o.nextSibling}(f,y),!1)}o[i.index]=a=Sy(l,o,d,i),nf(o,a)}return new tb(a,i,o)}class im{constructor(o){this.queryList=o,this.matches=null}clone(){return new im(this.queryList)}setDirty(){this.queryList.setDirty()}}class sm{constructor(o=[]){this.queries=o}createEmbeddedView(o){const a=o.queries;if(null!==a){const l=null!==o.contentQueries?o.contentQueries[0]:a.length,d=[];for(let f=0;f<l;f++){const y=a.getByIndex(f);d.push(this.queries[y.indexInDeclarationView].clone())}return new sm(d)}return null}insertView(o){this.dirtyQueriesWithMatches(o)}detachView(o){this.dirtyQueriesWithMatches(o)}dirtyQueriesWithMatches(o){for(let a=0;a<this.queries.length;a++)null!==rv(o,a).matches&&this.queries[a].setDirty()}}class ev{constructor(o,a,l=null){this.predicate=o,this.flags=a,this.read=l}}class tv{constructor(o=[]){this.queries=o}elementStart(o,a){for(let l=0;l<this.queries.length;l++)this.queries[l].elementStart(o,a)}elementEnd(o){for(let a=0;a<this.queries.length;a++)this.queries[a].elementEnd(o)}embeddedTView(o){let a=null;for(let l=0;l<this.length;l++){const d=null!==a?a.length:0,f=this.getByIndex(l).embeddedTView(o,d);f&&(f.indexInDeclarationView=l,null!==a?a.push(f):a=[f])}return null!==a?new tv(a):null}template(o,a){for(let l=0;l<this.queries.length;l++)this.queries[l].template(o,a)}getByIndex(o){return this.queries[o]}get length(){return this.queries.length}track(o){this.queries.push(o)}}class Gf{constructor(o,a=-1){this.metadata=o,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=a}elementStart(o,a){this.isApplyingToNode(a)&&this.matchTNode(o,a)}elementEnd(o){this._declarationNodeIndex===o.index&&(this._appliesToNextNode=!1)}template(o,a){this.elementStart(o,a)}embeddedTView(o,a){return this.isApplyingToNode(o)?(this.crossesNgTemplate=!0,this.addMatch(-o.index,a),new Gf(this.metadata)):null}isApplyingToNode(o){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const a=this._declarationNodeIndex;let l=o.parent;for(;null!==l&&8&l.type&&l.index!==a;)l=l.parent;return a===(null!==l?l.index:-1)}return this._appliesToNextNode}matchTNode(o,a){const l=this.metadata.predicate;if(Array.isArray(l))for(let d=0;d<l.length;d++){const f=l[d];this.matchTNodeWithReadOption(o,a,GT(a,f)),this.matchTNodeWithReadOption(o,a,pu(a,o,f,!1,!1))}else l===sc?4&a.type&&this.matchTNodeWithReadOption(o,a,-1):this.matchTNodeWithReadOption(o,a,pu(a,o,l,!1,!1))}matchTNodeWithReadOption(o,a,l){if(null!==l){const d=this.metadata.read;if(null!==d)if(d===Hd||d===Wd||d===sc&&4&a.type)this.addMatch(a.index,-2);else{const f=pu(a,o,d,!1,!1);null!==f&&this.addMatch(a.index,f)}else this.addMatch(a.index,l)}}addMatch(o,a){null===this.matches?this.matches=[o,a]:this.matches.push(o,a)}}function GT(i,o){const a=i.localNames;if(null!==a)for(let l=0;l<a.length;l+=2)if(a[l]===o)return a[l+1];return null}function zT(i,o,a,l){return-1===a?function nv(i,o){return 11&i.type?Ku(i,o):4&i.type?Hf(i,o):null}(o,i):-2===a?function WT(i,o,a){return a===Hd?Ku(o,i):a===sc?Hf(o,i):a===Wd?oc(o,i):void 0}(i,o,l):Ti(i,i[1],a,o)}function om(i,o,a,l){const d=o[19].queries[l];if(null===d.matches){const f=i.data,y=a.matches,E=[];for(let I=0;I<y.length;I+=2){const C=y[I];E.push(C<0?null:zT(o,f[C],y[I+1],a.metadata.read))}d.matches=E}return d.matches}function Dr(i,o,a,l){const d=i.queries.getByIndex(a),f=d.matches;if(null!==f){const y=om(i,o,d,a);for(let E=0;E<f.length;E+=2){const I=f[E];if(I>0)l.push(y[E/2]);else{const C=f[E+1],M=o[-I];for(let k=10;k<M.length;k++){const $=M[k];$[17]===$[3]&&Dr($[1],$,C,l)}if(null!==M[9]){const k=M[9];for(let $=0;$<k.length;$++){const ee=k[$];Dr(ee[1],ee,C,l)}}}}}return l}function nb(i){const o=Re(),a=qt(),l=Pc();kc(l+1);const d=rv(a,l);if(i.dirty&&Po(o)===(2==(2&d.metadata.flags))){if(null===d.matches)i.reset([]);else{const f=d.crossesNgTemplate?Dr(a,o,l,[]):om(a,o,d,l);i.reset(f,PT),i.notifyOnChanges()}return!0}return!1}function rb(i,o,a,l){const d=qt();if(d.firstCreatePass){const f=wn();(function am(i,o,a){null===i.queries&&(i.queries=new tv),i.queries.track(new Gf(o,a))})(d,new ev(o,a,l),f.index),function ob(i,o){const a=i.contentQueries||(i.contentQueries=[]);o!==(a.length?a[a.length-1]:-1)&&a.push(i.queries.length-1,o)}(d,i),2==(2&a)&&(d.staticContentQueries=!0)}!function sb(i,o,a){const l=new Z_(4==(4&a));yg(i,o,l,l.destroy),null===o[19]&&(o[19]=new sm),o[19].queries.push(new im(l))}(d,Re(),a)}function ib(){return function KT(i,o){return i[19].queries[o].queryList}(Re(),Pc())}function rv(i,o){return i.queries.getByIndex(o)}function Jd(...i){}const gm=new Fn("Application Initializer");let mm=(()=>{class i{constructor(a){this.appInits=a,this.resolve=Jd,this.reject=Jd,this.initialized=!1,this.done=!1,this.donePromise=new Promise((l,d)=>{this.resolve=l,this.reject=d})}runInitializers(){if(this.initialized)return;const a=[],l=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let d=0;d<this.appInits.length;d++){const f=this.appInits[d]();if(Je(f))a.push(f);else if(pf(f)){const y=new Promise((E,I)=>{f.subscribe({complete:E,error:I})});a.push(y)}}Promise.all(a).then(()=>{l()}).catch(d=>{this.reject(d)}),0===a.length&&l(),this.initialized=!0}}return i.\u0275fac=function(a){return new(a||i)(We(gm,8))},i.\u0275prov=nn({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const ym=new Fn("AppId",{providedIn:"root",factory:function _m(){return`${Ju()}${Ju()}${Ju()}`}});function Ju(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const Qa=new Fn("Platform Initializer"),gv=new Fn("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),uc=new Fn("appBootstrapListener");let wb=(()=>{class i{log(a){console.log(a)}warn(a){console.warn(a)}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=nn({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})();const mv=new Fn("LocaleId",{providedIn:"root",factory:()=>Mt(mv,pt.Optional|pt.SkipSelf)||function Xd(){return"undefined"!=typeof $localize&&$localize.locale||Zg}()}),tC=new Fn("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class yv{constructor(o,a){this.ngModuleFactory=o,this.componentFactories=a}}let nC=(()=>{class i{compileModuleSync(a){return new rm(a)}compileModuleAsync(a){return Promise.resolve(this.compileModuleSync(a))}compileModuleAndAllComponentsSync(a){const l=this.compileModuleSync(a),f=po($t(a).declarations).reduce((y,E)=>{const I=at(E);return I&&y.push(new Vf(I)),y},[]);return new yv(l,f)}compileModuleAndAllComponentsAsync(a){return Promise.resolve(this.compileModuleAndAllComponentsSync(a))}clearCache(){}clearCacheFor(a){}getModuleId(a){}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=nn({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const _v=(()=>Promise.resolve(0))();function vv(i){"undefined"==typeof Zone?_v.then(()=>{i&&i.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",i)}class Do{constructor({enableLongStackTrace:o=!1,shouldCoalesceEventChangeDetection:a=!1,shouldCoalesceRunChangeDetection:l=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new _s(!1),this.onMicrotaskEmpty=new _s(!1),this.onStable=new _s(!1),this.onError=new _s(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const d=this;d._nesting=0,d._outer=d._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(d._inner=d._inner.fork(new Zone.TaskTrackingZoneSpec)),o&&Zone.longStackTraceZoneSpec&&(d._inner=d._inner.fork(Zone.longStackTraceZoneSpec)),d.shouldCoalesceEventChangeDetection=!l&&a,d.shouldCoalesceRunChangeDetection=l,d.lastRequestAnimationFrameId=-1,d.nativeRequestAnimationFrame=function Cb(){let i=Wt.requestAnimationFrame,o=Wt.cancelAnimationFrame;if("undefined"!=typeof Zone&&i&&o){const a=i[Zone.__symbol__("OriginalDelegate")];a&&(i=a);const l=o[Zone.__symbol__("OriginalDelegate")];l&&(o=l)}return{nativeRequestAnimationFrame:i,nativeCancelAnimationFrame:o}}().nativeRequestAnimationFrame,function Mb(i){const o=()=>{!function Sb(i){i.isCheckStableRunning||-1!==i.lastRequestAnimationFrameId||(i.lastRequestAnimationFrameId=i.nativeRequestAnimationFrame.call(Wt,()=>{i.fakeTopEventTask||(i.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{i.lastRequestAnimationFrameId=-1,Ev(i),i.isCheckStableRunning=!0,vm(i),i.isCheckStableRunning=!1},void 0,()=>{},()=>{})),i.fakeTopEventTask.invoke()}),Ev(i))}(i)};i._inner=i._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(a,l,d,f,y,E)=>{try{return xb(i),a.invokeTask(d,f,y,E)}finally{(i.shouldCoalesceEventChangeDetection&&"eventTask"===f.type||i.shouldCoalesceRunChangeDetection)&&o(),Nb(i)}},onInvoke:(a,l,d,f,y,E,I)=>{try{return xb(i),a.invoke(d,f,y,E,I)}finally{i.shouldCoalesceRunChangeDetection&&o(),Nb(i)}},onHasTask:(a,l,d,f)=>{a.hasTask(d,f),l===d&&("microTask"==f.change?(i._hasPendingMicrotasks=f.microTask,Ev(i),vm(i)):"macroTask"==f.change&&(i.hasPendingMacrotasks=f.macroTask))},onHandleError:(a,l,d,f)=>(a.handleError(d,f),i.runOutsideAngular(()=>i.onError.emit(f)),!1)})}(d)}static isInAngularZone(){return"undefined"!=typeof Zone&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Do.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(Do.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(o,a,l){return this._inner.run(o,a,l)}runTask(o,a,l,d){const f=this._inner,y=f.scheduleEventTask("NgZoneEvent: "+d,o,Ab,Jd,Jd);try{return f.runTask(y,a,l)}finally{f.cancelTask(y)}}runGuarded(o,a,l){return this._inner.runGuarded(o,a,l)}runOutsideAngular(o){return this._outer.run(o)}}const Ab={};function vm(i){if(0==i._nesting&&!i.hasPendingMicrotasks&&!i.isStable)try{i._nesting++,i.onMicrotaskEmpty.emit(null)}finally{if(i._nesting--,!i.hasPendingMicrotasks)try{i.runOutsideAngular(()=>i.onStable.emit(null))}finally{i.isStable=!0}}}function Ev(i){i.hasPendingMicrotasks=!!(i._hasPendingMicrotasks||(i.shouldCoalesceEventChangeDetection||i.shouldCoalesceRunChangeDetection)&&-1!==i.lastRequestAnimationFrameId)}function xb(i){i._nesting++,i.isStable&&(i.isStable=!1,i.onUnstable.emit(null))}function Nb(i){i._nesting--,vm(i)}class iC{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new _s,this.onMicrotaskEmpty=new _s,this.onStable=new _s,this.onError=new _s}run(o,a,l){return o.apply(a,l)}runGuarded(o,a,l){return o.apply(a,l)}runOutsideAngular(o){return o()}runTask(o,a,l,d){return o.apply(a,l)}}let Em=(()=>{class i{constructor(a){this._ngZone=a,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),a.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Do.assertNotInAngularZone(),vv(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())vv(()=>{for(;0!==this._callbacks.length;){let a=this._callbacks.pop();clearTimeout(a.timeoutId),a.doneCb(this._didWork)}this._didWork=!1});else{let a=this.getPendingTasks();this._callbacks=this._callbacks.filter(l=>!l.updateCb||!l.updateCb(a)||(clearTimeout(l.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(a=>({source:a.source,creationLocation:a.creationLocation,data:a.data})):[]}addCallback(a,l,d){let f=-1;l&&l>0&&(f=setTimeout(()=>{this._callbacks=this._callbacks.filter(y=>y.timeoutId!==f),a(this._didWork,this.getPendingTasks())},l)),this._callbacks.push({doneCb:a,timeoutId:f,updateCb:d})}whenStable(a,l,d){if(d&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(a,l,d),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(a,l,d){return[]}}return i.\u0275fac=function(a){return new(a||i)(We(Do))},i.\u0275prov=nn({token:i,factory:i.\u0275fac}),i})(),wv=(()=>{class i{constructor(){this._applications=new Map,Yf.addToWindow(this)}registerApplication(a,l){this._applications.set(a,l)}unregisterApplication(a){this._applications.delete(a)}unregisterAllApplications(){this._applications.clear()}getTestability(a){return this._applications.get(a)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(a,l=!0){return Yf.findTestabilityInTree(this,a,l)}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=nn({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})();class bv{addToWindow(o){}findTestabilityInTree(o,a,l){return null}}function sC(i){Yf=i}let Yf=new bv,lc=null;const wm=new Fn("AllowMultipleToken"),Iv=new Fn("PlatformOnDestroy");class Tv{constructor(o,a){this.name=o,this.token=a}}function bm(i,o,a=[]){const l=`Platform: ${o}`,d=new Fn(l);return(f=[])=>{let y=Qf();if(!y||y.injector.get(wm,!1)){const E=[...a,...f,{provide:d,useValue:!0}];i?i(E):function uC(i){if(lc&&!lc.get(wm,!1))throw new Fe(400,"");lc=i;const o=i.get(Im),a=i.get(Qa,null);a&&a.forEach(l=>l())}(function Cv(i=[],o){return vo.create({name:o,providers:[{provide:_o,useValue:"platform"},{provide:Iv,useValue:()=>lc=null},...i]})}(E,l))}return function lC(i){const o=Qf();if(!o)throw new Fe(401,"");return o}()}}function Qf(){var i;return null!==(i=null==lc?void 0:lc.get(Im))&&void 0!==i?i:null}let Im=(()=>{class i{constructor(a){this._injector=a,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(a,l){const E=function Av(i,o){let a;return a="noop"===i?new iC:("zone.js"===i?void 0:i)||new Do({enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!!(null==o?void 0:o.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==o?void 0:o.ngZoneRunCoalescing)}),a}(l?l.ngZone:void 0,{ngZoneEventCoalescing:l&&l.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:l&&l.ngZoneRunCoalescing||!1}),I=[{provide:Do,useValue:E}];return E.run(()=>{const C=vo.create({providers:I,parent:this.injector,name:a.moduleType.name}),M=a.create(C),k=M.injector.get(zp,null);if(!k)throw new Fe(402,"");return E.runOutsideAngular(()=>{const $=E.onError.subscribe({next:ee=>{k.handleError(ee)}});M.onDestroy(()=>{Mv(this._modules,M),$.unsubscribe()})}),function eh(i,o,a){try{const l=a();return Je(l)?l.catch(d=>{throw o.runOutsideAngular(()=>i.handleError(d)),d}):l}catch(l){throw o.runOutsideAngular(()=>i.handleError(l)),l}}(k,E,()=>{const $=M.injector.get(mm);return $.runInitializers(),$.donePromise.then(()=>(function Qg(i){zt(i,"Expected localeId to be defined"),"string"==typeof i&&(fw=i.toLowerCase().replace(/_/g,"-"))}(M.injector.get(mv,Zg)||Zg),this._moduleDoBootstrap(M),M))})})}bootstrapModule(a,l=[]){const d=Sv({},l);return function Dv(i,o,a){const l=new rm(a);return Promise.resolve(l)}(0,0,a).then(f=>this.bootstrapModuleFactory(f,d))}_moduleDoBootstrap(a){const l=a.injector.get(Jf);if(a._bootstrapComponents.length>0)a._bootstrapComponents.forEach(d=>l.bootstrap(d));else{if(!a.instance.ngDoBootstrap)throw new Fe(403,"");a.instance.ngDoBootstrap(l)}this._modules.push(a)}onDestroy(a){this._destroyListeners.push(a)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Fe(404,"");this._modules.slice().forEach(l=>l.destroy()),this._destroyListeners.forEach(l=>l());const a=this._injector.get(Iv,null);null==a||a(),this._destroyed=!0}get destroyed(){return this._destroyed}}return i.\u0275fac=function(a){return new(a||i)(We(vo))},i.\u0275prov=nn({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})();function Sv(i,o){return Array.isArray(o)?o.reduce(Sv,i):Object.assign(Object.assign({},i),o)}let Jf=(()=>{class i{constructor(a,l,d,f){this._zone=a,this._injector=l,this._exceptionHandler=d,this._initStatus=f,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const y=new R.y(I=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{I.next(this._stable),I.complete()})}),E=new R.y(I=>{let C;this._zone.runOutsideAngular(()=>{C=this._zone.onStable.subscribe(()=>{Do.assertNotInAngularZone(),vv(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,I.next(!0))})})});const M=this._zone.onUnstable.subscribe(()=>{Do.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{I.next(!1)}))});return()=>{C.unsubscribe(),M.unsubscribe()}});this.isStable=(0,oe.T)(y,E.pipe((0,ae.B)()))}bootstrap(a,l){if(!this._initStatus.done)throw new Fe(405,"");let d;d=a instanceof Of?a:this._injector.get(Ff).resolveComponentFactory(a),this.componentTypes.push(d.componentType);const f=function aC(i){return i.isBoundToModule}(d)?void 0:this._injector.get(Za),E=d.create(vo.NULL,[],l||d.selector,f),I=E.location.nativeElement,C=E.injector.get(Em,null),M=C&&E.injector.get(wv);return C&&M&&M.registerApplication(I,C),E.onDestroy(()=>{this.detachView(E.hostView),Mv(this.components,E),M&&M.unregisterApplication(I)}),this._loadComponent(E),E}tick(){if(this._runningTick)throw new Fe(101,"");try{this._runningTick=!0;for(let a of this._views)a.detectChanges()}catch(a){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(a))}finally{this._runningTick=!1}}attachView(a){const l=a;this._views.push(l),l.attachToAppRef(this)}detachView(a){const l=a;Mv(this._views,l),l.detachFromAppRef()}_loadComponent(a){this.attachView(a.hostView),this.tick(),this.components.push(a),this._injector.get(uc,[]).concat(this._bootstrapListeners).forEach(d=>d(a))}ngOnDestroy(){this._views.slice().forEach(a=>a.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return i.\u0275fac=function(a){return new(a||i)(We(Do),We(vo),We(zp),We(mm))},i.\u0275prov=nn({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function Mv(i,o){const a=i.indexOf(o);a>-1&&i.splice(a,1)}let Tm=!0,Rb=!1;function xv(){return Rb=!0,Tm}function cC(){if(Rb)throw new Error("Cannot enable prod mode after platform setup.");Tm=!1}let Nv=(()=>{class i{}return i.__NG_ELEMENT_ID__=dC,i})();function dC(i){return function Rv(i,o,a){if(tu(i)&&!a){const l=dr(i.index,o);return new Ka(l,l)}return 47&i.type?new Ka(o[16],o):null}(wn(),Re(),16==(16&i))}class Vb{constructor(){}supports(o){return bd(o)}create(o){return new Lv(o)}}const Ub=(i,o)=>o;class Lv{constructor(o){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=o||Ub}forEachItem(o){let a;for(a=this._itHead;null!==a;a=a._next)o(a)}forEachOperation(o){let a=this._itHead,l=this._removalsHead,d=0,f=null;for(;a||l;){const y=!l||a&&a.currentIndex<Nm(l,d,f)?a:l,E=Nm(y,d,f),I=y.currentIndex;if(y===l)d--,l=l._nextRemoved;else if(a=a._next,null==y.previousIndex)d++;else{f||(f=[]);const C=E-d,M=I-d;if(C!=M){for(let $=0;$<C;$++){const ee=$<f.length?f[$]:f[$]=0,we=ee+$;M<=we&&we<C&&(f[$]=ee+1)}f[y.previousIndex]=M-C}}E!==I&&o(y,E,I)}}forEachPreviousItem(o){let a;for(a=this._previousItHead;null!==a;a=a._nextPrevious)o(a)}forEachAddedItem(o){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)o(a)}forEachMovedItem(o){let a;for(a=this._movesHead;null!==a;a=a._nextMoved)o(a)}forEachRemovedItem(o){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)o(a)}forEachIdentityChange(o){let a;for(a=this._identityChangesHead;null!==a;a=a._nextIdentityChange)o(a)}diff(o){if(null==o&&(o=[]),!bd(o))throw new Fe(900,"");return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let d,f,y,a=this._itHead,l=!1;if(Array.isArray(o)){this.length=o.length;for(let E=0;E<this.length;E++)f=o[E],y=this._trackByFn(E,f),null!==a&&Object.is(a.trackById,y)?(l&&(a=this._verifyReinsertion(a,f,y,E)),Object.is(a.item,f)||this._addIdentityChange(a,f)):(a=this._mismatch(a,f,y,E),l=!0),a=a._next}else d=0,function Ng(i,o){if(Array.isArray(i))for(let a=0;a<i.length;a++)o(i[a]);else{const a=i[Vu()]();let l;for(;!(l=a.next()).done;)o(l.value)}}(o,E=>{y=this._trackByFn(d,E),null!==a&&Object.is(a.trackById,y)?(l&&(a=this._verifyReinsertion(a,E,y,d)),Object.is(a.item,E)||this._addIdentityChange(a,E)):(a=this._mismatch(a,E,y,d),l=!0),a=a._next,d++}),this.length=d;return this._truncate(a),this.collection=o,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let o;for(o=this._previousItHead=this._itHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._additionsHead;null!==o;o=o._nextAdded)o.previousIndex=o.currentIndex;for(this._additionsHead=this._additionsTail=null,o=this._movesHead;null!==o;o=o._nextMoved)o.previousIndex=o.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(o,a,l,d){let f;return null===o?f=this._itTail:(f=o._prev,this._remove(o)),null!==(o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null))?(Object.is(o.item,a)||this._addIdentityChange(o,a),this._reinsertAfter(o,f,d)):null!==(o=null===this._linkedRecords?null:this._linkedRecords.get(l,d))?(Object.is(o.item,a)||this._addIdentityChange(o,a),this._moveAfter(o,f,d)):o=this._addAfter(new Bb(a,l),f,d),o}_verifyReinsertion(o,a,l,d){let f=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null);return null!==f?o=this._reinsertAfter(f,o._prev,d):o.currentIndex!=d&&(o.currentIndex=d,this._addToMoves(o,d)),o}_truncate(o){for(;null!==o;){const a=o._next;this._addToRemovals(this._unlink(o)),o=a}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(o,a,l){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(o);const d=o._prevRemoved,f=o._nextRemoved;return null===d?this._removalsHead=f:d._nextRemoved=f,null===f?this._removalsTail=d:f._prevRemoved=d,this._insertAfter(o,a,l),this._addToMoves(o,l),o}_moveAfter(o,a,l){return this._unlink(o),this._insertAfter(o,a,l),this._addToMoves(o,l),o}_addAfter(o,a,l){return this._insertAfter(o,a,l),this._additionsTail=null===this._additionsTail?this._additionsHead=o:this._additionsTail._nextAdded=o,o}_insertAfter(o,a,l){const d=null===a?this._itHead:a._next;return o._next=d,o._prev=a,null===d?this._itTail=o:d._prev=o,null===a?this._itHead=o:a._next=o,null===this._linkedRecords&&(this._linkedRecords=new xm),this._linkedRecords.put(o),o.currentIndex=l,o}_remove(o){return this._addToRemovals(this._unlink(o))}_unlink(o){null!==this._linkedRecords&&this._linkedRecords.remove(o);const a=o._prev,l=o._next;return null===a?this._itHead=l:a._next=l,null===l?this._itTail=a:l._prev=a,o}_addToMoves(o,a){return o.previousIndex===a||(this._movesTail=null===this._movesTail?this._movesHead=o:this._movesTail._nextMoved=o),o}_addToRemovals(o){return null===this._unlinkedRecords&&(this._unlinkedRecords=new xm),this._unlinkedRecords.put(o),o.currentIndex=null,o._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=o,o._prevRemoved=null):(o._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=o),o}_addIdentityChange(o,a){return o.item=a,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=o:this._identityChangesTail._nextIdentityChange=o,o}}class Bb{constructor(o,a){this.item=o,this.trackById=a,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class Vv{constructor(){this._head=null,this._tail=null}add(o){null===this._head?(this._head=this._tail=o,o._nextDup=null,o._prevDup=null):(this._tail._nextDup=o,o._prevDup=this._tail,o._nextDup=null,this._tail=o)}get(o,a){let l;for(l=this._head;null!==l;l=l._nextDup)if((null===a||a<=l.currentIndex)&&Object.is(l.trackById,o))return l;return null}remove(o){const a=o._prevDup,l=o._nextDup;return null===a?this._head=l:a._nextDup=l,null===l?this._tail=a:l._prevDup=a,null===this._head}}class xm{constructor(){this.map=new Map}put(o){const a=o.trackById;let l=this.map.get(a);l||(l=new Vv,this.map.set(a,l)),l.add(o)}get(o,a){const d=this.map.get(o);return d?d.get(o,a):null}remove(o){const a=o.trackById;return this.map.get(a).remove(o)&&this.map.delete(a),o}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function Nm(i,o,a){const l=i.previousIndex;if(null===l)return l;let d=0;return a&&l<a.length&&(d=a[l]),l+o+d}class tp{constructor(){}supports(o){return o instanceof Map||Zy(o)}create(){return new Uv}}class Uv{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(o){let a;for(a=this._mapHead;null!==a;a=a._next)o(a)}forEachPreviousItem(o){let a;for(a=this._previousMapHead;null!==a;a=a._nextPrevious)o(a)}forEachChangedItem(o){let a;for(a=this._changesHead;null!==a;a=a._nextChanged)o(a)}forEachAddedItem(o){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)o(a)}forEachRemovedItem(o){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)o(a)}diff(o){if(o){if(!(o instanceof Map||Zy(o)))throw new Fe(900,"")}else o=new Map;return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let a=this._mapHead;if(this._appendAfter=null,this._forEach(o,(l,d)=>{if(a&&a.key===d)this._maybeAddToChanges(a,l),this._appendAfter=a,a=a._next;else{const f=this._getOrCreateRecordForKey(d,l);a=this._insertBeforeOrAppend(a,f)}}),a){a._prev&&(a._prev._next=null),this._removalsHead=a;for(let l=a;null!==l;l=l._nextRemoved)l===this._mapHead&&(this._mapHead=null),this._records.delete(l.key),l._nextRemoved=l._next,l.previousValue=l.currentValue,l.currentValue=null,l._prev=null,l._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(o,a){if(o){const l=o._prev;return a._next=o,a._prev=l,o._prev=a,l&&(l._next=a),o===this._mapHead&&(this._mapHead=a),this._appendAfter=o,o}return this._appendAfter?(this._appendAfter._next=a,a._prev=this._appendAfter):this._mapHead=a,this._appendAfter=a,null}_getOrCreateRecordForKey(o,a){if(this._records.has(o)){const d=this._records.get(o);this._maybeAddToChanges(d,a);const f=d._prev,y=d._next;return f&&(f._next=y),y&&(y._prev=f),d._next=null,d._prev=null,d}const l=new jb(o);return this._records.set(o,l),l.currentValue=a,this._addToAdditions(l),l}_reset(){if(this.isDirty){let o;for(this._previousMapHead=this._mapHead,o=this._previousMapHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._changesHead;null!==o;o=o._nextChanged)o.previousValue=o.currentValue;for(o=this._additionsHead;null!=o;o=o._nextAdded)o.previousValue=o.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(o,a){Object.is(a,o.currentValue)||(o.previousValue=o.currentValue,o.currentValue=a,this._addToChanges(o))}_addToAdditions(o){null===this._additionsHead?this._additionsHead=this._additionsTail=o:(this._additionsTail._nextAdded=o,this._additionsTail=o)}_addToChanges(o){null===this._changesHead?this._changesHead=this._changesTail=o:(this._changesTail._nextChanged=o,this._changesTail=o)}_forEach(o,a){o instanceof Map?o.forEach(a):Object.keys(o).forEach(l=>a(o[l],l))}}class jb{constructor(o){this.key=o,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function Rm(){return new Om([new Vb])}let Om=(()=>{class i{constructor(a){this.factories=a}static create(a,l){if(null!=l){const d=l.factories.slice();a=a.concat(d)}return new i(a)}static extend(a){return{provide:i,useFactory:l=>i.create(a,l||Rm()),deps:[[i,new ri,new zr]]}}find(a){const l=this.factories.find(d=>d.supports(a));if(null!=l)return l;throw new Fe(901,"")}}return i.\u0275prov=nn({token:i,providedIn:"root",factory:Rm}),i})();function cc(){return new np([new tp])}let np=(()=>{class i{constructor(a){this.factories=a}static create(a,l){if(l){const d=l.factories.slice();a=a.concat(d)}return new i(a)}static extend(a){return{provide:i,useFactory:l=>i.create(a,l||cc()),deps:[[i,new ri,new zr]]}}find(a){const l=this.factories.find(f=>f.supports(a));if(l)return l;throw new Fe(901,"")}}return i.\u0275prov=nn({token:i,providedIn:"root",factory:cc}),i})();const vC=bm(null,"core",[]);let Hb=(()=>{class i{constructor(a){}}return i.\u0275fac=function(a){return new(a||i)(We(Jf))},i.\u0275mod=le({type:i}),i.\u0275inj=en({}),i})()},3942:(rt,De,O)=>{O.d(De,{Z:()=>Fe});var h=O(2090),L=O(4859),R=O(9681),oe=O(1877);class ae{constructor(ge,Te){this._delegate=ge,this.firebase=Te,(0,R._addComponent)(ge,new L.wA("app-compat",()=>this,"PUBLIC")),this.container=ge.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(ge){this._delegate.automaticDataCollectionEnabled=ge}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(ge=>{this._delegate.checkDestroyed(),ge()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,R.deleteApp)(this._delegate)))}_getService(ge,Te=R._DEFAULT_ENTRY_NAME){var qe;this._delegate.checkDestroyed();const ze=this._delegate.container.getProvider(ge);return!ze.isInitialized()&&"EXPLICIT"===(null===(qe=ze.getComponent())||void 0===qe?void 0:qe.instantiationMode)&&ze.initialize(),ze.getImmediate({identifier:Te})}_removeServiceInstance(ge,Te=R._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(ge).clearInstance(Te)}_addComponent(ge){(0,R._addComponent)(this._delegate,ge)}_addOrOverwriteComponent(ge){(0,R._addOrOverwriteComponent)(this._delegate,ge)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const de=new h.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),H=function ye(){const He=function ue(He){const ge={},Te={__esModule:!0,initializeApp:function Me(ne,he={}){const Ie=R.initializeApp(ne,he);if((0,h.r3)(ge,Ie.name))return ge[Ie.name];const Z=new He(Ie,Te);return ge[Ie.name]=Z,Z},app:ze,registerVersion:R.registerVersion,setLogLevel:R.setLogLevel,onLog:R.onLog,apps:null,SDK_VERSION:R.SDK_VERSION,INTERNAL:{registerComponent:function be(ne){const he=ne.name,Ie=he.replace("-compat","");if(R._registerComponent(ne)&&"PUBLIC"===ne.type){const Z=(re=ze())=>{if("function"!=typeof re[Ie])throw de.create("invalid-app-argument",{appName:he});return re[Ie]()};void 0!==ne.serviceProps&&(0,h.ZB)(Z,ne.serviceProps),Te[Ie]=Z,He.prototype[Ie]=function(...re){return this._getService.bind(this,he).apply(this,ne.multipleInstances?re:[])}}return"PUBLIC"===ne.type?Te[Ie]:null},removeApp:function qe(ne){delete ge[ne]},useAsService:function Ze(ne,he){return"serverAuth"===he?null:he},modularAPIs:R}};function ze(ne){if(!(0,h.r3)(ge,ne=ne||R._DEFAULT_ENTRY_NAME))throw de.create("no-app",{appName:ne});return ge[ne]}return Te.default=Te,Object.defineProperty(Te,"apps",{get:function xe(){return Object.keys(ge).map(ne=>ge[ne])}}),ze.App=He,Te}(ae);return He.INTERNAL=Object.assign(Object.assign({},He.INTERNAL),{createFirebaseNamespace:ye,extendNamespace:function ge(Te){(0,h.ZB)(He,Te)},createSubscribe:h.ne,ErrorFactory:h.LL,deepExtend:h.ZB}),He}(),B=new oe.Yd("@firebase/app-compat");if((0,h.jU)()&&void 0!==self.firebase){B.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const He=self.firebase.SDK_VERSION;He&&He.indexOf("LITE")>=0&&B.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Fe=H;!function Se(He){(0,R.registerVersion)("@firebase/app-compat","0.1.26",He)}()},9681:(rt,De,O)=>{O.r(De),O.d(De,{FirebaseError:()=>oe.ZR,SDK_VERSION:()=>ui,_DEFAULT_ENTRY_NAME:()=>zt,_addComponent:()=>fn,_addOrOverwriteComponent:()=>nn,_apps:()=>ln,_clearComponents:()=>Ri,_components:()=>Rn,_getProvider:()=>en,_registerComponent:()=>jt,_removeServiceInstance:()=>In,deleteApp:()=>pt,getApp:()=>jn,getApps:()=>Pi,initializeApp:()=>wi,onLog:()=>tn,registerVersion:()=>En,setLogLevel:()=>Cr});var h=O(5861),L=O(4859),R=O(1877),oe=O(2090),ae=O(8766);class me{constructor(X){this.container=X}getPlatformInfoString(){return this.container.getProviders().map(Pe=>{if(function de(j){const X=j.getComponent();return"VERSION"===(null==X?void 0:X.type)}(Pe)){const tt=Pe.getImmediate();return`${tt.library}/${tt.version}`}return null}).filter(Pe=>Pe).join(" ")}}const ue="@firebase/app",H=new R.Yd("@firebase/app"),zt="[DEFAULT]",Ye={[ue]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},ln=new Map,Rn=new Map;function fn(j,X){try{j.container.addComponent(X)}catch(Pe){H.debug(`Component ${X.name} failed to register with FirebaseApp ${j.name}`,Pe)}}function nn(j,X){j.container.addOrOverwriteComponent(X)}function jt(j){const X=j.name;if(Rn.has(X))return H.debug(`There were multiple attempts to register component ${X}.`),!1;Rn.set(X,j);for(const Pe of ln.values())fn(Pe,j);return!0}function en(j,X){const Pe=j.container.getProvider("heartbeat").getImmediate({optional:!0});return Pe&&Pe.triggerHeartbeat(),j.container.getProvider(X)}function In(j,X,Pe=zt){en(j,X).clearInstance(Pe)}function Ri(){Rn.clear()}const Cn=new oe.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}."});class Oi{constructor(X,Pe,tt){this._isDeleted=!1,this._options=Object.assign({},X),this._config=Object.assign({},Pe),this._name=Pe.name,this._automaticDataCollectionEnabled=Pe.automaticDataCollectionEnabled,this._container=tt,this.container.addComponent(new L.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(X){this.checkDestroyed(),this._automaticDataCollectionEnabled=X}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(X){this._isDeleted=X}checkDestroyed(){if(this.isDeleted)throw Cn.create("app-deleted",{appName:this._name})}}const ui="9.8.2";function wi(j,X={}){"object"!=typeof X&&(X={name:X});const Pe=Object.assign({name:zt,automaticDataCollectionEnabled:!1},X),tt=Pe.name;if("string"!=typeof tt||!tt)throw Cn.create("bad-app-name",{appName:String(tt)});const ht=ln.get(tt);if(ht){if((0,oe.vZ)(j,ht.options)&&(0,oe.vZ)(Pe,ht.config))return ht;throw Cn.create("duplicate-app",{appName:tt})}const Pt=new L.H0(tt);for(const It of Rn.values())Pt.addComponent(It);const on=new Oi(j,Pe,Pt);return ln.set(tt,on),on}function jn(j=zt){const X=ln.get(j);if(!X)throw Cn.create("no-app",{appName:j});return X}function Pi(){return Array.from(ln.values())}function pt(j){return Lr.apply(this,arguments)}function Lr(){return(Lr=(0,h.Z)(function*(j){const X=j.name;ln.has(X)&&(ln.delete(X),yield Promise.all(j.container.getProviders().map(Pe=>Pe.delete())),j.isDeleted=!0)})).apply(this,arguments)}function En(j,X,Pe){var tt;let ht=null!==(tt=Ye[j])&&void 0!==tt?tt:j;Pe&&(ht+=`-${Pe}`);const Pt=ht.match(/\s|\//),on=X.match(/\s|\//);if(Pt||on){const It=[`Unable to register library "${ht}" with version "${X}":`];return Pt&&It.push(`library name "${ht}" contains illegal characters (whitespace or "/")`),Pt&&on&&It.push("and"),on&&It.push(`version name "${X}" contains illegal characters (whitespace or "/")`),void H.warn(It.join(" "))}jt(new L.wA(`${ht}-version`,()=>({library:ht,version:X}),"VERSION"))}function tn(j,X){if(null!==j&&"function"!=typeof j)throw Cn.create("invalid-log-argument");(0,R.Am)(j,X)}function Cr(j){(0,R.Ub)(j)}const Dn="firebase-heartbeat-store";let ar=null;function Cs(){return ar||(ar=(0,ae.X3)("firebase-heartbeat-database",1,{upgrade:(j,X)=>{0===X&&j.createObjectStore(Dn)}}).catch(j=>{throw Cn.create("storage-open",{originalErrorMessage:j.message})})),ar}function lt(){return(lt=(0,h.Z)(function*(j){try{return(yield Cs()).transaction(Dn).objectStore(Dn).get(ci(j))}catch(X){throw Cn.create("storage-get",{originalErrorMessage:X.message})}})).apply(this,arguments)}function it(j,X){return li.apply(this,arguments)}function li(){return(li=(0,h.Z)(function*(j,X){try{const tt=(yield Cs()).transaction(Dn,"readwrite");return yield tt.objectStore(Dn).put(X,ci(j)),tt.done}catch(Pe){throw Cn.create("storage-set",{originalErrorMessage:Pe.message})}})).apply(this,arguments)}function ci(j){return`${j.name}!${j.options.appId}`}class On{constructor(X){this.container=X,this._heartbeatsCache=null;const Pe=this.container.getProvider("app").getImmediate();this._storage=new G(Pe),this._heartbeatsCachePromise=this._storage.read().then(tt=>(this._heartbeatsCache=tt,tt))}triggerHeartbeat(){var X=this;return(0,h.Z)(function*(){const tt=X.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),ht=cn();if(null===X._heartbeatsCache&&(X._heartbeatsCache=yield X._heartbeatsCachePromise),X._heartbeatsCache.lastSentHeartbeatDate!==ht&&!X._heartbeatsCache.heartbeats.some(Pt=>Pt.date===ht))return X._heartbeatsCache.heartbeats.push({date:ht,agent:tt}),X._heartbeatsCache.heartbeats=X._heartbeatsCache.heartbeats.filter(Pt=>{const on=new Date(Pt.date).valueOf();return Date.now()-on<=2592e6}),X._storage.overwrite(X._heartbeatsCache)})()}getHeartbeatsHeader(){var X=this;return(0,h.Z)(function*(){if(null===X._heartbeatsCache&&(yield X._heartbeatsCachePromise),null===X._heartbeatsCache||0===X._heartbeatsCache.heartbeats.length)return"";const Pe=cn(),{heartbeatsToSend:tt,unsentEntries:ht}=function U(j,X=1024){const Pe=[];let tt=j.slice();for(const ht of j){const Pt=Pe.find(on=>on.agent===ht.agent);if(Pt){if(Pt.dates.push(ht.date),W(Pe)>X){Pt.dates.pop();break}}else if(Pe.push({agent:ht.agent,dates:[ht.date]}),W(Pe)>X){Pe.pop();break}tt=tt.slice(1)}return{heartbeatsToSend:Pe,unsentEntries:tt}}(X._heartbeatsCache.heartbeats),Pt=(0,oe.L)(JSON.stringify({version:2,heartbeats:tt}));return X._heartbeatsCache.lastSentHeartbeatDate=Pe,ht.length>0?(X._heartbeatsCache.heartbeats=ht,yield X._storage.overwrite(X._heartbeatsCache)):(X._heartbeatsCache.heartbeats=[],X._storage.overwrite(X._heartbeatsCache)),Pt})()}}function cn(){return(new Date).toISOString().substring(0,10)}class G{constructor(X){this.app=X,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,h.Z)(function*(){return!!(0,oe.hl)()&&(0,oe.eu)().then(()=>!0).catch(()=>!1)})()}read(){var X=this;return(0,h.Z)(function*(){return(yield X._canUseIndexedDBPromise)&&(yield function Zt(j){return lt.apply(this,arguments)}(X.app))||{heartbeats:[]}})()}overwrite(X){var Pe=this;return(0,h.Z)(function*(){var tt;if(yield Pe._canUseIndexedDBPromise){const Pt=yield Pe.read();return it(Pe.app,{lastSentHeartbeatDate:null!==(tt=X.lastSentHeartbeatDate)&&void 0!==tt?tt:Pt.lastSentHeartbeatDate,heartbeats:X.heartbeats})}})()}add(X){var Pe=this;return(0,h.Z)(function*(){var tt;if(yield Pe._canUseIndexedDBPromise){const Pt=yield Pe.read();return it(Pe.app,{lastSentHeartbeatDate:null!==(tt=X.lastSentHeartbeatDate)&&void 0!==tt?tt:Pt.lastSentHeartbeatDate,heartbeats:[...Pt.heartbeats,...X.heartbeats]})}})()}}function W(j){return(0,oe.L)(JSON.stringify({version:2,heartbeats:j})).length}!function Ee(j){jt(new L.wA("platform-logger",X=>new me(X),"PRIVATE")),jt(new L.wA("heartbeat",X=>new On(X),"PRIVATE")),En(ue,"0.7.25",j),En(ue,"0.7.25","esm2017"),En("fire-js","")}("")},4859:(rt,De,O)=>{O.d(De,{H0:()=>ue,wA:()=>R});var h=O(5861),L=O(2090);class R{constructor(H,B,ie){this.name=H,this.instanceFactory=B,this.type=ie,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(H){return this.instantiationMode=H,this}setMultipleInstances(H){return this.multipleInstances=H,this}setServiceProps(H){return this.serviceProps=H,this}setInstanceCreatedCallback(H){return this.onInstanceCreated=H,this}}const oe="[DEFAULT]";class ae{constructor(H,B){this.name=H,this.container=B,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(H){const B=this.normalizeInstanceIdentifier(H);if(!this.instancesDeferred.has(B)){const ie=new L.BH;if(this.instancesDeferred.set(B,ie),this.isInitialized(B)||this.shouldAutoInitialize())try{const Ke=this.getOrInitializeService({instanceIdentifier:B});Ke&&ie.resolve(Ke)}catch(Ke){}}return this.instancesDeferred.get(B).promise}getImmediate(H){var B;const ie=this.normalizeInstanceIdentifier(null==H?void 0:H.identifier),Ke=null!==(B=null==H?void 0:H.optional)&&void 0!==B&&B;if(!this.isInitialized(ie)&&!this.shouldAutoInitialize()){if(Ke)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:ie})}catch(Se){if(Ke)return null;throw Se}}getComponent(){return this.component}setComponent(H){if(H.name!==this.name)throw Error(`Mismatching Component ${H.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=H,this.shouldAutoInitialize()){if(function de(ye){return"EAGER"===ye.instantiationMode}(H))try{this.getOrInitializeService({instanceIdentifier:oe})}catch(B){}for(const[B,ie]of this.instancesDeferred.entries()){const Ke=this.normalizeInstanceIdentifier(B);try{const Se=this.getOrInitializeService({instanceIdentifier:Ke});ie.resolve(Se)}catch(Se){}}}}clearInstance(H=oe){this.instancesDeferred.delete(H),this.instancesOptions.delete(H),this.instances.delete(H)}delete(){var H=this;return(0,h.Z)(function*(){const B=Array.from(H.instances.values());yield Promise.all([...B.filter(ie=>"INTERNAL"in ie).map(ie=>ie.INTERNAL.delete()),...B.filter(ie=>"_delete"in ie).map(ie=>ie._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(H=oe){return this.instances.has(H)}getOptions(H=oe){return this.instancesOptions.get(H)||{}}initialize(H={}){const{options:B={}}=H,ie=this.normalizeInstanceIdentifier(H.instanceIdentifier);if(this.isInitialized(ie))throw Error(`${this.name}(${ie}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const Ke=this.getOrInitializeService({instanceIdentifier:ie,options:B});for(const[Se,Fe]of this.instancesDeferred.entries())ie===this.normalizeInstanceIdentifier(Se)&&Fe.resolve(Ke);return Ke}onInit(H,B){var ie;const Ke=this.normalizeInstanceIdentifier(B),Se=null!==(ie=this.onInitCallbacks.get(Ke))&&void 0!==ie?ie:new Set;Se.add(H),this.onInitCallbacks.set(Ke,Se);const Fe=this.instances.get(Ke);return Fe&&H(Fe,Ke),()=>{Se.delete(H)}}invokeOnInitCallbacks(H,B){const ie=this.onInitCallbacks.get(B);if(ie)for(const Ke of ie)try{Ke(H,B)}catch(Se){}}getOrInitializeService({instanceIdentifier:H,options:B={}}){let ie=this.instances.get(H);if(!ie&&this.component&&(ie=this.component.instanceFactory(this.container,{instanceIdentifier:(ye=H,ye===oe?void 0:ye),options:B}),this.instances.set(H,ie),this.instancesOptions.set(H,B),this.invokeOnInitCallbacks(ie,H),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,H,ie)}catch(Ke){}var ye;return ie||null}normalizeInstanceIdentifier(H=oe){return this.component?this.component.multipleInstances?H:oe:H}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class ue{constructor(H){this.name=H,this.providers=new Map}addComponent(H){const B=this.getProvider(H.name);if(B.isComponentSet())throw new Error(`Component ${H.name} has already been registered with ${this.name}`);B.setComponent(H)}addOrOverwriteComponent(H){this.getProvider(H.name).isComponentSet()&&this.providers.delete(H.name),this.addComponent(H)}getProvider(H){if(this.providers.has(H))return this.providers.get(H);const B=new ae(H,this);return this.providers.set(H,B),B}getProviders(){return Array.from(this.providers.values())}}},1877:(rt,De,O)=>{O.d(De,{Am:()=>ye,Ub:()=>ue,Yd:()=>de,in:()=>L});const h=[];var L=(()=>{return(H=L||(L={}))[H.DEBUG=0]="DEBUG",H[H.VERBOSE=1]="VERBOSE",H[H.INFO=2]="INFO",H[H.WARN=3]="WARN",H[H.ERROR=4]="ERROR",H[H.SILENT=5]="SILENT",L;var H})();const R={debug:L.DEBUG,verbose:L.VERBOSE,info:L.INFO,warn:L.WARN,error:L.ERROR,silent:L.SILENT},oe=L.INFO,ae={[L.DEBUG]:"log",[L.VERBOSE]:"log",[L.INFO]:"info",[L.WARN]:"warn",[L.ERROR]:"error"},me=(H,B,...ie)=>{if(B<H.logLevel)return;const Ke=(new Date).toISOString(),Se=ae[B];if(!Se)throw new Error(`Attempted to log a message with an invalid logType (value: ${B})`);console[Se](`[${Ke}]  ${H.name}:`,...ie)};class de{constructor(B){this.name=B,this._logLevel=oe,this._logHandler=me,this._userLogHandler=null,h.push(this)}get logLevel(){return this._logLevel}set logLevel(B){if(!(B in L))throw new TypeError(`Invalid value "${B}" assigned to \`logLevel\``);this._logLevel=B}setLogLevel(B){this._logLevel="string"==typeof B?R[B]:B}get logHandler(){return this._logHandler}set logHandler(B){if("function"!=typeof B)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=B}get userLogHandler(){return this._userLogHandler}set userLogHandler(B){this._userLogHandler=B}debug(...B){this._userLogHandler&&this._userLogHandler(this,L.DEBUG,...B),this._logHandler(this,L.DEBUG,...B)}log(...B){this._userLogHandler&&this._userLogHandler(this,L.VERBOSE,...B),this._logHandler(this,L.VERBOSE,...B)}info(...B){this._userLogHandler&&this._userLogHandler(this,L.INFO,...B),this._logHandler(this,L.INFO,...B)}warn(...B){this._userLogHandler&&this._userLogHandler(this,L.WARN,...B),this._logHandler(this,L.WARN,...B)}error(...B){this._userLogHandler&&this._userLogHandler(this,L.ERROR,...B),this._logHandler(this,L.ERROR,...B)}}function ue(H){h.forEach(B=>{B.setLogLevel(H)})}function ye(H,B){for(const ie of h){let Ke=null;B&&B.level&&(Ke=R[B.level]),ie.userLogHandler=null===H?null:(Se,Fe,...He)=>{const ge=He.map(Te=>{if(null==Te)return null;if("string"==typeof Te)return Te;if("number"==typeof Te||"boolean"==typeof Te)return Te.toString();if(Te instanceof Error)return Te.message;try{return JSON.stringify(Te)}catch(qe){return null}}).filter(Te=>Te).join(" ");Fe>=(null!=Ke?Ke:Se.logLevel)&&H({level:L[Fe].toLowerCase(),message:ge,args:He,type:Se.name})}}}},8766:(rt,De,O)=>{O.d(De,{Lj:()=>Me,X3:()=>ze});var h=O(5861);let R,oe;const de=new WeakMap,ue=new WeakMap,ye=new WeakMap,H=new WeakMap,B=new WeakMap;let Se={get(he,Ie,Z){if(he instanceof IDBTransaction){if("done"===Ie)return ue.get(he);if("objectStoreNames"===Ie)return he.objectStoreNames||ye.get(he);if("store"===Ie)return Z.objectStoreNames[1]?void 0:Z.objectStore(Z.objectStoreNames[0])}return Te(he[Ie])},set:(he,Ie,Z)=>(he[Ie]=Z,!0),has:(he,Ie)=>he instanceof IDBTransaction&&("done"===Ie||"store"===Ie)||Ie in he};function ge(he){return"function"==typeof he?function He(he){return he!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function me(){return oe||(oe=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(he)?function(...Ie){return he.apply(qe(this),Ie),Te(de.get(this))}:function(...Ie){return Te(he.apply(qe(this),Ie))}:function(Ie,...Z){const re=he.call(qe(this),Ie,...Z);return ye.set(re,Ie.sort?Ie.sort():[Ie]),Te(re)}}(he):(he instanceof IDBTransaction&&function Ke(he){if(ue.has(he))return;const Ie=new Promise((Z,re)=>{const se=()=>{he.removeEventListener("complete",_e),he.removeEventListener("error",ce),he.removeEventListener("abort",ce)},_e=()=>{Z(),se()},ce=()=>{re(he.error||new DOMException("AbortError","AbortError")),se()};he.addEventListener("complete",_e),he.addEventListener("error",ce),he.addEventListener("abort",ce)});ue.set(he,Ie)}(he),((he,Ie)=>Ie.some(Z=>he instanceof Z))(he,function ae(){return R||(R=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(he,Se):he)}function Te(he){if(he instanceof IDBRequest)return function ie(he){const Ie=new Promise((Z,re)=>{const se=()=>{he.removeEventListener("success",_e),he.removeEventListener("error",ce)},_e=()=>{Z(Te(he.result)),se()},ce=()=>{re(he.error),se()};he.addEventListener("success",_e),he.addEventListener("error",ce)});return Ie.then(Z=>{Z instanceof IDBCursor&&de.set(Z,he)}).catch(()=>{}),B.set(Ie,he),Ie}(he);if(H.has(he))return H.get(he);const Ie=ge(he);return Ie!==he&&(H.set(he,Ie),B.set(Ie,he)),Ie}const qe=he=>B.get(he);function ze(he,Ie,{blocked:Z,upgrade:re,blocking:se,terminated:_e}={}){const ce=indexedDB.open(he,Ie),Ve=Te(ce);return re&&ce.addEventListener("upgradeneeded",dt=>{re(Te(ce.result),dt.oldVersion,dt.newVersion,Te(ce.transaction))}),Z&&ce.addEventListener("blocked",()=>Z()),Ve.then(dt=>{_e&&dt.addEventListener("close",()=>_e()),se&&dt.addEventListener("versionchange",()=>se())}).catch(()=>{}),Ve}function Me(he,{blocked:Ie}={}){const Z=indexedDB.deleteDatabase(he);return Ie&&Z.addEventListener("blocked",()=>Ie()),Te(Z).then(()=>{})}const xe=["get","getKey","getAll","getAllKeys","count"],be=["put","add","delete","clear"],Ze=new Map;function ne(he,Ie){if(!(he instanceof IDBDatabase)||Ie in he||"string"!=typeof Ie)return;if(Ze.get(Ie))return Ze.get(Ie);const Z=Ie.replace(/FromIndex$/,""),re=Ie!==Z,se=be.includes(Z);if(!(Z in(re?IDBIndex:IDBObjectStore).prototype)||!se&&!xe.includes(Z))return;const _e=function(){var ce=(0,h.Z)(function*(Ve,...dt){const Xt=this.transaction(Ve,se?"readwrite":"readonly");let zt=Xt.store;return re&&(zt=zt.index(dt.shift())),(yield Promise.all([zt[Z](...dt),se&&Xt.done]))[0]});return function(dt){return ce.apply(this,arguments)}}();return Ze.set(Ie,_e),_e}!function Fe(he){Se=he(Se)}(he=>lR(uR({},he),{get:(Ie,Z,re)=>ne(Ie,Z)||he.get(Ie,Z,re),has:(Ie,Z)=>!!ne(Ie,Z)||he.has(Ie,Z)}))},5861:(rt,De,O)=>{function h(R,oe,ae,me,de,ue,ye){try{var H=R[ue](ye),B=H.value}catch(ie){return void ae(ie)}H.done?oe(B):Promise.resolve(B).then(me,de)}function L(R){return function(){var oe=this,ae=arguments;return new Promise(function(me,de){var ue=R.apply(oe,ae);function ye(B){h(ue,me,de,ye,H,"next",B)}function H(B){h(ue,me,de,ye,H,"throw",B)}ye(void 0)})}}O.d(De,{Z:()=>L})}},rt=>{rt(rt.s=1780)}]);